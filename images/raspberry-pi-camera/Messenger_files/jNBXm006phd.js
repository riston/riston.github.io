if (self.CavalryLogger) { CavalryLogger.start_js(["4JPQ7"]); }

__d("ChatNotificationConstants",[],(function a(b,c,d,e,f,g){f.exports={NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1};}),null);
__d("ComposedBlockType",[],(function a(b,c,d,e,f,g){f.exports={UNSTYLED:0,PARAGRAPH:1,UNORDERED_LIST_ITEM:2,ORDERED_LIST_ITEM:3,BLOCKQUOTE:4,HEADER_ONE:5,HEADER_TWO:6,CODE:7,MEDIA:8,PULLQUOTE:9,HEADER_THREE:10,HEADER_FOUR:11,HEADER_FIVE:12,HEADER_SIX:13};}),null);
__d("ComposedEntityMutability",[],(function a(b,c,d,e,f,g){f.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};}),null);
__d("ComposedEntityMutabilityToName",[],(function a(b,c,d,e,f,g){f.exports={"0":"MUTABLE","1":"IMMUTABLE","2":"SEGMENTED"};}),null);
__d("ComposedEntityType",[],(function a(b,c,d,e,f,g){f.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7,EMBED:8,EMOJI:9};}),null);
__d("ComposedEntityTypeToName",[],(function a(b,c,d,e,f,g){f.exports={"0":"MENTION","1":"LINK","2":"IMAGE","3":"VIDEO","4":"EMOTICON","5":"TOKEN","6":"HASHTAG","7":"IMPLICIT_LINK","8":"EMBED","9":"EMOJI"};}),null);
__d("ComposedInlineStyle",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,BOLD:1,ITALIC:2,UNDERLINE:4,CODE:8,STRIKETHROUGH:16,SUBSCRIPT:32,SUPERSCRIPT:64};}),null);
__d("IrisProtocolMessageLifetime",[],(function a(b,c,d,e,f,g){f.exports={TTL_OFF:0,TTL_ON_UNKNOWN:1,TTL_30SECONDS:30000,TTL_1MINUTE:60000,TTL_3MINUTES:180000,TTL_5MINUTES:300000,TTL_10MINUTES:600000,TTL_15MINUTES:900000,TTL_30MINUTES:1800000,TTL_1HOUR:3600000,TTL_2HOURS:7200000,TTL_4HOURS:14400000,TTL_8HOURS:28800000,TTL_12HOURS:43200000,TTL_24HOURS:86400000};}),null);
__d("MercuryGenericConstants",[],(function a(b,c,d,e,f,g){f.exports={MAX_THREAD_NAME_LENGTH:250};}),null);
__d("MercurySyncTopicType",[],(function a(b,c,d,e,f,g){f.exports={DELTA:"delta",DELTAFLOW:"deltaflow",DELTAFLOWREJECT:"deltaflowreject"};}),null);
__d("MessagingThreadAction",[],(function a(b,c,d,e,f,g){f.exports={ACTION_INVALID:"ACTION_INVALID",ACTION_ARCHIVED:"ACTION_ARCHIVED",ACTION_UNARCHIVED:"ACTION_UNARCHIVED"};}),null);
__d("MessagingThreadCustomizationSource",[],(function a(b,c,d,e,f,g){f.exports={ADMIN_MSG_CHANGE_LINK:"admin_msg",THREAD_INLINE:"thread_inline",JOURNEY_PROMPT:"journey_prompt",JOURNEY_PROMPT_WRITE_IN:"journey_prompt_write_in",PROMO_LINK:"promo_link",SETTINGS:"thread_settings",USER_INFO_ACTION_SHEET:"user_info_action_sheet",ROOM_CREATION:"room_creation"};}),null);
__d("MessengerApprovalQueueTypes",[],(function a(b,c,d,e,f,g){f.exports={REQUESTED:"REQUESTED",REMOVED:"REMOVED"};}),null);
__d("MessengerDotComPromotionActionURL",[],(function a(b,c,d,e,f,g){f.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"};}),null);
__d("MessengerPlatformAbuseReportType",[],(function a(b,c,d,e,f,g){f.exports={SPAM:"spam",INAPPROPRIATE:"inappropriate",OTHER_ABUSE:"other_abuse"};}),null);
__d("MessengerPlatformSubscriptionMessageClassification",[],(function a(b,c,d,e,f,g){f.exports={EXEMPTED_TEMPLATE_MESSAGE:"exempted_template_message",MESSAGE_WITHIN_24HRS:"message_within_24hrs",SUBSCRIPTION_MESSAGE:"subscription_message",ACCEPTABLE_EXTRA_MESSAGE:"acceptable_extra_message",UNACCEPTABLE_EXTRA_MESSAGGE:"unacceptable_extra_message",AD_MESSAGE:"ad_message"};}),null);
__d("MNCommercePageSetting",[],(function a(b,c,d,e,f,g){f.exports={COMMERCE_FAQ_ENABLED:"COMMERCE_FAQ_ENABLED",IN_MESSENGER_SHOPPING_ENABLED:"IN_MESSENGER_SHOPPING_ENABLED",COMMERCE_NUX_ENABLED:"COMMERCE_NUX_ENABLED",NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED:"NULL_STATE_CTA_BUTTON_ALWAYS_ENABLED",STRUCTURED_MENU_ENABLED:"STRUCTURED_MENU_ENABLED",USER_CONTROL_TOPIC_MANAGE_ENABLED:"USER_CONTROL_TOPIC_MANAGE_ENABLED",COMPOSER_INPUT_DISABLED:"COMPOSER_INPUT_DISABLED"};}),null);
__d("OmniMActionType",[],(function a(b,c,d,e,f,g){f.exports={CREATE_EVENT:1,LOCATION:2,PAYMENT:3,POLL:4,STICKER:5,TEXT:6,TRANSPORTATION:7,ORDER_FOOD:8,MAKE_RESERVATION:9,SCHEDULE_CALL:10,LIVE_LOCATION:11,VIDEO_CALL:12,VOICE_CALL:13,SAVE_CONTENT:14,PLAY_GAME:15,SHARE_CONTACT:16,SEND_PHOTO:17,CREATE_REMINDER_DEPRECATED:18,CREATE_REMINDER:19,MARKETPLACE_SAFE_LOCATION:20,VIEW_SAVED:21,CHAT_EXTENSION:22,DAY_CAMERA:23,CALENDAR:24};}),null);
__d("OmniMDirectiveType",[],(function a(b,c,d,e,f,g){f.exports={ADD_ACTIONS:1,CLEAR_ACTIONS:2,ADD_RANGES:3,INVOKE_NATIVE_AGENT:4,MUTATE_FLOW_STATE:5};}),null);
__d("OmniMLoggerEvents",[],(function a(b,c,d,e,f,g){f.exports={MESSAGE_ANALYZED:"omni_m_message_analyzed",INTENT_DETECTED:"omni_m_intent_detected",INTENT_HANDLED:"omni_m_intent_handled",SUGGESTION_GENERATED:"omni_m_suggestion_generated",SUGGESTIONS_FILTERED:"omni_m_suggestions_filtered",SUGGESTION_SENT:"omni_m_suggestion_sent",SUGGESTION_DISPLAYED:"omni_m_suggestion_displayed",SUGGESTION_CLICKED:"omni_m_suggestion_clicked",SUGGESTION_COMPLETED:"omni_m_suggestion_completed",SUGGESTION_DISMISSED:"omni_m_suggestion_dismissed",SUGGESTION_DISAPPEARED:"omni_m_suggestion_disappeared",BAR_DISMISSED:"omni_m_bar_dismissed",BAR_DISPLAYED:"omni_m_bar_displayed",BAR_DISAPPEARED:"omni_m_bar_disappeared",ORGANIC_CLICKED:"omni_m_organic_clicked",ORGANIC_COMPLETED:"omni_m_organic_completed",SETTINGS_ON:"omni_m_setting_turned_on",SETTINGS_OFF:"omni_m_setting_turned_off"};}),null);
__d("PagesMessagingEventType",[],(function a(b,c,d,e,f,g){f.exports={FLAG:1,CREATE_ADMIN_NOTE:2,PRIORITY_UPDATE:3};}),null);
__d('TypingDetector',['ArbiterMixin','Event','Input','Run','SubscriptionsHandler','TypingStates','createObjectFrom','emptyFunction'],(function a(b,c,d,e,f,g){function h(i,j){this._input=i;this._ignoreKeys={};this._getValueFn=j;}Object.assign(h.prototype,c('ArbiterMixin'),{_timeout:7000,_currentState:c('TypingStates').INACTIVE,init:function i(){this.init=c('emptyFunction');this.reset();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(this._input,'keyup',this._update.bind(this)),c('Run').onUnload(this._onunload.bind(this)));},reset:function i(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=c('TypingStates').INACTIVE;},setIgnoreKeys:function i(j){this._ignoreKeys=c('createObjectFrom')(j);},destroy:function i(){this._subscriptions.release();},_onunload:function i(){if(this._currentState==c('TypingStates').TYPING)this._transition(c('TypingStates').QUITTING);},_update:function i(event){var j=c('Event').getKeyCode(event),k=this._currentState;if(!this._ignoreKeys[j]){var l=this._getValueFn?this._getValueFn():c('Input').getValue(this._input);if(l.trim().length===0){if(k==c('TypingStates').TYPING)this._transition(c('TypingStates').INACTIVE);}else if(k==c('TypingStates').TYPING){this._recordKeystroke();}else if(k==c('TypingStates').INACTIVE){this._transition(c('TypingStates').TYPING);this._recordKeystroke();}}},_transition:function i(j){this.reset();this._currentState=j;this.inform('change',j);},_recordKeystroke:function i(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function i(){var j=this._lastKeystrokeTime+this._timeout,k=Date.now();if(k>j){this._transition(c('TypingStates').INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),j-k+10);}}});f.exports=h;}),null);
__d('TypingDetectorController',['AsyncRequest','AvailableList','AvailableListConstants','ChatVisibility','Keys','MercuryServerRequestsConfig','TypingDetector','TypingStates','emptyFunction','ifRequired','setTimeoutAcrossTransitions','shield'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){this.userID=i;this.input=j;this.source=k;this.threadID=m;this.remoteState=c('TypingStates').INACTIVE;this.notifyTimer=null;l=l||{};this.notifyDelay=l.notifyDelay||this.notifyDelay;this._typingDetector=new (c('TypingDetector'))(j,n);this._typingDetector.init(l);this._typingDetector.subscribe('change',this._stateChange.bind(this));}h.prototype.setUserAndThread=function(i,j){if(this.userID!==i||this.threadID!==j){this.resetState();this.userID=i;this.threadID=j;}};h.prototype.setIgnoreEnter=function(i){var j=i?[c('Keys').RETURN]:[];this._typingDetector.setIgnoreKeys(j);};h.prototype.resetState=function(){this._notifyState(c('TypingStates').INACTIVE);this.remoteState=c('TypingStates').INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};h.prototype.destroy=function(){this.resetState();this._typingDetector.destroy();};h.prototype._stateChange=function(i,j){if(j!=c('TypingStates').QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=c('setTimeoutAcrossTransitions')(c('shield')(this._notifyState,this,j),this.notifyDelay);}else this._notifyState(j,true);};h.prototype._notifyState=function(i,j){if(!this.userID&&!this.threadID||!c('ChatVisibility').isOnline()||i===this.remoteState||c('ifRequired')('ChannelConnection',function(k){return k.disconnected();},function(){return true;}))return;this._sendRequest(i,this.userID,j);};h.prototype._sendRequest=function(i,j,k){this.remoteState=i;var l={typ:i,to:j,source:this.source,thread:this.threadID},m=new (c('AsyncRequest'))().setHandler(this._onTypResponse.bind(this,j)).setErrorHandler(c('emptyFunction')).setData(l).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous_DEPRECATED',!k);if(c('MercuryServerRequestsConfig').msgrRegion)m.setRequestHeader('X-MSGR-Region',c('MercuryServerRequestsConfig').msgrRegion);m.send();};h.prototype._onTypResponse=function(i,j){var k=j.getPayload()||{};if(k.offline)c('AvailableList').set(i,c('AvailableListConstants').OFFLINE,'typing_response');};Object.assign(h.prototype,{notifyDelay:1000});f.exports=h;}),null);
__d('SelectionState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k={anchorKey:'',anchorOffset:0,focusKey:'',focusOffset:0,isBackward:false,hasFocus:false},l=j(k);h=babelHelpers.inherits(m,l);i=h&&h.prototype;m.prototype.serialize=function(){return 'Anchor: '+this.getAnchorKey()+':'+this.getAnchorOffset()+', '+'Focus: '+this.getFocusKey()+':'+this.getFocusOffset()+', '+'Is Backward: '+String(this.getIsBackward())+', '+'Has Focus: '+String(this.getHasFocus());};m.prototype.getAnchorKey=function(){return this.get('anchorKey');};m.prototype.getAnchorOffset=function(){return this.get('anchorOffset');};m.prototype.getFocusKey=function(){return this.get('focusKey');};m.prototype.getFocusOffset=function(){return this.get('focusOffset');};m.prototype.getIsBackward=function(){return this.get('isBackward');};m.prototype.getHasFocus=function(){return this.get('hasFocus');};m.prototype.hasEdgeWithin=function(n,o,p){var q=this.getAnchorKey(),r=this.getFocusKey();if(q===r&&q===n){var s=this.getStartOffset(),t=this.getEndOffset();return o<=t&&s<=p;}if(n!==q&&n!==r)return false;var u=n===q?this.getAnchorOffset():this.getFocusOffset();return o<=u&&p>=u;};m.prototype.isCollapsed=function(){return this.getAnchorKey()===this.getFocusKey()&&this.getAnchorOffset()===this.getFocusOffset();};m.prototype.getStartKey=function(){return this.getIsBackward()?this.getFocusKey():this.getAnchorKey();};m.prototype.getStartOffset=function(){return this.getIsBackward()?this.getFocusOffset():this.getAnchorOffset();};m.prototype.getEndKey=function(){return this.getIsBackward()?this.getAnchorKey():this.getFocusKey();};m.prototype.getEndOffset=function(){return this.getIsBackward()?this.getAnchorOffset():this.getFocusOffset();};m.createEmpty=function(n){return new m({anchorKey:n,anchorOffset:0,focusKey:n,focusOffset:0,isBackward:false,hasFocus:false});};function m(){h.apply(this,arguments);}f.exports=m;}),null);
__d('MentionResultsPropTypes',['React','SearchableEntry','SelectionState'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i={viewID:h.string.isRequired,selection:h.instanceOf(c('SelectionState')).isRequired,contextComponent:h.object.isRequired,mentionableEntries:h.array.isRequired,highlightedMentionable:h.instanceOf(c('SearchableEntry')),onMentionSelect:h.func.isRequired,onMentionHighlight:h.func.isRequired,onMentionRenderHighlight:h.func.isRequired};f.exports=i;}),null);
__d('MentionsLayer.react',['Bootloader','Locale','MentionResultsPropTypes','React','areEqual'],(function a(b,c,d,e,f,g){var h=c('React').PropTypes,i=false,j=c('Locale').isRTL(),k,l,m,n,o=5,p=c('React').createClass({displayName:'MentionsLayer',propTypes:babelHelpers['extends']({},c('MentionResultsPropTypes'),{typeaheadView:h.func.isRequired,typeaheadViewProps:h.object,autoflip:h.bool,position:h.oneOf(['above','below'])}),getInitialState:function r(){return {bootloaded:i};},componentDidMount:function r(){if(!this.state.bootloaded)q(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function r(s,t){t.preventDefault();this.props.onMentionSelect(s,t);},shouldComponentUpdate:function r(s,t){return this.state.bootloaded!==t.bootloaded||!c('areEqual')(this.props.mentionableEntries,s.mentionableEntries)||this.props.highlightedMentionable!==s.highlightedMentionable||this.props.characterOffset!==s.characterOffset;},render:function r(){if(!this.state.bootloaded)return null;var s=this.props.mentionableEntries,t=this.props.selection,u=t.isCollapsed()&&t.getHasFocus()&&s&&s.length,v=null,w=this.props.typeaheadViewProps,x=false;if(w&&w.positionAtContext){x=true;}else if(u)v=n(this.props.characterOffset,j);var y={};if(this.props.autoflip){y.ContextualLayerAutoFlip=l;y.ContextualLayerUpdateOnScroll=m;}var z=this.props.typeaheadView;return c('React').createElement(k,{shown:u,context:this.props.contextComponent,contextBounds:v,containerWidthMatchContext:x,offsetY:o,offsetX:this.props.offset,position:this.props.position||'below',behaviors:y,shouldSetARIAProperties:false},c('React').createElement('div',{'data-testid':'mentions-contextual-layer'},c('React').createElement(z,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:s||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function q(r){c('Bootloader').loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(s,t,u,v){k=s;l=t;m=u;n=v;i=true;r();},'MentionsLayer.react');}f.exports=p;}),null);
__d('HelpLink.react',['React','joinClasses','TooltipLink.react'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){'use strict';return c('React').createElement(c('TooltipLink.react'),babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,'uiHelpLink mls')}),undefined);};function j(){'use strict';h.apply(this,arguments);}j.defaultProps={href:'#'};f.exports=j;}),null);
__d('UFICreatorInfo.react',['cx','fbt','HelpLink.react','Image.react','React','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=void 0,o=this.getCreatorLink();switch(this.props.labelType){case 'commented':n=i._("Commented on by {creator}",[i.param('creator',o)]);break;case 'edited_comment':n=i._("Edited by {creator}",[i.param('creator',o)]);break;case 'sent_message':n=i._("Sent by {creator}",[i.param('creator',o)]);break;case 'page_admin_note':n=i._("Noted by {creator}",[i.param('creator',o)]);break;default:return c('React').createElement('span',null);}return c('React').createElement('span',null,n,c('React').createElement(c('HelpLink.react'),{tooltip:this.getHelpText()}));};m.prototype.getCreatorLink=function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return c('React').createElement('a',{className:'uiLinkSubtle','data-hover':'tooltip','data-tooltip-content':this.getTooltipText()},this.props.creatorName);case 'business_admin':return c('React').createElement('a',{className:'uiLinkSubtle',href:this.props.profileURI},this.props.creatorName);case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return c('React').createElement('span',{className:'uiLinkSubtle'},c('React').createElement(c('Image.react'),{src:'/images/privacy/cant-see.png',width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard());default:return c('React').createElement('span',{className:'uiLinkSubtle'},this.props.creatorName);}};m.prototype.getTooltipText=function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}return null;};m.prototype.getProfileLinkWithHovercard=function(){if(!this.props.profileURI)return c('React').createElement('span',null,this.props.creatorName);var n=new (c('URI'))('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return c('React').createElement('a',{className:'uiLinkSubtle','data-hovercard':n,href:this.props.profileURI},this.props.creatorName);};m.prototype.getApplicationText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone using {application}.",[i.param('application',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone using {application}.",[i.param('application',this.props.creatorName)]);}return null;};m.prototype.getIndirectAdminText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'edited_comment':return i._("This was edited by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'sent_message':return i._("This was sent by someone from {page}.",[i.param('page',this.props.creatorName)]);case 'page_admin_note':return i._("This was noted by someone from {page}.",[i.param('page',this.props.creatorName)]);}return null;};m.prototype.getGrayAccountText=function(){switch(this.props.labelType){case 'commented':return i._("This was commented on by someone who doesn't have a personal Facebook account.");case 'edited_comment':return i._("This was edited by someone who doesn't have a personal Facebook account.");case 'sent_message':return i._("This was sent by someone who doesn't have a personal Facebook account.");case 'page_admin_note':return i._("This was noted by someone who doesn't have a personal Facebook account.");}return null;};m.prototype.getHelpText=function(){switch(this.props.labelType){case 'commented':return i._("Only people who manage this Page can see who posted a comment");case 'edited_comment':return i._("Only people who manage this Page can see who edited a comment");case 'sent_message':return i._("Only people who manage this Page can see who sent a message");case 'page_admin_note':return i._("Only people who manage this Page can see who created a note");}return null;};function m(){j.apply(this,arguments);}m.propTypes={creatorID:l.string.isRequired,creatorType:l.string.isRequired,creatorName:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string};f.exports=m;}),null);
__d('PagesMessengerCreatorInfo.react',['cx','React','UFICreatorInfo.react','XUIGrayText.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement(c('XUIGrayText.react'),{className:"_ajk"+(this.props.isNote?' '+"_45l2":''),display:'inline',shade:'light',size:'small'},c('React').createElement(c('UFICreatorInfo.react'),{creatorID:this.props.creator_info.creatorID,creatorType:this.props.creator_info.creatorType,creatorName:this.props.creator_info.creatorName,labelType:this.props.creator_info.labelType,pageID:this.props.creator_info.pageID,profileURI:this.props.creator_info.profileURI}));};function l(){i.apply(this,arguments);}l.propTypes={creator_info:k.shape({creatorID:k.string.isRequired,creatorName:k.string.isRequired,creatorType:k.string.isRequired,labelType:k.string.isRequired,pageID:k.string.isRequired,profileURI:k.string}).isRequired};f.exports=l;}),null);
__d('LinkReactUnsafeHrefTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:LinkReactUnsafeHrefLoggerConfig',this.$LinkReactUnsafeHrefTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:LinkReactUnsafeHrefLoggerConfig',this.$LinkReactUnsafeHrefTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$LinkReactUnsafeHrefTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$LinkReactUnsafeHrefTypedLogger1=babelHelpers['extends']({},this.$LinkReactUnsafeHrefTypedLogger1,j);return this;};h.prototype.setDocumentLocation=function(j){this.$LinkReactUnsafeHrefTypedLogger1.document_location=j;return this;};h.prototype.setHref=function(j){this.$LinkReactUnsafeHrefTypedLogger1.href=j;return this;};var i={document_location:true,href:true};f.exports=h;}),null);
__d('isSecureInstagramDotComURI',['arrayContains'],(function a(b,c,d,e,f,g){var h=new RegExp('(^|\\.)instagram\\.com$','i'),i=['https'];function j(k){return c('arrayContains')(i,k.getProtocol())&&h.test(k.getDomain());}f.exports=j;}),null);
__d('isWitDotAiURI',[],(function a(b,c,d,e,f,g){var h=new RegExp('(^|\\.)wit\\.ai$','i'),i=['https'];function j(k){if(k.isEmpty()&&k.toString()!=='#')return false;if(!k.getDomain()&&!k.getProtocol())return true;return i.indexOf(k.getProtocol())!==-1&&h.test(k.getDomain());}f.exports=j;}),null);
__d('LinkHrefChecker',['ErrorUtils','LinkReactUnsafeHrefTypedLogger','URI','ex','isSecureInstagramDotComURI','isFacebookURI','isMessengerDotComURI','isWitDotAiURI'],(function a(b,c,d,e,f,g){function h(n){return n.startsWith('#')||n.startsWith('/')&&!n.startsWith('//');}function i(n){return n.startsWith('mailto:');}function j(n,o){if(h(n)||i(n))return true;var p=l(n),q=p?p.getProtocol():'';return q===o||q===''||q==='http'||q==='https';}function k(n){if(h(n))return true;var o=l(n);return o==null||c('isFacebookURI')(o)||c('isMessengerDotComURI')(o)||c('isSecureInstagramDotComURI')(o)||c('isWitDotAiURI')(o);}function l(n){try{return new (c('URI'))(n);}catch(o){return null;}}var m={logIfInvalidProtocol:function n(o,p){if(!j(o,p))new (c('LinkReactUnsafeHrefTypedLogger'))().setHref(o).setDocumentLocation(document.location.toString()).log();}};f.exports=m;}),null);
__d('DraftJsEventsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:DraftJsEventsLoggerConfig',this.$DraftJsEventsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:DraftJsEventsLoggerConfig',this.$DraftJsEventsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$DraftJsEventsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$DraftJsEventsTypedLogger1=babelHelpers['extends']({},this.$DraftJsEventsTypedLogger1,j);return this;};h.prototype.setAnonymizedDom=function(j){this.$DraftJsEventsTypedLogger1.anonymized_dom=j;return this;};h.prototype.setEvent=function(j){this.$DraftJsEventsTypedLogger1.event=j;return this;};h.prototype.setExtraParams=function(j){this.$DraftJsEventsTypedLogger1.extra_params=j;return this;};h.prototype.setScriptPath=function(j){this.$DraftJsEventsTypedLogger1.script_path=j;return this;};h.prototype.setSelectionState=function(j){this.$DraftJsEventsTypedLogger1.selection_state=j;return this;};h.prototype.setVC=function(j){this.$DraftJsEventsTypedLogger1.vc=j;return this;};var i={anonymized_dom:true,event:true,extra_params:true,script_path:true,selection_state:true,vc:true};f.exports=h;}),null);
__d('MercurySyncHolesTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MercurySyncHolesLoggerConfig',this.$MercurySyncHolesTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MercurySyncHolesLoggerConfig',this.$MercurySyncHolesTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MercurySyncHolesTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MercurySyncHolesTypedLogger1=babelHelpers['extends']({},this.$MercurySyncHolesTypedLogger1,j);return this;};h.prototype.setDifference=function(j){this.$MercurySyncHolesTypedLogger1.difference=j;return this;};h.prototype.setSeqID=function(j){this.$MercurySyncHolesTypedLogger1.seq_id=j;return this;};h.prototype.setTopicType=function(j){this.$MercurySyncHolesTypedLogger1.topic_type=j;return this;};h.prototype.setVC=function(j){this.$MercurySyncHolesTypedLogger1.vc=j;return this;};var i={difference:true,seq_id:true,topic_type:true,vc:true};f.exports=h;}),null);
__d('MessengerContentSearchDataTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MessengerContentSearchDataLoggerConfig',this.$MessengerContentSearchDataTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MessengerContentSearchDataTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MessengerContentSearchDataTypedLogger1=babelHelpers['extends']({},this.$MessengerContentSearchDataTypedLogger1,j);return this;};h.prototype.setAppID=function(j){this.$MessengerContentSearchDataTypedLogger1.appid=j;return this;};h.prototype.setClienttime=function(j){this.$MessengerContentSearchDataTypedLogger1.clienttime=j;return this;};h.prototype.setCountry=function(j){this.$MessengerContentSearchDataTypedLogger1.country=j;return this;};h.prototype.setMessageID=function(j){this.$MessengerContentSearchDataTypedLogger1.message_id=j;return this;};h.prototype.setMessageTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.message_timestamp=j;return this;};h.prototype.setNumResults=function(j){this.$MessengerContentSearchDataTypedLogger1.num_results=j;return this;};h.prototype.setReadableTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.readable_timestamp=j;return this;};h.prototype.setResultIndex=function(j){this.$MessengerContentSearchDataTypedLogger1.result_index=j;return this;};h.prototype.setSearchOutcome=function(j){this.$MessengerContentSearchDataTypedLogger1.search_outcome=j;return this;};h.prototype.setSearchTerm=function(j){this.$MessengerContentSearchDataTypedLogger1.search_term=j;return this;};h.prototype.setSearchType=function(j){this.$MessengerContentSearchDataTypedLogger1.search_type=j;return this;};h.prototype.setThreadFbid=function(j){this.$MessengerContentSearchDataTypedLogger1.thread_fbid=j;return this;};h.prototype.setVC=function(j){this.$MessengerContentSearchDataTypedLogger1.vc=j;return this;};var i={appid:true,clienttime:true,country:true,message_id:true,message_timestamp:true,num_results:true,readable_timestamp:true,result_index:true,search_outcome:true,search_term:true,search_type:true,thread_fbid:true,vc:true};f.exports=h;}),null);
__d('OmniMEventTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:OmniMEventLoggerConfig',this.$OmniMEventTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:OmniMEventLoggerConfig',this.$OmniMEventTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$OmniMEventTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$OmniMEventTypedLogger1=babelHelpers['extends']({},this.$OmniMEventTypedLogger1,j);return this;};h.prototype.setActionID=function(j){this.$OmniMEventTypedLogger1.action_id=j;return this;};h.prototype.setActionSubTypeFromBlob=function(j){this.$OmniMEventTypedLogger1.action_sub_type_from_blob=j;return this;};h.prototype.setActionTypeFromBlob=function(j){this.$OmniMEventTypedLogger1.action_type_from_blob=j;return this;};h.prototype.setAgentName=function(j){this.$OmniMEventTypedLogger1.agent_name=j;return this;};h.prototype.setAppID=function(j){this.$OmniMEventTypedLogger1.appid=j;return this;};h.prototype.setAppversion=function(j){this.$OmniMEventTypedLogger1.appversion=j;return this;};h.prototype.setClientUserID=function(j){this.$OmniMEventTypedLogger1.client_userid=j;return this;};h.prototype.setClienttime=function(j){this.$OmniMEventTypedLogger1.clienttime=j;return this;};h.prototype.setConfidence=function(j){this.$OmniMEventTypedLogger1.confidence=j;return this;};h.prototype.setConfidenceRemapped=function(j){this.$OmniMEventTypedLogger1.confidence_remapped=j;return this;};h.prototype.setContextUserID=function(j){this.$OmniMEventTypedLogger1.context_user_id=j;return this;};h.prototype.setCuApp=function(j){this.$OmniMEventTypedLogger1.cu_app=j;return this;};h.prototype.setDetectedLanguage=function(j){this.$OmniMEventTypedLogger1.detected_language=j;return this;};h.prototype.setEventName=function(j){this.$OmniMEventTypedLogger1.event_name=j;return this;};h.prototype.setIntentID=function(j){this.$OmniMEventTypedLogger1.intent_id=j;return this;};h.prototype.setLiveLocationSuggestionsEnabled=function(j){this.$OmniMEventTypedLogger1.live_location_suggestions_enabled=j;return this;};h.prototype.setLocationSuggestionsEnabled=function(j){this.$OmniMEventTypedLogger1.location_suggestions_enabled=j;return this;};h.prototype.setMBarDisplayedOnThreadEnter=function(j){this.$OmniMEventTypedLogger1.m_bar_displayed_on_thread_enter=j;return this;};h.prototype.setMessageID=function(j){this.$OmniMEventTypedLogger1.message_id=j;return this;};h.prototype.setMessageLength=function(j){this.$OmniMEventTypedLogger1.message_length=j;return this;};h.prototype.setName=function(j){this.$OmniMEventTypedLogger1.name=j;return this;};h.prototype.setPersonalization=function(j){this.$OmniMEventTypedLogger1.personalization=j;return this;};h.prototype.setPigeonID=function(j){this.$OmniMEventTypedLogger1.pigeon_id=j;return this;};h.prototype.setPosition=function(j){this.$OmniMEventTypedLogger1.position=j;return this;};h.prototype.setRemovedLocationSuggestions=function(j){this.$OmniMEventTypedLogger1.removed_location_suggestions=j;return this;};h.prototype.setSerializedActions=function(j){this.$OmniMEventTypedLogger1.serialized_actions=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setSource=function(j){this.$OmniMEventTypedLogger1.source=j;return this;};h.prototype.setSuggestionData=function(j){this.$OmniMEventTypedLogger1.suggestion_data=c('GeneratedLoggerUtils').serializeMap(j);return this;};h.prototype.setSuggestionIds=function(j){this.$OmniMEventTypedLogger1.suggestion_ids=c('GeneratedLoggerUtils').serializeVector(j);return this;};h.prototype.setSuggestionMode=function(j){this.$OmniMEventTypedLogger1.suggestion_mode=j;return this;};h.prototype.setSuggestionTitle=function(j){this.$OmniMEventTypedLogger1.suggestion_title=j;return this;};h.prototype.setSuggestionType=function(j){this.$OmniMEventTypedLogger1.suggestion_type=j;return this;};h.prototype.setThreadID=function(j){this.$OmniMEventTypedLogger1.thread_id=j;return this;};h.prototype.setTotalSuggestions=function(j){this.$OmniMEventTypedLogger1.total_suggestions=j;return this;};h.prototype.setVC=function(j){this.$OmniMEventTypedLogger1.vc=j;return this;};var i={action_id:true,action_sub_type_from_blob:true,action_type_from_blob:true,agent_name:true,appid:true,appversion:true,client_userid:true,clienttime:true,confidence:true,confidence_remapped:true,context_user_id:true,cu_app:true,detected_language:true,event_name:true,intent_id:true,live_location_suggestions_enabled:true,location_suggestions_enabled:true,m_bar_displayed_on_thread_enter:true,message_id:true,message_length:true,name:true,personalization:true,pigeon_id:true,position:true,removed_location_suggestions:true,serialized_actions:true,source:true,suggestion_data:true,suggestion_ids:true,suggestion_mode:true,suggestion_title:true,suggestion_type:true,thread_id:true,total_suggestions:true,vc:true};f.exports=h;}),null);
__d('ChatBehavior',['Arbiter','AvailableList','AvailableListConstants','ChatNotificationConstants'],(function a(b,c,d,e,f,g){var h=false,i=c('AvailableList').getWebChatNotification&&c('AvailableList').getWebChatNotification(),j=h,k=true,l=Object.assign(new (c('Arbiter'))(),{ON_CHANGED:'changed',notifiesUserMessages:function n(){return i!==c('ChatNotificationConstants').NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function n(){return j;},showsTabUnreadUI:function n(){return k;}});function m(){l.inform(l.ON_CHANGED);}c('AvailableList').subscribe&&c('AvailableList').subscribe(c('AvailableListConstants').ON_CHAT_NOTIFICATION_CHANGED,function(){var n=i,o=c('AvailableList').getWebChatNotification();i=o;if(n!=o)m();});c('Arbiter').subscribe('chat/set_does_page_occlude_tabs',function(n,o){j=!!o;m();});c('Arbiter').subscribe('chat/set_show_tab_unread_ui',function(n,o){k=!!o;m();});f.exports=l;}),null);
__d('ChatPageComposerNullState.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(l){return c('React').createElement('div',{className:"_2xh0"},c('React').createElement('div',{className:"_2xh4 _59w_"},c('React').createElement(c('Link.react'),{className:"_2xh6"+(' '+"_2xh7")+(l.disabled?' '+"_5vsu":''),onClick:l.onClick},i._("{name}",[i.param('name',l.title)]))));};f.exports=j;}),null);
__d('ChatPhotoUploader.react',['cx','fbt','Promise','Bootloader','ifRequired','InlineBlock.react','Link.react','MercuryConfig','MessengerEnvironment','React','ReactDOM','SubscriptionsHandler','emptyFunction','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatPhotoUploader',_uploader:null,_uploaderPromiseIsResolving:false,_uploaderPromise:null,_subscriptions:null,propTypes:{actionURI:j.string,allowCrossPage:j.bool,customUI:j.bool,disabled:j.bool,imageClassName:j.string,imagesOnly:j.bool,inputClassname:j.string,linkClassName:j.string,threadID:j.string,onSubmit:j.func,onAllUploadsComplete:j.func,onLastUploadFail:j.func,onLastUploadCancel:j.func,onMount:j.func,onUploadError:j.func},getDefaultProps:function l(){return {actionURI:c('MercuryConfig').upload_url,allowCrossPage:true,costomUI:false,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:'',onSubmit:c('emptyFunction'),onAllUploadsComplete:c('emptyFunction'),onLastUploadFail:c('emptyFunction'),onLastUploadCancel:c('emptyFunction')};},shouldComponentUpdate:function l(m){return m.actionURI!=this.props.actionURI||m.disabled!==this.props.disabled;},componentDidMount:function l(){if(this.props.onMount)this.props.onMount(this);if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('MessengerEnvironment').messengerui?c('Bootloader').loadModules(["MessengerActions"],c('emptyFunction'),'ChatPhotoUploader.react'):c('Bootloader').loadModules(["FantaMessageActions"],c('emptyFunction'),'ChatPhotoUploader.react');},componentDidUpdate:function l(m){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage);},componentWillUnmount:function l(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup();},render:function l(){var m=this.props.imagesOnly?i._("Add Photos"):i._("Add Files"),n=c('joinClasses')("_4q61"+(!this.props.customUI?' '+"_5f0v":'')+(!this.props.customUI?' '+"_509v":''),this.props.linkClassName),o=c('MercuryConfig').WWWMessengerUploadFilesPreview;return c('React').createElement('form',{action:this.props.actionURI,className:"_vzk",title:m,method:'post',onClick:function(p){p.stopPropagation();if(this.props.disabled)p.preventDefault();}.bind(this),ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('input',{type:'hidden',name:'images_only',value:this.props.imagesOnly}),c('React').createElement(c('InlineBlock.react'),{onClick:o?c('emptyFunction'):this._bootloadChatAutoSendPhotoUploader,className:c('joinClasses')(this.props.className,"_m _4q60 _3rzn")},c('React').createElement('input',{disabled:this.props.disabled,type:'file',className:c('joinClasses')(this.props.inputClassname,"_n _2__f"),name:'attachment[]',multiple:'true',accept:this.props.imagesOnly?'image/*':'*',ref:'input',title:m,onChange:o?function(event){this._handleInputOnChange(event,this.props.threadID);}.bind(this):c('emptyFunction')}),c('React').createElement(c('Link.react'),{className:n,tabIndex:-1},c('React').createElement('i',{className:this.props.imageClassName,alt:i._("Camera")}))));},_handleInputOnChange:function l(event,m){c('MessengerEnvironment').messengerui?c('ifRequired')('MessengerActions',function(n){return n.prepareFilesForSend(m,event.target.files);},function(){c('Bootloader').loadModules(["MessengerActions"],function(n){n.prepareFilesForSend(m,event.target.files);},'ChatPhotoUploader.react');}):c('ifRequired')('FantaMessageActions',function(n){return n.prepareFilesForSend(this.props.threadID,event.target.files);}.bind(this),function(){c('Bootloader').loadModules(["FantaMessageActions"],function(n){n.prepareFilesForSend(this.props.threadID,event.target.files);}.bind(this),'ChatPhotoUploader.react');}.bind(this));},_handleSubmit:function l(m,n){this.props.onSubmit&&this.props.onSubmit(m,n);},_handleAllUploadsCompleted:function l(m,n){this.props.onAllUploadsComplete&&this.props.onAllUploadsComplete(m,n);if(!this.isMounted())this._cleanup();},_handleLastUploadFailed:function l(m,n){this.props.onLastUploadFail&&this.props.onLastUploadFail(m,n);if(!this.isMounted())this._cleanup();},_handleLastUploadCanceled:function l(m,n){this.props.onLastUploadCancel&&this.props.onLastUploadCancel(m,n);if(!this.isMounted())this._cleanup();},_handleUploadError:function l(m,n){this.props.onUploadError&&this.props.onUploadError(n);if(!this.isMounted())this._cleanup();},isUploading:function l(){return this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving;},_bootloadChatAutoSendPhotoUploader:function l(){if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new (c('Promise'))(function(m){c('Bootloader').loadModules(["ChatAutoSendPhotoUploader"],function(n){this._uploaderPromiseIsResolving=false;var o=new n(c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.input),c('ReactDOM').findDOMNode(this.refs.attachID),c('MercuryConfig').msgr_region);o.setAllowCrossPage(this.props.allowCrossPage);var p=new (c('SubscriptionsHandler'))();p.addSubscriptions(o.subscribe('submit',this._handleSubmit),o.subscribe('all-uploads-completed',this._handleAllUploadsCompleted),o.subscribe('last-upload-failed',this._handleLastUploadFailed),o.subscribe('last-upload-canceled',this._handleLastUploadCanceled),o.subscribe('file-upload-error',this._handleUploadError));this._subscriptions=p;this._uploader=o;m(this._uploader);}.bind(this),'ChatPhotoUploader.react');}.bind(this));}return this._uploaderPromise;},uploadFiles:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadFiles(m);}).done();},uploadURL:function l(m){this._bootloadChatAutoSendPhotoUploader().then(function(n){n.uploadURL(m);}).done();},_cleanup:function l(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy();}});f.exports=k;}),null);
__d('MercuryTypingAnimation.react',['cx','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m="_4a0v"+(this.props.color==='light'?' '+"_4a0w":'')+(this.props.color==='dark'?' '+"_4a0x":'');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,m)},c('React').createElement('div',{className:"_4b0g"},c('React').createElement('div',{className:"_5pd7"}),c('React').createElement('div',{className:"_5pd7"}),c('React').createElement('div',{className:"_5pd7"})));};function l(){i.apply(this,arguments);}l.propTypes={color:k.oneOf(['light','dark'])};l.defaultProps={color:'dark'};f.exports=l;}),null);
__d('ChatTypingIndicator.react',['cx','fbt','ChatConfig','Image.react','MercuryParticipants','MercuryTypingAnimation.react','ReactComponentWithPureRenderMixin','React'],(function a(b,c,d,e,f,g,h,i){var j=c('React').PropTypes,k=c('ChatConfig').get('chattab_rounded_profile',false),l=c('React').createClass({displayName:'ChatTypingIndicator',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{userID:j.string,showName:j.bool},render:function n(){var o=void 0;if(this.props.userID)o=c('MercuryParticipants').getNow(this.props.userID);if(!o)return null;return c('React').createElement('div',{className:"_4tdt"},m(o),this._renderBubble());},getBubble:function n(){return this.refs.bubble;},_renderBubble:function n(){var o=this.props.showName;return c('React').createElement('div',{className:"_4tdv"},c('React').createElement('div',{className:"_5wd4"+(' '+"_1nc7")+(' '+"_2cnu")+(o?' '+"_5ysy":'')},c('React').createElement('div',{className:"_5wd9"+(' '+"_n4o")},c('React').createElement('div',{className:"_5w1r"+(' '+"_5wdf")+(' '+"_3_om")},c('React').createElement(c('MercuryTypingAnimation.react'),{className:"_5x7x",ref:'bubble'})))));}});function m(n){var o=i._("{name}",[i.param('name',n.name)]);return c('React').createElement('div',{className:"_31o4"+(k?' '+"_3njy":'')},c('React').createElement('a',{'aria-label':o,className:"_4tdw",'data-hover':'tooltip','data-tooltip-content':o,'data-tooltip-position':'left',href:n.href||'#',ref:'link'},c('React').createElement(c('Image.react'),{src:n.image_src,ref:'image'})));}f.exports=l;}),null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryThreadIDMap','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h=c('MercuryThreadIDMap').get(),i=30000;function j(k){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=c('MercuryDispatcher').getForFBID(k);this.$MercuryTypingReceiver3.subscribe('update-typing-state',function(m,n){var o=n.payload_source;if(o!=c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE)return;var p=n.actions;if(!p||!p.length)return;var q=c('MercuryActionType').USER_GENERATED_MESSAGE;p.forEach(function(r){if(r.action_type==q&&r.author!=c('MercuryViewer').getID())this.$MercuryTypingReceiver4(r.thread_id,r.author);}.bind(this));}.bind(this));var l=[c('ChannelConstants').getArbiterType('typ'),c('ChannelConstants').getArbiterType('ttyp')];if(!c('FBID').isUser(k))l.push(c('ChannelConstants').getArbiterType('page_typing'));c('Arbiter').subscribe(l,function(m,n){var o=n.obj,p=this.$MercuryTypingReceiver5(o);if(p){var q=c('MercuryIDs').getParticipantIDFromUserID(o.from.toString());if(o.st==c('TypingStates').TYPING){this.$MercuryTypingReceiver2[p]=this.$MercuryTypingReceiver2[p]||{};var r=this.$MercuryTypingReceiver2[p][q];this.$MercuryTypingReceiver2[p][q]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);!r&&this.$MercuryTypingReceiver7(p);}else if(o.st==c('TypingStates').INACTIVE)this.$MercuryTypingReceiver4(p,q);}}.bind(this));}j.prototype.$MercuryTypingReceiver8=function(k){'use strict';var l=this.$MercuryTypingReceiver2[k]||{},m=Object.keys(l);m.sort(function(n,o){return l[n]-l[o];});return m;};j.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var k=Date.now(),l={},m=false;for(var n in this.$MercuryTypingReceiver2){var o=false;for(var p in this.$MercuryTypingReceiver2[n]||{})if(this.$MercuryTypingReceiver2[n][p]<k-i){delete this.$MercuryTypingReceiver2[n][p];o=true;}else m=true;if(o)l[n]=this.$MercuryTypingReceiver8(n);}if(!c('isEmpty')(l))this.$MercuryTypingReceiver9(l);if(m)this.$MercuryTypingReceiver1=c('setTimeoutAcrossTransitions')(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);};j.prototype.$MercuryTypingReceiver4=function(k,l){'use strict';if(k in this.$MercuryTypingReceiver2)if(l in this.$MercuryTypingReceiver2[k]){delete this.$MercuryTypingReceiver2[k][l];this.$MercuryTypingReceiver7(k);}};j.prototype.$MercuryTypingReceiver9=function(k){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',k);};j.prototype.$MercuryTypingReceiver7=function(k){'use strict';var l={};l[k]=this.$MercuryTypingReceiver8(k);this.$MercuryTypingReceiver9(l);};j.prototype.$MercuryTypingReceiver5=function(k){'use strict';if(k.thread_fbid)return h.getClientIDFromServerIDNow(k.thread_fbid.toString());if(k.type==='typ'||k.type==='page_typing')return c('MercuryIDs').getThreadIDFromUserID(k.from.toString());return null;};c('mixInEventEmitter')(j,{'state-changed':true});Object.assign(j,c('MercurySingletonMixin'));f.exports=j;}),null);
__d('ChatTypingIndicators.react',['fbt','ChatTypingIndicator.react','DOM','MercuryIDs','MercuryThreadInformer','MercuryThreads','MercuryTypingReceiver','MercuryParticipants','React','ReactDOM','SubscriptionsHandler','TooltipData','createObjectFrom','emptyFunction'],(function a(b,c,d,e,f,g,h){var i=c('MercuryThreads').get(),j=c('React').PropTypes,k=c('React').createClass({displayName:'ChatTypingIndicators',propTypes:{indicatorClass:j.func,indicatorsWillShow:j.func,indicatorsDidShow:j.func,rootClassName:j.string,threadID:j.string.isRequired,viewer:j.string.isRequired},getDefaultProps:function l(){return {indicatorClass:c('ChatTypingIndicator.react'),indicatorsWillShow:c('emptyFunction'),indicatorsDidShow:c('emptyFunction')};},getInitialState:function l(){return {typingUserIDs:[]};},componentDidMount:function l(){var m=c('MercuryThreadInformer').getForFBID(this.props.viewer),n=c('MercuryTypingReceiver').getForFBID(this.props.viewer);this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(n.addRetroactiveListener('state-changed',this.typingStateChanged),m.subscribe('messages-received',this.messagesReceived));},componentWillReceiveProps:function l(m){if(m.threadID!=this.props.threadID)this.setState({typingUserIDs:[]});},componentWillUpdate:function l(m,n){if(n.typingUserIDs.length>0)this.props.indicatorsWillShow();},componentDidUpdate:function l(){if(this.state.typingUserIDs.length>0)this.props.indicatorsDidShow();c('MercuryParticipants').getMulti(this.state.typingUserIDs,function(m){if(this.isMounted())this.state.typingUserIDs.forEach(function(n){var o=m[n],p=this.refs[n]&&this.refs[n].getBubble();if(p&&o)c('TooltipData').set(c('ReactDOM').findDOMNode(p),this.renderTooltip(o.short_name),'above','left');}.bind(this));}.bind(this));},componentWillUnmount:function l(){this._subscriptions.release();},render:function l(){if(!c('MercuryIDs').isValid(this.props.threadID))return null;var m=i.getThreadMetaNow(this.props.threadID);if(m&&!m.is_subscribed)return null;var n=c('MercuryIDs').isGroupChat(this.props.threadID);return c('React').createElement('div',{className:this.props.rootClassName},this.state.typingUserIDs.map(function(o){return this._renderTypingIndicator(o,!!n);}.bind(this)));},_renderTypingIndicator:function l(m,n){var o=this.props.indicatorClass;return c('React').createElement(o,{key:m,ref:m,showName:n,userID:m});},renderTooltip:function l(m){var n=c('DOM').create('span');c('ReactDOM').render(c('React').createElement('span',null,h._("{name} is typing...",[h.param('name',m)])),n);return n;},typingStateChanged:function l(m){if(this.props.threadID in m)this.setState({typingUserIDs:m[this.props.threadID].slice().sort()});},messagesReceived:function l(m,n){if(this.props.threadID in n){var o=n[this.props.threadID],p=c('createObjectFrom')(o.map(function(q){return q.author;}));this.setState({typingUserIDs:this.state.typingUserIDs.filter(function(q){return !p[q];}).sort()});}}});f.exports=k;}),null);
__d('MontageThreadViewContainer.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('MontageThreadViewContainerImpl.react').__setRef('MontageThreadViewContainer.react'),placeholder:c('React').createElement('div',null)});};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logging\/promotion\/",{promotion_id:{type:"Int",required:true},instance_log_data:{type:"StringToStringMap",defaultValue:{}}});}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/qp\/action\/log\/",{qp_id:{type:"Int",required:true},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}});}),null);
__d('MessengerNotificationBanner.react',['cx','ix','AsyncRequest','Image.react','messengerButtonReact','MessengerDesktopNotifications','MessengerDotComPromotionActionURL','MessengerSettingsActions','messengerSignalsRe','React','XMessengerDotComNUXLoggingController','XQuickPromotionSimpleLoggingController','goURI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerButtonReact').jsComponent,m=c('React').PropTypes,n=i("86832"),o=i("86833");j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={bannerClosed:false},this.$MessengerNotificationBanner1=function(){return c('MessengerDesktopNotifications').isGranted()||c('MessengerDesktopNotifications').isDenied()||this.state.bannerClosed;}.bind(this),this.$MessengerNotificationBanner3=function(){return c('React').createElement(l,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$MessengerNotificationBanner4,type:'primary'});}.bind(this),this.$MessengerNotificationBanner4=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID){new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','primary').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();if(this.props.primaryActionURI===c('MessengerDotComPromotionActionURL').turn_on_notification){c('MessengerSettingsActions').changeDesktopNotifs(true);}else window.open(this.props.primaryActionURI);}else if(this.props.primaryActionURI)c('goURI')(this.props.primaryActionURI,true);}.bind(this),this.$MessengerNotificationBanner2=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID)new (c('AsyncRequest'))().setURI(c('XQuickPromotionSimpleLoggingController').getURIBuilder().setInt('qp_id',this.props.promotionID).setEnum('qp_action','dismiss').setStringToStringMap('qp_instance_log_data',this.props.instanceLogData).getURI()).send();}.bind(this),this.$MessengerNotificationBanner5=function(){this.setState({bannerClosed:true},function(){c('messengerSignalsRe').resize();});}.bind(this),r;}p.prototype.componentWillReceiveProps=function(q){if(!q.promotionID)this.setState({bannerClosed:false});};p.prototype.componentDidMount=function(){if(this.$MessengerNotificationBanner1()||!this.props.promotionID)return;new (c('AsyncRequest'))().setURI(c('XMessengerDotComNUXLoggingController').getURIBuilder().setInt('promotion_id',this.props.promotionID).setStringToStringMap('instance_log_data',this.props.instanceLogData).getURI()).send();};p.prototype.componentDidUpdate=function(){window.dispatchEvent(new Event('resize'));};p.prototype.render=function(){if(this.$MessengerNotificationBanner1())return null;return c('React').createElement('div',{className:"_2cij"},c('React').createElement(c('Image.react'),{className:"_2cik",onClick:this.$MessengerNotificationBanner2,src:n}),c('React').createElement(c('Image.react'),{className:"_2cil",src:o}),this.props.promotionContent,' ',this.$MessengerNotificationBanner3());};p.propTypes={promotionID:m.number,promotionContent:m.string,primaryActionTitle:m.string,primaryActionURI:m.string,instanceLogData:m.object};f.exports=p;}),null);
__d('MessengerRefreshPrompt',['fbt','Visibility','setIntervalAcrossTransitions'],(function a(b,c,d,e,f,g,h){var i=1000*60*60,j=1000*60*60*24*3,k=function l(m){var n=Date.now();c('setIntervalAcrossTransitions')(function(){if(Date.now()-n>j)c('Visibility').once(c('Visibility').VISIBLE,function(){m({promotionID:null,promotionContent:h._("A new version of Messenger is available."),primaryActionTitle:h._("Refresh"),instanceLogData:{},primaryActionURI:window.location.href});n=Date.now();});},i);};f.exports=k;}),null);
__d('MessengerBanner.react',['MessengerConfig','MessengerNotificationBanner.react','MessengerRefreshPrompt','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={promotionData:this.props.initialPromotionData},m;}k.prototype.componentDidMount=function(){if(c('MessengerConfig').ShowReloadPrompt)c('MessengerRefreshPrompt')(function(l){return this.setState({promotionData:l});}.bind(this));};k.prototype.render=function(){var l=this.state.promotionData;if(l&&l.primaryActionURI)return c('React').createElement(c('MessengerNotificationBanner.react'),{promotionID:l.promotionID,promotionContent:l.promotionContent,primaryActionTitle:l.primaryActionTitle,primaryActionURI:l.primaryActionURI,instanceLogData:l.instanceLogData});return null;};k.propTypes={initialPromotionData:j.object,isFirstRedirect:j.bool};f.exports=k;}),null);
__d('DraftEntityInstance',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Record,k=j({type:'TOKEN',mutability:'IMMUTABLE',data:Object});h=babelHelpers.inherits(l,k);i=h&&h.prototype;l.prototype.getType=function(){return this.get('type');};l.prototype.getMutability=function(){return this.get('mutability');};l.prototype.getData=function(){return this.get('data');};function l(){h.apply(this,arguments);}f.exports=l;}),null);
__d('findRangesImmutable',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){if(!i.size)return;var m=0;i.reduce(function(n,o,p){if(!j(n,o)){if(k(n))l(m,p);m=p;}return o;});k(i.last())&&l(m,i.count());}f.exports=h;}),null);
__d('BlockTree',['immutable','emptyFunction','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i=c('immutable').Repeat,j=c('immutable').Record,k=c('emptyFunction').thatReturnsTrue,l='-',m={start:null,end:null},n=j(m),o={start:null,end:null,decoratorKey:null,leaves:null},p=j(o),q={generate:function t(u,v,w){var x=v.getLength();if(!x)return h.of(new p({start:0,end:0,decoratorKey:null,leaves:h.of(new n({start:0,end:0}))}));var y=[],z=w?w.getDecorations(v,u):h(i(null,x)),aa=v.getCharacterList();c('findRangesImmutable')(z,s,k,function(ba,ca){y.push(new p({start:ba,end:ca,decoratorKey:z.get(ba),leaves:r(aa.slice(ba,ca).toList(),ba)}));});return h(y);},getFingerprint:function t(u){return u.map(function(v){var w=v.get('decoratorKey'),x=w!==null?w+'.'+(v.get('end')-v.get('start')):'';return ''+x+'.'+v.get('leaves').size;}).join(l);}};function r(t,u){var v=[],w=t.map(function(x){return x.getStyle();}).toList();c('findRangesImmutable')(w,s,k,function(x,y){v.push(new n({start:x+u,end:y+u}));});return h(v);}function s(t,u){return t===u;}f.exports=q;}),null);
__d('BlockMapBuilder',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedMap,i={createFromArray:function j(k){return h(k.map(function(l){return [l.getKey(),l];}));}};f.exports=i;}),null);
__d('CharacterMetadata',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').Map,k=c('immutable').OrderedSet,l=c('immutable').Record,m=k(),n={style:m,entity:null},o=l(n);h=babelHelpers.inherits(p,o);i=h&&h.prototype;p.prototype.getStyle=function(){return this.get('style');};p.prototype.getEntity=function(){return this.get('entity');};p.prototype.hasStyle=function(s){return this.getStyle().includes(s);};p.applyStyle=function(s,t){var u=s.set('style',s.getStyle().add(t));return p.create(u);};p.removeStyle=function(s,t){var u=s.set('style',s.getStyle().remove(t));return p.create(u);};p.applyEntity=function(s,t){var u=s.getEntity()===t?s:s.set('entity',t);return p.create(u);};p.create=function(s){if(!s)return q;var t={style:m,entity:null},u=j(t).merge(s),v=r.get(u);if(v)return v;var w=new p(u);r=r.set(u,w);return w;};function p(){h.apply(this,arguments);}var q=new p(),r=j([[j(n),q]]);p.EMPTY=q;f.exports=p;}),null);
__d('ContentBlock',['immutable','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=c('immutable').Map,l=c('immutable').OrderedSet,m=c('immutable').Record,n=l(),o={key:'',type:'unstyled',text:'',characterList:j(),depth:0,data:k()},p=m(o);h=babelHelpers.inherits(q,p);i=h&&h.prototype;q.prototype.getKey=function(){return this.get('key');};q.prototype.getType=function(){return this.get('type');};q.prototype.getText=function(){return this.get('text');};q.prototype.getCharacterList=function(){return this.get('characterList');};q.prototype.getLength=function(){return this.getText().length;};q.prototype.getDepth=function(){return this.get('depth');};q.prototype.getData=function(){return this.get('data');};q.prototype.getInlineStyleAt=function(t){var u=this.getCharacterList().get(t);return u?u.getStyle():n;};q.prototype.getEntityAt=function(t){var u=this.getCharacterList().get(t);return u?u.getEntity():null;};q.prototype.findStyleRanges=function(t,u){c('findRangesImmutable')(this.getCharacterList(),r,t,u);};q.prototype.findEntityRanges=function(t,u){c('findRangesImmutable')(this.getCharacterList(),s,t,u);};function q(){h.apply(this,arguments);}function r(t,u){return t.getStyle()===u.getStyle();}function s(t,u){return t.getEntity()===u.getEntity();}f.exports=q;}),null);
__d('DraftEntity',['invariant','DraftEntityInstance','immutable'],(function a(b,c,d,e,f,g,h){var i=c('immutable').Map,j=i(),k=0;function l(n,o){}var m={getLastCreatedEntityKey:function n(){l('DraftEntity.getLastCreatedEntityKey','contentState.getLastCreatedEntityKey');return m.__getLastCreatedEntityKey();},create:function n(o,p,q){l('DraftEntity.create','contentState.createEntity');return m.__create(o,p,q);},add:function n(o){l('DraftEntity.add','contentState.addEntity');return m.__add(o);},get:function n(o){l('DraftEntity.get','contentState.getEntity');return m.__get(o);},mergeData:function n(o,p){l('DraftEntity.mergeData','contentState.mergeEntityData');return m.__mergeData(o,p);},replaceData:function n(o,p){l('DraftEntity.replaceData','contentState.replaceEntityData');return m.__replaceData(o,p);},__getLastCreatedEntityKey:function n(){return ''+k;},__create:function n(o,p,q){return m.__add(new (c('DraftEntityInstance'))({type:o,mutability:p,data:q||{}}));},__add:function n(o){var p=''+ ++k;j=j.set(p,o);return p;},__get:function n(o){var p=j.get(o);!!p||h(0);return p;},__mergeData:function n(o,p){var q=m.__get(o),r=babelHelpers['extends']({},q.getData(),p),s=q.set('data',r);j=j.set(o,s);return s;},__replaceData:function n(o,p){var q=m.__get(o),r=q.set('data',p);j=j.set(o,r);return r;}};f.exports=m;}),null);
__d('generateRandomKey',[],(function a(b,c,d,e,f,g){'use strict';var h={},i=Math.pow(2,24);function j(){var k=void 0;while(k===undefined||Object.prototype.hasOwnProperty.call(h,k)||!isNaN(+k))k=Math.floor(Math.random()*i).toString(32);h[k]=true;return k;}f.exports=j;}),null);
__d('sanitizeDraftText',[],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp('\r','g');function i(j){return j.replace(h,'');}f.exports=i;}),null);
__d('ContentState',['BlockMapBuilder','CharacterMetadata','ContentBlock','DraftEntity','immutable','SelectionState','generateRandomKey','sanitizeDraftText'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('immutable').List,k=c('immutable').Record,l=c('immutable').Repeat,m={entityMap:null,blockMap:null,selectionBefore:null,selectionAfter:null},n=k(m);h=babelHelpers.inherits(o,n);i=h&&h.prototype;o.prototype.getEntityMap=function(){return c('DraftEntity');};o.prototype.getBlockMap=function(){return this.get('blockMap');};o.prototype.getSelectionBefore=function(){return this.get('selectionBefore');};o.prototype.getSelectionAfter=function(){return this.get('selectionAfter');};o.prototype.getBlockForKey=function(p){var q=this.getBlockMap().get(p);return q;};o.prototype.getKeyBefore=function(p){return this.getBlockMap().reverse().keySeq().skipUntil(function(q){return q===p;}).skip(1).first();};o.prototype.getKeyAfter=function(p){return this.getBlockMap().keySeq().skipUntil(function(q){return q===p;}).skip(1).first();};o.prototype.getBlockAfter=function(p){return this.getBlockMap().skipUntil(function(q,r){return r===p;}).skip(1).first();};o.prototype.getBlockBefore=function(p){return this.getBlockMap().reverse().skipUntil(function(q,r){return r===p;}).skip(1).first();};o.prototype.getBlocksAsArray=function(){return this.getBlockMap().toArray();};o.prototype.getFirstBlock=function(){return this.getBlockMap().first();};o.prototype.getLastBlock=function(){return this.getBlockMap().last();};o.prototype.getPlainText=function(p){return this.getBlockMap().map(function(q){return q?q.getText():'';}).join(p||'\n');};o.prototype.getLastCreatedEntityKey=function(){return c('DraftEntity').__getLastCreatedEntityKey();};o.prototype.hasText=function(){var p=this.getBlockMap();return p.size>1||p.first().getLength()>0;};o.prototype.createEntity=function(p,q,r){c('DraftEntity').__create(p,q,r);return this;};o.prototype.mergeEntityData=function(p,q){c('DraftEntity').__mergeData(p,q);return this;};o.prototype.replaceEntityData=function(p,q){c('DraftEntity').__replaceData(p,q);return this;};o.prototype.addEntity=function(p){c('DraftEntity').__add(p);return this;};o.prototype.getEntity=function(p){return c('DraftEntity').__get(p);};o.createFromBlockArray=function(p,q){var r=Array.isArray(p)?p:p.contentBlocks,s=c('BlockMapBuilder').createFromArray(r),t=s.isEmpty()?new (c('SelectionState'))():c('SelectionState').createEmpty(s.first().getKey());return new o({blockMap:s,entityMap:q||c('DraftEntity'),selectionBefore:t,selectionAfter:t});};o.createFromText=function(p){var q=arguments.length<=1||arguments[1]===undefined?/\r\n?|\n/g:arguments[1],r=p.split(q),s=r.map(function(t){t=c('sanitizeDraftText')(t);return new (c('ContentBlock'))({key:c('generateRandomKey')(),text:t,type:'unstyled',characterList:j(l(c('CharacterMetadata').EMPTY,t.length))});});return o.createFromBlockArray(s);};function o(){h.apply(this,arguments);}f.exports=o;}),null);
__d('UnicodeBidiService',['invariant','UnicodeBidi','UnicodeBidiDirection','UnicodeBidiGlobalDirection'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){if(!j){j=c('UnicodeBidiGlobalDirection').getDir();}else c('UnicodeBidiDirection').isStrong(j)||h(0);this.$UnicodeBidiService1=j;this.reset();}i.prototype.reset=function(){this.$UnicodeBidiService2=this.$UnicodeBidiService1;};i.prototype.getDirection=function(j){this.$UnicodeBidiService2=c('UnicodeBidi').getDirection(j,this.$UnicodeBidiService2);return this.$UnicodeBidiService2;};f.exports=i;}),null);
__d('EditorBidiService',['immutable','UnicodeBidiService','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedMap,i,j={getDirectionMap:function k(l,m){if(!i){i=new (c('UnicodeBidiService'))();}else i.reset();var n=l.getBlockMap(),o=n.valueSeq().map(function(q){return c('nullthrows')(i).getDirection(q.getText());}),p=h(n.keySeq().zip(o));if(m!=null&&c('immutable').is(m,p))return m;return p;}};f.exports=j;}),null);
__d('EditorState',['BlockTree','ContentState','EditorBidiService','immutable','SelectionState'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedSet,i=c('immutable').Record,j=c('immutable').Stack,k={allowUndo:true,currentContent:null,decorator:null,directionMap:null,forceSelection:false,inCompositionMode:false,inlineStyleOverride:null,lastChangeType:null,nativelyRenderedContent:null,redoStack:j(),selection:null,treeMap:null,undoStack:j()},l=i(k);m.createEmpty=function(v){return m.createWithContent(c('ContentState').createFromText(''),v);};m.createWithContent=function(v,w){var x=v.getBlockMap().first().getKey();return m.create({currentContent:v,undoStack:j(),redoStack:j(),decorator:w||null,selection:c('SelectionState').createEmpty(x)});};m.create=function(v){var w=v.currentContent,x=v.decorator,y=babelHelpers['extends']({},v,{treeMap:o(w,x),directionMap:c('EditorBidiService').getDirectionMap(w)});return new m(new l(y));};m.set=function(v,w){var x=v.getImmutable().withMutations(function(y){var z=y.get('decorator'),aa=z;if(w.decorator===null){aa=null;}else if(w.decorator)aa=w.decorator;var ba=w.currentContent||v.getCurrentContent();if(aa!==z){var ca=y.get('treeMap'),da;if(aa&&z){da=q(ba,ba.getBlockMap(),ca,aa,z);}else da=o(ba,aa);y.merge({decorator:aa,treeMap:da,nativelyRenderedContent:null});return;}var ea=v.getCurrentContent();if(ba!==ea)y.set('treeMap',p(v,ba.getBlockMap(),ba.getEntityMap(),aa));y.merge(w);});return new m(x);};m.prototype.toJS=function(){return this.getImmutable().toJS();};m.prototype.getAllowUndo=function(){return this.getImmutable().get('allowUndo');};m.prototype.getCurrentContent=function(){return this.getImmutable().get('currentContent');};m.prototype.getUndoStack=function(){return this.getImmutable().get('undoStack');};m.prototype.getRedoStack=function(){return this.getImmutable().get('redoStack');};m.prototype.getSelection=function(){return this.getImmutable().get('selection');};m.prototype.getDecorator=function(){return this.getImmutable().get('decorator');};m.prototype.isInCompositionMode=function(){return this.getImmutable().get('inCompositionMode');};m.prototype.mustForceSelection=function(){return this.getImmutable().get('forceSelection');};m.prototype.getNativelyRenderedContent=function(){return this.getImmutable().get('nativelyRenderedContent');};m.prototype.getLastChangeType=function(){return this.getImmutable().get('lastChangeType');};m.prototype.getInlineStyleOverride=function(){return this.getImmutable().get('inlineStyleOverride');};m.setInlineStyleOverride=function(v,w){return m.set(v,{inlineStyleOverride:w});};m.prototype.getCurrentInlineStyle=function(){var v=this.getInlineStyleOverride();if(v!=null)return v;var w=this.getCurrentContent(),x=this.getSelection();if(x.isCollapsed())return s(w,x);return t(w,x);};m.prototype.getBlockTree=function(v){return this.getImmutable().getIn(['treeMap',v]);};m.prototype.isSelectionAtStartOfContent=function(){var v=this.getCurrentContent().getBlockMap().first().getKey();return this.getSelection().hasEdgeWithin(v,0,0);};m.prototype.isSelectionAtEndOfContent=function(){var v=this.getCurrentContent(),w=v.getBlockMap(),x=w.last(),y=x.getLength();return this.getSelection().hasEdgeWithin(x.getKey(),y,y);};m.prototype.getDirectionMap=function(){return this.getImmutable().get('directionMap');};m.acceptSelection=function(v,w){return n(v,w,false);};m.forceSelection=function(v,w){if(!w.getHasFocus())w=w.set('hasFocus',true);return n(v,w,true);};m.moveSelectionToEnd=function(v){var w=v.getCurrentContent(),x=w.getLastBlock(),y=x.getKey(),z=x.getLength();return m.acceptSelection(v,new (c('SelectionState'))({anchorKey:y,anchorOffset:z,focusKey:y,focusOffset:z,isBackward:false}));};m.moveFocusToEnd=function(v){var w=m.moveSelectionToEnd(v);return m.forceSelection(w,w.getSelection());};m.push=function(v,w,x){if(v.getCurrentContent()===w)return v;var y=x!=='insert-characters',z=c('EditorBidiService').getDirectionMap(w,v.getDirectionMap());if(!v.getAllowUndo())return m.set(v,{currentContent:w,directionMap:z,lastChangeType:x,selection:w.getSelectionAfter(),forceSelection:y,inlineStyleOverride:null});var aa=v.getSelection(),ba=v.getCurrentContent(),ca=v.getUndoStack(),da=w;if(aa!==ba.getSelectionAfter()||r(v,x)){ca=ca.push(ba);da=da.set('selectionBefore',aa);}else if(x==='insert-characters'||x==='backspace-character'||x==='delete-character')da=da.set('selectionBefore',ba.getSelectionBefore());var ea=v.getInlineStyleOverride(),fa=['adjust-depth','change-block-type','split-block'];if(fa.indexOf(x)===-1)ea=null;var ga={currentContent:da,directionMap:z,undoStack:ca,redoStack:j(),lastChangeType:x,selection:w.getSelectionAfter(),forceSelection:y,inlineStyleOverride:ea};return m.set(v,ga);};m.undo=function(v){if(!v.getAllowUndo())return v;var w=v.getUndoStack(),x=w.peek();if(!x)return v;var y=v.getCurrentContent(),z=c('EditorBidiService').getDirectionMap(x,v.getDirectionMap());return m.set(v,{currentContent:x,directionMap:z,undoStack:w.shift(),redoStack:v.getRedoStack().push(y),forceSelection:true,inlineStyleOverride:null,lastChangeType:'undo',nativelyRenderedContent:null,selection:y.getSelectionBefore()});};m.redo=function(v){if(!v.getAllowUndo())return v;var w=v.getRedoStack(),x=w.peek();if(!x)return v;var y=v.getCurrentContent(),z=c('EditorBidiService').getDirectionMap(x,v.getDirectionMap());return m.set(v,{currentContent:x,directionMap:z,undoStack:v.getUndoStack().push(y),redoStack:w.shift(),forceSelection:true,inlineStyleOverride:null,lastChangeType:'redo',nativelyRenderedContent:null,selection:x.getSelectionAfter()});};function m(v){this.$EditorState1=v;}m.prototype.getImmutable=function(){return this.$EditorState1;};function n(v,w,x){return m.set(v,{selection:w,forceSelection:x,nativelyRenderedContent:null,inlineStyleOverride:null});}function o(v,w){return v.getBlockMap().map(function(x){return c('BlockTree').generate(v,x,w);}).toOrderedMap();}function p(v,w,x,y){var z=v.getCurrentContent().set('entityMap',x),aa=z.getBlockMap(),ba=v.getImmutable().get('treeMap');return ba.merge(w.toSeq().filter(function(ca,da){return ca!==aa.get(da);}).map(function(ca){return c('BlockTree').generate(z,ca,y);}));}function q(v,w,x,y,z){return x.merge(w.toSeq().filter(function(aa){return y.getDecorations(aa,v)!==z.getDecorations(aa,v);}).map(function(aa){return c('BlockTree').generate(v,aa,y);}));}function r(v,w){var x=v.getLastChangeType();return w!==x||w!=='insert-characters'&&w!=='backspace-character'&&w!=='delete-character';}function s(v,w){var x=w.getStartKey(),y=w.getStartOffset(),z=v.getBlockForKey(x);if(y>0)return z.getInlineStyleAt(y-1);if(z.getLength())return z.getInlineStyleAt(0);return u(v,x);}function t(v,w){var x=w.getStartKey(),y=w.getStartOffset(),z=v.getBlockForKey(x);if(y<z.getLength())return z.getInlineStyleAt(y);if(y>0)return z.getInlineStyleAt(y-1);return u(v,x);}function u(v,w){var x=v.getBlockBefore(w),y;while(x){y=x.getLength();if(y)return x.getInlineStyleAt(y-1);x=v.getBlockBefore(x.getKey());}return h();}f.exports=m;}),null);
__d('MessengerConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={NEW_THREAD_KEY:'new'};f.exports=h;}),null);
__d('createCharacterList',['CharacterMetadata','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List;function i(j,k){var l=j.map(function(m,n){var o=k[n];return c('CharacterMetadata').create({style:m,entity:o});});return h(l);}f.exports=i;}),null);
__d('decodeEntityRanges',['UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('UnicodeUtils').substr;function i(j,k){var l=Array(j.length).fill(null);if(k)k.forEach(function(m){var n=h(j,0,m.offset).length,o=n+h(j,m.offset,m.length).length;for(var p=n;p<o;p++)l[p]=m.key;});return l;}f.exports=i;}),null);
__d('decodeInlineStyleRanges',['immutable','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').OrderedSet,i=c('UnicodeUtils').substr,j=h();function k(l,m){var n=Array(l.length).fill(j);if(m)m.forEach(function(o){var p=i(l,0,o.offset).length,q=p+i(l,o.offset,o.length).length;while(p<q){n[p]=n[p].add(o.style);p++;}});return n;}f.exports=k;}),null);
__d('convertFromRawToDraftState',['ContentBlock','ContentState','DraftEntity','immutable','createCharacterList','decodeEntityRanges','decodeInlineStyleRanges','generateRandomKey'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map;function i(j){var k=j.blocks,l=j.entityMap,m={};Object.keys(l).forEach(function(o){var p=l[o],q=p.type,r=p.mutability,s=p.data,t=c('DraftEntity').__create(q,r,s||{});m[o]=t;});var n=k.map(function(o){var p=o.key,q=o.type,r=o.text,s=o.depth,t=o.inlineStyleRanges,u=o.entityRanges,v=o.data;p=p||c('generateRandomKey')();q=q||'unstyled';s=s||0;t=t||[];u=u||[];v=h(v);var w=c('decodeInlineStyleRanges')(r,t),x=u.filter(function(aa){return Object.prototype.hasOwnProperty.call(m,aa.key);}).map(function(aa){return babelHelpers['extends']({},aa,{key:m[aa.key]});}),y=c('decodeEntityRanges')(r,x),z=c('createCharacterList')(w,y);return new (c('ContentBlock'))({key:p,type:q,text:r,depth:s,characterList:z,data:v});});return c('ContentState').createFromBlockArray(n);}f.exports=i;}),null);
__d('decodeBlocks',['ComposedBlockType','ComposedInlineStyle','convertFromRawToDraftState','mapObject'],(function a(b,c,d,e,f,g){'use strict';function h(k,l){var m=k.map(function(o){var p=o.type,q=o.inlineStyleRanges,r=babelHelpers.objectWithoutProperties(o,['type','inlineStyleRanges']);return babelHelpers['extends']({type:i[p]||'unstyled',inlineStyleRanges:(q||[]).map(function(s){return babelHelpers['extends']({},s,{style:j[s.style]});})},r);}),n=c('mapObject')(l,function(o){return {type:o.getType(),mutability:o.getMutability(),data:o.getData()};});return c('convertFromRawToDraftState')({blocks:m,entityMap:n});}var i={};i[c('ComposedBlockType').UNSTYLED]='unstyled';i[c('ComposedBlockType').PARAGRAPH]='paragraph';i[c('ComposedBlockType').BLOCKQUOTE]='blockquote';i[c('ComposedBlockType').ORDERED_LIST_ITEM]='ordered-list-item';i[c('ComposedBlockType').UNORDERED_LIST_ITEM]='unordered-list-item';i[c('ComposedBlockType').CODE]='code-block';i[c('ComposedBlockType').HEADER_ONE]='header-one';i[c('ComposedBlockType').HEADER_TWO]='header-two';i[c('ComposedBlockType').MEDIA]='atomic';i[c('ComposedBlockType').PULLQUOTE]='pullquote';var j={};j[c('ComposedInlineStyle').BOLD]='BOLD';j[c('ComposedInlineStyle').CODE]='CODE';j[c('ComposedInlineStyle').ITALIC]='ITALIC';j[c('ComposedInlineStyle').STRIKETHROUGH]='STRIKETHROUGH';j[c('ComposedInlineStyle').UNDERLINE]='UNDERLINE';f.exports=h;}),null);
__d('DraftStringKey',[],(function a(b,c,d,e,f,g){'use strict';var h={stringify:function i(j){return '_'+String(j);},unstringify:function i(j){return j.slice(1);}};f.exports=h;}),null);
__d('encodeEntityRanges',['DraftStringKey','UnicodeUtils'],(function a(b,c,d,e,f,g){'use strict';var h=c('UnicodeUtils').strlen;function i(j,k){var l=[];j.findEntityRanges(function(m){return !!m.getEntity();},function(m,n){var o=j.getText(),p=j.getEntityAt(m);l.push({offset:h(o.slice(0,m)),length:h(o.slice(m,n)),key:Number(k[c('DraftStringKey').stringify(p)])});});return l;}f.exports=i;}),null);
__d('encodeInlineStyleRanges',['UnicodeUtils','findRangesImmutable'],(function a(b,c,d,e,f,g){'use strict';var h=function m(n,o){return n===o;},i=function m(n){return !!n;},j=[];function k(m,n,o){var p=[],q=n.map(function(r){return r.has(o);}).toList();c('findRangesImmutable')(q,h,i,function(r,s){var t=m.getText();p.push({offset:c('UnicodeUtils').strlen(t.slice(0,r)),length:c('UnicodeUtils').strlen(t.slice(r,s)),style:o});});return p;}function l(m){var n=m.getCharacterList().map(function(p){return p.getStyle();}).toList(),o=n.flatten().toSet().map(function(p){return k(m,n,p);});return Array.prototype.concat.apply(j,o.toJS());}f.exports=l;}),null);
__d('convertFromDraftStateToRaw',['DraftStringKey','encodeEntityRanges','encodeInlineStyleRanges'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=0,k={},l=[];i.getBlockMap().forEach(function(o,p){o.findEntityRanges(function(q){return q.getEntity()!==null;},function(q){var r=c('DraftStringKey').stringify(o.getEntityAt(q));if(!Object.prototype.hasOwnProperty.call(k,r))k[r]=''+j++;});l.push({key:p,text:o.getText(),type:o.getType(),depth:o.getDepth(),inlineStyleRanges:c('encodeInlineStyleRanges')(o),entityRanges:c('encodeEntityRanges')(o,k),data:o.getData().toObject()});});var m=Object.keys(k),n={};m.forEach(function(o,p){var q=i.getEntity(c('DraftStringKey').unstringify(o));n[p]={type:q.getType(),mutability:q.getMutability(),data:q.getData()};});return {entityMap:n,blocks:l};}f.exports=h;}),null);
__d('encodeBlocks',['ComposedBlockType','ComposedEntityType','ComposedInlineStyle','convertFromDraftStateToRaw','mapObject','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=c('convertFromDraftStateToRaw')(k),m=l.blocks,n=l.entityMap,o=m.map(function(q){var r=q.key,s=q.type,t=q.text,u=q.depth,v=q.inlineStyleRanges,w=q.entityRanges;return {key:c('nullthrows')(r),type:i[s],text:t,depth:c('nullthrows')(u),inlineStyleRanges:c('nullthrows')(v).map(function(x){return babelHelpers['extends']({},x,{style:j[x.style]});}),entityRanges:c('nullthrows')(w)};}),p=c('mapObject')(n,function(q){var r=q.data,s=null,t=undefined;if(typeof r==='object'){s=r.id;t=babelHelpers.objectWithoutProperties(r,['id']);if(Object.keys(t).length===0){t=undefined;}else t=c('mapObject')(t,function(u){return u==null?'':String(u);});}return {id:s||null,type:c('ComposedEntityType')[q.type],data:t};});return {blocks:o,entityMap:p};}var i={unstyled:c('ComposedBlockType').UNSTYLED,paragraph:c('ComposedBlockType').PARAGRAPH,blockquote:c('ComposedBlockType').BLOCKQUOTE,'ordered-list-item':c('ComposedBlockType').ORDERED_LIST_ITEM,'unordered-list-item':c('ComposedBlockType').UNORDERED_LIST_ITEM,'code-block':c('ComposedBlockType').CODE,'header-one':c('ComposedBlockType').HEADER_ONE,'header-two':c('ComposedBlockType').HEADER_TWO,atomic:c('ComposedBlockType').MEDIA,pullquote:c('ComposedBlockType').PULLQUOTE,'header-three':c('ComposedBlockType').HEADER_TWO,'header-four':c('ComposedBlockType').HEADER_TWO,'header-five':c('ComposedBlockType').HEADER_TWO,'header-six':c('ComposedBlockType').HEADER_TWO},j={BOLD:c('ComposedInlineStyle').BOLD,CODE:c('ComposedInlineStyle').CODE,ITALIC:c('ComposedInlineStyle').ITALIC,STRIKETHROUGH:c('ComposedInlineStyle').STRIKETHROUGH,UNDERLINE:c('ComposedInlineStyle').UNDERLINE};f.exports=h;}),null);
__d('MessengerEditorStateManager',['CacheStorage','ComposedEntityMutability','ComposedEntityMutabilityToName','ComposedEntityTypeToName','DraftEntityInstance','EditorState','MessengerConstants','SelectionState','decodeBlocks','encodeBlocks','mapObject'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('CacheStorage'))('localstorage'),i=c('ComposedEntityMutability').IMMUTABLE,j=void 0,k={get:function l(m){if(!m)return this._getEmptyEditorState();if(m===c('MessengerConstants').NEW_THREAD_KEY)return j||this._getEmptyEditorState();var n=h.get(m,false);if(!n)return this._getEmptyEditorState();var o=n.encodedBlocks,p=c('mapObject')(o.entityMap,function(s,t){return new (c('DraftEntityInstance'))({type:c('ComposedEntityTypeToName')[s.type],mutability:c('ComposedEntityMutabilityToName')[i],data:s.data});}),q=c('decodeBlocks')(o.blocks,p),r=c('EditorState').createWithContent(q);return c('EditorState').acceptSelection(r,new (c('SelectionState'))(n.selection));},set:function l(m,n){if(m===c('MessengerConstants').NEW_THREAD_KEY){j=n;return;}var o=c('encodeBlocks')(n.getCurrentContent()),p=n.getSelection().toJS();h.set(m,{encodedBlocks:o,selection:p});},_getEmptyEditorState:function l(){var m=c('EditorState').createEmpty();return c('EditorState').forceSelection(m,m.getSelection());}};f.exports=k;}),null);
__d('mercuryRogerRe',['bs_array','Arbiter','utilsRe','bs_caml_obj','JSLogger','immutable','bs_js_boolean','CurrentUser','bs_js_primitive','MercuryThreads','MercuryDispatcher','MercuryActionStatus'],(function a(b,c,d,e,f,g){'use strict';var h={};function i(q,r,s,t){var u=+(r>=q.timestamp),v=q.status,w=1-t||c('bs_caml_obj').caml_notequal(s,q.author);if(u!==0){if(c('bs_js_primitive').is_nil_undef(v)){if(w!==0){return 1;}else return 0;}else if(w!==0&&c('bs_caml_obj').caml_equal(v,c('MercuryActionStatus').SUCCESS)){return 1;}else return 0;}else return 0;}function j(q,r,s){if(c('bs_js_primitive').is_nil_undef(r)){return [];}else{var t=q[0][r.thread_id];if(t!==undefined){return t.reduce(function(u,v,w,x){if(i(r,v.watermark,w,c('utilsRe').isTruthy(s))){return c('bs_array').append(u,[w]);}else return u;},[]);}else return [];}}function k(q,r){var s=q[0][r.thread_id];if(s!==undefined){return c('bs_js_boolean').to_js_boolean(s.reduce(function(t,u,v,w){if(t){return i(r,u.watermark,v,0);}else return 0;},1));}else return false;}function l(q,r){var s=q[0][r];if(s!==undefined){return s;}else return c('immutable').OrderedMap();}function m(q,r,s){var t=q[0][r];if(t!==undefined){var u=t.get(s);if(u!==undefined){return u;}else return null;}else return null;}function n(q){var r=h[q];if(r!==undefined){return r;}else{var s=[{}],t=new (c('Arbiter'))(),u={__fbid:q,getSeenBy:function y(z,aa){return j(s,z,aa);},wasSeenByAll:function y(z){return k(s,z);},getSeenTimestamp:function y(z,aa){return m(s,z,aa);},getSeenTimestamps:function y(z){return l(s,z);},subscribe:function y(z,aa){return t.subscribe(z,aa);},mockInform:function y(z,aa){t.inform(z,aa);return 0;}};h[q]=u;var v=[[]],w=c('MercuryDispatcher').getForFBID(q),x=c('MercuryThreads').getForFBID(q);w.subscribe("update-roger",function(y,z){if(c('bs_js_primitive').is_nil_undef(z)){return 0;}else{Object.keys(z).forEach(function(aa){var ba=x.getThreadMetaNow(aa);Object.keys(z[aa]).forEach(function(da){var ea=s[0][aa],fa=ea!==undefined?ea:c('immutable').OrderedMap(),ga=c('bs_js_primitive').is_nil_undef(ba)?0:[ba.participants],ha=0;if(ga){if(ga[0].indexOf(da)===-1){v[0].push(fa);return 0;}else ha=1;}else ha=1;if(ha===1){var ia=fa.get(da),ja=z[aa][da],ka=0;if(ia!==undefined){if(ja.watermark<=ia.watermark){return 0;}else ka=2;}else ka=2;if(ka===2){s[0][aa]=fa.set(da,ja);return 0;}}});var ca=s[0][aa];if(ca!==undefined){s[0][aa]=ca.sort(function(da,ea){return da.watermark-ea.watermark|0;});return 0;}else return 0;});t.inform("change",z);return 0;}});w.subscribe("invalidate-global-state",function(y,z){s[0]={};v[0]=[];return 0;});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(y,z){z.read_receipts={valid_receipts:s[0],bad_receipts:v[0]};return 0;});return u;}}function o(){return n(c('CurrentUser').getID());}var p=c('utilsRe').$pipe$unknown;g.$pipe$unknown=p;g.rogersPerFBID=h;g._wasSeen=i;g.getSeenBy=j;g.wasSeenByAll=k;g.getSeenTimestamps=l;g.getSeenTimestamp=m;g.getForFBID=n;g.get=o;}),null);
__d('MercuryDelayedRoger',['ArbiterMixin','LiveTimer','MercuryActionStatus','MercuryConfig','MercuryMessages','mercuryRogerRe','MercurySingletonProvider','MercuryThreadInformer','MercuryThreads','mixin','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){var h,i,j=c('MercuryConfig')['roger.seen_delay'];h=babelHelpers.inherits(k,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;k.getForFBID=function(m){'use strict';return l.getForFBID(m);};k.get=function(){'use strict';return l.get();};function k(m){'use strict';i.constructor.call(this);this.$MercuryDelayedRoger9=function(event,n){var o={};for(var p in n)if(this.$MercuryDelayedRoger11(p))o[p]=true;Object.keys(o).forEach(function(q){return this.$MercuryDelayedRoger12(o);}.bind(this));}.bind(this);this.$MercuryDelayedRoger1=m;this.$MercuryDelayedRoger2=c('mercuryRogerRe').getForFBID(m);this.$MercuryDelayedRoger4={};this.$MercuryDelayedRoger5={};this.$MercuryDelayedRoger2.subscribe('change',function(n,o){for(var p in o)!this.$MercuryDelayedRoger5[p]&&this.$MercuryDelayedRoger8(p);}.bind(this));this.$MercuryDelayedRoger3=c('MercuryThreadInformer').getForFBID(m);this.$MercuryDelayedRoger6=c('MercuryMessages').getForFBID(m);this.$MercuryDelayedRoger7=c('MercuryThreads').getForFBID(m);this.$MercuryDelayedRoger3.subscribe('messages-received',this.$MercuryDelayedRoger9);this.$MercuryDelayedRoger3.subscribe('messages-reordered',this.$MercuryDelayedRoger9);this.$MercuryDelayedRoger3.subscribe('messages-updated',this.$MercuryDelayedRoger9);}k.prototype.getSeenBy=function(m,n){'use strict';if(this.$MercuryDelayedRoger5[m])return [];return this.$MercuryDelayedRoger2.getSeenBy(this.$MercuryDelayedRoger10(m),n);};k.prototype.wasSeenByAll=function(m){'use strict';if(this.$MercuryDelayedRoger5[m])return false;return this.$MercuryDelayedRoger2.wasSeenByAll(this.$MercuryDelayedRoger10(m));};k.prototype.$MercuryDelayedRoger10=function(m){'use strict';if(!this.$MercuryDelayedRoger4[m]){var n=this.$MercuryDelayedRoger7.getThreadMetaNow(m);if(n)this.$MercuryDelayedRoger4[m]={thread_id:m,author:n.participants[0],timestamp:n.timestamp};}return this.$MercuryDelayedRoger4[m];};k.prototype.$MercuryDelayedRoger11=function(m){'use strict';var n=false;this.$MercuryDelayedRoger6.getThreadMessagesRange(m,0,1,function(o){var p=o[0];if(!p)return;var q=p.timestamp;if(p.status===c('MercuryActionStatus').SUCCESS)q-=c('LiveTimer').getServerTimeOffset();var r=this.getSeenBy(m);if(this.$MercuryDelayedRoger5[m]){clearTimeout(this.$MercuryDelayedRoger5[m]);delete this.$MercuryDelayedRoger5[m];}var s=q+j,t=s-Date.now();if(t>0)this.$MercuryDelayedRoger5[m]=c('setTimeoutAcrossTransitions')(function(){delete this.$MercuryDelayedRoger5[m];this.$MercuryDelayedRoger8(m);}.bind(this),t);this.$MercuryDelayedRoger4[m]=p;var u=this.getSeenBy(m);if(r.length||u.length)n=true;}.bind(this));return n;};k.prototype.$MercuryDelayedRoger8=function(m){'use strict';var n={};n[m]=true;this.$MercuryDelayedRoger12(n);};k.prototype.$MercuryDelayedRoger12=function(m){'use strict';this.inform('state-changed',m);this.inform('change');};var l=new (c('MercurySingletonProvider'))(k);f.exports=k;}),null);
__d('MercuryDeliveryReceipts',['ArbiterMixin','Map','MercuryDispatcher','MercurySingletonProvider','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(l){'use strict';i.constructor.call(this);this.$MercuryDeliveryReceipts2=l;this.$MercuryDeliveryReceipts3=new (c('Map'))();this.$MercuryDeliveryReceipts1=c('MercuryDispatcher').getForFBID(this.$MercuryDeliveryReceipts2);this.$MercuryDeliveryReceipts1.subscribe('update-delivery',function(m,n){if(n.delivery_receipts)for(var o in n.delivery_receipts){var p=n.delivery_receipts[o],q=this.$MercuryDeliveryReceipts3.get(o)||0;if(p>q){this.$MercuryDeliveryReceipts3.set(o,p);this.informDeliveryStatusChanged(o);}}}.bind(this));}j.getForFBID=function(l){'use strict';return k.getForFBID(l);};j.get=function(){'use strict';return k.get();};j.prototype.informDeliveryStatusChanged=function(l){'use strict';var m=new (c('Map'))();m.set(l,true);this.inform('change',m);};j.prototype.getDeliveryTime=function(l){'use strict';return this.$MercuryDeliveryReceipts3.get(l)||0;};var k=new (c('MercurySingletonProvider'))(j);f.exports=j;}),null);
__d('MercuryDeliveryState',['MercuryConfig','MercuryIDs','MercuryServerRequests','MercurySingletonProvider','MercuryThreadIDMap','MercuryThreadInformer','PresencePrivacy','UserActivity','debounceAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryConfig').delivery_timeout||120000;i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};function i(k){this.$MercuryDeliveryState1=k;this.$MercuryDeliveryState2=c('MercuryServerRequests').getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState3=c('MercuryThreadInformer').getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState4=c('MercuryThreadIDMap').getForFBID(this.$MercuryDeliveryState1);this.$MercuryDeliveryState5=[];this.$MercuryDeliveryState6={};this.$MercuryDeliveryState3.subscribe('messages-received',this.$MercuryDeliveryState7.bind(this));c('UserActivity').subscribe(c('debounceAcrossTransitions')(this.$MercuryDeliveryState8,300,this));}i.prototype.$MercuryDeliveryState7=function(k,l){for(var m in l){var n=l[m];n.forEach(function(o){if(this.$MercuryDeliveryState9(o)){this.$MercuryDeliveryState5.push(o);this.$MercuryDeliveryState4.getServerIDFromClientID(m,function(p){if(!this.$MercuryDeliveryState6[p])this.$MercuryDeliveryState6[p]=[];this.$MercuryDeliveryState6[p].push(o.message_id);}.bind(this));}}.bind(this));}if(c('UserActivity').isActive(h))this.$MercuryDeliveryState8();};i.prototype.$MercuryDeliveryState8=function(){if(this.$MercuryDeliveryState5.length===0&&Object.keys(this.$MercuryDeliveryState6).length===0)return;var k=this.$MercuryDeliveryState5.map(function(l){return l.message_id;});if(k)this.$MercuryDeliveryState2.sendDeliveryReceipts(k,this.$MercuryDeliveryState6);this.$MercuryDeliveryState6={};this.$MercuryDeliveryState5=[];};i.prototype.$MercuryDeliveryState9=function(k){var l=k.author?c('MercuryIDs').getUserIDFromParticipantID(k.author):null;if(l===this.$MercuryDeliveryState1)return false;if(!k.is_unread)return false;if(!c('PresencePrivacy').allows(l))return false;return true;};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercuryDelayedDispatcher',['MercuryDispatcher','MercuryServerPayloadPreprocessor','MercuryServerRequests','MercurySingletonProvider','MercuryThreadIDMap'],(function a(b,c,d,e,f,g){'use strict';function h(j){this.$MercuryDelayedDispatcher1=j;this.$MercuryDelayedDispatcher2=[];this.$MercuryDelayedDispatcher3=c('MercuryThreadIDMap').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4=c('MercuryDispatcher').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher5=c('MercuryServerRequests').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher6=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4.subscribe('model-update-completed',function(k,l){return this.$MercuryDelayedDispatcher7();}.bind(this));}h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};h.prototype.handleUpdateWaitForThread=function(j,k){var l=this.$MercuryDelayedDispatcher3.getClientIDFromServerIDNow(k);if(l){this.$MercuryDelayedDispatcher8(j);return;}this.$MercuryDelayedDispatcher3.getClientIDFromServerID(k,function(){return this.$MercuryDelayedDispatcher2.push({thread_fbid:k,payload:j});}.bind(this));this.$MercuryDelayedDispatcher5.ensureThreadIsFetched(k);};h.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher2&&this.$MercuryDelayedDispatcher2.length){var j=this.$MercuryDelayedDispatcher2.shift(),k=j.thread_fbid,l=j.payload;this.handleUpdateWaitForThread(l,k);}};h.prototype.$MercuryDelayedDispatcher8=function(j){if(j.from_client){this.$MercuryDelayedDispatcher4.handleUpdate(j);}else this.$MercuryDelayedDispatcher6.handleUpdate(j);};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('MercuryProfileRanges',['idx'],(function a(b,c,d,e,f,g){'use strict';function h(i){if(!i.id&&i.i)return {id:i.i,offset:i.o,length:i.l};return i;}f.exports={extractFromDelta:function i(j){var k,l=(k=j)!=null?(k=k.data)!=null?k.prng:k:k;if(!l)return undefined;var m=[];try{m=JSON.parse(l);if(m.length>0)return m.map(h);}catch(n){}return m;}};}),null);
__d('MercurySyncNewMessageTransformer',['IrisProtocolMessageLifetime','MercuryActionType','MercuryIDs','MercuryMessageCustomizations','MercuryProfileRanges','MercuryTimestamp','MessagingTag'],(function a(b,c,d,e,f,g){'use strict';var h=function j(k){var l={};try{l=JSON.parse(k);}catch(m){}return l;};function i(j,k){var l=parseInt(k.messageMetadata.timestamp,10),m=c('MercuryTimestamp').getFormatedTimestamp(l),n=k.messageMetadata.skipBumpThread,o=j!==k.messageMetadata.actorFbId,p=[];if(k.attachments)p=k.attachments.map(function(r){return r.mercury;});var q=k.messageMetadata.tags?k.messageMetadata.tags[0]:undefined;return {message_id:k.messageMetadata.messageId,threading_id:null,offline_threading_id:k.messageMetadata.offlineThreadingId,author:c('MercuryIDs').getParticipantIDFromUserID(k.messageMetadata.actorFbId),author_email:k.messageMetadata.actorFbId+'@facebook.com',ephemeral_ttl_mode:k.ttl?c('IrisProtocolMessageLifetime')[k.ttl]:0,timestamp:l,is_unread:o,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,source:q,tags:k.messageMetadata.tags,is_spoof_warning:false,folder:c('MessagingTag').INBOX,thread_fbid:k.messageMetadata.threadKey.threadFbId,other_user_fbid:k.messageMetadata.threadKey.otherUserFbId,body:k.body!==undefined?k.body:'',html_body:null,subject:null,has_attachment:p.length>0,attachments:p,ranges:undefined,thread_id:null,action_type:c('MercuryActionType').USER_GENERATED_MESSAGE,is_from_iris:true,is_sponsored:!!(k.data&&k.data.is_sponsored&&k.data.is_sponsored==='true'),commerce_message_type:k.data?k.data.commerce_message_type:null,customizations:k.data&&k.data.customization?c('MercuryMessageCustomizations').parseCustomizations(k.data.customization):null,platform_xmd:k.data&&k.data.platform_xmd?k.data.platform_xmd:null,profile_ranges:c('MercuryProfileRanges').extractFromDelta(k),message_source:k.data&&k.data.message_source_data?h(k.data.message_source_data).message_source:null,skip_bump_thread:n,montage_reply_data:k.data&&k.data.montage_reply_data?h(k.data.montage_reply_data):null,meta_ranges:k.data&&k.data.meta_ranges?h(k.data.meta_ranges):null};}f.exports={transform:i};}),null);
__d('MercurySyncAdminTextMessageTransformer',['MercuryActionType','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={message_type:j.type,untypedData:j.untypedData};k.log_message_type=c('MercuryLogMessageType').GENERIC_ADMIN_TEXT;return k;}f.exports={transform:h};}),null);
__d('MercurySyncClientPayloadTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(k){var l=k.payload;l=JSON.parse(String.fromCharCode.apply(null,l));var m=l&&l.deltas,n=m[0];if(n.deltaMessageReaction){return i(n.deltaMessageReaction);}else return j(n);}function i(k){var l=k.messageId,m=k.offlineThreadingId,n=k.reaction,o=k.senderId,p=k.userId,q=k.threadKey.threadFbId||k.threadKey.otherUserFbId;return {action_type:c('MercuryActionType').REACTION_UPDATE,messageId:l,offlineThreadingId:m,reaction:n?decodeURIComponent(window.escape(n)):undefined,senderId:o,thread_fbid:q,userId:p};}function j(k){var l=k&&k.deltaPaymentPinProtectionStatusData,m=l&&l.threadKey&&l.threadKey.otherUserFbId,n=l&&l.isPinProtected;if(!m)return null;var o=m.toString();return {action_type:c('MercuryActionType').IS_PIN_PROTECTED,thread_fbid:o,is_pin_protected:n};}f.exports={transform:h};}),null);
__d('MercurySyncDeliveryReceiptTransformer',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return {delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:'',thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:'',time:parseInt(i.deliveredWatermarkTimestampMs,10)}]};}f.exports={transform:h};}),null);
__d('MercurySyncMarkFolderSeenTransformer',['MercuryGlobalActionType','MessagingTag'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.folders.map(function(j){return {action_type:c('MercuryGlobalActionType').MARK_ALL_SEEN,folder:c('MessagingTag').IRIS_MAPPING[j],timestamp:parseInt(i.timestamp,10)};});}f.exports={transform:h};}),null);
__d('MercurySyncMarkReadTransformer',['MercuryActionType','MercuryGlobalActionType','MessagingTag'],(function a(b,c,d,e,f,g){'use strict';function h(i){if(i.folders&&i.folders.length>0)return i.folders.map(function(j){return {action_type:c('MercuryGlobalActionType').MARK_ALL_READ,action_id:null,folder:c('MessagingTag').IRIS_MAPPING[j],timestamp:parseInt(i.watermarkTimestamp,10)};});return i.threadKeys.map(function(j){return {action_type:c('MercuryActionType').CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:true,timestamp:parseInt(i.watermarkTimestamp,10),folder:c('MessagingTag').INBOX};});}f.exports={transform:h};}),null);
__d('MercurySyncMarkUnreadTransformer',['MercuryActionType','MessagingTag'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.threadKeys.map(function(j){return {action_type:c('MercuryActionType').CHANGE_READ_STATUS,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId,mark_as_read:false,timestamp:parseInt(i.watermarkTimestamp,10),folder:c('MessagingTag').INBOX};});}f.exports={transform:h};}),null);
__d('MercurySyncMessageDeleteTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').DELETE_MESSAGES,message_ids:i.messageIds,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId};}f.exports={transform:h};}),null);
__d('MercurySyncPagesManagerEventTransformer',['MercuryActionType','PagesMessagingEventType'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=JSON.parse(i.jsonBlob),k=j&&j.type;if(!k)return undefined;switch(k){case c('PagesMessagingEventType').FLAG:var l=!!(j&&j.flagData&&j.flagData.state),m={action_type:c('MercuryActionType').CHANGE_FLAG,mark_as_flag:l,other_user_fbid:i.threadKey.otherUserFbId,thread_fbid:i.threadKey.threadFbId};return m;default:return undefined;}}f.exports={transform:h};}),null);
__d('MercurySyncParticipantLeftGroupThreadTransformer',['MercuryActionType','MercuryIDs','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(j.leftParticipantFbId)]};k.log_message_type=c('MercuryLogMessageType').UNSUBSCRIBE;return k;}f.exports={transform:h};}),null);
__d('MercurySyncParticipantsAddedToGroupThreadTransformer',['MercuryActionType','MercuryIDs','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={added_participants:j.addedParticipants.map(function(l){return c('MercuryIDs').getParticipantIDFromUserID(l.userFbId);})};k.log_message_type=c('MercuryLogMessageType').SUBSCRIBE;return k;}f.exports={transform:h};}),null);
__d('MercurySyncRTCEventLogTransformer',['MercuryActionType','MercuryIDs','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j),l=j.messageMetadata.actorFbId,m=l===i?j.messageMetadata.threadKey.otherUserFbId:i;k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={answered:j.duration>0,callee:c('MercuryIDs').getParticipantIDFromUserID(m),caller:c('MercuryIDs').getParticipantIDFromUserID(l)};k.log_message_type=c('MercuryLogMessageType').VIDEO_CALL;return k;}f.exports={transform:h};}),null);
__d('MercurySyncReadReceiptTransformer',[],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={watermark:parseInt(i.watermarkTimestampMs,10),action:parseInt(i.actionTimestampMs,10)},k=i.threadKey.otherUserFbId||i.actorFbId,l=i.threadKey.otherUserFbId||i.threadKey.threadFbId,m={roger:{}};m.roger[l]={};m.roger[l][k]=j;return m;}f.exports={transform:h};}),null);
__d('MercurySyncReplaceMessageTransformer',['MercuryActionType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){j=Object.assign({},j.newMessage,j);return Object.assign(c('MercurySyncNewMessageTransformer').transform(i,j),{action_type:c('MercuryActionType').REPLACE_MESSAGE,replaced_message_id:j.replacedMessageId});}f.exports={transform:h};}),null);
__d('MercurySyncRtcCallDataTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.messageMetadata.threadKey&&i.messageMetadata.threadKey.threadFbId?i.messageMetadata.threadKey.threadFbId.toString():undefined,k=i.initiator&&i.initiator.userFbId?i.initiator.userFbId.toString():undefined;return {action_type:c('MercuryActionType').UPDATE_RTC_CALL_DATA,thread_fbid:j,call_state:i.callState,server_info_data:i.serverInfoData,initiator_fbid:k};}f.exports={transform:h};}),null);
__d('MercurySyncThreadActionTransformer',['MercuryActionType','MessagingThreadAction'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={action_type:c('MercuryActionType').CHANGE_ARCHIVED_STATUS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,archived:i.action===c('MessagingThreadAction').ACTION_ARCHIVED};return j;}f.exports={transform:h};}),null);
__d('MercurySyncThreadAdminsAddToGroupTransformer',['MercuryActionType','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').ADD_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,added_admin_ids:i.addedAdmins.map(function(j){return c('MercuryIDs').getParticipantIDFromUserID(j.userFbId);})};}f.exports={transform:h};}),null);
__d('MercurySyncThreadAdminsRemovedFromGroupTransformer',['MercuryActionType','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').REMOVE_GROUP_ADMINS,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_admin_ids:i.removedAdminFbIds.map(function(j){return c('MercuryIDs').getParticipantIDFromUserID(j);})};}f.exports={transform:h};}),null);
__d('MercurySyncThreadApprovalModeTransformer',['MercuryActionType','MessengerApprovalModeTypes'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').APPROVAL_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,approval_mode:c('MessengerApprovalModeTypes')[i.mode]};}f.exports={transform:h};}),null);
__d('MercurySyncThreadApprovalQueueTransformer',['MercuryActionType','MercuryIDs','MessengerApprovalQueueTypes'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('MercuryIDs').getParticipantIDFromUserID(i.recipientFbId);return {action_type:c('MercuryActionType').APPROVAL_QUEUE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,removed_id:i.action===c('MessengerApprovalQueueTypes').REMOVED?j:null,added_id:i.action===c('MessengerApprovalQueueTypes').REQUESTED?j:null};}f.exports={transform:h};}),null);
__d('MercurySyncThreadDeleteTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.threadKeys.map(function(j){return {action_type:c('MercuryActionType').DELETE_THREAD,other_user_fbid:j.otherUserFbId,thread_fbid:j.threadFbId};});}f.exports={transform:h};}),null);
__d('MercurySyncThreadJoinableModeTransformer',['MercuryActionType','MessengerJoinableModeType'],(function a(b,c,d,e,f,g){'use strict';function h(i){return {action_type:c('MercuryActionType').JOINABLE_MODE,action_id:null,thread_fbid:i.messageMetadata.threadKey.threadFbId,joinable_mode:{mode:c('MessengerJoinableModeType')[i.mode],link:i.link}};}f.exports={transform:h};}),null);
__d('MercurySyncThreadMuteSettingsTransformer',['MercuryActionType'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j={action_type:c('MercuryActionType').CHANGE_MUTE_SETTINGS,thread_fbid:i.threadKey.threadFbId,other_user_fbid:i.threadKey.otherUserFbId,mute_until:parseInt(i.expireTime,10)};return j;}f.exports={transform:h};}),null);
__d('MercurySyncThreadNameTransformer',['MercuryActionType','MercuryLogMessageType','MercurySyncNewMessageTransformer'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=c('MercurySyncNewMessageTransformer').transform(i,j);k.action_type=c('MercuryActionType').LOG_MESSAGE;k.log_message_body=j.messageMetadata.adminText;k.log_message_data={name:j.name};k.log_message_type=c('MercuryLogMessageType').THREAD_NAME;return k;}f.exports={transform:h};}),null);
__d('MercurySyncDispatcher',['MercuryDelayedDispatcher','MercuryGlobalActionType','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySyncThreadAdminsAddToGroupTransformer','MercurySyncThreadAdminsRemovedFromGroupTransformer','MercurySyncAdminTextMessageTransformer','MercurySyncClientPayloadTransformer','MercurySyncDeliveryReceiptTransformer','MercurySyncMarkFolderSeenTransformer','MercurySyncMarkReadTransformer','MercurySyncMarkUnreadTransformer','MercurySyncMessageDeleteTransformer','MercurySyncNewMessageTransformer','MercurySyncReadReceiptTransformer','MercurySyncPagesManagerEventTransformer','MercurySyncParticipantLeftGroupThreadTransformer','MercurySyncParticipantsAddedToGroupThreadTransformer','MercurySyncRTCEventLogTransformer','MercurySyncThreadDeleteTransformer','MercurySyncThreadMuteSettingsTransformer','MercurySyncThreadNameTransformer','MercurySyncThreadActionTransformer','MercurySyncReplaceMessageTransformer','MercurySyncThreadJoinableModeTransformer','MercurySyncThreadApprovalModeTransformer','MercurySyncThreadApprovalQueueTransformer','MercurySyncRtcCallDataTransformer','MercurySyncDeltaTypes','MercurySingletonProvider','MontageActions'],(function a(b,c,d,e,f,g){'use strict';var h='FOLDER_MONTAGE';i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};function i(k){this.$MercurySyncDispatcher1=k;this.$MercurySyncDispatcher2=c('MercuryDelayedDispatcher').getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher3=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercurySyncDispatcher1);}i.prototype.process=function(k){var l=void 0,m=void 0;switch(k['class']){case c('MercurySyncDeltaTypes').NewMessage:l=c('MercurySyncNewMessageTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ReplaceMessage:l=c('MercurySyncReplaceMessageTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').DeliveryReceipt:l=c('MercurySyncDeliveryReceiptTransformer').transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c('MercurySyncDeltaTypes').MarkRead:l=c('MercurySyncMarkReadTransformer').transform(k);var n=[],o=[];l.forEach(function(p){if(p.action_type===c('MercuryGlobalActionType').MARK_ALL_READ){n.push(p);}else o.push(p);});n.length&&this.$MercurySyncDispatcher5(n);o.length&&this.$MercurySyncDispatcher6(o);break;case c('MercurySyncDeltaTypes').MarkUnread:l=c('MercurySyncMarkUnreadTransformer').transform(k);this.$MercurySyncDispatcher6(l);break;case c('MercurySyncDeltaTypes').ParticipantLeftGroupThread:l=c('MercurySyncParticipantLeftGroupThreadTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ParticipantsAddedToGroupThread:l=c('MercurySyncParticipantsAddedToGroupThreadTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').RTCEventLog:l=c('MercurySyncRTCEventLogTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ThreadName:l=c('MercurySyncThreadNameTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ReadReceipt:l=c('MercurySyncReadReceiptTransformer').transform(k);this.$MercurySyncDispatcher3.handleUpdate(l);break;case c('MercurySyncDeltaTypes').AdminTextMessage:l=c('MercurySyncAdminTextMessageTransformer').transform(this.$MercurySyncDispatcher1,k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').MessageDelete:m=k.threadKey.threadFbId;if(m&&k.folder&&k.folder===h){c('MontageActions').requestUpdate(m);}else{l=c('MercurySyncMessageDeleteTransformer').transform(k);this.$MercurySyncDispatcher4(l);}break;case c('MercurySyncDeltaTypes').ThreadAction:l=c('MercurySyncThreadActionTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ThreadDelete:l=c('MercurySyncThreadDeleteTransformer').transform(k);this.$MercurySyncDispatcher6(l);break;case c('MercurySyncDeltaTypes').AdminAddedToGroupThread:l=c('MercurySyncThreadAdminsAddToGroupTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').AdminRemovedFromGroupThread:l=c('MercurySyncThreadAdminsRemovedFromGroupTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ThreadMuteSettings:l=c('MercurySyncThreadMuteSettingsTransformer').transform(k);this.$MercurySyncDispatcher6([l]);break;case c('MercurySyncDeltaTypes').PagesManagerEvent:l=c('MercurySyncPagesManagerEventTransformer').transform(k);if(!l)return;this.$MercurySyncDispatcher6([l]);break;case c('MercurySyncDeltaTypes').JoinableMode:l=c('MercurySyncThreadJoinableModeTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ApprovalMode:l=c('MercurySyncThreadApprovalModeTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ApprovalQueue:l=c('MercurySyncThreadApprovalQueueTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').ClientPayload:l=c('MercurySyncClientPayloadTransformer').transform(k);if(!l)return;this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').GenieMessage:l=c('MercurySyncNewMessageTransformer').transform(this.$MercurySyncDispatcher1,k.deltaNewMessage);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').MontageMessage:m=k.newMessage.messageMetadata.actorFbId;if(m)c('MontageActions').requestUpdate(m);break;case c('MercurySyncDeltaTypes').RtcCallData:l=c('MercurySyncRtcCallDataTransformer').transform(k);this.$MercurySyncDispatcher4(l);break;case c('MercurySyncDeltaTypes').MarkFolderSeen:l=c('MercurySyncMarkFolderSeenTransformer').transform(k);this.$MercurySyncDispatcher5(l);break;default:break;}};i.prototype.$MercurySyncDispatcher4=function(k){var l=k.other_user_fbid||k.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[k],payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE},l);};i.prototype.$MercurySyncDispatcher5=function(k){this.$MercurySyncDispatcher3.handleUpdate({global_actions:k,payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE});};i.prototype.$MercurySyncDispatcher6=function(k){this.$MercurySyncDispatcher3.handleUpdate({actions:k,payload_source:c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE});};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercurySyncDataFetcherImpl',['Promise','AsyncRequest','MessagingConfig','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('MessagingConfig').syncFetchRequestTimeoutMs;function i(k){return new (c('Promise'))(function(l,m){j(k,l,m,0);});}function j(k,l,m,n){if(n>c('MessagingConfig').syncFetchRetries){m();return;}var o=n===0?0:c('MessagingConfig').syncFetchInitialTimeoutMs*Math.pow(c('MessagingConfig').syncFetchTimeoutMultiplier,n);c('setTimeoutAcrossTransitions')(function(){var p=false,q=function r(){if(p)return;p=true;j(k,l,m,n+1);};new (c('AsyncRequest'))().setURI(k).setHandler(function(r){p=true;l(r);}).setErrorHandler(q).setTimeoutHandler(h,q).setAllowCrossPageTransition(true).send();},o);}f.exports={fetch:i};}),null);
__d('MercurySyncDataFetcher',['Promise','LogHistory','MessagingConfig','MercurySyncDataFetcherImpl','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=c('LogHistory').getInstance('mercury_sync_data_fetcher');function i(){var l=0;for(var m=0;m<c('MessagingConfig').syncFetchRetries;m++){var n=m===0?0:c('MessagingConfig').syncFetchInitialTimeoutMs*Math.pow(c('MessagingConfig').syncFetchTimeoutMultiplier,m);l+=n+c('MessagingConfig').syncFetchRequestTimeoutMs;}return l;}var j=i();function k(l){return new (c('Promise'))(function(m,n){var o=function q(){h.error('fetch_timeout',JSON.stringify({timeout:j,uri:l.toString()}));n();},p=c('setTimeoutAcrossTransitions')(o,j);c('MercurySyncDataFetcherImpl').fetch(l).done(function(){clearTimeout(p);m.apply(undefined,arguments);},o);});}f.exports={fetch:k,getMaxTimeoutMs:i};}),null);
__d("XMercuryFetchMessageController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/fetch_message\/",{other_user_or_thread_fbid:{type:"Int",required:true},mid:{type:"String",required:true}});}),null);
__d("XMercuryInvalidateGlobalStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/invalidate_global_state\/",{cachius_min_seq_id:{type:"Int"}});}),null);
__d("XMercuryInvalidateThreadStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/mercury\/invalidate_thread_state\/",{other_user_or_thread_fbid:{type:"Int",required:true},num_messages:{type:"Int",required:true}});}),null);
__d('MercurySyncDFFDataFetcher',['Promise','ActorURI','AsyncRequest','MercuryConfig','MercuryMessages','MercuryThreads','MercuryThreadIDMap','MercurySingletonProvider','MercurySyncDataFetcher','XMercuryFetchMessageController','XMercuryInvalidateGlobalStateController','XMercuryInvalidateThreadStateController'],(function a(b,c,d,e,f,g){'use strict';function h(j){this.$MercurySyncDFFDataFetcher1=j;this.__messages=c('MercuryMessages').getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threads=c('MercuryThreads').getForFBID(this.$MercurySyncDFFDataFetcher1);this.__threadIDMap=c('MercuryThreadIDMap').getForFBID(this.$MercurySyncDFFDataFetcher1);}h.getForFBID=function(j){return i.getForFBID(j);};h.get=function(){return i.get();};h.prototype.fetchInvalidateGlobalState=function(j){var k=c('XMercuryInvalidateGlobalStateController').getURIBuilder();if(c('MercuryConfig').MessengerCachiusUseClientSeqIDWWW)k.setInt('cachius_min_seq_id',j);var l=k.getURI(),m=c('ActorURI').create(l,this.$MercurySyncDFFDataFetcher1);return c('MercurySyncDataFetcher').fetch(m);};h.prototype.fetchInvalidateThreadState=function(j,k){var l=11,m=3,n=j||k,o=this.__threadIDMap.getClientIDFromServerIDNow(n);if(!o)return c('Promise').resolve({getPayload:function s(){return {};}});var p=m+this.__messages.getCurrentlyLoadedMessages(o).length,q=c('XMercuryInvalidateThreadStateController').getURIBuilder().setInt('other_user_or_thread_fbid',n).setInt('num_messages',Math.max(p,l)).getURI(),r=c('ActorURI').create(q,this.$MercurySyncDFFDataFetcher1);return c('MercurySyncDataFetcher').fetch(r);};h.prototype.fetchInvalidateMessage=function(j,k,l){var m=c('XMercuryFetchMessageController').getURIBuilder().setInt('other_user_or_thread_fbid',j||k).setString('mid',l).getURI(),n=c('ActorURI').create(m,this.$MercurySyncDFFDataFetcher1);return c('MercurySyncDataFetcher').fetch(n);};var i=new (c('MercurySingletonProvider'))(h);f.exports=h;}),null);
__d('MercurySyncForcedFetchHandler',['Promise','MercurySingletonProvider','MercurySyncDFFDataFetcher','MercuryMessages','MercuryThreadIDMap'],(function a(b,c,d,e,f,g){'use strict';function h(k){return {getPayload:function l(){return {sequence_id:k};}};}i.getForFBID=function(k){return j.getForFBID(k);};i.get=function(){return j.get();};function i(k){this.$MercurySyncForcedFetchHandler1=k;this.$MercurySyncForcedFetchHandler2=c('MercuryMessages').getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler3=c('MercuryThreadIDMap').getForFBID(this.$MercurySyncForcedFetchHandler1);this.$MercurySyncForcedFetchHandler4=c('MercurySyncDFFDataFetcher').getForFBID(this.$MercurySyncForcedFetchHandler1);}i.prototype.processMessageDFF=function(k,l,m,n){if(n){var o=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),p=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(o);if(p===undefined)return c('Promise').resolve(h(k));var q=this.$MercurySyncForcedFetchHandler2.getMessagesFromIDs([m]);if(q.length===0)return c('Promise').resolve(h(k));}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateMessage(l.otherUserFbId,l.threadFbId,m);};i.prototype.processThreadDFF=function(k,l,m){if(m){var n=l.otherUserFbId!==undefined?l.otherUserFbId.toString():l.threadFbId.toString(),o=this.$MercurySyncForcedFetchHandler3.getClientIDFromServerIDNow(n);if(o===undefined)return c('Promise').resolve(h(k));}return this.$MercurySyncForcedFetchHandler4.fetchInvalidateThreadState(l.otherUserFbId,l.threadFbId);};i.prototype.processGlobalDFF=function(k){return this.$MercurySyncForcedFetchHandler4.fetchInvalidateGlobalState(k);};var j=new (c('MercurySingletonProvider'))(i);f.exports=i;}),null);
__d('MercurySyncDeltaHandler',['invariant','Arbiter','ChannelConstants','ChatReliabilityInstrumentation','LogHistory','MercuryConfig','MessagingConfig','MercuryDelayedDispatcher','MercuryPayloadSource','MercurySyncConstants','MercurySyncDeltaHolder','MercurySyncDeltaTypes','MercurySyncDispatcher','MercurySyncForcedFetchHandler','MercurySyncHolesTypedLogger','MercuryServerPayloadPreprocessor','MercurySyncTopicType','MercurySingletonProvider'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('LogHistory').getInstance('mercury_sync_delta_handler'),j=c('MessagingConfig').syncFetchRetries||0;k.getForFBID=function(m){return l.getForFBID(m);};k.get=function(){return l.get();};function k(m){this.$MercurySyncDeltaHandler1=m;this.$MercurySyncDeltaHandler2=c('MercurySyncDispatcher').getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler3=c('MercurySyncForcedFetchHandler').getForFBID(this.$MercurySyncDeltaHandler1);this.__payloadPreprocessor=c('MercuryServerPayloadPreprocessor').getForFBID(this.$MercurySyncDeltaHandler1);this.__delayedDispatcher=c('MercuryDelayedDispatcher').getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler4=c('MercurySyncDeltaHolder').getForFBID(this.$MercurySyncDeltaHandler1);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler6=[];this.$MercurySyncDeltaHandler11=0;i.debug('constructor',JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));c('Arbiter').subscribe('MercurySyncDeltaHandler/initSeqID',function(n,o){i.debug('initSeqID',JSON.stringify(o));var p=o&&o.seqID,q=o&&o.fbid;if(!q)return;if(q!==this.$MercurySyncDeltaHandler1)return;if(p){this.$MercurySyncDeltaHandler4.updateLastSeqID(p);}else this.$MercurySyncDeltaHandler4.updateLastSeqID(0);this.$MercurySyncDeltaHandler13();this.$MercurySyncDeltaHandler7=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('deltaflow'),function(r,s){if(!this.$MercurySyncDeltaHandler12)this.$MercurySyncDeltaHandler13();}.bind(this));}.bind(this));}k.prototype.$MercurySyncDeltaHandler13=function(){i.debug('setUpSubscriptionsToRealTimeUpdates',JSON.stringify({fbid:this.$MercurySyncDeltaHandler1}));this.$MercurySyncDeltaHandler9=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('delta'),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta,q=n&&n.obj&&n.obj.iseq;if(!p||!q)return;this.$MercurySyncDeltaHandler14(q,c('MercurySyncTopicType').DELTA);this.$MercurySyncDeltaHandler15(q,p);this.$MercurySyncDeltaHandler4.push(q,p);this.$MercurySyncDeltaHandler16();}.bind(this));this.$MercurySyncDeltaHandler10=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('deltaflowreject'),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o)if(o.toString()!==this.$MercurySyncDeltaHandler1)return;if(this.$MercurySyncDeltaHandler12)this.$MercurySyncDeltaHandler17();}.bind(this));this.$MercurySyncDeltaHandler8=c('Arbiter').subscribe(c('ChannelConstants').getArbiterType(c('ChannelConstants').FAKE_DFF),function(m,n){var o=n&&n.obj&&n.obj.queue;if(o&&o.toString()!==this.$MercurySyncDeltaHandler1)return;var p=n&&n.obj&&n.obj.delta;if(!p)return;this.$MercurySyncDeltaHandler6.push(p);this.$MercurySyncDeltaHandler16();}.bind(this));this.$MercurySyncDeltaHandler12=true;};k.prototype.$MercurySyncDeltaHandler16=function(){if(this.$MercurySyncDeltaHandler5)return;if(this.$MercurySyncDeltaHandler6.length>0){var m=this.$MercurySyncDeltaHandler6.shift();this.$MercurySyncDeltaHandler18(this.$MercurySyncDeltaHandler4.getLastSeqID(),m);this.$MercurySyncDeltaHandler16();}var n=this.$MercurySyncDeltaHandler4.peek();if(!n)return;var o=n-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o===1){var p=this.$MercurySyncDeltaHandler4.pop();if(!p)return;var q=p.seqID,r=p.delta;this.$MercurySyncDeltaHandler18(q,r);this.$MercurySyncDeltaHandler16();}else if(o>1){this.$MercurySyncDeltaHandler19();}else{this.$MercurySyncDeltaHandler4.pop();this.$MercurySyncDeltaHandler16();}};k.prototype.$MercurySyncDeltaHandler18=function(m,n){this.$MercurySyncDeltaHandler4.updateLastSeqID(m);if(n['class']===c('MercurySyncDeltaTypes').ForcedFetch){i.debug('DFF',JSON.stringify(n));if(n.threadKey!==undefined&&n.messageId===undefined){this.$MercurySyncDeltaHandler20(m,n);}else if(n.threadKey!==undefined&&n.messageId!==undefined){this.$MercurySyncDeltaHandler21(m,n);}else{c('ChatReliabilityInstrumentation').logDFF_DELTA_INIT(JSON.stringify(n));this.$MercurySyncDeltaHandler22(m);}}else this.$MercurySyncDeltaHandler2.process(n);};k.prototype.$MercurySyncDeltaHandler19=function(){var m=JSON.stringify({$MercurySyncDeltaHandler23:this.$MercurySyncDeltaHandler4.getLastSeqID(),nextSeqID:this.$MercurySyncDeltaHandler4.peek()});i.warn('hole',m);var n=this.$MercurySyncDeltaHandler4.peek();!!n||h(0);var o=n-1;c('ChatReliabilityInstrumentation').logDFF_HOLE_INIT(m);this.$MercurySyncDeltaHandler22(o);};k.prototype.$MercurySyncDeltaHandler24=function(m,n,o,p){!this.$MercurySyncDeltaHandler5||h(0);this.$MercurySyncDeltaHandler5=true;i.debug('_scheduleDataFetch:start',JSON.stringify({seqID:m}));n().done(function(q){i.debug('_scheduleDataFetch:success',JSON.stringify({seqID:m}));o(m,q);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler16();}.bind(this),function(){i.error('_scheduleDataFetch:failure',JSON.stringify({seqID:m}));p(m);this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler16();}.bind(this));};k.prototype.$MercurySyncDeltaHandler22=function(m){this.$MercurySyncDeltaHandler24(undefined,function(){return this.$MercurySyncDeltaHandler3.processGlobalDFF(m);}.bind(this),function(n,o){var p=o.getPayload();this.__payloadPreprocessor.handleUpdate(p);if(p.sequence_id){i.debug('_initiateGlobalDFF:success',JSON.stringify({seqID:p.sequence_id}));this.$MercurySyncDeltaHandler4.updateLastSeqID(p.sequence_id);}this.$MercurySyncDeltaHandler11=0;c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RECOVER);}.bind(this),function(){i.error('_initiateGlobalDFF:failure','');if(this.$MercurySyncDeltaHandler11>=j){if(this.$MercurySyncDeltaHandler12)this.$MercurySyncDeltaHandler17();if(c('MercuryConfig').chatDFFUpdateSeqID)this.$MercurySyncDeltaHandler4.updateLastSeqID(m);}else{this.$MercurySyncDeltaHandler11++;c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RETRY);i.debug('_initiateGlobalDFF:retry','');this.$MercurySyncDeltaHandler5=false;this.$MercurySyncDeltaHandler22(m);}}.bind(this));};k.prototype.$MercurySyncDeltaHandler20=function(m,n){this.$MercurySyncDeltaHandler24(m,function(){return this.$MercurySyncDeltaHandler3.processThreadDFF(m,n.threadKey,n.isLazy);}.bind(this),function(o,p){this.__payloadPreprocessor.handleUpdate(p.getPayload());this.$MercurySyncDeltaHandler4.updateLastSeqID(o);}.bind(this),function(){i.error('_initiateThreadDFF:failure',JSON.stringify(n));var o=babelHelpers['extends']({},n);delete o.threadKey;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o);}.bind(this));};k.prototype.$MercurySyncDeltaHandler21=function(m,n){this.$MercurySyncDeltaHandler24(m,function(){return this.$MercurySyncDeltaHandler3.processMessageDFF(m,n.threadKey,n.messageId,n.isLazy);}.bind(this),function(o,p){var q=p.getPayload(),r=q.other_user_fbid?q.other_user_fbid:q.thread_fbid,s=[babelHelpers['extends']({},q)],t=c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:s,payload_source:t},r);this.$MercurySyncDeltaHandler4.updateLastSeqID(o);}.bind(this),function(){i.error('_initiateMessageDFF:failure',JSON.stringify(n));var o=babelHelpers['extends']({},n);delete o.messageId;this.$MercurySyncDeltaHandler4.updateLastSeqID(m-1);this.$MercurySyncDeltaHandler4.push(m,o);}.bind(this));};k.prototype.$MercurySyncDeltaHandler14=function(m,n){var o=m-this.$MercurySyncDeltaHandler4.getLastSeqID();if(o!==1&&o!==0){if(!c('MercuryConfig').WWWSyncHolesLogging)return;new (c('MercurySyncHolesTypedLogger'))().setSeqID(m).setDifference(o).setTopicType(n).log();}};k.prototype.$MercurySyncDeltaHandler15=function(m,n){switch(n['class']){case c('MercurySyncDeltaTypes').NewMessage:i.debug('message_delta',JSON.stringify({seqID:m,threadKey:n.messageMetadata.threadKey,messageId:n.messageMetadata.messageId}));break;case c('MercurySyncDeltaTypes').ReadReceipt:i.debug('read_receipt_delta',JSON.stringify({seqID:m,threadKey:n.threadKey,actionTimestampMs:n.actionTimestampMs,watermarkTimestampMs:n.watermarkTimestampMs}));break;case c('MercurySyncDeltaTypes').DeliveryReceipt:i.debug('delivery_receipt_delta',JSON.stringify({seqID:m,deliveredWatermarkTimestampMs:n.deliveredWatermarkTimestampMs,messageIds:n.messageIds}));break;}};k.prototype.$MercurySyncDeltaHandler17=function(){this.$MercurySyncDeltaHandler12=false;c('Arbiter').unsubscribe(this.$MercurySyncDeltaHandler9);c('Arbiter').unsubscribe(this.$MercurySyncDeltaHandler8);c('Arbiter').unsubscribe(this.$MercurySyncDeltaHandler10);c('Arbiter').inform(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE);};var l=new (c('MercurySingletonProvider'))(k);f.exports=k;}),null);
__d('MercurySyncEnvironment',['Arbiter','ChannelInitialData','CurrentUser','MercurySyncDeltaHandler'],(function a(b,c,d,e,f,g){'use strict';function h(){if(!c('ChannelInitialData').channelConfig)return;c('MercurySyncDeltaHandler').get();c('Arbiter').inform('MercurySyncDeltaHandler/initSeqID',{fbid:c('CurrentUser').getAccountID(),seqID:c('ChannelInitialData').channelConfig.sequenceId});}f.exports={setUp:h};}),null);
__d('MercuryUnreadState',['invariant','MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonProvider','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],(function a(b,c,d,e,f,g,h){'use strict';var i=(c('MercuryFolders').getSupportedFolders()||[]).filter(function(p){return p!==c('MessagingTag').ACTION_ARCHIVED;}),j='unread_thread_hash',k='unseen_thread_list',l=c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,m=c('LogHistory').getInstance('mercury_unread_state');n.getForFBID=function(p){return o.getForFBID(p);};n.get=function(){return o.get();};function n(p){this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c('MercuryServerRequests').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c('MercuryThreadIDMap').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c('MercuryThreadInformer').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c('MercuryThreads').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c('MercuryDispatcher').getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new (c('KeyedCallbackManager'))();}.bind(this));this.$MercuryUnreadState6.subscribe('update-unread',this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe('update-thread-ids',function(q,r){this.$MercuryUnreadState13(r);}.bind(this));}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error('unguarded_unread_count_fetch','{}');return 0;}return this.$MercuryUnreadState14(p);};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l;};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);};n.prototype.getIsThreadUnread=function(p,q){var r=q||c('MessagingTag').INBOX,s=this.$MercuryUnreadState15(r);return !!(s&&s[p]);};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q));};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p);};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j);};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q){return q.length;}else return this.$MercuryUnreadState9[p];};n.prototype.$MercuryUnreadState12=function(p,q){var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c('createObjectFrom')(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState();}.bind(this));(q.message_counts||[]).forEach(function(s){if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState();}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c('MercuryGlobalActionType').MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp);}.bind(this));(q.actions||[]).forEach(function(s){var t=c('MercuryActionType'),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD){i.forEach(function(x){this.$MercuryUnreadState21(x,v);}.bind(this));}else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c('MercuryFolders').getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v);}.bind(this));}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS){if(s.mark_as_read){this.$MercuryUnreadState21(r,v,s.timestamp);}else this.$MercuryUnreadState22(r,v,s.timestamp);}else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp);}}.bind(this));};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));};n.prototype.$MercuryUnreadState21=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r;}var u=s[q];if(r&&typeof u=='number'&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState();}}.bind(this));};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState();};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3);};n.prototype.$MercuryUnreadState13=function(p){i.forEach(function(q){var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s];}}this.$MercuryUnreadState16(q,r);}.bind(this));};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c('MercuryFolders').getFromMeta(q):p.folder?p.folder:'';};n.prototype.$MercuryUnreadState18=function(p){return c('arrayContains')(i,p);};var o=new (c('MercurySingletonProvider'))(n);f.exports=n;}),null);
__d('MessengerComposerActions',['MessengerDispatcher','keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({ADD_TOKEN:null,REMOVE_TOKEN:null,FOCUS_COMPOSER:null,FOCUS_TYPEAHEAD:null,EXIT_COMPOSE_STATE:null,MOVE_DRAFT:null}),i={Types:h,addToken:function j(k){c('MessengerDispatcher').dispatch({type:h.ADD_TOKEN,entry:k});},moveDraftToNextThread:function j(k){c('MessengerDispatcher').dispatch({type:h.MOVE_DRAFT,threadID:k});},removeToken:function j(k){c('MessengerDispatcher').dispatch({type:h.REMOVE_TOKEN,entry:k});},focusComposer:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_COMPOSER});},focusTypeahead:function j(){c('MessengerDispatcher').dispatch({type:h.FOCUS_TYPEAHEAD});},exitComposeState:function j(){c('MessengerDispatcher').dispatch({type:h.EXIT_COMPOSE_STATE});}};f.exports=i;}),null);
__d('MessengerComposerState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Record({step:null,recipients:c('immutable').List()});h.__TCmeta={type:'MessengerComposerState'};f.exports=h;}),null);
__d('MessengerComposerSteps',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';var h=c('keyMirror')({NULL:null,SELECT_RECIPIENTS:null,COMPOSE:null});f.exports=h;}),null);
__d('MessengerComposerStore',['EditorState','immutable','MessengerActions','MessengerComposerActions','MessengerComposerState','MessengerComposerSteps','MessengerConstants','MessengerDispatcher','MessengerEditorStateManager','MessengerStateStore','MessengerStore','MessengerView'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=new (c('MessengerComposerState'))({step:c('MessengerComposerSteps').NULL,recipients:c('immutable').List()});h=babelHelpers.inherits(k,c('MessengerStore'));i=h&&h.prototype;function k(){i.constructor.call(this);this.$MessengerComposerStore1=j;}k.prototype.getState=function(){return this.$MessengerComposerStore1;};k.prototype.__onDispatch=function(l){c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var m=c('MessengerStateStore').getState().detailView,n=this.$MessengerComposerStore1.recipients,o=this.$MessengerComposerStore1.step,p=null,q=null;switch(l.type){case c('MessengerComposerActions').Types.ADD_TOKEN:if(n.some(function(v){return v.getUniqueID()===l.entry.getUniqueID();}))break;p=n.push(l.entry);break;case c('MessengerComposerActions').Types.REMOVE_TOKEN:var r=l.entry.getUniqueID(),s=n.findIndex(function(v){return v.getUniqueID()===r;});if(s!==-1)p=n['delete'](s);break;case c('MessengerComposerActions').Types.FOCUS_COMPOSER:if(o===c('MessengerComposerSteps').SELECT_RECIPIENTS)q=c('MessengerComposerSteps').COMPOSE;break;case c('MessengerComposerActions').Types.FOCUS_TYPEAHEAD:if(o===c('MessengerComposerSteps').COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerActions').Types.REPLACE_STATE:var t=c('MessengerStateStore').getPrevState().detailView;if(t!==c('MessengerView').DETAIL.COMPOSE&&m===c('MessengerView').DETAIL.COMPOSE)q=c('MessengerComposerSteps').SELECT_RECIPIENTS;break;case c('MessengerComposerActions').Types.MOVE_DRAFT:c('MessengerEditorStateManager').set(l.threadID,c('MessengerEditorStateManager').get(c('MessengerConstants').NEW_THREAD_KEY));break;case c('MessengerComposerActions').Types.EXIT_COMPOSE_STATE:var u=c('EditorState').createEmpty();setTimeout(function(){c('MessengerEditorStateManager').set(c('MessengerConstants').NEW_THREAD_KEY,c('EditorState').forceSelection(u,u.getSelection()));},0);q=c('MessengerComposerSteps').NULL;p=c('immutable').List();break;}if(p||q){this.$MessengerComposerStore1=new (c('MessengerComposerState'))({step:q||o,recipients:p||n});this.emitChange();}};f.exports=new k();}),null);
__d('MessengerMDotMeReferralStore',['MessengerActions','MessengerStore'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('MessengerStore'));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);this.$MessengerMDotMeReferralStore1={refCode:null,refThreadID:null};}j.prototype.getState=function(){'use strict';return this.$MessengerMDotMeReferralStore1;};j.prototype.__onDispatch=function(k){'use strict';switch(k.type){case c('MessengerActions').Types.UPDATE_MDOT_ME:this.$MessengerMDotMeReferralStore1.refCode=k.refCode;this.$MessengerMDotMeReferralStore1.refThreadID=k.refThreadID;this.emitChange();}};f.exports=new j();}),null);
__d('MessengerPage',['EventEmitter','EventEmitterWithHolding','EventHolder','keyMirror','performanceAbsoluteNow'],(function a(b,c,d,e,f,g){'use strict';var h={Events:c('keyMirror')({APP_MOUNTED:null,DATA_INITIALIZED:null,JS_LOADED:null}),addRetroactiveListener:function j(k,l){return i.addRetroactiveListener(k,l);},emit:function j(k){i.emitAndHold(k,c('performanceAbsoluteNow')());},removeCurrentListener:function j(){i.removeCurrentListener();}},i=new (c('EventEmitterWithHolding'))(new (c('EventEmitter'))(),new (c('EventHolder'))());f.exports=h;}),null);
__d('FBRTCCallSummaryUploader',['Banzai','FBRTCCallSummary','FBRTCCallSummaryStore'],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c('FBRTCCallSummaryStore').getInstance();c('Banzai').subscribe(c('Banzai').SEND,function(){c('FBRTCCallSummary').logSavedSummaries(j);});}};f.exports=h;}),null);
__d('MessengerRTCMessageHandler',['Bootloader','FBRTCCallSummaryUploader','FBRTCMessageListener','FBRTCSupport'],(function a(b,c,d,e,f,g){'use strict';var h=null,i=null,j={init:function m(){if(c('FBRTCSupport').isReceiveWebrtcSupported()){c('FBRTCCallSummaryUploader').init();c('FBRTCMessageListener').init(false);c('FBRTCMessageListener').once('messageReceived',function(n){k();});c('FBRTCMessageListener').once('multiwayMessageReceived',function(n){l(n);});}}};function k(){if(!h)c('Bootloader').loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","MessengerRTCUnsupportedBrowserDialogController"],function(m,n,o,p){h=new m(n,p,o);c('FBRTCMessageListener').setMessageHandler(h.onMessageReceived,h);},'MessengerRTCMessageHandler');}function l(m){if(!i)c('Bootloader').loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(n,o){i=new n(o);c('FBRTCMessageListener').setMultiwayMessageHandler(i.onMessageReceived,i);i.onMessageReceived(m);},'MessengerRTCMessageHandler');}f.exports=j;}),null);
__d('MercurySearchContextResults',['KeyedCallbackManager','MercuryAPIArgsSource','MercuryIDs','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor','WebMessengerConstants'],(function a(b,c,d,e,f,g){var h=c('MercuryThreadIDMap').get(),i=c('MercuryServerPayloadPreprocessor').get(),j=new (c('KeyedCallbackManager'))(),k=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=c('WebMessengerConstants').MORE_SEARCH_CONTEXT_COUNT,m={getSearchContext:function q(r,s,t){if(r){var u=j.executeOrEnqueue(r,function(z){var aa=o(z,r);t(aa);}),v=j.getUnavailableResources(u);if(v.length){var w={message_id:r,limit:k+1},x=h.getServerIDFromClientIDNow(s),y=c('MercuryIDs').tokenize(s);if(y.type=='user'){w.other_user_fbid=x;}else w.thread_fbid=x;p(w);}return u;}},getMoreSearchContext:function q(r,s,t,u){if(r){var v=j.getResource(r);if(v){var w=t==c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP?v.up_message_ids:v.down_message_ids,x=w.getCurrentArraySize()+l,y=w.executeOrEnqueue(0,x,function(){var da=o(v,r);u(da);}),z=w.getUnavailableResources(y);if(z.length){var aa={message_id:r,limit:x,direction:t},ba=h.getServerIDFromClientIDNow(s),ca=c('MercuryIDs').tokenize(s);if(ca.type=='user'){aa.other_user_fbid=ba;}else aa.thread_fbid=ba;p(aa);}return y;}}},handleUpdate:function q(r){if(r.mercury_payload)i.handleUpdate(r.mercury_payload);var s=r.search_context||{};for(var t in s){var u=s[t],v=u.other_user_fbid||u.thread_fbid,w=h.getClientIDFromServerIDNow(v),x=!j.getResource(t),y=x?{thread_id:w,up_message_ids:new (c('RangedCallbackManager'))(),down_message_ids:new (c('RangedCallbackManager'))()}:j.getResource(t),z=x?k+1:l;if(u.up_message_ids&&(y.up_message_ids.getCurrentArraySize()===0||u.up_message_ids.length>=y.up_message_ids.getCurrentArraySize()))n(y.up_message_ids,u.up_message_ids,z);if(u.down_message_ids&&(y.down_message_ids.getCurrentArraySize()===0||u.down_message_ids.length>=y.down_message_ids.getCurrentArraySize()))n(y.down_message_ids,u.down_message_ids,z);if(x)j.setResource(t,y);}},unsubscribe:function q(r,s,t){if(s){var u=j.getResource(s);if(u){if(t==c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP){u.up_message_ids.unsubscribe(r);}else u.down_message_ids.unsubscribe(r);}else j.unsubscribe(r);}}};function n(q,r,s){var t=q.getCurrentArraySize(),u=r.length<t+s;if(r.length){q.removeAllResources();q.addResourcesWithoutSorting(r,0);}if(u)q.setReachedEndOfArray();}function o(q,r){var s=q.up_message_ids.hasReachedEndOfArray(),t=q.up_message_ids.getAllResources();if(!s)t.shift();var u=q.down_message_ids.hasReachedEndOfArray(),v=q.down_message_ids.getAllResources();if(!u)v.pop();return {thread_id:q.thread_id,message_id:r,up_message_ids:t,up_exhausted:s,down_message_ids:v,down_exhausted:u};}function p(q){q.client=c('MercuryAPIArgsSource').WEBMESSENGER;c('MercuryServerDispatcher').trySend('/ajax/mercury/search_context.php',q);}c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_context.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,handler:m.handleUpdate}});f.exports=m;}),null);
__d('MercurySearchSnippetResults',['MessengerEnvironment','MercuryAPIArgsSource','MercuryIDs','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','RangedCallbackManager','MercuryServerDispatcher','MercuryServerPayloadPreprocessor'],(function a(b,c,d,e,f,g){var h=c('MessengerEnvironment').messengerui?c('MercuryAPIArgsSource').MESSENGER:c('MercuryAPIArgsSource').WEBMESSENGER,i={},j={},k=null,l=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_COUNT,m=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_LIMIT,n=c('MercuryThreadlistConstants').WEBMESSENGER_SEARCH_SNIPPET_MORE;function o(x){'use strict';this.$MercurySearchSnippetResults1=x;this.$MercurySearchSnippetResults2=c('MercuryServerPayloadPreprocessor').getForFBID(x);c('MercuryServerDispatcher').registerEndpoints({'/ajax/mercury/search_snippets.php':{request_user_id:x,mode:c('MercuryServerDispatcher').IMMEDIATE,handler:function(y){this.handleUpdate(y);}.bind(this)}});this.$MercurySearchSnippetResults3=c('MercuryThreadIDMap').getForFBID(x);}o.prototype.getFBID=function(){'use strict';return this.$MercurySearchSnippetResults1;};o.prototype.getThreadIDMap=function(){'use strict';return this.$MercurySearchSnippetResults3;};o.prototype.getAllThreadSearchResults=function(x,y){'use strict';if(x)p(this.$MercurySearchSnippetResults1,x,m,0,y);};o.prototype.getAllThreadSearchMoreResults=function(x,y){'use strict';if(x){var z=i[x];if(z){var aa=z.getCurrentArraySize();p(this.$MercurySearchSnippetResults1,x,n,aa,y);}}};o.prototype.getSingleThreadSearchResults=function(x,y,z){'use strict';if(!x||!y)return;q.call(this,x,y,l,0,z);};o.prototype.getSingleThreadSearchMoreResults=function(x,y,z){'use strict';if(!x||!y)return;if(!j[y])return;var aa=j[y][x];if(aa){var ba=aa.num_total_snippets,ca=aa.snippets_cbm.getCurrentArraySize(),da=ba-ca;if(da>0){var ea=da>n?n:da;q.call(this,x,y,ea,ca,z);}}};o.prototype.countSnippetsMatchingQueryInThread=function(x,y){'use strict';var z=j[y][x];if(z)return z.num_total_snippets;};o.prototype.findIndexOfSnippet=function(x,y,z,aa){'use strict';var ba=v(x,y),ca=ba.getAllResources();for(var da=0;da<ca.length;da++)if(z===ca[da].message_id)return da;};o.prototype.findSnippetAtIndex=function(x,y,z,aa){'use strict';s(x,y,z);t.call(this,x,y,z,aa);};o.prototype.handleUpdate=function(x){'use strict';if(x.mercury_payload)this.$MercurySearchSnippetResults2.handleUpdate(x.mercury_payload);var y=x.search_snippets||{};Object.keys(y).filter(function(oa){return !!y[oa];}).forEach(function(oa){Object.keys(y[oa]).forEach(function(pa){if(!y[oa][pa].snippets)return;y[oa][pa].snippets.forEach(function(qa){qa.matched_keywords=r(qa.matched_keywords);});});});var z=x.offset,aa=[];for(var ba in y){var ca=y[ba];for(var da in ca){var ea=ca[da],fa=x.other_user_fbid||x.thread_fbid,ga=this.$MercurySearchSnippetResults3.getClientIDFromServerIDNow(da),ha=ea.snippets,ia=v(ba,ga),ja=ia.getCurrentArraySize();if(!fa){aa.push(ga);if(ja)continue;}else if(z!=ja)continue;var ka=j[ga][ba];ka.num_total_snippets=ea.num_total_snippets;var la=ha?ha.length:0;if(la>0)ia.addResourcesWithoutSorting(ha,ja);if(!fa||x.limit>la)if(ia.getCurrentArraySize()==ka.num_total_snippets)ia.setReachedEndOfArray();}if(!fa){var ma=u(ba),na=ma.getCurrentArraySize();if(z==na){ma.addResourcesWithoutSorting(aa,na);if(x.limit>aa.length)ma.setReachedEndOfArray();}}}};function p(x,y,z,aa,ba){if(k)if(!k.thread_id){var ca=u(k.query);ca.unsubscribe(k.subscriber_id);k=null;}var ca=u(y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(ha){var ia={};for(var ja=0;ja<ha.length;ja++){var ka=ha[ja],la=j[ka][y];ia[ka]={num_total_snippets:la.num_total_snippets,snippets:la.snippets_cbm.getAllResources()};}var ma=ca.hasReachedEndOfArray();ba(ia,ma);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:y,thread_id:null,subscriber_id:ea};var ga={query:y,offset:aa,limit:z+1,snippetLimit:l};ga.identifier='thread_fbid';w(ga,x);}}function q(x,y,z,aa,ba){if(k)if(k.thread_id){var ca=v(k.query,k.thread_id);ca.unsubscribe(k.subscriber_id);k=null;}var ca=v(x,y),da=aa+z,ea=ca.executeOrEnqueue(0,da,function(){var ka=ca.getAllResources(),la=j[y][x].num_total_snippets;ba(ka,la);}),fa=ca.getUnavailableResources(ea);if(fa.length){k={query:x,thread_id:y,subscriber_id:ea};var ga={query:x,snippetOffset:aa,snippetLimit:z},ha=this.getThreadIDMap().getServerIDFromClientIDNow(y),ia=c('MercuryIDs').tokenize(y),ja=ia.type;if(ja=='user'){ga.other_user_fbid=ha;}else ga.thread_fbid=ha;ga.identifier='thread_fbid';w(ga,this.getFBID());}}function r(x){if(x instanceof Array){var y={};for(var z=0;z<x.length;z++)y[z.toString()]=x[z];return y;}else return x;}function s(x,y,z){}function t(x,y,z,aa){var ba=j[y][x],ca=ba.snippets_cbm.getAllResources(),da=ba.num_total_snippets,ea=ca.length;if(z<ea){aa(ca[z].message_id);return;}var fa=da-ea,ga=fa>n?n:fa;q.call(this,x,y,ga,ea,function(ha,ia){t.call(this,x,y,z,aa);});}function u(x){if(!i[x])i[x]=new (c('RangedCallbackManager'))();return i[x];}function v(x,y){if(!j[y])j[y]={};var z=j[y][x];if(!z){z={num_total_snippets:-1,snippets_cbm:new (c('RangedCallbackManager'))()};j[y][x]=z;}return z.snippets_cbm;}function w(x,y){x.client=h;c('MercuryServerDispatcher').trySend('/ajax/mercury/search_snippets.php',x,null,y);}Object.assign(o,c('MercurySingletonMixin'));f.exports=o;}),null);
__d('MessengerThreadSearchStore',['cx','immutable','ImmutableObject','MercuryIDs','MercuryMessages','MercurySearchContextResults','MercurySearchSnippetResults','MercuryThreads','MessengerContentSearchDataTypedLogger','MessengerDispatcher','MessengerStateStore','MessengerStore','MessengerActions','MessengerThreadSearchActions','MessengerView'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('immutable').List,l=c('immutable').Record,m=l({downExhausted:null,loading:false,messages:null,query:null,results:k(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null});i=babelHelpers.inherits(n,c('MessengerStore'));j=i&&i.prototype;function n(){j.constructor.call(this);this.$MessengerThreadSearchStore3=new m();}n.prototype.getForFBID=function(o){this.$MessengerThreadSearchStore4=new (c('MercurySearchSnippetResults'))(o);this.$MessengerThreadSearchStore1=c('MercuryMessages').getForFBID(o);this.$MessengerThreadSearchStore2=c('MercuryThreads').getForFBID(o);};n.prototype.getState=function(){return this.$MessengerThreadSearchStore3;};n.prototype.__onDispatch=function(o){if(!this.$MessengerThreadSearchStore4)return;c('MessengerDispatcher').waitFor([c('MessengerStateStore').getDispatchToken()]);var p=c('MessengerStateStore').getState(),q=p.activeThreadID,r=p.masterView,s=p.mid,t=p.query,u=r===c('MessengerView').MASTER.SEARCH;switch(o.type){case c('MessengerActions').Types.REPLACE_STATE:if(s!=this.$MessengerThreadSearchStore3.mid&&q!=this.$MessengerThreadSearchStore3.activeThreadID){if(s&&q){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threadID:q,mid:s});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y);}.bind(this));}else this.$MessengerThreadSearchStore3=new m();return;}else if(this.$MessengerThreadSearchStore3.query!==t||this.$MessengerThreadSearchStore3.threadID!==q){if(t&&!s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,0].concat(z));}.bind(this));}else{if(this.$MessengerThreadSearchStore3.query&&this.$MessengerThreadSearchStore3.results.size===0)this.logCurrentResult(null,'no_results_found','single_thread_search');var v=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);if(v!==undefined)this.logCurrentResult(v.toObject(),'search_ended','single_thread_search');this.$MessengerThreadSearchStore6();}if(u){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getAllThreadSearchResults(t,function(y,z){return this.setAllThreadResults(y,z);}.bind(this));}else this.$MessengerThreadSearchStore7();this.emitChange();}break;case c('MessengerThreadSearchActions').Types.CHANGE_RESULT_INDEX:var w=Math.max(Math.min(this.$MessengerThreadSearchStore3.totalCount-1,this.$MessengerThreadSearchStore3.selectedIndex+o.delta),0);if(w===this.$MessengerThreadSearchStore3.selectedIndex)break;if(w>=this.$MessengerThreadSearchStore3.results.size){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getSingleThreadSearchMoreResults(t,q,function(){for(var y=arguments.length,z=Array(y),aa=0;aa<y;aa++)z[aa]=arguments[aa];return this.accumulateSearchResultsAndEmitChange.apply(this,[t,q,w].concat(z));}.bind(this));}else{this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({loading:true,selectedIndex:w});c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(y){return this.setMessages(y);}.bind(this));}this.emitChange();var x=this.$MessengerThreadSearchStore3.results.get(w).toObject();this.logCurrentResult(x,'result_loaded','single_thread_search');break;case c('MessengerThreadSearchActions').Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);c('MercurySearchContextResults').getMoreSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,o.direction,function(y){return this.setMessages(y);}.bind(this));this.emitChange();break;case c('MessengerThreadSearchActions').Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set('loading',true);this.$MessengerThreadSearchStore4.getAllThreadSearchMoreResults(t,function(y,z){return this.setAllThreadResults(y,z);}.bind(this));this.emitChange();break;}};n.prototype.logCurrentResult=function(o,p,q){var r=new (c('MessengerContentSearchDataTypedLogger'))().setSearchTerm(this.$MessengerThreadSearchStore3.query).setThreadFbid(c('MercuryIDs').getThreadFBIDFromThreadID(this.$MessengerThreadSearchStore3.threadID)).setNumResults(this.$MessengerThreadSearchStore3.results.size).setSearchOutcome(p).setSearchType(q);if(o!==undefined&&o!==null)r.setMessageID(o.message_id).setMessageTimestamp(o.timestamp).setResultIndex(this.$MessengerThreadSearchStore3.selectedIndex+1);r.log();};n.prototype.setAllThreadResults=function(o,p){var q=Object.keys(o),r=q.map(function(s){var t=this.$MessengerThreadSearchStore2.getThreadMetaNow(s);if(!t)return;var u=o[t.thread_id];if(!u)return;return new (c('ImmutableObject'))(babelHelpers['extends']({},t,{snippetCount:u.num_total_snippets}));}.bind(this)).filter(function(s){return s;});this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threads:r,threadsExhausted:p,loading:false});this.emitChange();};n.prototype.$MessengerThreadSearchStore7=function(){this.$MessengerThreadSearchStore8(['threads','threadsExhausted','loading']);};n.prototype.accumulateSearchResultsAndEmitChange=function(o,p,q,r,s){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({query:o,threadID:p,selectedIndex:q,results:r,totalCount:s});if(this.$MessengerThreadSearchStore3.results.size){c('MercurySearchContextResults').getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(u){return this.setMessages(u);}.bind(this));var t=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);this.logCurrentResult(t.toObject(),'search_started','single_thread_search');}else this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({messages:null});this.emitChange();};n.prototype.$MessengerThreadSearchStore6=function(){this.$MessengerThreadSearchStore8(['query','threadID','selectedIndex','results','totalCount','downExhausted','loading','messages','upExhausted']);};n.prototype.$MessengerThreadSearchStore8=function(o){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.withMutations(function(p){o.forEach(function(q){return p.remove(q);});});};n.prototype.setMessages=function(o){var p=this.$MessengerThreadSearchStore1.getMessagesFromIDs([].concat(o.up_message_ids,o.message_id,o.down_message_ids)).map(function(q){var r,s=this;if(q&&q.message_id===o.message_id)if(!this.$MessengerThreadSearchStore3.results.isEmpty()){var r=function(){var t=s.$MessengerThreadSearchStore3.results.get(s.$MessengerThreadSearchStore3.selectedIndex).toJS(),u=t.matched_keywords,v=q.body.indexOf(t.body),w=Object.keys(t.matched_keywords).map(function(x){return {offset:v+Number(x),length:u[x].length,entity:{url:''},className:"__in"};});return {v:new (c('ImmutableObject'))(babelHelpers['extends']({},q,{ranges:q.ranges?q.ranges.concat(w):w}))};}();if(typeof r==="object")return r.v;}else return new (c('ImmutableObject'))(babelHelpers['extends']({},q,{isSelected:true}));return q;}.bind(this));this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({downExhausted:o.down_exhausted,loading:false,messages:p,upExhausted:o.up_exhausted});this.emitChange();};n.prototype.$MessengerThreadSearchStore5=function(){return this.$MessengerThreadSearchStore3.mid||this.$MessengerThreadSearchStore3.results.getIn([this.$MessengerThreadSearchStore3.selectedIndex,'message_id']);};f.exports=new n();}),null);
__d('MessengerURIListener',['MessengerActions','MessengerURISerializer','PageTransitions'],(function a(b,c,d,e,f,g){'use strict';var h=false,i={start:function k(){if(!h)c('PageTransitions').registerHandler(j,6);h=true;},stop:function k(){c('PageTransitions').removeHandler(j,6);h=false;}};function j(k){var l=c('MessengerURISerializer').deserialize(k);if(l.notMessenger)return false;c('PageTransitions').transitionComplete();c('MessengerActions').changeState(l);return true;}f.exports=i;}),null);
__d('OmniMLogHelpers',['OmniMEventTypedLogger','MNOmniMConstants','OmniMLoggerEvents','CurrentUser'],(function a(b,c,d,e,f,g){function h(s){return c('MNOmniMConstants').SUGGESTION_MODES[s];}function i(s,t,u,v){new (c('OmniMEventTypedLogger'))().setEventName(s).setPosition(u+'').setMessageID(t.messageID).setPigeonID(t.suggestionID).setSuggestionMode(h(v)).setContextUserID(c('CurrentUser').getID()).setConfidence(Math.round(t.confidence*10000)).log();}function j(s,t,u){new (c('OmniMEventTypedLogger'))().setEventName(s).setSuggestionMode(h(u)).setContextUserID(c('CurrentUser').getID()).setSuggestionIds(t.map(function(v){return v.suggestionID;})).log();}function k(s,t,u){i(c('OmniMLoggerEvents').SUGGESTION_DISPLAYED,s,t,u);}function l(s,t,u){i(c('OmniMLoggerEvents').SUGGESTION_DISAPPEARED,s,t,u);}function m(s,t,u){i(c('OmniMLoggerEvents').SUGGESTION_DISMISSED,s,t,u);}function n(s,t,u){i(c('OmniMLoggerEvents').SUGGESTION_CLICKED,s,t,u);}function o(s,t,u){i(c('OmniMLoggerEvents').SUGGESTION_COMPLETED,s,t,u);}function p(s,t){j(c('OmniMLoggerEvents').BAR_DISAPPEARED,s,t);}function q(s,t){j(c('OmniMLoggerEvents').BAR_DISMISSED,s,t);}function r(s,t){j(c('OmniMLoggerEvents').BAR_DISPLAYED,s,t);}f.exports={barDisappeared:p,barDisplayed:r,barDismissed:q,suggestionDisplayed:k,suggestionDisappeared:l,suggestionDismissed:m,suggestionClicked:n,suggestionCompleted:o};}),null);
__d("XMessagingOmniMSetPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/set_omnim_prefs\/",{});}),null);
__d('OmniMReducer',['AsyncRequest','immutable','MercuryActionType','MercuryConfig','MercuryIDs','MercuryPayloadSource','MNOmniMConstants','OmniMActions','OmniMActionType','OmniMDirectiveType','OmniMLogHelpers','P2PGKValues','XMessagingOmniMSetPrefController'],(function a(b,c,d,e,f,g){'use strict';var h,i=c('OmniMActions').Types,j=c('immutable').Set([c('MercuryActionType').SEND_MESSAGE,c('MercuryActionType').REPLACE_MESSAGE,c('MercuryActionType').USER_GENERATED_MESSAGE]),k=c('immutable').Set([c('MercuryActionType').SEND_MESSAGE,c('MercuryActionType').USER_GENERATED_MESSAGE]),l=2;function m(oa,pa){switch(oa.content_type){case 'text':return true;case 'location':if(pa===c('MNOmniMConstants').OMNIM)return c('MercuryConfig').OmniMLocationSuggestion;return c('MercuryConfig').MessengerLocationQuickReply;case 'sticker':return c('MercuryConfig').MessengerStickerQuickReply;case 'ride_service':return c('MercuryConfig').MessengerRideServiceQuickReply;case 'p2p_payment':return c('P2PGKValues').P2PVisible&&c('MercuryConfig').MessengerP2PPaymentQuickReply;default:return false;}}function n(oa){return Array.isArray(oa);}function o(oa){if(!oa)return {};var pa=JSON.parse(oa)||{},qa=n(pa.quick_replies)?pa.quick_replies:[],ra=pa.m_directives;return {quickReplies:qa,directives:ra};}function p(oa){var pa=oa.other_user_fbid,qa=oa.thread_fbid;return pa?c('MercuryIDs').getThreadIDFromUserID(pa):c('MercuryIDs').getThreadIDFromThreadFBID(qa);}var q=c('immutable').Map((h={},h[c('OmniMActionType').CREATE_EVENT]='create_event',h[c('OmniMActionType').LOCATION]='location',h[c('OmniMActionType').PAYMENT]='p2p_payment',h[c('OmniMActionType').POLL]='poll',h[c('OmniMActionType').STICKER]='sticker',h[c('OmniMActionType').TEXT]='text',h[c('OmniMActionType').TRANSPORTATION]='ride_service',h[c('OmniMActionType').ORDER_FOOD]='order_food',h[c('OmniMActionType').MAKE_RESERVATION]='make_reservation',h[c('OmniMActionType').SCHEDULE_CALL]='schedule_call',h[c('OmniMActionType').LIVE_LOCATION]='live_location',h));function r(oa){var pa=oa.confidence,qa=oa.id,ra=oa.label,sa=oa.type,ta=oa.data,ua=oa.icon,va=oa.message_id,wa=oa.thread_key;return {content_type:q.get(sa+''),data:ta,image_url:ua,title:ra,confidence:pa,messageID:va,suggestionID:qa,threadID:p(wa),messageDepth:1};}function s(oa,pa){var qa=o(pa),ra=(qa.quickReplies||[]).filter(function(ta){return m(ta,c('MNOmniMConstants').QUICKREPLIES);}),sa=(qa.directives||[]).filter(function(ta){return ta.type===c('OmniMDirectiveType').ADD_ACTIONS;}).map(function(ta){return ta.data.actions;}).reduce(function(ta,ua){return ta.concat(ua);},[]).map(r).filter(function(ta){return m(ta,c('MNOmniMConstants').OMNIM);}).reduce(function(ta,ua){var va=ua.threadID;return ta.updateIn([va,'agentSuggestions'],[],function(wa){return wa.concat([ua]);});},c('immutable').Map({}));return sa.setIn([oa,'quickReplies'],ra);}function t(oa){var pa=oa.content_type;Object.keys(oa.data||{}).sort().map(function(qa){pa+=''+qa+oa.data[qa];});return pa;}function u(oa){var pa=c('immutable').Set(),qa=[];for(var ra=oa.length-1;ra>=0;ra--){var sa=oa[ra],ta=t(sa);if(!pa.has(ta)){pa=pa.add(ta);qa.unshift(sa);}}return qa;}function v(oa){var pa=0;return oa.filter(function(qa){if(qa.content_type==='sticker'){if(pa>=l)return false;pa+=1;}return true;});}function w(oa,pa,qa,ra){var sa=oa.getIn(['threadMetadata',pa,'timestamp']);if(sa&&sa>ra)return oa;var ta=qa.agentSuggestions,ua=qa.quickReplies,va=(oa.getIn(['suggestionsByThread',pa])||{}).agentSuggestions||[],wa=ta||[];if(va.length)wa=v(wa);var xa=u(wa.concat(va));return oa.setIn(['threadMetadata',pa,'timestamp'],ra).setIn(['suggestionsByThread',pa],{agentSuggestions:xa,quickReplies:ua});}function x(oa,pa,qa,ra,sa){var ta=s(pa,ra);return ta.reduce(function(ua,va,wa){return w(ua,wa,va.toJS(),sa);},oa);}function y(oa){if(!oa)return null;var pa=oa.agentSuggestions,qa=(pa||[]).reduce(function(ra,sa){if(sa.messageDepth>=c('MercuryConfig').OmniMMessagesToLive)return ra;return ra.concat([babelHelpers['extends']({},sa,{messageDepth:sa.messageDepth+1})]);},[]);return babelHelpers['extends']({},oa,{agentSuggestions:qa});}function z(oa,pa){var qa=pa.thread_id,ra=pa.message_id,sa=pa.platform_xmd,ta=pa.timestamp;if(k.has(pa.action_type))oa=oa.updateIn(['suggestionsByThread',qa],y);return x(oa,qa,ra,sa,ta);}function aa(oa,pa){if(pa.type!==i.MERCURY_DISPATCHED)return oa;var qa=pa.data;switch(pa.mercuryType){case 'update-messages':if(qa.payload_source!==c('MercuryPayloadSource').CLIENT_CHANNEL_MESSAGE)return oa;return qa.actions.filter(function(ra){return j.has(ra.action_type);}).reduce(z,oa);case 'invalidate-thread-state':return oa.deleteIn(['suggestionsByThread',qa.threadID]).deleteIn(['threadMetadata',qa.threadID]);case 'invalidate-global-state':return oa.set('suggestionsByThread',c('immutable').Map()).set('threadMetadata',c('immutable').Map());}return oa;}function ba(oa,pa){if(pa.type!==i.FETCH_SUGGESTIONS)return oa;var qa=pa.message,ra=pa.threadID;return x(oa,ra,qa.message_id,qa.platform_xmd,qa.timestamp);}function ca(oa){return oa.getIn(['prefs','suggestion_mode'],0);}function da(oa,pa){if(pa.type!==i.SUGGESTION_CLICKED)return oa;var qa=pa.option,ra=pa.position,sa=pa.source;if(sa===c('MNOmniMConstants').OMNIM)c('OmniMLogHelpers').suggestionClicked(qa,ra,ca(oa));return oa;}function ea(oa,pa){if(pa.type!==i.SUGGESTION_COMPLETED)return oa;var qa=pa.threadID,ra=pa.option,sa=pa.position,ta=pa.source;if(ta===c('MNOmniMConstants').OMNIM)c('OmniMLogHelpers').suggestionCompleted(ra,sa,ca(oa));return oa.deleteIn(['suggestionsByThread',qa]);}function fa(oa,pa){if(pa.type!==i.SUGGESTION_DISMISSED)return oa;var qa=pa.threadID,ra=pa.option,sa=pa.source,ta=pa.position;if(sa===c('MNOmniMConstants').OMNIM)c('OmniMLogHelpers').suggestionDismissed(ra,ta,ca(oa));var ua=oa.getIn(['suggestionsByThread',qa]);if(!ua||!ua.agentSuggestions)return oa;var va=ua.agentSuggestions.map(function(wa){if(wa.suggestionID===ra.suggestionID)return babelHelpers['extends']({},wa,{dismissed:true});return wa;});return oa.setIn(['suggestionsByThread',qa],babelHelpers['extends']({},ua,{agentSuggestions:va}));}function ga(oa,pa){if(pa.type!==i.SUGGESTIONS_DISMISSED_FOR_THREAD)return oa;var qa=pa.threadID,ra=oa.getIn(['suggestionsByThread',qa]);if(!ra||!ra.agentSuggestions)return oa;c('OmniMLogHelpers').barDismissed(ra.agentSuggestions,ca(oa));var sa=ra.agentSuggestions.map(function(ta,ua){if(ta.dismissed)return ta;c('OmniMLogHelpers').suggestionDismissed(ta,ua,ca(oa));return babelHelpers['extends']({},ta,{dismissed:true});});return oa.setIn(['suggestionsByThread',qa],babelHelpers['extends']({},ra,{agentSuggestions:sa}));}function ha(oa,pa){if(pa.type!==i.PREFS_UPDATED)return oa;var qa=pa.prefs;return oa.updateIn(['prefs'],function(ra){return ra.merge(c('immutable').fromJS(qa));});}function ia(oa,pa){if(pa.type!==i.SUGGESTION_MODE_SET)return oa;var qa=pa.mode,ra=c('XMessagingOmniMSetPrefController').getURIBuilder().getURI();new (c('AsyncRequest'))(ra).setMethod('POST').setData({suggestion_mode:qa}).send();return oa.setIn(['prefs','suggestion_mode'],qa);}function ja(oa,pa){if(pa.type!==i.SUGGESTION_DISPLAYED)return oa;var qa=pa.option,ra=pa.position;if(!qa.dismissed)c('OmniMLogHelpers').suggestionDisplayed(qa,ra,ca(oa));return oa;}function ka(oa,pa){if(pa.type!==i.SUGGESTION_DISAPPEARED)return oa;var qa=pa.option,ra=pa.position;if(!qa.dismissed)c('OmniMLogHelpers').suggestionDisappeared(qa,ra,ca(oa));return oa;}function la(oa,pa){if(pa.type!==i.BAR_TIMED_OUT)return oa;var qa=pa.threadID,ra=pa.options;c('OmniMLogHelpers').barDisappeared(ra,ca(oa));return oa.deleteIn(['suggestionsByThread',qa]);}function ma(oa,pa){if(pa.type!==i.BAR_DISAPPEARED)return oa;c('OmniMLogHelpers').barDisappeared(pa.options,ca(oa));return oa;}function na(oa,pa){if(pa.type!==i.BAR_DISPLAYED)return oa;c('OmniMLogHelpers').barDisplayed(pa.options,ca(oa));return oa;}f.exports={barDisappeared:ma,barDisplayed:na,barTimedOut:la,mercuryDispatch:aa,messageFetched:ba,prefsUpdated:ha,suggestionClicked:da,suggestionCompleted:ea,suggestionDisappeared:ka,suggestionDismissed:fa,suggestionDisplayed:ja,suggestionModeSet:ia,suggestionsDismissedForThread:ga};}),null);
__d('OmniMState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={suggestionsByThread:c('immutable').Map(),threadMetadata:c('immutable').Map(),prefs:c('immutable').Map()};h=babelHelpers.inherits(k,c('immutable').Record(j));i=h&&h.prototype;function k(){h.apply(this,arguments);}f.exports=k;}),null);
__d("XMessagingOmniMPrefController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messaging\/get_omnim_prefs\/",{});}),null);
__d('OmniMStore',['AsyncRequest','FluxReduceStore','MercuryConfig','MercuryDispatcher','MercuryMessages','MessengerFluxReduceDispatcher','OmniMHelpers','OmniMReducer','OmniMState','OmniMActions','XMessagingOmniMPrefController'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=5,k=[].concat(Object.values(c('OmniMReducer')));h=babelHelpers.inherits(l,c('FluxReduceStore'));i=h&&h.prototype;l.prototype.getInitialState=function(){return new (c('OmniMState'))();};l.prototype.reduce=function(m,n){if(n.namespace!==c('OmniMActions').Namespace)return m;return k.reduce(function(o,p){return p(o,n);},m);};l.prototype.$OmniMStore1=function(m){c('MercuryMessages').get().getThreadMessagesRange(m,0,1,function(n){if(n&&n.length){var o=n[0];c('OmniMActions').messageFetched(m,o);}});};l.prototype.$OmniMStore2=function(){var m=this.getState().get('prefs'),n=c('OmniMHelpers').suggestionMode(m),o=c('MercuryConfig').OmniMConfidenceThresholds[n];return o||.9;};l.prototype.$OmniMStore3=function(m){var n=this.$OmniMStore2();return (m||[]).filter(function(o){return o.confidence&&o.confidence>n;});};l.prototype.suggestionsForThread=function(m){var n=this.getState();if(!n.getIn(['threadMetadata',m]))this.$OmniMStore1(m);var o=n.getIn(['suggestionsByThread',m],{}),p=this.$OmniMStore3(o.agentSuggestions).slice(0,j);return babelHelpers['extends']({},o,{agentSuggestions:p});};l.prototype.prefs=function(){return this.getState().get('prefs');};l.prototype.$OmniMStore4=function(){var m=c('MercuryDispatcher').get();m.subscribe('update-messages',function(n,o){c('OmniMActions').mercuryDispatched(n,o);});m.subscribe('invalidate-thread-state',function(n,o){c('OmniMActions').mercuryDispatched(n,{threadID:o});});m.subscribe('invalidate-global-state',function(n){return c('OmniMActions').mercuryDispatched(n);});};l.prototype.$OmniMStore5=function(){if(c('MercuryConfig').OmniMEditConfidenceThreshold){var m=c('XMessagingOmniMPrefController').getURIBuilder().getURI();new (c('AsyncRequest'))(m).setAllowCrossPageTransition(true).setReadOnly(true).setMethod('POST').setHandler(function(n){return c('OmniMActions').prefsUpdated(n.payload);}).send();}};l.prototype.setUp=function(){this.$OmniMStore4();this.$OmniMStore5();};function l(){h.apply(this,arguments);}f.exports=new l(c('MessengerFluxReduceDispatcher'));}),null);
__d('FBPaymentsDialogStore',['FBPaymentsDialogActions','FBPaymentsDispatcher','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBPaymentsDispatcher'));this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c('FBPaymentsDialogActions').types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c('FBPaymentsDialogActions').types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break;}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1;};f.exports=new j();}),null);
__d('FBPaymentsDialogContainer.react',['FBPaymentsDialogStore','FBPaymentsDispatcher','FluxContainer','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.calculateState=function(){return c('FBPaymentsDialogStore').getState();};j.getStores=function(){return [c('FBPaymentsDialogStore')];};j.prototype.componentWillMount=function(){c('FBPaymentsDispatcher').explicitlyRegisterStore(c('FBPaymentsDialogStore'));};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j);}),null);
__d('fBPaymentsDialogContainerReact',['reasonReact','FBPaymentsDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('FBPaymentsDialogContainer.react'),{},i);}g.make=h;}),null);
__d('MNCommerceDialogContainer.react',['MNCommerceDialogStateStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'MNCommerceDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('MNCommerceDialogStateStore'))],statics:{calculateState:function i(){var j=c('MNCommerceDialogStateStore').getDialogContainer();return {dialogContainer:j};}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c('React').createElement(j,null);}});f.exports=h;}),null);
__d('mNCommerceDialogContainerReact',['reasonReact','MNCommerceDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('MNCommerceDialogContainer.react'),{},i);}g.make=h;}),null);
__d('messengerBannerReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerBanner.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerBanner.react'),{initialPromotionData:c('bs_js_null_undefined').from_opt(i),isFirstRedirect:c('utilsRe').optionBoolToNullUndefinedBoolean(j)},k);}g.make=h;}),null);
__d("XSettingsEmployeeBetaController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/settings\/employee\/beta_mode\/",{enabled:{type:"Bool",defaultValue:false}});}),null);
__d('MessengerBugNub.react',['cx','fbt','ix','AsyncRequest','Image.react','Link.react','MessengerEnvironment','MessengerMenu.react','MessengerPopoverMenu.react','React','Tooltip','URI','XSettingsEmployeeBetaController','goURI'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=j("86836"),n=j("86835"),o=j("86837"),p=c('React').PropTypes,q=c('MessengerMenu.react').Item,r=c('MessengerMenu.react').Separator;k=babelHelpers.inherits(s,c('React').PureComponent);l=k&&k.prototype;s.prototype.render=function(){return c('React').createElement('div',{className:"_4_xe"},this.$MessengerBugNub1(),c('React').createElement(c('Link.react'),babelHelpers['extends']({href:'#',ajaxify:'/ajax/bugs/employee_report',className:"_1fr8",rel:'dialog'},c('Tooltip').propsFor(i._("Report a bug"))),c('React').createElement('div',{className:"_1gng"},c('React').createElement(c('Image.react'),{src:m}))));};s.prototype.$MessengerBugNub1=function(){var t=this.props.isBetaEnabled?n:o,u=i._("Internal preferences");return c('React').createElement(c('MessengerPopoverMenu.react'),babelHelpers['extends']({className:"_1fr8",menu:this.$MessengerBugNub2()},c('Tooltip').propsFor(u)),c('React').createElement(c('Link.react'),{'aria-haspopup':'true','aria-label':u,className:"_1gng",href:'#',role:'button'},c('React').createElement(c('Image.react'),{src:t})));};s.prototype.$MessengerBugNub2=function(){var t,u=this,v=null;if(this.props.unixName)(function(){var w=u.props.unixName+'.sb';v=c('React').createElement(q,{label:'Sandbox',onclick:function(){return this.$MessengerBugNub3(w);}.bind(u)});})();return c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(q,{label:'Public',onclick:function(){return this.$MessengerBugNub4(false);}.bind(this)}),c('React').createElement(q,{label:'Beta',onclick:function(){return this.$MessengerBugNub4(true);}.bind(this)}),c('React').createElement(r,null),c('React').createElement(q,{label:'C1 (trunkstable)',onclick:function(){return this.$MessengerBugNub3('trunkstable');}.bind(this)}),c('React').createElement(q,{label:'Latest',onclick:function(){return this.$MessengerBugNub3('latest');}.bind(this)}),c('React').createElement(q,{label:'Intern',onclick:function(){return this.$MessengerBugNub3('intern');}.bind(this)}),c('React').createElement(q,{label:'Production',onclick:function(){return this.$MessengerBugNub3('prod');}.bind(this)}),v);};s.prototype.$MessengerBugNub4=function(t){var u=c('XSettingsEmployeeBetaController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(u).setData({enabled:t}).setMethod('POST').setAllowCrossPageTransition(true).send();};s.prototype.$MessengerBugNub3=function(t){var u=c('URI').getRequestURI(),v=c('MessengerEnvironment').facebookdotcom?'.facebook.com':'.messenger.com',w='www'+(t?'.'+t:'')+v;c('goURI')(new (c('URI'))(window.location.href).setProtocol(u.getProtocol()).setDomain(w).setSubdomain(u.getSubdomain()).setPath(u.getPath()).setQueryData(u.getQueryData()).setFragment(u.getFragment()));};function s(){k.apply(this,arguments);}s.propTypes={isBetaEnabled:p.bool,unixName:p.string};f.exports=s;}),null);
__d('messengerBugNubReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerBugNub.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerBugNub.react'),{isBetaEnabled:c('utilsRe').optionBoolToNullUndefinedBoolean(i),unixName:c('bs_js_null_undefined').from_opt(j)},k);}g.make=h;}),null);
__d('CustomColorHighlighting.react',['cssVar','csx','cx','React','UserAgent','guid','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n="._fy2",o="._43by",p="._mh6",q=c('UserAgent').isEngine('Gecko')?"._mh6 *::-moz-selection":"._mh6 ::selection",r=c('UserAgent').isEngine('Gecko')?"._43by *::-moz-selection":"._43by ::selection",s=n+n,t=o+o,u=p+q,v=p+p,w=o+r,x="rgba(255, 255, 255, 0.3)";k=babelHelpers.inherits(y,c('React').PureComponent);l=k&&k.prototype;function y(z){l.constructor.call(this,z);this.state={id:'cch_'+c('guid')()};}y.prototype.componentWillMount=function(){this.$CustomColorHighlighting1();};y.prototype.componentWillUnmount=function(){this.$CustomColorHighlighting2();if(this.state.styleTag)document.head.removeChild(this.state.styleTag);};y.prototype.componentWillReceiveProps=function(z){if(this.props.customColor&&!z.customColor){this.$CustomColorHighlighting2();}else if(z.customColor!==this.props.customColor)this.$CustomColorHighlighting3(z.customColor);};y.prototype.render=function(){return c('React').createElement('span',{className:c('joinClasses')("_mh6",this.props.className),id:this.state.id},this.props.children);};y.prototype.$CustomColorHighlighting1=function(){var z=document.createElement('style');z.appendChild(document.createTextNode(''));document.head.appendChild(z);this.setState({styleSheet:z.sheet,styleTag:z},function(){return this.$CustomColorHighlighting3(this.props.customColor);}.bind(this));};y.prototype.$CustomColorHighlighting4=function(z,aa,ba){if(z.insertRule){z.insertRule(aa+'{'+ba+'}',0);}else if(z.addRule)z.addRule(aa,ba,0);};y.prototype.$CustomColorHighlighting5=function(z){if('removeRule' in z){z.removeRule(0);}else if('deleteRule' in z)z.deleteRule(0);};y.prototype.$CustomColorHighlighting2=function(){if(this.state.styleSheet){if(this.state.styleSheet.rules)while(this.state.styleSheet.rules.length)this.$CustomColorHighlighting5(this.state.styleSheet);if(this.state.styleSheet.cssRules)while(this.state.styleSheet.cssRules.length)this.$CustomColorHighlighting5(this.state.styleSheet);}};y.prototype.$CustomColorHighlighting6=function(z){var aa=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(z),ba=parseInt(aa[1],16),ca=parseInt(aa[2],16),da=parseInt(aa[3],16);return 'rgba('+ba+','+ca+','+da+',0.2)';};y.prototype.$CustomColorHighlighting3=function(z){this.$CustomColorHighlighting2();var aa=z||this.props.customColor;if(aa){var ba=this.$CustomColorHighlighting6(aa),ca='background: '+ba;this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+u,ca);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+' '+s,'color: '+aa);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+' '+t,'background-color: '+aa);this.$CustomColorHighlighting4(this.state.styleSheet,'#'+this.state.id+v+' '+w,'background-color: '+x);}};y.propTypes={className:m.string,customColor:m.string};f.exports=y;}),null);
__d('DataTransfer',['PhotosMimeType','createArrayFromMixed','emptyFunction'],(function a(b,c,d,e,f,g){var h=new RegExp('\u000D\u000A','g'),i='\u000A',j={'text/rtf':1,'text/html':1};function k(m){if(m.kind=='file')return m.getAsFile();}function l(m){'use strict';this.data=m;this.types=m.types?c('createArrayFromMixed')(m.types):[];}l.prototype.isRichText=function(){'use strict';if(this.getHTML()&&this.getText())return true;if(this.isImage())return false;return this.types.some(function(m){return j[m];});};l.prototype.getText=function(){'use strict';var m;if(this.data.getData)if(!this.types.length){m=this.data.getData('Text');}else if(this.types.indexOf('text/plain')!=-1)m=this.data.getData('text/plain');return m?m.replace(h,i):null;};l.prototype.getHTML=function(){'use strict';if(this.data.getData)if(!this.types.length){return this.data.getData('Text');}else if(this.types.indexOf('text/html')!=-1)return this.data.getData('text/html');};l.prototype.isLink=function(){'use strict';return this.types.some(function(m){return m.indexOf('Url')!=-1||m.indexOf('text/uri-list')!=-1||m.indexOf('text/x-moz-url');});};l.prototype.getLink=function(){'use strict';if(this.data.getData){if(this.types.indexOf('text/x-moz-url')!=-1){var m=this.data.getData('text/x-moz-url').split('\n');return m[0];}return this.types.indexOf('text/uri-list')!=-1?this.data.getData('text/uri-list'):this.data.getData('url');}return null;};l.prototype.isImage=function(){'use strict';var m=this.types.some(function(q){return q.indexOf('application/x-moz-file')!=-1;});if(m)return true;var n=this.getFiles();for(var o=0;o<n.length;o++){var p=n[o].type;if(!c('PhotosMimeType').isImage(p))return false;}return true;};l.prototype.getCount=function(){'use strict';if(Object.prototype.hasOwnProperty.call(this.data,'items')){return this.data.items.length;}else if(Object.prototype.hasOwnProperty.call(this.data,'mozItemCount')){return this.data.mozItemCount;}else if(this.data.files)return this.data.files.length;return null;};l.prototype.getFiles=function(){'use strict';if(this.data.items){return Array.prototype.slice.call(this.data.items).map(k).filter(c('emptyFunction').thatReturnsArgument);}else if(this.data.files){return Array.prototype.slice.call(this.data.files);}else return [];};l.prototype.hasFiles=function(){'use strict';return this.getFiles().length>0;};f.exports=l;}),null);
__d('MercuryCanonicalGroupThreadActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({THREAD_SEARCH_UPDATED:null});}),null);
__d('MercuryCanonicalGroupThreadStore',['MercuryCanonicalGroupThreadActionTypes','FluxStore','MercuryCanonicalGroupThreadManager','MessengerDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('MessengerDispatcher'));this.$MercuryCanonicalGroupThreadStore1=c('MercuryCanonicalGroupThreadManager').get();}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break;}};j.prototype.getOrFetch=function(k){var l=this.$MercuryCanonicalGroupThreadStore1.getNow(k);if(!l)this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(k,function(){c('MessengerDispatcher').dispatch({type:c('MercuryCanonicalGroupThreadActionTypes').THREAD_SEARCH_UPDATED});});return l;};f.exports=new j();}),null);
__d('MessageRequestUtils',['MessagingTag'],(function a(b,c,d,e,f,g){'use strict';var h={isMessageRequest:function i(j){return (j.folder===c('MessagingTag').PENDING||j.folder===c('MessagingTag').OTHER)&&j.can_reply;},isFiltered:function i(j){return j.folder===c('MessagingTag').OTHER;}};f.exports=h;}),null);
__d('AutoFocusableLink.react',['Link.react','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('Link.react'));i=h&&h.prototype;j.prototype.componentDidMount=function(){if(this.props.autoFocus)c('ReactDOM').findDOMNode(this).focus();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("XMNCommercePostbackRefSendController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/postback_ref\/",{page_id:{type:"String",required:true},ref:{type:"String",required:true},ref_source:{type:"Enum",enumType:1},ref_type:{type:"Enum",enumType:1}});}),null);
__d('MNCommercePostbackRefSendManager',['AsyncRequest','MessengerActions','MessengerMDotMeReferralStore','XMNCommercePostbackRefSendController'],(function a(b,c,d,e,f,g){'use strict';h.prototype.sendMDotMeRef=function(i,j){var k=this.getMdotMeRef();if(this.shouldSendRef(j,i)){var l=c('XMNCommercePostbackRefSendController').getURIBuilder().setString('page_id',i).setString('ref',k).getURI();new (c('AsyncRequest'))().setURI(l).setMethod('post').send();c('MessengerActions').changeMDotMeReferral();}};h.prototype.shouldSendRef=function(i,j){if(!j||!i)return false;return this.hasMDotMeRef(j);};h.prototype.hasMDotMeRef=function(i){var j=c('MessengerMDotMeReferralStore').getState();return !!(j.refCode&&i&&j.refThreadID&&j.refThreadID.toString()===i);};h.prototype.getMdotMeRef=function(){var i=c('MessengerMDotMeReferralStore').getState();return i.refCode;};function h(){}f.exports=new h();}),null);
__d('MercuryBootloadOnInteraction.react',['BootloadOnRender.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.$MercuryBootloadOnInteraction1=function(l){this.setState({hadUserInteraction:true,interactionType:l.type});}.bind(this);this.$MercuryBootloadOnInteraction2=function(l){this.setState({interactionType:undefined});}.bind(this);this.state={hadUserInteraction:false};}j.prototype.render=function(){if(!this.state.hadUserInteraction)return c('React').cloneElement(this.props.placeholder,{onFocus:this.$MercuryBootloadOnInteraction1,onMouseOver:this.$MercuryBootloadOnInteraction1,onClick:this.$MercuryBootloadOnInteraction1,onBlur:this.$MercuryBootloadOnInteraction2});var k=this.props,l=k.loader,m=k.component,n=k.placeholder,o={};switch(this.state.interactionType){case 'focus':o.autoFocus=true;break;case 'click':o.clicked=true;break;}m=c('React').cloneElement(m,o);n=c('React').cloneElement(n,o);return c('React').createElement(c('BootloadOnRender.react'),{placeholder:n,loader:l,component:m});};f.exports=j;}),null);
__d('MercuryReadOnlyReason',['fbt','Link.react','MercuryConfig','React','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i={getReason:function j(){var k=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(k){var l=c('MercuryConfig').DYIDeepLink;return h._("Sorry, this conversation isn't active anymore because messages can no longer be sent to email addresses. After May 1st 2016, conversations with email addresses will only be available in a copy of your Facebook data. {download your information}",[h.param('download your information',c('React').createElement('a',{href:l},h._("Learn More")))]);}else if(c('MercuryConfig').ViewerIsReadOnly){return h._("You're temporarily blocked from sending messages. {learn more about blocks}",[h.param('learn more about blocks',c('React').createElement(c('Link.react'),{href:new (c('URI'))('https://www.facebook.com/help/181183045316843'),target:'_blank'},'Learn more'))]);}else if(c('MercuryConfig').ColdOpenBlock){return h._("You're temporarily blocked from starting new conversations. {learn more about blocks}",[h.param('learn more about blocks',c('React').createElement(c('Link.react'),{href:new (c('URI'))('https://www.facebook.com/help/181183045316843'),target:'_blank'},'Learn more'))]);}else return h._("You cannot reply to this conversation.");}};f.exports=i;}),null);
__d("MessengerBotComposerWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1193572474099061";};j.getQueryID=function(){"use strict";return "1132183563559860";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("XMessengerBotsMenuController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messenger\/commerce\/bots\/menu\/",{page_id:{type:"String",required:true}});}),null);
__d('MessengerBotMenuDataFetcher',['AsyncRequest','Cache','MessengerBotComposerWebGraphQLQuery','MNCommercePageSetting','XMessengerBotsMenuController'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerBotMenuDataFetcher1=new (c('Cache'))();this.$MessengerBotMenuDataFetcher2=new (c('Cache'))();}h.prototype.getMenuItems=function(i,j,k){if(this.$MessengerBotMenuDataFetcher1.has(i)){j(this.$MessengerBotMenuDataFetcher1.get(i));return;}var l=c('XMessengerBotsMenuController').getURIBuilder().setString('page_id',i).getURI();new (c('AsyncRequest'))().setURI(l).setHandler(function(m){var n=m.payload.menu;this.$MessengerBotMenuDataFetcher1.set(i,n);j(n);}.bind(this)).setErrorHandler(function(m){k();}).send();};h.prototype.getHasMenu=function(i,j,k){if(!this.$MessengerBotMenuDataFetcher2.has(i)){var l=c('MessengerBotComposerWebGraphQLQuery').getURI({node_id:i});new (c('AsyncRequest'))().setURI(l).setHandler(function(n){var o=n.payload.data.node,p=o&&o.commerce_page_settings||[],q=p.indexOf(c('MNCommercePageSetting').STRUCTURED_MENU_ENABLED)!==-1;this.$MessengerBotMenuDataFetcher2.set(i,q);j(q);}.bind(this)).setErrorHandler(function(n){this.$MessengerBotMenuDataFetcher2.set(i,false);k();}.bind(this)).send();}var m=this.$MessengerBotMenuDataFetcher2.get(i);m=m?m:false;j(m);return m;};f.exports=new h();}),null);
__d('CompositeDraftDecorator',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='.';function j(m){this.$CompositeDraftDecorator1=m.slice();}j.prototype.getDecorations=function(m,n){var o=Array(m.getText().length).fill(null);this.$CompositeDraftDecorator1.forEach(function(p,q){var r=0,s=p.strategy,t=function u(v,w){if(k(o,v,w)){l(o,v,w,q+i+r);r++;}};s(m,t,n);});return h(o);};j.prototype.getComponentForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].component;};j.prototype.getPropsForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].props;};function k(m,n,o){for(var p=n;p<o;p++)if(m[p]!=null)return false;return true;}function l(m,n,o,p){for(var q=n;q<o;q++)m[q]=p;}f.exports=j;}),null);
__d('DefaultDraftBlockRenderMap',['cx','immutable','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Map,j=c('React').createElement('ul',{className:"_1bv0"}),k=c('React').createElement('ol',{className:"_1bv1"}),l=c('React').createElement('pre',{className:"_1bv2"}),m=i({'header-one':{element:'h1'},'header-two':{element:'h2'},'header-three':{element:'h3'},'header-four':{element:'h4'},'header-five':{element:'h5'},'header-six':{element:'h6'},'unordered-list-item':{element:'li',wrapper:j},'ordered-list-item':{element:'li',wrapper:k},blockquote:{element:'blockquote'},atomic:{element:'figure'},'code-block':{element:'pre',wrapper:l},unstyled:{element:'div',aliasedElements:['p']}});f.exports=m;}),null);
__d('DefaultDraftInlineStyle',[],(function a(b,c,d,e,f,g){'use strict';f.exports={BOLD:{fontWeight:'bold'},CODE:{fontFamily:'monospace',wordWrap:'break-word'},ITALIC:{fontStyle:'italic'},STRIKETHROUGH:{textDecoration:'line-through'},UNDERLINE:{textDecoration:'underline'}};}),null);
__d('ContentStateInlineStyle',['CharacterMetadata','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map,i={add:function k(l,m,n){return j(l,m,n,true);},remove:function k(l,m,n){return j(l,m,n,false);}};function j(k,l,m,n){var o=k.getBlockMap(),p=l.getStartKey(),q=l.getStartOffset(),r=l.getEndKey(),s=l.getEndOffset(),t=o.skipUntil(function(u,v){return v===p;}).takeUntil(function(u,v){return v===r;}).concat(h([[r,o.get(r)]])).map(function(u,v){var w,x;if(p===r){w=q;x=s;}else{w=v===p?q:0;x=v===r?s:u.getLength();}var y=u.getCharacterList(),z;while(w<x){z=y.get(w);y=y.set(w,n?c('CharacterMetadata').applyStyle(z,m):c('CharacterMetadata').removeStyle(z,m));w++;}return u.set('characterList',y);});return k.merge({blockMap:o.merge(t),selectionBefore:l,selectionAfter:l});}f.exports=i;}),null);
__d('DraftFeatureFlags-core',[],(function a(b,c,d,e,f,g){'use strict';var h={draft_accept_selection_after_refocus:false,draft_killswitch_allow_nontextnodes:false,draft_segmented_entities_behavior:false};f.exports=h;}),null);
__d('DraftFeatureFlags',['DraftFeatureFlags-core','DraftGK'],(function a(b,c,d,e,f,g){'use strict';Object.assign(c('DraftFeatureFlags-core'),c('DraftGK'));f.exports=c('DraftFeatureFlags-core');}),null);
__d('applyEntityToContentBlock',['CharacterMetadata'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,c('CharacterMetadata').applyEntity(m.get(j),l));j++;}return i.set('characterList',m);}f.exports=h;}),null);
__d('applyEntityToContentState',['immutable','applyEntityToContentBlock'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=i.getBlockMap(),m=j.getStartKey(),n=j.getStartOffset(),o=j.getEndKey(),p=j.getEndOffset(),q=l.skipUntil(function(r,s){return s===m;}).takeUntil(function(r,s){return s===o;}).toOrderedMap().merge(c('immutable').OrderedMap([[o,l.get(o)]])).map(function(r,s){var t=s===m?n:0,u=s===o?p:r.getLength();return c('applyEntityToContentBlock')(r,t,u,k);});return i.merge({blockMap:l.merge(q),selectionBefore:j,selectionAfter:j});}f.exports=h;}),null);
__d('DraftEntitySegments',[],(function a(b,c,d,e,f,g){'use strict';var h={getRemovalRange:function i(j,k,l,m,n){var o=l.split(' ');o=o.map(function(y,z){if(n==='forward'){if(z>0)return ' '+y;}else if(z<o.length-1)return y+' ';return y;});var p=m,q,r,s=null,t=null;for(var u=0;u<o.length;u++){r=o[u];q=p+r.length;if(j<q&&p<k){if(s!==null){t=q;}else{s=p;t=q;}}else if(s!==null)break;p=q;}var v=m+l.length,w=s===m,x=t===v;if(!w&&x||w&&!x)if(n==='forward'){if(t!==v)t++;}else if(s!==m)s--;return {start:s,end:t};}};f.exports=h;}),null);
__d('getRangesForDraftEntity',['invariant'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k){var l=[];j.findEntityRanges(function(m){return m.getEntity()===k;},function(m,n){l.push({start:m,end:n});});!!l.length||h(0);return l;}f.exports=i;}),null);
__d('getCharacterRemovalRange',['invariant','DraftEntitySegments','getRangesForDraftEntity'],(function a(b,c,d,e,f,g,h){'use strict';function i(k,l,m,n,o){var p=n.getStartOffset(),q=n.getEndOffset(),r=l.getEntityAt(p),s=m.getEntityAt(q-1);if(!r&&!s)return n;var t=n;if(r&&r===s){t=j(k,l,t,o,r,true,true);}else if(r&&s){var u=j(k,l,t,o,r,false,true),v=j(k,m,t,o,s,false,false);t=t.merge({anchorOffset:u.getAnchorOffset(),focusOffset:v.getFocusOffset(),isBackward:false});}else if(r){var w=j(k,l,t,o,r,false,true);t=t.merge({anchorOffset:w.getStartOffset(),isBackward:false});}else if(s){var x=j(k,m,t,o,s,false,false);t=t.merge({focusOffset:x.getEndOffset(),isBackward:false});}return t;}function j(k,l,m,n,o,p,q){var r=m.getStartOffset(),s=m.getEndOffset(),t=k.__get(o),u=t.getMutability(),v=q?r:s;if(u==='MUTABLE')return m;var w=c('getRangesForDraftEntity')(l,o).filter(function(z){return v<=z.end&&v>=z.start;});w.length==1||h(0);var x=w[0];if(u==='IMMUTABLE')return m.merge({anchorOffset:x.start,focusOffset:x.end,isBackward:false});if(!p)if(q){s=x.end;}else r=x.start;var y=c('DraftEntitySegments').getRemovalRange(r,s,l.getText().slice(x.start,x.end),x.start,n);return m.merge({anchorOffset:y.start,focusOffset:y.end,isBackward:false});}f.exports=i;}),null);
__d('removeEntitiesAtEdges',['invariant','CharacterMetadata','findRangesImmutable'],(function a(b,c,d,e,f,g,h){'use strict';function i(l,m){var n=l.getBlockMap(),o=l.getEntityMap(),p={},q=m.getStartKey(),r=m.getStartOffset(),s=n.get(q),t=k(o,s,r);if(t!==s)p[q]=t;var u=m.getEndKey(),v=m.getEndOffset(),w=n.get(u);if(q===u)w=t;var x=k(o,w,v);if(x!==w)p[u]=x;if(!Object.keys(p).length)return l.set('selectionAfter',m);return l.merge({blockMap:n.merge(p),selectionAfter:m});}function j(l,m,n){var o;c('findRangesImmutable')(l,function(p,q){return p.getEntity()===q.getEntity();},function(p){return p.getEntity()===m;},function(p,q){if(p<=n&&q>=n)o={start:p,end:q};});typeof o==='object'||h(0);return o;}function k(l,m,n){var o=m.getCharacterList(),p=n>0?o.get(n-1):undefined,q=n<o.count()?o.get(n):undefined,r=p?p.getEntity():undefined,s=q?q.getEntity():undefined;if(s&&s===r){var t=l.__get(s);if(t.getMutability()!=='MUTABLE'){var u=j(o,s,n),v=u.start,w=u.end,x;while(v<w){x=o.get(v);o=o.set(v,c('CharacterMetadata').applyEntity(x,null));v++;}return m.set('characterList',o);}}return m;}f.exports=i;}),null);
__d('getContentStateFragment',['generateRandomKey','removeEntitiesAtEdges'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j.getStartKey(),l=j.getStartOffset(),m=j.getEndKey(),n=j.getEndOffset(),o=c('removeEntitiesAtEdges')(i,j),p=o.getBlockMap(),q=p.keySeq(),r=q.indexOf(k),s=q.indexOf(m)+1,t=p.slice(r,s).map(function(u,v){var w=c('generateRandomKey')(),x=u.getText(),y=u.getCharacterList();if(k===m)return u.merge({key:w,text:x.slice(l,n),characterList:y.slice(l,n)});if(v===k)return u.merge({key:w,text:x.slice(l),characterList:y.slice(l)});if(v===m)return u.merge({key:w,text:x.slice(0,n),characterList:y.slice(0,n)});return u.set('key',w);});return t.toOrderedMap();}f.exports=h;}),null);
__d('insertIntoList',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){if(k===i.count()){j.forEach(function(n){i=i.push(n);});}else if(k===0){j.reverse().forEach(function(n){i=i.unshift(n);});}else{var l=i.slice(0,k),m=i.slice(k);i=l.concat(j,m).toList();}return i;}f.exports=h;}),null);
__d('insertFragmentIntoContentState',['invariant','BlockMapBuilder','generateRandomKey','insertIntoList'],(function a(b,c,d,e,f,g,h){'use strict';function i(j,k,l){k.isCollapsed()||h(0);var m=k.getStartKey(),n=k.getStartOffset(),o=j.getBlockMap(),p=l.size,q,r;if(p===1){var s=o.get(m),t=l.first(),u=s.getText(),v=s.getCharacterList(),w=s.merge({text:u.slice(0,n)+t.getText()+u.slice(n),characterList:c('insertIntoList')(v,t.getCharacterList(),n),data:t.getData()});o=o.set(m,w);q=m;r=n+t.getText().length;return j.merge({blockMap:o.set(m,w),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}var x=[];j.getBlockMap().forEach(function(y,z){if(z!==m){x.push(y);return;}var aa=y.getText(),ba=y.getCharacterList(),ca=aa.length,da=aa.slice(0,n),ea=ba.slice(0,n),fa=l.first(),ga=y.merge({text:da+fa.getText(),characterList:ea.concat(fa.getCharacterList()),type:da?y.getType():fa.getType(),data:fa.getData()});x.push(ga);l.slice(1,p-1).forEach(function(la){x.push(la.set('key',c('generateRandomKey')()));});var ha=aa.slice(n,ca),ia=ba.slice(n,ca),ja=l.last();q=c('generateRandomKey')();var ka=ja.merge({key:q,text:ja.getText()+ha,characterList:ja.getCharacterList().concat(ia),data:ja.getData()});x.push(ka);});r=l.last().getLength();return j.merge({blockMap:c('BlockMapBuilder').createFromArray(x),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}f.exports=i;}),null);
__d('insertTextIntoContentState',['invariant','immutable','insertIntoList'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Repeat;function j(k,l,m,n){l.isCollapsed()||h(0);var o=m.length;if(!o)return k;var p=k.getBlockMap(),q=l.getStartKey(),r=l.getStartOffset(),s=p.get(q),t=s.getText(),u=s.merge({text:t.slice(0,r)+m+t.slice(r,s.getLength()),characterList:c('insertIntoList')(s.getCharacterList(),i(n,o).toList(),r)}),v=r+o;return k.merge({blockMap:p.set(q,u),selectionAfter:l.merge({anchorOffset:v,focusOffset:v})});}f.exports=j;}),null);
__d('modifyBlockForContentState',['immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').Map;function i(j,k,l){var m=k.getStartKey(),n=k.getEndKey(),o=j.getBlockMap(),p=o.toSeq().skipUntil(function(q,r){return r===m;}).takeUntil(function(q,r){return r===n;}).concat(h([[n,o.get(n)]])).map(l);return j.merge({blockMap:o.merge(p),selectionBefore:k,selectionAfter:k});}f.exports=i;}),null);
__d('removeRangeFromContentState',['immutable'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){if(k.isCollapsed())return j;var l=j.getBlockMap(),m=k.getStartKey(),n=k.getStartOffset(),o=k.getEndKey(),p=k.getEndOffset(),q=l.get(m),r=l.get(o),s;if(q===r){s=i(q.getCharacterList(),n,p);}else s=q.getCharacterList().slice(0,n).concat(r.getCharacterList().slice(p));var t=q.merge({text:q.getText().slice(0,n)+r.getText().slice(p),characterList:s}),u=l.toSeq().skipUntil(function(v,w){return w===m;}).takeUntil(function(v,w){return w===o;}).concat(c('immutable').Map([[o,null]])).map(function(v,w){return w===m?t:null;});l=l.merge(u).filter(function(v){return !!v;});return j.merge({blockMap:l,selectionBefore:k,selectionAfter:k.merge({anchorKey:m,anchorOffset:n,focusKey:m,focusOffset:n,isBackward:false})});}function i(j,k,l){if(k===0){while(k<l){j=j.shift();k++;}}else if(l===j.count()){while(l>k){j=j.pop();l--;}}else{var m=j.slice(0,k),n=j.slice(l);j=m.concat(n).toList();}return j;}f.exports=h;}),null);
__d('splitBlockInContentState',['invariant','immutable','generateRandomKey'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Map;function j(k,l){l.isCollapsed()||h(0);var m=l.getAnchorKey(),n=l.getAnchorOffset(),o=k.getBlockMap(),p=o.get(m),q=p.getText(),r=p.getCharacterList(),s=p.merge({text:q.slice(0,n),characterList:r.slice(0,n)}),t=c('generateRandomKey')(),u=s.merge({key:t,text:q.slice(n),characterList:r.slice(n),data:i()}),v=o.toSeq().takeUntil(function(y){return y===p;}),w=o.toSeq().skipUntil(function(y){return y===p;}).rest(),x=v.concat([[s.getKey(),s],[u.getKey(),u]],w).toOrderedMap();return k.merge({blockMap:x,selectionBefore:l,selectionAfter:l.merge({anchorKey:t,anchorOffset:0,focusKey:t,focusOffset:0,isBackward:false})});}f.exports=j;}),null);
__d('DraftModifier',['invariant','CharacterMetadata','ContentStateInlineStyle','DraftFeatureFlags','immutable','applyEntityToContentState','getCharacterRemovalRange','getContentStateFragment','insertFragmentIntoContentState','insertTextIntoContentState','modifyBlockForContentState','removeEntitiesAtEdges','removeRangeFromContentState','splitBlockInContentState'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').OrderedSet,j={replaceText:function k(l,m,n,o,p){var q=c('removeEntitiesAtEdges')(l,m),r=c('removeRangeFromContentState')(q,m),s=c('CharacterMetadata').create({style:o||i(),entity:p||null});return c('insertTextIntoContentState')(r,r.getSelectionAfter(),n,s);},insertText:function k(l,m,n,o,p){m.isCollapsed()||h(0);return j.replaceText(l,m,n,o,p);},moveText:function k(l,m,n){var o=c('getContentStateFragment')(l,m),p=j.removeRange(l,m,'backward');return j.replaceWithFragment(p,n,o);},replaceWithFragment:function k(l,m,n){var o=c('removeEntitiesAtEdges')(l,m),p=c('removeRangeFromContentState')(o,m);return c('insertFragmentIntoContentState')(p,p.getSelectionAfter(),n);},removeRange:function k(l,m,n){var o=void 0,p=void 0,q=void 0,r=void 0;if(m.getIsBackward())m=m.merge({anchorKey:m.getFocusKey(),anchorOffset:m.getFocusOffset(),focusKey:m.getAnchorKey(),focusOffset:m.getAnchorOffset(),isBackward:false});o=m.getAnchorKey();p=m.getFocusKey();q=l.getBlockForKey(o);r=l.getBlockForKey(p);var s=m.getStartOffset(),t=m.getEndOffset(),u=q.getEntityAt(s),v=r.getEntityAt(t-1);if(o===p)if(u&&u===v){var w=c('getCharacterRemovalRange')(l.getEntityMap(),q,r,m,n);return c('removeRangeFromContentState')(l,w);}var x=m;if(c('DraftFeatureFlags').draft_segmented_entities_behavior)x=c('getCharacterRemovalRange')(l.getEntityMap(),q,r,m,n);var y=c('removeEntitiesAtEdges')(l,x);return c('removeRangeFromContentState')(y,x);},splitBlock:function k(l,m){var n=c('removeEntitiesAtEdges')(l,m),o=c('removeRangeFromContentState')(n,m);return c('splitBlockInContentState')(o,o.getSelectionAfter());},applyInlineStyle:function k(l,m,n){return c('ContentStateInlineStyle').add(l,m,n);},removeInlineStyle:function k(l,m,n){return c('ContentStateInlineStyle').remove(l,m,n);},setBlockType:function k(l,m,n){return c('modifyBlockForContentState')(l,m,function(o){return o.merge({type:n,depth:0});});},setBlockData:function k(l,m,n){return c('modifyBlockForContentState')(l,m,function(o){return o.merge({data:n});});},mergeBlockData:function k(l,m,n){return c('modifyBlockForContentState')(l,m,function(o){return o.merge({data:o.getData().merge(n)});});},applyEntity:function k(l,m,n){var o=c('removeEntitiesAtEdges')(l,m);return c('applyEntityToContentState')(o,m,n);}};f.exports=j;}),null);
__d('getEntityKeyForSelection',[],(function a(b,c,d,e,f,g){'use strict';function h(j,k){var l;if(k.isCollapsed()){var m=k.getAnchorKey(),n=k.getAnchorOffset();if(n>0){l=j.getBlockForKey(m).getEntityAt(n-1);return i(j.getEntityMap(),l);}return null;}var o=k.getStartKey(),p=k.getStartOffset(),q=j.getBlockForKey(o);l=p===q.getLength()?null:q.getEntityAt(p);return i(j.getEntityMap(),l);}function i(j,k){if(k){var l=j.__get(k);return l.getMutability()==='MUTABLE'?k:null;}return null;}f.exports=h;}),null);
__d('isSelectionAtLeafStart',[],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection(),k=j.getAnchorKey(),l=i.getBlockTree(k),m=j.getStartOffset(),n=false;l.some(function(o){if(m===o.get('start')){n=true;return true;}if(m<o.get('end'))return o.get('leaves').some(function(p){var q=p.get('start');if(m===q){n=true;return true;}return false;});return false;});return n;}f.exports=h;}),null);
__d('DraftEditorCompositionHandler',['DraftModifier','EditorState','Keys','getEntityKeyForSelection','isSelectionAtLeafStart'],(function a(b,c,d,e,f,g){'use strict';var h=20,i=false,j=false,k='',l={onBeforeInput:function m(n,o){k=(k||'')+o.data;},onCompositionStart:function m(n){j=true;},onCompositionEnd:function m(n){i=false;j=false;setTimeout(function(){if(!i)l.resolveComposition(n);},h);},onKeyDown:function m(n,o){if(!j){l.resolveComposition(n);n._onKeyDown(o);return;}if(o.which===c('Keys').RIGHT||o.which===c('Keys').LEFT)o.preventDefault();},onKeyPress:function m(n,o){if(o.which===c('Keys').RETURN)o.preventDefault();},resolveComposition:function m(n){if(j)return;i=true;var o=k;k='';var p=c('EditorState').set(n._latestEditorState,{inCompositionMode:false}),q=p.getCurrentInlineStyle(),r=c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection()),s=!o||c('isSelectionAtLeafStart')(p)||q.size>0||r!==null;if(s)n.restoreEditorDOM();n.exitCurrentMode();if(o){var t=c('DraftModifier').replaceText(p.getCurrentContent(),p.getSelection(),o,q,r);n.update(c('EditorState').push(p,t,'insert-characters'));return;}if(s)n.update(c('EditorState').set(p,{nativelyRenderedContent:null,forceSelection:true}));}};f.exports=l;}),null);
__d('DraftEditorTextNode.react',['invariant','React','ReactDOM','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('UserAgent').isBrowser('IE <= 11');function l(p){return k?p.textContent==='\n':p.tagName==='BR';}var m=k?c('React').createElement('span',{key:'A','data-text':'true'},'\n'):c('React').createElement('br',{key:'A','data-text':'true'}),n=k?c('React').createElement('span',{key:'B','data-text':'true'},'\n'):c('React').createElement('br',{key:'B','data-text':'true'});i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.$DraftEditorTextNode1=false;}o.prototype.shouldComponentUpdate=function(p){var q=c('ReactDOM').findDOMNode(this),r=p.children==='';q instanceof Element||h(0);if(r)return !l(q);return q.textContent!==p.children;};o.prototype.componentWillUpdate=function(){this.$DraftEditorTextNode1=!this.$DraftEditorTextNode1;};o.prototype.render=function(){if(this.props.children==='')return this.$DraftEditorTextNode1?m:n;return c('React').createElement('span',{key:this.$DraftEditorTextNode1?'A':'B','data-text':'true'},this.props.children);};f.exports=o;}),null);
__d('DraftJsDebugLogging',['CurrentUser','DraftJsEventsTypedLogger','ScriptPath'],(function a(b,c,d,e,f,g){'use strict';f.exports={logSelectionStateFailure:function h(i){var j=i.anonymizedDom,k=i.extraParams,l=i.selectionState;if(c('CurrentUser').isEmployee())new (c('DraftJsEventsTypedLogger'))().setEvent('selection_state_failure').setAnonymizedDom(j).setExtraParams(k).setScriptPath(c('ScriptPath').getScriptPath()).setSelectionState(l).log();}};}),null);
__d('setDraftEditorSelection',['invariant','DraftJsDebugLogging','containsNode','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';function i(p){if(!p)return '[empty]';var q=j(p);if(q.nodeType===Node.TEXT_NODE)return q.textContent;q instanceof Element||h(0);return q.innerHTML;}function j(p){if(p.nodeType===Node.TEXT_NODE){var q=p.textContent.length;return document.createTextNode('[text '+q+']');}var r=p.cloneNode(),s=p.childNodes;for(var t=0;t<s.length;t++)r.appendChild(j(s[t]));return r;}function k(p){var q=p;while(q)if(q instanceof Element&&q.hasAttribute('contenteditable')){return i(q);}else q=q.parentNode;return 'Could not find contentEditable parent of node';}function l(p){return p.nodeValue===null?p.childNodes.length:p.nodeValue.length;}function m(p,q,r,s,t){if(!c('containsNode')(document.documentElement,q))return;var u=b.getSelection(),v=p.getAnchorKey(),w=p.getAnchorOffset(),x=p.getFocusKey(),y=p.getFocusOffset(),z=p.getIsBackward();if(!u.extend&&z){var aa=v,ba=w;v=x;w=y;x=aa;y=ba;z=false;}var ca=v===r&&s<=w&&t>=w,da=x===r&&s<=y&&t>=y;if(ca&&da){u.removeAllRanges();o(u,q,w-s,p);n(u,q,y-s,p);return;}if(!z){if(ca){u.removeAllRanges();o(u,q,w-s,p);}if(da)n(u,q,y-s,p);}else{if(da){u.removeAllRanges();o(u,q,y-s,p);}if(ca){var ea=u.focusNode,fa=u.focusOffset;u.removeAllRanges();o(u,q,w-s,p);n(u,ea,fa,p);}}}function n(p,q,r,s){if(p.extend&&c('containsNode')(c('getActiveElement')(),q)){if(r>l(q))c('DraftJsDebugLogging').logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});try{p.extend(q,r);}catch(u){c('DraftJsDebugLogging').logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});throw u;}}else{var t=p.getRangeAt(0);t.setEnd(q,r);p.addRange(t.cloneRange());}}function o(p,q,r,s){var t=document.createRange();if(r>l(q))c('DraftJsDebugLogging').logSelectionStateFailure({anonymizedDom:k(q),extraParams:JSON.stringify({offset:r}),selectionState:JSON.stringify(s.toJS())});t.setStart(q,r);p.addRange(t);}f.exports=m;}),null);
__d('DraftEditorLeaf.react',['invariant','ContentBlock','DraftEditorTextNode.react','React','ReactDOM','setDraftEditorSelection'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.$DraftEditorLeaf1=function(){var l=this.props.selection;if(l==null||!l.getHasFocus())return;var m=this.props,n=m.block,o=m.start,p=m.text,q=n.getKey(),r=o+p.length;if(!l.hasEdgeWithin(q,o,r))return;var s=c('ReactDOM').findDOMNode(this);s||h(0);var t=s.firstChild;t||h(0);var u=void 0;if(t.nodeType===Node.TEXT_NODE){u=t;}else if(t.tagName==='BR'){u=s;}else{u=t.firstChild;u||h(0);}c('setDraftEditorSelection')(l,u,q,o,r);};k.prototype.shouldComponentUpdate=function(l){var m=c('ReactDOM').findDOMNode(this.refs.leaf);m||h(0);return m.textContent!==l.text||l.styleSet!==this.props.styleSet||l.forceSelection;};k.prototype.componentDidUpdate=function(){this.$DraftEditorLeaf1();};k.prototype.componentDidMount=function(){this.$DraftEditorLeaf1();};k.prototype.render=function(){var l=this.props.block,m=this.props.text;if(m.endsWith('\n')&&this.props.isLast)m+='\n';var n=this.props,o=n.customStyleMap,p=n.customStyleFn,q=n.offsetKey,r=n.styleSet,s=r.reduce(function(u,v){var w={},x=o[v];if(x!==undefined&&u.textDecoration!==x.textDecoration)w.textDecoration=[u.textDecoration,x.textDecoration].join(' ').trim();return Object.assign(u,x,w);},{});if(p){var t=p(r,l);s=Object.assign(s,t);}return c('React').createElement('span',{'data-offset-key':q,ref:'leaf',style:s},c('React').createElement(c('DraftEditorTextNode.react'),null,m));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('DraftOffsetKey',[],(function a(b,c,d,e,f,g){'use strict';var h='-',i={encode:function j(k,l,m){return k+h+l+h+m;},decode:function j(k){var l=k.split(h),m=l[0],n=l[1],o=l[2];return {blockKey:m,decoratorKey:parseInt(n,10),leafKey:parseInt(o,10)};}};f.exports=i;}),null);
__d('DraftEditorBlock.react',['cx','invariant','DraftEditorLeaf.react','DraftOffsetKey','React','ReactDOM','Scroll','Style','UnicodeBidi','UnicodeBidiDirection','getElementPosition','getScrollPosition','getViewportDimensions','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=10;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.shouldComponentUpdate=function(o){return this.props.block!==o.block||this.props.tree!==o.tree||this.props.direction!==o.direction||n(o.selection,o.block.getKey())&&o.forceSelection;};m.prototype.componentDidMount=function(){var o=this.props.selection,p=o.getEndKey();if(!o.getHasFocus()||p!==this.props.block.getKey())return;var q=c('ReactDOM').findDOMNode(this),r=c('Style').getScrollParent(q),s=c('getScrollPosition')(r),t;if(r===window){var u=c('getElementPosition')(q),v=u.y+u.height,w=c('getViewportDimensions')().height;t=v-w;if(t>0)window.scrollTo(s.x,s.y+t+l);}else{q instanceof HTMLElement||i(0);var x=q.offsetHeight+q.offsetTop,y=r.offsetHeight+s.y;t=x-y;if(t>0)c('Scroll').setTop(r,c('Scroll').getTop(r)+t+l);}};m.prototype.$DraftEditorBlock1=function(){var o=this.props.block,p=o.getKey(),q=o.getText(),r=this.props.tree.size-1,s=n(this.props.selection,p);return this.props.tree.map(function(t,u){var v=t.get('leaves'),w=v.size-1,x=v.map(function(fa,ga){var ha=c('DraftOffsetKey').encode(p,u,ga),ia=fa.get('start'),ja=fa.get('end');return c('React').createElement(c('DraftEditorLeaf.react'),{key:ha,offsetKey:ha,block:o,start:ia,selection:s?this.props.selection:undefined,forceSelection:this.props.forceSelection,text:q.slice(ia,ja),styleSet:o.getInlineStyleAt(ia),customStyleMap:this.props.customStyleMap,customStyleFn:this.props.customStyleFn,isLast:u===r&&ga===w});}.bind(this)).toArray(),y=t.get('decoratorKey');if(y==null)return x;if(!this.props.decorator)return x;var z=c('nullthrows')(this.props.decorator),aa=z.getComponentForKey(y);if(!aa)return x;var ba=z.getPropsForKey(y),ca=c('DraftOffsetKey').encode(p,u,0),da=q.slice(v.first().get('start'),v.last().get('end')),ea=c('UnicodeBidiDirection').getHTMLDirIfDifferent(c('UnicodeBidi').getDirection(da),this.props.direction);return c('React').createElement(aa,babelHelpers['extends']({},ba,{contentState:this.props.contentState,decoratedText:da,dir:ea,key:ca,entityKey:o.getEntityAt(t.get('start')),offsetKey:ca}),x);}.bind(this)).toArray();};m.prototype.render=function(){var o=this.props,p=o.direction,q=o.offsetKey,r="_1mf"+(p==='LTR'?' '+"_1mj":'')+(p==='RTL'?' '+"_1mk":'');return c('React').createElement('div',{'data-offset-key':q,className:r},this.$DraftEditorBlock1());};function m(){j.apply(this,arguments);}function n(o,p){return o.getAnchorKey()===p||o.getFocusKey()===p;}f.exports=m;}),null);
__d('DraftEditorContents.react',['cx','DraftEditorBlock.react','DraftOffsetKey','EditorState','React','joinClasses','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(m){var n=this.props.editorState,o=m.editorState,p=n.getDirectionMap(),q=o.getDirectionMap();if(p!==q)return true;var r=n.getSelection().getHasFocus(),s=o.getSelection().getHasFocus();if(r!==s)return true;var t=o.getNativelyRenderedContent(),u=n.isInCompositionMode(),v=o.isInCompositionMode();if(n===o||t!==null&&o.getCurrentContent()===t||u&&v)return false;var w=n.getCurrentContent(),x=o.getCurrentContent(),y=n.getDecorator(),z=o.getDecorator();return u!==v||w!==x||y!==z||o.mustForceSelection();};k.prototype.render=function(){var m=this.props,n=m.blockRenderMap,o=m.blockRendererFn,p=m.customStyleMap,q=m.customStyleFn,r=m.editorState,s=r.getCurrentContent(),t=r.getSelection(),u=r.mustForceSelection(),v=r.getDecorator(),w=c('nullthrows')(r.getDirectionMap()),x=s.getBlocksAsArray(),y=[],z=null,aa=null;for(var ba=0;ba<x.length;ba++){var ca=x[ba],da=ca.getKey(),ea=ca.getType(),fa=o(ca),ga=void 0,ha=void 0,ia=void 0;if(fa){ga=fa.component;ha=fa.props;ia=fa.editable;}var ja=this.props.textDirectionality,ka=ja?ja:w.get(da),la=c('DraftOffsetKey').encode(da,0,0),ma={contentState:s,block:ca,blockProps:ha,customStyleMap:p,customStyleFn:q,decorator:v,direction:ka,forceSelection:u,key:da,offsetKey:la,selection:t,tree:r.getBlockTree(da)},na=n.get(ea),oa=na.wrapper,pa=na.element||n.get('unstyled').element,qa=ca.getDepth(),ra=this.props.blockStyleFn(ca);if(pa==='li'){var sa=aa!==oa||z===null||qa>z;ra=c('joinClasses')(ra,l(ea,qa,sa,ka));}var ta=ga||c('DraftEditorBlock.react'),ua={className:ra,'data-block':true,'data-editor':this.props.editorKey,'data-offset-key':la,key:da};if(ia!==undefined)ua=babelHelpers['extends']({},ua,{contentEditable:ia,suppressContentEditableWarning:true});var va=c('React').createElement(pa,ua,c('React').createElement(ta,ma));y.push({block:va,wrapperTemplate:oa,key:da,offsetKey:la});if(oa){z=ca.getDepth();}else z=null;aa=oa;}var wa=[];for(var xa=0;xa<y.length;){var ya=y[xa];if(ya.wrapperTemplate){var za=[];do{za.push(y[xa].block);xa++;}while(xa<y.length&&y[xa].wrapperTemplate===ya.wrapperTemplate);var ab=c('React').cloneElement(ya.wrapperTemplate,{key:ya.key+'-wrap','data-offset-key':ya.offsetKey},za);wa.push(ab);}else{wa.push(ya.block);xa++;}}return c('React').createElement('div',{'data-contents':'true'},wa);};function k(){i.apply(this,arguments);}function l(m,n,o,p){return (m==='unordered-list-item'?"_3kpz":'')+(m==='ordered-list-item'?' '+"_3kp_":'')+(o?' '+"_3kq0":'')+(n===0?' '+"_3kq1":'')+(n===1?' '+"_3kq2":'')+(n===2?' '+"_3kq3":'')+(n===3?' '+"_3kq4":'')+(n===4?' '+"_3kq5":'')+(p==='LTR'?' '+"_3kq6":'')+(p==='RTL'?' '+"_3kq7":'');}f.exports=k;}),null);
__d('getSelectionOffsetKeyForNode',[],(function a(b,c,d,e,f,g){'use strict';function h(i){if(i instanceof Element){var j=i.getAttribute('data-offset-key');if(j)return j;for(var k=0;k<i.childNodes.length;k++){var l=h(i.childNodes[k]);if(l)return l;}}return null;}f.exports=h;}),null);
__d('findAncestorOffsetKey',['getSelectionOffsetKeyForNode'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i;while(j&&j!==document.documentElement){var k=c('getSelectionOffsetKeyForNode')(j);if(k!=null)return k;j=j.parentNode;}return null;}f.exports=h;}),null);
__d('getTextContentFromFiles',[],(function a(b,c,d,e,f,g){'use strict';var h=/\.textClipping$/,i={'text/plain':true,'text/html':true,'text/rtf':true},j=5000;function k(m,n){var o=0,p=[];m.forEach(function(q){l(q,function(r){o++;r&&p.push(r.slice(0,j));if(o==m.length)n(p.join('\r'));});});}function l(m,n){if(!b.FileReader||m.type&&!(m.type in i)){n('');return;}if(m.type===''){var o='';if(h.test(m.name))o=m.name.replace(h,'');n(o);return;}var p=new FileReader();p.onload=function(){n(p.result);};p.onerror=function(){n('');};p.readAsText(m);}f.exports=k;}),null);
__d('getUpdatedSelectionState',['DraftOffsetKey','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){var n=c('nullthrows')(i.getSelection()),o=c('DraftOffsetKey').decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=c('DraftOffsetKey').decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x;if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}f.exports=h;}),null);
__d('isEventHandled',[],(function a(b,c,d,e,f,g){'use strict';function h(i){return i==='handled'||i===true;}f.exports=h;}),null);
__d('DraftEditorDragHandler',['DataTransfer','DraftModifier','EditorState','findAncestorOffsetKey','getTextContentFromFiles','getUpdatedSelectionState','isEventHandled','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(event,l){var m=null,n=null;if(typeof document.caretRangeFromPoint==='function'){var o=document.caretRangeFromPoint(event.x,event.y);m=o.startContainer;n=o.startOffset;}else if(event.rangeParent){m=event.rangeParent;n=event.rangeOffset;}else return null;m=c('nullthrows')(m);n=c('nullthrows')(n);var p=c('nullthrows')(c('findAncestorOffsetKey')(m));return c('getUpdatedSelectionState')(l,p,n,p,n);}var i={onDragEnd:function l(m){m.exitCurrentMode();},onDrop:function l(m,n){var o=new (c('DataTransfer'))(n.nativeEvent.dataTransfer),p=m._latestEditorState,q=h(n.nativeEvent,p);n.preventDefault();m.exitCurrentMode();if(q==null)return;var r=o.getFiles();if(r.length>0){if(m.props.handleDroppedFiles&&c('isEventHandled')(m.props.handleDroppedFiles(q,r)))return;c('getTextContentFromFiles')(r,function(t){t&&m.update(k(p,q,t));});return;}var s=m._internalDrag?'internal':'external';if(m.props.handleDrop&&c('isEventHandled')(m.props.handleDrop(q,o,s)))return;if(m._internalDrag){m.update(j(p,q));return;}m.update(k(p,q,o.getText()));}};function j(l,m){var n=c('DraftModifier').moveText(l.getCurrentContent(),l.getSelection(),m);return c('EditorState').push(l,n,'insert-fragment');}function k(l,m,n){var o=c('DraftModifier').insertText(l.getCurrentContent(),m,n,l.getCurrentInlineStyle());return c('EditorState').push(l,o,'insert-fragment');}f.exports=i;}),null);
__d('editOnBeforeInput',['BlockTree','DraftModifier','EditorState','UserAgent','getEntityKeyForSelection','isEventHandled','isSelectionAtLeafStart','nullthrows','setImmediate'],(function a(b,c,d,e,f,g){'use strict';var h='\'',i='\/',j=c('UserAgent').isBrowser('Firefox');function k(n){return j&&(n==h||n==i);}function l(n,o,p,q){var r=c('DraftModifier').replaceText(n.getCurrentContent(),n.getSelection(),o,p,q);return c('EditorState').push(n,r,'insert-characters');}function m(n,o){if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined;}var p=n._latestEditorState,q=o.data;if(!q)return;if(n.props.handleBeforeInput&&c('isEventHandled')(n.props.handleBeforeInput(q,p))){o.preventDefault();return;}var r=p.getSelection();if(!r.isCollapsed()){o.preventDefault();n.update(l(p,q,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection())));return;}var s=!c('isSelectionAtLeafStart')(n._latestCommittedEditorState),t=l(p,q,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection()));if(!s){o.preventDefault();n.update(t);return;}var u=r.getAnchorKey(),v=p.getBlockTree(u),w=c('BlockTree').getFingerprint(v),x=c('BlockTree').getFingerprint(t.getBlockTree(u));if(k(q)||w!==x||c('nullthrows')(t.getDirectionMap()).get(u)!==c('nullthrows')(p.getDirectionMap()).get(u)){o.preventDefault();n.update(t);}else{t=c('EditorState').set(t,{nativelyRenderedContent:t.getCurrentContent()});n._pendingStateFromBeforeInput=t;c('setImmediate')(function(){if(n._pendingStateFromBeforeInput!==undefined){n.update(n._pendingStateFromBeforeInput);n._pendingStateFromBeforeInput=undefined;}});}}f.exports=m;}),null);
__d('editOnBlur',['EditorState','UserAgent','getActiveElement'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isEngine('WebKit');function i(j,k){if(h&&c('getActiveElement')()===document.body)b.getSelection().removeAllRanges();var l=j._latestEditorState,m=l.getSelection();if(!m.getHasFocus())return;var n=m.set('hasFocus',false);j.props.onBlur&&j.props.onBlur(k);j.update(c('EditorState').acceptSelection(l,n));}f.exports=i;}),null);
__d('editOnCompositionStart',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){i.setMode('composite');i.update(c('EditorState').set(i._latestEditorState,{inCompositionMode:true}));i._onCompositionStart(j);}f.exports=h;}),null);
__d('getFragmentFromSelection',['getContentStateFragment'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection();if(j.isCollapsed())return null;return c('getContentStateFragment')(i.getCurrentContent(),j);}f.exports=h;}),null);
__d('editOnCopy',['getFragmentFromSelection'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.isCollapsed()){j.preventDefault();return;}i.setClipboard(c('getFragmentFromSelection')(i._latestEditorState));}f.exports=h;}),null);
__d('editOnCut',['DraftModifier','EditorState','Style','getFragmentFromSelection','getScrollPosition'],(function a(b,c,d,e,f,g){'use strict';function h(j,k){var l=j._latestEditorState,m=l.getSelection();if(m.isCollapsed()){k.preventDefault();return;}var n=c('Style').getScrollParent(k.target),o=c('getScrollPosition')(n),p=o.x,q=o.y,r=c('getFragmentFromSelection')(l);j.setClipboard(r);j.setMode('cut');setTimeout(function(){j.restoreEditorDOM({x:p,y:q});j.exitCurrentMode();j.update(i(l));},0);}function i(j){var k=c('DraftModifier').removeRange(j.getCurrentContent(),j.getSelection(),'forward');return c('EditorState').push(j,k,'remove-range');}f.exports=h;}),null);
__d('editOnDragOver',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){i._internalDrag=false;i.setMode('drag');j.preventDefault();}f.exports=h;}),null);
__d('editOnDragStart',[],(function a(b,c,d,e,f,g){'use strict';function h(i){i._internalDrag=true;i.setMode('drag');}f.exports=h;}),null);
__d('editOnFocus',['DraftFeatureFlags','EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i._latestEditorState,l=k.getSelection();if(l.getHasFocus())return;var m=l.set('hasFocus',true);i.props.onFocus&&i.props.onFocus(j);if(c('DraftFeatureFlags').draft_accept_selection_after_refocus){i.update(c('EditorState').acceptSelection(k,m));}else i.update(c('EditorState').forceSelection(k,m));}f.exports=h;}),null);
__d('editOnInput',['DraftFeatureFlags','DraftModifier','DraftOffsetKey','EditorState','UserAgent','findAncestorOffsetKey','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isEngine('Gecko'),i='\n\n';function j(k){if(k._pendingStateFromBeforeInput!==undefined){k.update(k._pendingStateFromBeforeInput);k._pendingStateFromBeforeInput=undefined;}var l=b.getSelection(),m=l.anchorNode,n=l.isCollapsed,o=m.nodeType!==Node.TEXT_NODE,p=m.nodeType!==Node.TEXT_NODE&&m.nodeType!==Node.ELEMENT_NODE;if(c('DraftFeatureFlags').draft_killswitch_allow_nontextnodes){if(o)return;}else if(p)return;if(m.nodeType===Node.TEXT_NODE&&(m.previousSibling!==null||m.nextSibling!==null)){var q=m.parentNode;m.nodeValue=q.textContent;for(var r=q.firstChild;r!==null;r=r.nextSibling)if(r!==m)q.removeChild(r);}var s=m.textContent,t=k._latestEditorState,u=c('nullthrows')(c('findAncestorOffsetKey')(m)),v=c('DraftOffsetKey').decode(u),w=v.blockKey,x=v.decoratorKey,y=v.leafKey,z=t.getBlockTree(w).getIn([x,'leaves',y]),aa=z.start,ba=z.end,ca=t.getCurrentContent(),da=ca.getBlockForKey(w),ea=da.getText().slice(aa,ba);if(s.endsWith(i))s=s.slice(0,-1);if(s===ea)return;var fa=t.getSelection(),ga=fa.merge({anchorOffset:aa,focusOffset:ba,isBackward:false}),ha=da.getEntityAt(aa),ia=ha&&ca.getEntity(ha),ja=ia&&ia.getMutability(),ka=ja==='MUTABLE',la=ka?'spellcheck-change':'apply-entity',ma=c('DraftModifier').replaceText(ca,ga,s,da.getInlineStyleAt(aa),ka?da.getEntityAt(aa):null),na,oa,pa,qa;if(h){na=l.anchorOffset;oa=l.focusOffset;pa=aa+Math.min(na,oa);qa=pa+Math.abs(na-oa);na=pa;oa=qa;}else{var ra=s.length-ea.length;pa=fa.getStartOffset();qa=fa.getEndOffset();na=n?qa+ra:pa;oa=qa+ra;}var sa=ma.merge({selectionBefore:ca.getSelectionAfter(),selectionAfter:fa.merge({anchorOffset:na,focusOffset:oa})});k.update(c('EditorState').push(t,sa,la));}f.exports=j;}),null);
__d('KeyBindingUtil',['UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isPlatform('Mac OS X'),i={isCtrlKeyCommand:function j(k){return !!k.ctrlKey&&!k.altKey;},isOptionKeyCommand:function j(k){return h&&k.altKey;},hasCommandModifier:function j(k){return h?!!k.metaKey&&!k.altKey:i.isCtrlKeyCommand(k);}};f.exports=i;}),null);
__d('SecondaryClipboard',['DraftModifier','EditorState','getContentStateFragment','nullthrows'],(function a(b,c,d,e,f,g){'use strict';var h=null,i={cut:function j(k){var l=k.getCurrentContent(),m=k.getSelection(),n=null;if(m.isCollapsed()){var o=m.getAnchorKey(),p=l.getBlockForKey(o).getLength();if(p===m.getAnchorOffset())return k;n=m.set('focusOffset',p);}else n=m;n=c('nullthrows')(n);h=c('getContentStateFragment')(l,n);var q=c('DraftModifier').removeRange(l,n,'forward');if(q===l)return k;return c('EditorState').push(k,q,'remove-range');},paste:function j(k){if(!h)return k;var l=c('DraftModifier').replaceWithFragment(k.getCurrentContent(),k.getSelection(),h);return c('EditorState').push(k,l,'insert-fragment');}};f.exports=i;}),null);
__d('getRangeClientRects',['invariant','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UserAgent').isBrowser('Chrome');function j(l){var m=l.cloneRange(),n=[];for(var o=l.endContainer;o!=null;o=o.parentNode){var p=o===l.commonAncestorContainer;if(p){m.setStart(l.startContainer,l.startOffset);}else m.setStart(m.endContainer,0);var q=Array.from(m.getClientRects());n.push(q);if(p){var r;n.reverse();return (r=[]).concat.apply(r,n);}m.setEndBefore(o);}h(0);}var k=i?j:function(l){return Array.from(l.getClientRects());};f.exports=k;}),null);
__d('expandRangeToStartOfLine',['invariant','UnicodeUtils','getRangeClientRects'],(function a(b,c,d,e,f,g,h){function i(m){var n=getComputedStyle(m),o=document.createElement('div');o.style.fontFamily=n.fontFamily;o.style.fontSize=n.fontSize;o.style.fontStyle=n.fontStyle;o.style.fontWeight=n.fontWeight;o.style.lineHeight=n.lineHeight;o.style.position='absolute';o.textContent='M';var p=document.body;p||h(0);p.appendChild(o);var q=o.getBoundingClientRect();p.removeChild(o);return q.height;}function j(m,n){var o=Infinity,p=Infinity,q=-Infinity,r=-Infinity;for(var s=0;s<m.length;s++){var t=m[s];if(t.width===0||t.width===1)continue;o=Math.min(o,t.top);p=Math.min(p,t.bottom);q=Math.max(q,t.top);r=Math.max(r,t.bottom);}return q<=p&&q-o<n&&r-p<n;}function k(m){switch(m.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return m.length;default:return m.childNodes.length;}}function l(m){m.collapsed||h(0);m=m.cloneRange();var n=m.startContainer;if(n.nodeType!==1)n=n.parentNode;var o=i(n),p=m.endContainer,q=m.endOffset;m.setStart(m.startContainer,0);while(j(c('getRangeClientRects')(m),o)){p=m.startContainer;q=m.startOffset;p.parentNode||h(0);m.setStartBefore(p);if(p.nodeType===1&&getComputedStyle(p).display!=='inline')break;}var r=p,s=q-1;do{var t=r.nodeValue;for(var u=s;u>=0;u--){if(t!=null&&u>0&&c('UnicodeUtils').isSurrogatePair(t,u-1))continue;m.setStart(r,u);if(j(c('getRangeClientRects')(m),o)){p=r;q=u;}else break;}if(u===-1||r.childNodes.length===0)break;r=r.childNodes[u];s=k(r);}while(true);m.setStart(p,q);return m;}f.exports=l;}),null);
__d('getDraftEditorSelectionWithNodes',['invariant','findAncestorOffsetKey','getSelectionOffsetKeyForNode','getUpdatedSelectionState','nullthrows'],(function a(b,c,d,e,f,g,h){'use strict';function i(n,o,p,q,r,s){var t=p.nodeType===Node.TEXT_NODE,u=r.nodeType===Node.TEXT_NODE;if(t&&u)return {selectionState:c('getUpdatedSelectionState')(n,c('nullthrows')(c('findAncestorOffsetKey')(p)),q,c('nullthrows')(c('findAncestorOffsetKey')(r)),s),needsRecovery:false};var v=null,w=null,x=true;if(t){v={key:c('nullthrows')(c('findAncestorOffsetKey')(p)),offset:q};w=l(o,r,s);}else if(u){w={key:c('nullthrows')(c('findAncestorOffsetKey')(r)),offset:s};v=l(o,p,q);}else{v=l(o,p,q);w=l(o,r,s);if(p===r&&q===s)x=!!p.firstChild&&p.firstChild.nodeName!=='BR';}return {selectionState:c('getUpdatedSelectionState')(n,v.key,v.offset,w.key,w.offset),needsRecovery:x};}function j(n){while(n.firstChild&&c('getSelectionOffsetKeyForNode')(n.firstChild))n=n.firstChild;return n;}function k(n){while(n.lastChild&&c('getSelectionOffsetKeyForNode')(n.lastChild))n=n.lastChild;return n;}function l(n,o,p){var q=o,r=c('findAncestorOffsetKey')(q);r!=null||n&&(n===q||n.firstChild===q)||h(0);if(n===q){q=q.firstChild;q instanceof Element&&q.getAttribute('data-contents')==='true'||h(0);if(p>0)p=q.childNodes.length;}if(p===0){var s=null;if(r!=null){s=r;}else{var t=j(q);s=c('nullthrows')(c('getSelectionOffsetKeyForNode')(t));}return {key:s,offset:0};}var u=q.childNodes[p-1],v=null,w=null;if(!c('getSelectionOffsetKeyForNode')(u)){v=c('nullthrows')(r);w=m(u);}else{var x=k(u);v=c('nullthrows')(c('getSelectionOffsetKeyForNode')(x));w=m(x);}return {key:v,offset:w};}function m(n){var o=n.textContent;return o==='\n'?0:o.length;}f.exports=i;}),null);
__d('moveSelectionBackward',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getSelection(),l=i.getCurrentContent(),m=k.getStartKey(),n=k.getStartOffset(),o=m,p=0;if(j>n){var q=l.getKeyBefore(m);if(q==null){o=m;}else{o=q;var r=l.getBlockForKey(q);p=r.getText().length;}}else p=n-j;return k.merge({focusKey:o,focusOffset:p,isBackward:true});}f.exports=h;}),null);
__d('removeTextWithStrategy',['DraftModifier'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=i.getSelection(),m=i.getCurrentContent(),n=l;if(l.isCollapsed()){if(k==='forward'){if(i.isSelectionAtEndOfContent())return m;}else if(i.isSelectionAtStartOfContent())return m;n=j(i);if(n===l)return m;}return c('DraftModifier').removeRange(m,n,k);}f.exports=h;}),null);
__d('keyCommandBackspaceToStartOfLine',['EditorState','expandRangeToStartOfLine','getDraftEditorSelectionWithNodes','moveSelectionBackward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection();if(l.isCollapsed()&&l.getAnchorOffset()===0)return c('moveSelectionBackward')(k,1);var m=b.getSelection(),n=m.getRangeAt(0);n=c('expandRangeToStartOfLine')(n);return c('getDraftEditorSelectionWithNodes')(k,null,n.endContainer,n.endOffset,n.startContainer,n.startOffset).selectionState;},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;}),null);
__d('DraftRemovableWord',['TokenizeUtil'],(function a(b,c,d,e,f,g){'use strict';var h=c('TokenizeUtil').getPunctuation(),i='[\'\u2018\u2019]',j='\\s|(?![_])'+h,k='^'+'(?:'+j+')*'+'(?:'+i+'|(?!'+j+').)*'+'(?:(?!'+j+').)',l=new RegExp(k),m='(?:(?!'+j+').)'+'(?:'+i+'|(?!'+j+').)*'+'(?:'+j+')*'+'$',n=new RegExp(m);function o(q,r){var s=r?n.exec(q):l.exec(q);return s?s[0]:q;}var p={getBackward:function q(r){return o(r,true);},getForward:function q(r){return o(r,false);}};f.exports=p;}),null);
__d('keyCommandBackspaceWord',['DraftRemovableWord','EditorState','moveSelectionBackward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset();if(m===0)return c('moveSelectionBackward')(k,1);var n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(0,m),q=c('DraftRemovableWord').getBackward(p);return c('moveSelectionBackward')(k,q.length||1);},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;}),null);
__d('moveSelectionForward',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getSelection(),l=k.getStartKey(),m=k.getStartOffset(),n=i.getCurrentContent(),o=l,p,q=n.getBlockForKey(l);if(j>q.getText().length-m){o=n.getKeyAfter(l);p=0;}else p=m+j;return k.merge({focusKey:o,focusOffset:p});}f.exports=h;}),null);
__d('keyCommandDeleteWord',['DraftRemovableWord','EditorState','moveSelectionForward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset(),n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(m),q=c('DraftRemovableWord').getForward(p);return c('moveSelectionForward')(k,q.length||1);},'forward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;}),null);
__d('keyCommandInsertNewline',['DraftModifier','EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('DraftModifier').splitBlock(i.getCurrentContent(),i.getSelection());return c('EditorState').push(i,j,'split-block');}f.exports=h;}),null);
__d('keyCommandMoveSelectionToEndOfBlock',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection(),k=j.getEndKey(),l=i.getCurrentContent(),m=l.getBlockForKey(k).getLength();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:m,focusKey:k,focusOffset:m,isBackward:false}),forceSelection:true});}f.exports=h;}),null);
__d('keyCommandMoveSelectionToStartOfBlock',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection(),k=j.getStartKey();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:0,focusKey:k,focusOffset:0,isBackward:false}),forceSelection:true});}f.exports=h;}),null);
__d('keyCommandPlainBackspace',['EditorState','UnicodeUtils','moveSelectionBackward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p-1];return c('moveSelectionBackward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'backward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'backspace-character':'remove-range');}f.exports=h;}),null);
__d('keyCommandPlainDelete',['EditorState','UnicodeUtils','moveSelectionForward','removeTextWithStrategy'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p];return c('moveSelectionForward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'forward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'delete-character':'remove-range');}f.exports=h;}),null);
__d('keyCommandTransposeCharacters',['DraftModifier','EditorState','getContentStateFragment'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getSelection();if(!j.isCollapsed())return i;var k=j.getAnchorOffset();if(k===0)return i;var l=j.getAnchorKey(),m=i.getCurrentContent(),n=m.getBlockForKey(l),o=n.getLength();if(o<=1)return i;var p,q;if(k===o){p=j.set('anchorOffset',k-1);q=j;}else{p=j.set('focusOffset',k+1);q=p.set('anchorOffset',k+1);}var r=c('getContentStateFragment')(m,p),s=c('DraftModifier').removeRange(m,p,'backward'),t=s.getSelectionAfter(),u=t.getAnchorOffset()-1,v=t.merge({anchorOffset:u,focusOffset:u}),w=c('DraftModifier').replaceWithFragment(s,v,r),x=c('EditorState').push(i,w,'insert-fragment');return c('EditorState').acceptSelection(x,q);}f.exports=h;}),null);
__d('keyCommandUndo',['EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=c('EditorState').undo(j);if(j.getLastChangeType()==='spellcheck-change'){var m=l.getCurrentContent();k(c('EditorState').set(l,{nativelyRenderedContent:m}));return;}i.preventDefault();if(!j.getNativelyRenderedContent()){k(l);return;}k(c('EditorState').set(j,{nativelyRenderedContent:null}));setTimeout(function(){k(l);},0);}f.exports=h;}),null);
__d('editOnKeyDown',['DraftModifier','EditorState','KeyBindingUtil','Keys','SecondaryClipboard','UserAgent','isEventHandled','keyCommandBackspaceToStartOfLine','keyCommandBackspaceWord','keyCommandDeleteWord','keyCommandInsertNewline','keyCommandMoveSelectionToEndOfBlock','keyCommandMoveSelectionToStartOfBlock','keyCommandPlainBackspace','keyCommandPlainDelete','keyCommandTransposeCharacters','keyCommandUndo'],(function a(b,c,d,e,f,g){'use strict';var h=c('KeyBindingUtil').isOptionKeyCommand,i=c('UserAgent').isBrowser('Chrome');function j(l,m){switch(l){case 'redo':return c('EditorState').redo(m);case 'delete':return c('keyCommandPlainDelete')(m);case 'delete-word':return c('keyCommandDeleteWord')(m);case 'backspace':return c('keyCommandPlainBackspace')(m);case 'backspace-word':return c('keyCommandBackspaceWord')(m);case 'backspace-to-start-of-line':return c('keyCommandBackspaceToStartOfLine')(m);case 'split-block':return c('keyCommandInsertNewline')(m);case 'transpose-characters':return c('keyCommandTransposeCharacters')(m);case 'move-selection-to-start-of-block':return c('keyCommandMoveSelectionToStartOfBlock')(m);case 'move-selection-to-end-of-block':return c('keyCommandMoveSelectionToEndOfBlock')(m);case 'secondary-cut':return c('SecondaryClipboard').cut(m);case 'secondary-paste':return c('SecondaryClipboard').paste(m);default:return m;}}function k(l,m){var n=m.which,o=l._latestEditorState;switch(n){case c('Keys').RETURN:m.preventDefault();if(l.props.handleReturn&&c('isEventHandled')(l.props.handleReturn(m,o)))return;break;case c('Keys').ESC:m.preventDefault();l.props.onEscape&&l.props.onEscape(m);return;case c('Keys').TAB:l.props.onTab&&l.props.onTab(m);return;case c('Keys').UP:l.props.onUpArrow&&l.props.onUpArrow(m);return;case c('Keys').DOWN:l.props.onDownArrow&&l.props.onDownArrow(m);return;case c('Keys').SPACE:if(i&&h(m)){m.preventDefault();var p=c('DraftModifier').replaceText(o.getCurrentContent(),o.getSelection(),'\u00a0');l.update(c('EditorState').push(o,p,'insert-characters'));return;}}var q=l.props.keyBindingFn(m);if(!q)return;if(q==='undo'){c('keyCommandUndo')(m,o,l.update);return;}m.preventDefault();if(l.props.handleKeyCommand&&c('isEventHandled')(l.props.handleKeyCommand(q,o)))return;var r=j(q,o);if(r!==o)l.update(r);}f.exports=k;}),null);
__d('getSafeBodyFromHTML',['invariant','UserAgent'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('UserAgent').isBrowser('IE <= 9');function j(k){var l,m=null;if(!i&&document.implementation&&document.implementation.createHTMLDocument){l=document.implementation.createHTMLDocument('foo');l.documentElement||h(0);l.documentElement.innerHTML=k;m=l.getElementsByTagName('body')[0];}return m;}f.exports=j;}),null);
__d('convertFromHTMLToContentBlocks',['invariant','CharacterMetadata','ContentBlock','DefaultDraftBlockRenderMap','DraftEntity','immutable','URI','generateRandomKey','getSafeBodyFromHTML','nullthrows','sanitizeDraftText'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('immutable').Set,j=c('immutable').List,k=c('immutable').OrderedSet,l='&nbsp;',m=' ',n=4,o=new RegExp('\r','g'),p=new RegExp('\n','g'),q=new RegExp(l,'g'),r=new RegExp('&#13;?','g'),s=new RegExp('&#8203;?','g'),t=['bold','bolder','500','600','700','800','900'],u=['light','lighter','100','200','300','400'],v={b:'BOLD',code:'CODE',del:'STRIKETHROUGH',em:'ITALIC',i:'ITALIC',s:'STRIKETHROUGH',strike:'STRIKETHROUGH',strong:'BOLD',u:'UNDERLINE'},w=['className','href','rel','target','title'],x=['alt','className','height','src','width'],y;function z(){return {text:'',inlines:[],entities:[],blocks:[]};}function aa(oa){var pa=new Array(1);if(oa)pa[0]=oa;return {text:m,inlines:[k()],entities:pa,blocks:[]};}function ba(){return {text:'\n',inlines:[k()],entities:new Array(1),blocks:[]};}function ca(oa,pa){return {text:'\r',inlines:[k()],entities:new Array(1),blocks:[{type:oa,depth:Math.max(0,Math.min(n,pa))}]};}function da(oa,pa){if(oa==='li')return pa==='ol'?'ordered-list-item':'unordered-list-item';return null;}function ea(oa){var pa=oa.get('unstyled').element,qa=i([]);oa.forEach(function(ra){if(ra.aliasedElements)ra.aliasedElements.forEach(function(sa){qa=qa.add(sa);});qa=qa.add(ra.element);});return qa.filter(function(ra){return ra&&ra!==pa;}).toArray().sort();}function fa(oa,pa,qa){for(var ra=0;ra<qa.length;ra++){var sa=qa[ra](oa,pa);if(sa)return sa;}return null;}function ga(oa,pa,qa){var ra=qa.filter(function(sa){return sa.element===oa||sa.wrapper===oa||sa.aliasedElements&&sa.aliasedElements.some(function(ta){return ta===oa;});}).keySeq().toSet().toArray().sort();switch(ra.length){case 0:return 'unstyled';case 1:return ra[0];default:return fa(oa,pa,[da])||'unstyled';}}function ha(oa,pa,qa){var ra,sa=v[oa];if(sa){qa=qa.add(sa).toOrderedSet();}else if(pa instanceof HTMLElement)(function(){var ta=pa;qa=qa.withMutations(function(ua){var va=ta.style.fontWeight,wa=ta.style.fontStyle,xa=ta.style.textDecoration;if(t.indexOf(va)>=0){ua.add('BOLD');}else if(u.indexOf(va)>=0)ua.remove('BOLD');if(wa==='italic'){ua.add('ITALIC');}else if(wa==='normal')ua.remove('ITALIC');if(xa==='underline')ua.add('UNDERLINE');if(xa==='line-through')ua.add('STRIKETHROUGH');if(xa==='none'){ua.remove('UNDERLINE');ua.remove('STRIKETHROUGH');}}).toOrderedSet();})();return qa;}function ia(oa,pa){var qa=oa.text.slice(-1),ra=pa.text.slice(0,1);if(qa==='\r'&&ra==='\r'){oa.text=oa.text.slice(0,-1);oa.inlines.pop();oa.entities.pop();oa.blocks.pop();}if(qa==='\r')if(pa.text===m||pa.text==='\n'){return oa;}else if(ra===m||ra==='\n'){pa.text=pa.text.slice(1);pa.inlines.shift();pa.entities.shift();}return {text:oa.text+pa.text,inlines:oa.inlines.concat(pa.inlines),entities:oa.entities.concat(pa.entities),blocks:oa.blocks.concat(pa.blocks)};}function ja(oa,pa){return pa.some(function(qa){return oa.indexOf('<'+qa)!==-1;});}function ka(oa){oa instanceof HTMLAnchorElement||h(0);var pa=oa.protocol;return pa==='http:'||pa==='https:'||pa==='mailto:';}function la(oa,pa,qa,ra,sa,ta,ua,va,wa){var xa,ya,za=pa.nodeName.toLowerCase(),ab=false,bb='unstyled',cb=y,db=oa;if(za==='#text'){var eb=pa.textContent;if(eb.trim()===''&&sa!=='pre')return {chunk:aa(wa),entityMap:oa};if(sa!=='pre')eb=eb.replace(p,m);y=za;return {chunk:{text:eb,inlines:Array(eb.length).fill(qa),entities:Array(eb.length).fill(wa),blocks:[]},entityMap:oa};}y=za;if(za==='br'){if(cb==='br'&&(!sa||ga(sa,ra,va)==='unstyled'))return {chunk:ca('unstyled',ua),entityMap:oa};return {chunk:ba(),entityMap:oa};}if(za==='img'&&pa instanceof HTMLImageElement&&pa.attributes.getNamedItem('src')&&pa.attributes.getNamedItem('src').value)(function(){var nb=pa,ob={};x.forEach(function(qb){var rb=nb.getAttribute(qb);if(rb)ob[qb]=rb;});var pb=new (c('URI'))(ob.src).toString();pa.textContent=pb;wa=c('DraftEntity').__create('IMAGE','MUTABLE',ob||{});})();var fb=z(),gb=null;qa=ha(za,pa,qa);if(za==='ul'||za==='ol'){if(ra)ua+=1;ra=za;}if(!sa&&ta.indexOf(za)!==-1){fb=ca(ga(za,ra,va),ua);sa=za;ab=true;}else if(ra&&sa==='li'&&za==='li'){fb=ca(ga(za,ra,va),ua);sa=za;ab=true;bb=ra==='ul'?'unordered-list-item':'ordered-list-item';}var hb=pa.firstChild;if(hb!=null)za=hb.nodeName.toLowerCase();var ib=null;while(hb){if(hb instanceof HTMLAnchorElement&&hb.href&&ka(hb)){(function(){var nb=hb,ob={};w.forEach(function(pb){var qb=nb.getAttribute(pb);if(qb)ob[pb]=qb;});ob.url=new (c('URI'))(nb.href).toString();ib=c('DraftEntity').__create('LINK','MUTABLE',ob||{});})();}else ib=undefined;var jb=la(db,hb,qa,ra,sa,ta,ua,va,ib||wa),kb=jb.chunk,lb=jb.entityMap;gb=kb;db=lb;fb=ia(fb,gb);var mb=hb.nextSibling;if(mb&&ta.indexOf(za)>=0&&sa)fb=ia(fb,ba());if(mb)za=mb.nodeName.toLowerCase();hb=mb;}if(ab)fb=ia(fb,ca(bb,ua));return {chunk:fb,entityMap:db};}function ma(oa,pa,qa,ra){oa=oa.trim().replace(o,'').replace(q,m).replace(r,'').replace(s,'');var sa=ea(qa),ta=pa(oa);if(!ta)return null;y=null;var ua=ja(oa,sa)?sa:['div'],va=la(ra,ta,k(),'ul',null,ua,-1,qa),wa=va.chunk,xa=va.entityMap;if(wa.text.indexOf('\r')===0)wa={text:wa.text.slice(1),inlines:wa.inlines.slice(1),entities:wa.entities.slice(1),blocks:wa.blocks};if(wa.text.slice(-1)==='\r'){wa.text=wa.text.slice(0,-1);wa.inlines=wa.inlines.slice(0,-1);wa.entities=wa.entities.slice(0,-1);wa.blocks.pop();}if(wa.blocks.length===0)wa.blocks.push({type:'unstyled',depth:0});if(wa.text.split('\r').length===wa.blocks.length+1)wa.blocks.unshift({type:'unstyled',depth:0});return {chunk:wa,entityMap:xa};}function na(oa){var pa=arguments.length<=1||arguments[1]===undefined?c('getSafeBodyFromHTML'):arguments[1],qa=arguments.length<=2||arguments[2]===undefined?c('DefaultDraftBlockRenderMap'):arguments[2],ra=ma(oa,pa,qa,c('DraftEntity'));if(ra==null)return null;var sa=ra.chunk,ta=ra.entityMap,ua=0;return {contentBlocks:sa.text.split('\r').map(function(va,wa){va=c('sanitizeDraftText')(va);var xa=ua+va.length,ya=c('nullthrows')(sa).inlines.slice(ua,xa),za=c('nullthrows')(sa).entities.slice(ua,xa),ab=j(ya.map(function(bb,cb){var db={style:bb,entity:null};if(za[cb])db.entity=za[cb];return c('CharacterMetadata').create(db);}));ua=xa+1;return new (c('ContentBlock'))({key:c('generateRandomKey')(),type:c('nullthrows')(sa).blocks[wa].type,depth:c('nullthrows')(sa).blocks[wa].depth,text:va,characterList:ab});}),entityMap:ta};}f.exports=na;}),null);
__d('DraftPasteProcessor',['CharacterMetadata','ContentBlock','immutable','convertFromHTMLToContentBlocks','generateRandomKey','getSafeBodyFromHTML','sanitizeDraftText'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i=c('immutable').Repeat,j={processHTML:function k(l,m){return c('convertFromHTMLToContentBlocks')(l,c('getSafeBodyFromHTML'),m);},processText:function k(l,m){return l.map(function(n){n=c('sanitizeDraftText')(n);return new (c('ContentBlock'))({key:c('generateRandomKey')(),type:'unstyled',text:n,characterList:h(i(m,n.length))});});}};f.exports=j;}),null);
__d('splitTextIntoTextBlocks',[],(function a(b,c,d,e,f,g){'use strict';var h=/\r\n?|\n/g;function i(j){return j.split(h);}f.exports=i;}),null);
__d('editOnPaste',['BlockMapBuilder','CharacterMetadata','DataTransfer','DraftModifier','DraftPasteProcessor','EditorState','getEntityKeyForSelection','getTextContentFromFiles','isEventHandled','splitTextIntoTextBlocks'],(function a(b,c,d,e,f,g){'use strict';function h(k,l){l.preventDefault();var m=new (c('DataTransfer'))(l.clipboardData);if(!m.isRichText()){var n=m.getFiles(),o=m.getText();if(n.length>0){if(k.props.handlePastedFiles&&c('isEventHandled')(k.props.handlePastedFiles(n)))return;c('getTextContentFromFiles')(n,function(ba){ba=ba||o;if(!ba)return;var ca=k._latestEditorState,da=c('splitTextIntoTextBlocks')(ba),ea=c('CharacterMetadata').create({style:ca.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(ca.getCurrentContent(),ca.getSelection())}),fa=c('DraftPasteProcessor').processText(da,ea),ga=c('BlockMapBuilder').createFromArray(fa),ha=c('DraftModifier').replaceWithFragment(ca.getCurrentContent(),ca.getSelection(),ga);k.update(c('EditorState').push(ca,ha,'insert-fragment'));});return;}}var p=[],q=m.getText(),r=m.getHTML(),s=k._latestEditorState;if(k.props.handlePastedText&&c('isEventHandled')(k.props.handlePastedText(q,r,s)))return;if(q)p=c('splitTextIntoTextBlocks')(q);if(!k.props.stripPastedStyles){var t=k.getClipboard();if(m.isRichText()&&t){if(r.indexOf(k.getEditorKey())!==-1||p.length===1&&t.size===1&&t.first().getText()===q){k.update(i(k._latestEditorState,t));return;}}else if(t&&m.types.includes('com.apple.webarchive')&&!m.types.includes('text/html')&&j(p,t)){k.update(i(k._latestEditorState,t));return;}if(r){var u=c('DraftPasteProcessor').processHTML(r,k.props.blockRenderMap);if(u){var v=u.contentBlocks,w=u.entityMap;if(v){var x=c('BlockMapBuilder').createFromArray(v);k.update(i(k._latestEditorState,x,w));return;}}}k.setClipboard(null);}if(p.length){var y=c('CharacterMetadata').create({style:s.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(s.getCurrentContent(),s.getSelection())}),z=c('DraftPasteProcessor').processText(p,y),aa=c('BlockMapBuilder').createFromArray(z);k.update(i(k._latestEditorState,aa));}}function i(k,l,m){var n=c('DraftModifier').replaceWithFragment(k.getCurrentContent(),k.getSelection(),l);return c('EditorState').push(k,n.set('entityMap',m),'insert-fragment');}function j(k,l){return k.length===l.size&&l.valueSeq().every(function(m,n){return m.getText()===k[n];});}f.exports=h;}),null);
__d('getDraftEditorSelection',['getDraftEditorSelectionWithNodes'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=b.getSelection();if(k.rangeCount===0)return {selectionState:i.getSelection().set('hasFocus',false),needsRecovery:false};return c('getDraftEditorSelectionWithNodes')(i,j,k.anchorNode,k.anchorOffset,k.focusNode,k.focusOffset);}f.exports=h;}),null);
__d('editOnSelect',['invariant','EditorState','ReactDOM','getDraftEditorSelection'],(function a(b,c,d,e,f,g,h){'use strict';function i(j){if(j._blockSelectEvents||j._latestEditorState!==j.props.editorState)return;var k=j.props.editorState,l=c('ReactDOM').findDOMNode(j.refs.editorContainer);l||h(0);l.firstChild instanceof HTMLElement||h(0);var m=c('getDraftEditorSelection')(k,l.firstChild),n=m.selectionState;if(n!==k.getSelection()){if(m.needsRecovery){k=c('EditorState').forceSelection(k,n);}else k=c('EditorState').acceptSelection(k,n);j.update(k);}}f.exports=i;}),null);
__d('DraftEditorEditHandler',['editOnBeforeInput','editOnBlur','editOnCompositionStart','editOnCopy','editOnCut','editOnDragOver','editOnDragStart','editOnFocus','editOnInput','editOnKeyDown','editOnPaste','editOnSelect'],(function a(b,c,d,e,f,g){'use strict';var h={onBeforeInput:c('editOnBeforeInput'),onBlur:c('editOnBlur'),onCompositionStart:c('editOnCompositionStart'),onCopy:c('editOnCopy'),onCut:c('editOnCut'),onDragOver:c('editOnDragOver'),onDragStart:c('editOnDragStart'),onFocus:c('editOnFocus'),onInput:c('editOnInput'),onKeyDown:c('editOnKeyDown'),onPaste:c('editOnPaste'),onSelect:c('editOnSelect')};f.exports=h;}),null);
__d('DraftEditorPlaceholder.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(l){return this.props.text!==l.text||this.props.editorState.getSelection().getHasFocus()!==l.editorState.getSelection().getHasFocus();};k.prototype.render=function(){var l=this.props.editorState.getSelection().getHasFocus(),m="_1p1t"+(l?' '+"_1p1u":'');return c('React').createElement('div',{className:m},c('React').createElement('div',{className:"_1p1v",id:this.props.accessibilityID},this.props.text));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('getDefaultKeyBinding',['KeyBindingUtil','Keys','UserAgent'],(function a(b,c,d,e,f,g){'use strict';var h=c('UserAgent').isPlatform('Mac OS X'),i=c('UserAgent').isPlatform('Windows'),j=h&&c('UserAgent').isBrowser('Firefox < 29'),k=c('KeyBindingUtil').hasCommandModifier,l=c('KeyBindingUtil').isCtrlKeyCommand;function m(r){return h&&r.altKey||l(r);}function n(r){if(!k(r))return null;return r.shiftKey?'redo':'undo';}function o(r){if(i&&r.shiftKey)return null;return m(r)?'delete-word':'delete';}function p(r){if(k(r)&&h)return 'backspace-to-start-of-line';return m(r)?'backspace-word':'backspace';}function q(r){switch(r.keyCode){case 66:return k(r)?'bold':null;case 68:return l(r)?'delete':null;case 72:return l(r)?'backspace':null;case 73:return k(r)?'italic':null;case 74:return k(r)?'code':null;case 75:return !i&&l(r)?'secondary-cut':null;case 77:return l(r)?'split-block':null;case 79:return l(r)?'split-block':null;case 84:return h&&l(r)?'transpose-characters':null;case 85:return k(r)?'underline':null;case 87:return h&&l(r)?'backspace-word':null;case 89:if(l(r))return i?'redo':'secondary-paste';return null;case 90:return n(r)||null;case c('Keys').RETURN:return 'split-block';case c('Keys').DELETE:return o(r);case c('Keys').BACKSPACE:return p(r);case c('Keys').LEFT:return j&&k(r)?'move-selection-to-start-of-block':null;case c('Keys').RIGHT:return j&&k(r)?'move-selection-to-end-of-block':null;default:return null;}}f.exports=q;}),null);
__d('DraftEditor.react',['cx','invariant','DefaultDraftBlockRenderMap','DefaultDraftInlineStyle','DraftEditorCompositionHandler','DraftEditorContents.react','DraftEditorDragHandler','DraftEditorEditHandler','DraftEditorPlaceholder.react','EditorState','React','ReactDOM','Scroll','Style','UserAgent','emptyFunction','generateRandomKey','getDefaultKeyBinding','getScrollPosition','nullthrows'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('UserAgent').isBrowser('IE'),m=!l,n={edit:c('DraftEditorEditHandler'),composite:c('DraftEditorCompositionHandler'),drag:c('DraftEditorDragHandler'),cut:null,render:null};j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p){k.constructor.call(this,p);this._blockSelectEvents=false;this._clipboard=null;this._handler=null;this._dragCount=0;this._editorKey=p.editorKey||c('generateRandomKey')();this._placeholderAccessibilityID='placeholder-'+this._editorKey;this._latestEditorState=p.editorState;this._latestCommittedEditorState=p.editorState;this._onBeforeInput=this._buildHandler('onBeforeInput');this._onBlur=this._buildHandler('onBlur');this._onCharacterData=this._buildHandler('onCharacterData');this._onCompositionEnd=this._buildHandler('onCompositionEnd');this._onCompositionStart=this._buildHandler('onCompositionStart');this._onCopy=this._buildHandler('onCopy');this._onCut=this._buildHandler('onCut');this._onDragEnd=this._buildHandler('onDragEnd');this._onDragOver=this._buildHandler('onDragOver');this._onDragStart=this._buildHandler('onDragStart');this._onDrop=this._buildHandler('onDrop');this._onInput=this._buildHandler('onInput');this._onFocus=this._buildHandler('onFocus');this._onKeyDown=this._buildHandler('onKeyDown');this._onKeyPress=this._buildHandler('onKeyPress');this._onKeyUp=this._buildHandler('onKeyUp');this._onMouseDown=this._buildHandler('onMouseDown');this._onMouseUp=this._buildHandler('onMouseUp');this._onPaste=this._buildHandler('onPaste');this._onSelect=this._buildHandler('onSelect');this.focus=this._focus.bind(this);this.blur=this._blur.bind(this);this.setMode=this._setMode.bind(this);this.exitCurrentMode=this._exitCurrentMode.bind(this);this.restoreEditorDOM=this._restoreEditorDOM.bind(this);this.setClipboard=this._setClipboard.bind(this);this.getClipboard=this._getClipboard.bind(this);this.getEditorKey=function(){return this._editorKey;}.bind(this);this.update=this._update.bind(this);this.onDragEnter=this._onDragEnter.bind(this);this.onDragLeave=this._onDragLeave.bind(this);this.state={contentsKey:0};}o.prototype._buildHandler=function(p){return function(q){if(!this.props.readOnly){var r=this._handler&&this._handler[p];r&&r(this,q);}}.bind(this);};o.prototype._showPlaceholder=function(){return !!this.props.placeholder&&!this.props.editorState.isInCompositionMode()&&!this.props.editorState.getCurrentContent().hasText();};o.prototype._renderPlaceholder=function(){if(this._showPlaceholder())return c('React').createElement(c('DraftEditorPlaceholder.react'),{text:c('nullthrows')(this.props.placeholder),editorState:this.props.editorState,textAlignment:this.props.textAlignment,accessibilityID:this._placeholderAccessibilityID});return null;};o.prototype.render=function(){var p=this.props,q=p.readOnly,r=p.textAlignment,s="_5rp7"+(r==='left'?' '+"_5rp8":'')+(r==='right'?' '+"_5rp9":'')+(r==='center'?' '+"_5rpa":''),t={outline:'none',whiteSpace:'pre-wrap',wordWrap:'break-word'};return c('React').createElement('div',{className:s},this._renderPlaceholder(),c('React').createElement('div',{className:"_5rpb",ref:'editorContainer'},c('React').createElement('div',{'aria-activedescendant':q?null:this.props.ariaActiveDescendantID,'aria-autocomplete':q?null:this.props.ariaAutoComplete,'aria-describedby':this._showPlaceholder()?this._placeholderAccessibilityID:null,'aria-expanded':q?null:this.props.ariaExpanded,'aria-haspopup':q?null:this.props.ariaHasPopup,'aria-label':this.props.ariaLabel,'aria-owns':q?null:this.props.ariaOwneeID,autoCapitalize:this.props.autoCapitalize,autoComplete:this.props.autoComplete,autoCorrect:this.props.autoCorrect,className:(!q?"notranslate":'')+(' '+"_5rpu"),contentEditable:!q,'data-testid':this.props.webDriverTestID,onBeforeInput:this._onBeforeInput,onBlur:this._onBlur,onCompositionEnd:this._onCompositionEnd,onCompositionStart:this._onCompositionStart,onCopy:this._onCopy,onCut:this._onCut,onDragEnd:this._onDragEnd,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this._onDragOver,onDragStart:this._onDragStart,onDrop:this._onDrop,onFocus:this._onFocus,onInput:this._onInput,onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress,onKeyUp:this._onKeyUp,onMouseUp:this._onMouseUp,onPaste:this._onPaste,onSelect:this._onSelect,ref:'editor',role:q?null:this.props.role||'textbox',spellCheck:m&&this.props.spellCheck,style:t,suppressContentEditableWarning:true,tabIndex:this.props.tabIndex},c('React').createElement(c('DraftEditorContents.react'),{blockRenderMap:this.props.blockRenderMap,blockRendererFn:this.props.blockRendererFn,blockStyleFn:this.props.blockStyleFn,customStyleMap:babelHelpers['extends']({},c('DefaultDraftInlineStyle'),this.props.customStyleMap),customStyleFn:this.props.customStyleFn,editorKey:this._editorKey,editorState:this.props.editorState,key:'contents'+this.state.contentsKey,textDirectionality:this.props.textDirectionality}))));};o.prototype.componentDidMount=function(){this.setMode('edit');if(l)document.execCommand('AutoUrlDetect',false,false);};o.prototype.componentWillUpdate=function(p){this._blockSelectEvents=true;this._latestEditorState=p.editorState;};o.prototype.componentDidUpdate=function(){this._blockSelectEvents=false;this._latestCommittedEditorState=this.props.editorState;};o.prototype._focus=function(p){var q=this.props.editorState,r=q.getSelection().getHasFocus(),s=c('ReactDOM').findDOMNode(this.refs.editor),t=c('Style').getScrollParent(s),u=p||c('getScrollPosition')(t),v=u.x,w=u.y;s instanceof HTMLElement||i(0);s.focus();if(t===window){window.scrollTo(v,w);}else c('Scroll').setTop(t,w);if(!r)this.update(c('EditorState').forceSelection(q,q.getSelection()));};o.prototype._blur=function(){var p=c('ReactDOM').findDOMNode(this.refs.editor);p instanceof HTMLElement||i(0);p.blur();};o.prototype._setMode=function(p){this._handler=n[p];};o.prototype._exitCurrentMode=function(){this.setMode('edit');};o.prototype._restoreEditorDOM=function(p){this.setState({contentsKey:this.state.contentsKey+1},function(){this._focus(p);}.bind(this));};o.prototype._setClipboard=function(p){this._clipboard=p;};o.prototype._getClipboard=function(){return this._clipboard;};o.prototype._update=function(p){this._latestEditorState=p;this.props.onChange(p);};o.prototype._onDragEnter=function(){this._dragCount++;};o.prototype._onDragLeave=function(){this._dragCount--;if(this._dragCount===0)this.exitCurrentMode();};o.defaultProps={blockRenderMap:c('DefaultDraftBlockRenderMap'),blockRendererFn:c('emptyFunction').thatReturnsNull,blockStyleFn:c('emptyFunction').thatReturns(''),keyBindingFn:c('getDefaultKeyBinding'),readOnly:false,spellCheck:false,stripPastedStyles:false};f.exports=o;}),null);
__d('insertMentionIntoEditorState',['DraftModifier','EditorState'],(function a(b,c,d,e,f,g){'use strict';function h(j,k,l,m){var n=k.getSelection(),o=k.getCurrentContent(),p=n.getAnchorKey(),q=n.getAnchorOffset(),r=o.getBlockMap().get(p),s=q-i(r.getText().substr(0,q),j.getTitle(),l),t=c('DraftModifier').replaceText(o,n.set('anchorOffset',s),j.getTitle(),k.getCurrentInlineStyle(),m(j));return c('EditorState').push(k,t,'insert-fragment');}function i(j,k,l){for(var m=l;m<=k.length;m++)if(j.substr(-m)==k.substr(0,m))l=m;return l;}f.exports=h;}),null);
__d('AbstractMentionsTextEditor.react',['DraftEditor.react','React','SearchableEntry','TypeaheadNavigation','clearImmediate','getOrCreateDOMID','insertMentionIntoEditorState','setImmediate','uniqueID'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes,k=5,l='handled',m='not-handled';h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(o,p){'use strict';i.constructor.call(this,o,p);this.__onShowMentions=function(q,r){if(!this.$AbstractMentionsTextEditor2)return;var s=r||0;if(!q||!q.length){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return;}var t=q.slice(0,this.props.maxResults),u=this.props.typeaheadViewProps;if(u&&u.mentionSortFn)t.sort(u.mentionSortFn);var v=null;if(this.props.autoHighlight||this.state.highlightedMentionable!==null)v=q[0];this.setState({highlightedMentionable:v,mentionableEntries:t,characterOffset:s});if(this.props.onShowMentions)this.props.onShowMentions(t,s);}.bind(this);this.$AbstractMentionsTextEditor8=function(q){this.setState(this.$AbstractMentionsTextEditor12());this.props.onBlur&&this.props.onBlur(q);}.bind(this);this.$AbstractMentionsTextEditor7=function(q){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(q);}.bind(this);this.$AbstractMentionsTextEditor13=function(q,r){if(this.state.highlightedMentionable){this.$AbstractMentionsTextEditor10(this.state.highlightedMentionable,q);return l;}else if(this.props.handleContentReturn&&this.props.handleContentReturn(q,r))return l;return m;}.bind(this);this.$AbstractMentionsTextEditor6=function(q){var r=this.state.highlightedMentionable;if(r){q.preventDefault();this.$AbstractMentionsTextEditor10(r,q);}else if(this.props.onTab)this.props.onTab(q);}.bind(this);this.$AbstractMentionsTextEditor5=function(q){if(this.props.onEscape)this.props.onEscape(q);if(this.state.mentionableEntries){q.stopPropagation();q.nativeEvent.isPropagationStopped=true;this.setState(this.$AbstractMentionsTextEditor12());}}.bind(this);this.$AbstractMentionsTextEditor11=function(q){if(this.state.mentionableEntries){q.preventDefault();c('TypeaheadNavigation').moveUp(this.state.mentionableEntries,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9);}else this.props.onUpArrow&&this.props.onUpArrow(q);}.bind(this);this.$AbstractMentionsTextEditor4=function(q){if(this.state.mentionableEntries){q.preventDefault();c('TypeaheadNavigation').moveDown(this.state.mentionableEntries,this.state.highlightedMentionable,this.$AbstractMentionsTextEditor9);}else this.props.onDownArrow&&this.props.onDownArrow(q);}.bind(this);this.$AbstractMentionsTextEditor9=function(q){this.setState({highlightedMentionable:q});}.bind(this);this.$AbstractMentionsTextEditor14=function(q){var r=c('getOrCreateDOMID')(q);this.setState({ariaActiveDescendantID:r});}.bind(this);this.$AbstractMentionsTextEditor10=function(q,r){var s=c('insertMentionIntoEditorState')(q,this.props.editorState,this.state.characterOffset,this.props.mentionCreationFn);this.props.onChange(s);this.setState(this.$AbstractMentionsTextEditor12());var t=this.props.onAddMention,u=this.state.mentionableEntries;if(t&&u){var v=u.indexOf(q);t(q,v,r);}}.bind(this);this.__onShowMentions=this.__onShowMentions.bind(this);this.$AbstractMentionsTextEditor4=this.$AbstractMentionsTextEditor4.bind(this);this.$AbstractMentionsTextEditor5=this.$AbstractMentionsTextEditor5.bind(this);this.$AbstractMentionsTextEditor6=this.$AbstractMentionsTextEditor6.bind(this);this.$AbstractMentionsTextEditor7=this.$AbstractMentionsTextEditor7.bind(this);this.$AbstractMentionsTextEditor8=this.$AbstractMentionsTextEditor8.bind(this);this.$AbstractMentionsTextEditor9=this.$AbstractMentionsTextEditor9.bind(this);this.$AbstractMentionsTextEditor10=this.$AbstractMentionsTextEditor10.bind(this);this.$AbstractMentionsTextEditor11=this.$AbstractMentionsTextEditor11.bind(this);this.state=this.$AbstractMentionsTextEditor12();}n.prototype.componentWillMount=function(){'use strict';this.$AbstractMentionsTextEditor2=true;this.$AbstractMentionsTextEditor1=c('uniqueID')();this.$AbstractMentionsTextEditor3=[];};n.prototype.componentWillUnmount=function(){'use strict';this.$AbstractMentionsTextEditor2=false;this.$AbstractMentionsTextEditor3.forEach(function(o){return c('clearImmediate')(o);});this.$AbstractMentionsTextEditor3=[];};n.prototype.$AbstractMentionsTextEditor12=function(){'use strict';return {highlightedMentionable:null,mentionableEntries:null,characterOffset:0};};n.prototype.shouldComponentUpdate=function(o,p){'use strict';return this.props.editorState!==o.editorState||this.props.placeholder!==o.placeholder||this.props.readOnly!==o.readOnly||this.state.mentionableEntries!==p.mentionableEntries||this.state.highlightedMentionable!==p.highlightedMentionable||this.state.ariaActiveDescendantID!==p.ariaActiveDescendantID;};n.prototype.componentDidUpdate=function(o){var p,q=this;'use strict';var r=this.props.editorState;if(r===o.editorState)return;var s=r.getSelection();if(s.getHasFocus()&&s.isCollapsed()){var t;(function(){t=r.getCurrentContent();var u=q.props.mentionsSource;if(u)q.$AbstractMentionsTextEditor3.push(c('setImmediate')(function(){u.search(t,s,this.__onShowMentions);}.bind(q)));})();}};n.prototype.blur=function(){'use strict';this.refs.abstractTextEditor.blur();};n.prototype.focus=function(){'use strict';this.refs.abstractTextEditor.focus();};n.prototype.$AbstractMentionsTextEditor15=function(){'use strict';var o=this.state.mentionableEntries;if(!o||!o.length)return null;var p=this.props.mentionResultsComponent;return c('React').createElement(p,babelHelpers['extends']({},this.props.mentionResultsProps,{viewID:this.$AbstractMentionsTextEditor1,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:o||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this.$AbstractMentionsTextEditor10,onMentionHighlight:this.$AbstractMentionsTextEditor9,onMentionRenderHighlight:this.$AbstractMentionsTextEditor14}));};n.prototype.exitCurrentMode=function(){'use strict';this.refs.abstractTextEditor&&this.refs.abstractTextEditor.exitCurrentMode();};n.prototype.render=function(){'use strict';var o=this.state.mentionableEntries,p=!!(o&&o.length),q=this.props.readOnly?null:'-2';return c('React').createElement('div',{ref:'container',className:this.props.className,tabIndex:q},c('React').createElement(c('DraftEditor.react'),babelHelpers['extends']({},this.props,{ref:'abstractTextEditor',role:'combobox',ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:'list',ariaOwneeID:this.$AbstractMentionsTextEditor1,ariaExpanded:p,ariaHasPopup:p,editorState:this.props.editorState,onBlur:this.$AbstractMentionsTextEditor8,onChange:this.props.onChange,onFocus:this.$AbstractMentionsTextEditor7,onTab:this.$AbstractMentionsTextEditor6,onEscape:this.$AbstractMentionsTextEditor5,onDownArrow:this.$AbstractMentionsTextEditor4,onUpArrow:this.$AbstractMentionsTextEditor11,handleReturn:this.$AbstractMentionsTextEditor13})),this.$AbstractMentionsTextEditor15());};n.prototype.isShowingMentionables=function(){'use strict';return !!this.state.mentionableEntries;};n.defaultProps=babelHelpers['extends']({},c('DraftEditor.react').defaultProps,{autoHighlight:true,maxResults:k});n.propTypes={mentionsSource:j.object,mentionCreationFn:j.func.isRequired,mentionResultsComponent:j.func.isRequired,mentionResultsProps:j.object,excludedEntries:j.object,handleContentReturn:j.func,onAddMention:j.func,onShowMentions:j.func,autoHighlight:j.bool,maxResults:j.number,webDriverTestID:j.string};f.exports=n;}),null);
__d('DebouncedMentionsTextEditor.react',['AbstractMentionsTextEditor.react','clearImmediate','debounce','setImmediate'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('AbstractMentionsTextEditor.react'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this.__maybeSearch=function(){var l,m=this,n=this.props.editorState,o=n.getSelection();if(o.getHasFocus()&&o.isCollapsed())(function(){var p=n.getCurrentContent(),q=m.props.mentionsSource;if(q){if(m.$DebouncedMentionsTextEditor1)c('clearImmediate')(m.$DebouncedMentionsTextEditor1);m.$DebouncedMentionsTextEditor1=c('setImmediate')(function(){q.search(p,o,this.__onShowMentions);}.bind(m));}})();}.bind(this);this.__debouncedSearch=c('debounce')(this.__maybeSearch,50);}j.prototype.componentDidUpdate=function(k){'use strict';if(this.props.editorState!==k.editorState)this.__debouncedSearch();};j.prototype.componentWillUnmount=function(){'use strict';if(this.$DebouncedMentionsTextEditor1)c('clearImmediate')(this.$DebouncedMentionsTextEditor1);i.componentWillUnmount.call(this);};f.exports=j;}),null);
__d('MNAdsLogMessageUtils',['MercuryConfig','MessagingTag','MessengerAdsWebTypedLogger','MNAdsLoggerEventEnum','AdPageMessageTypeEnum'],(function a(b,c,d,e,f,g){'use strict';var h=c('MercuryConfig').LOG_INTERVAL_MS||60000;function i(){this.$MNAdsLogMessageUtils1={};}i.prototype.isLoggedWithinInterval=function(j){if(this.$MNAdsLogMessageUtils1[j]&&this.$MNAdsLogMessageUtils1[j]-Date.now()<h)return true;return false;};i.prototype.setLoggingTime=function(j){this.$MNAdsLogMessageUtils1[j]=Date.now();};i.prototype.logAdsThreadListImpression=function(j){switch(j.folder){case c('MessagingTag').INBOX:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_INBOX);break;case c('MessagingTag').PENDING:this.logWithThreadMetaData(j,c('MNAdsLoggerEventEnum').MESSAGE_SEEN_REQUEST);break;default:return;}};i.prototype.logWithThreadMetaData=function(j,event){if(j.last_message_type!==c('AdPageMessageTypeEnum').NON_AD){var k=j.last_message_timestamp+String(event);if(!c('MercuryConfig').MercuryThreadListEnableImpressionLog||this.isLoggedWithinInterval(k))return;new (c('MessengerAdsWebTypedLogger'))().setEvent(event).setMessageTimestamp(j.last_message_timestamp).setPageID(j.other_user_fbid).log();this.setLoggingTime(k);}};f.exports=new i();}),null);
__d('MercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','MercuryShareStyleMap','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=c('MercuryShareStyleMap').getStyleFactory(this.props.attachment);if(l.factory&&!!l.factory.getSnippetComponent){var m=l.factory.getSnippetComponent();return c('React').createElement(m,babelHelpers['extends']({},this.props,{attachment:l.attachment}));}return null;};function k(){h.apply(this,arguments);}k.propTypes={attachment:c('MercuryShareAttachmentReactShape'),isSenderViewer:j.bool,senderName:j.oneOfType([j.string,j.object])};f.exports=k;}),null);
__d('MercuryAttachmentSnippet.react',['cx','ix','fbt','EmoticonsList','Image.react','MercuryAttachment','MercuryAttachmentSnippetRenderer','MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryIDs','MercuryShareAttachmentSnippet.react','MessengerTextWithEmoticons.react','MercuryParticipants','React','StickerConstants','TextWithEmoticons.react','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MercuryAttachmentSnippet6=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').PHOTO,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet7=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIF,this.$MercuryAttachmentSnippet18,v,this.$MercuryAttachmentSnippet5));}.bind(this),this.$MercuryAttachmentSnippet8=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').VIDEO,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet9=function(v){return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').AUDIO_CLIP,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet15=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet11=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').STICKER,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet12=function(v){if(!!this.$MercuryAttachmentSnippet5[0].share)return c('React').createElement(c('MercuryShareAttachmentSnippet.react'),{attachment:this.$MercuryAttachmentSnippet5[0].share,senderName:v,isViewerSender:this.$MercuryAttachmentSnippet18});return this.$MercuryAttachmentSnippet17(c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').SHARE,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet13=function(v){return c('React').createElement('span',null,c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').GIFT,this.$MercuryAttachmentSnippet18,v));}.bind(this),this.$MercuryAttachmentSnippet16=function(v){return c('React').createElement('span',null,this.$MercuryAttachmentSnippet5.filter(function(w){return w.attach_type===c('MercuryAttachmentType').FILE||w.attach_type===c('MercuryAttachmentType').PHOTO||w.attach_type===c('MercuryAttachmentType').VIDEO;}).map(function(w,x){return this.$MercuryAttachmentSnippet17(w.name,w.icon_type,x);}.bind(this)));}.bind(this),this.$MercuryAttachmentSnippet17=function(v,w,x){var y=c('MercuryAttachment').getAttachIconClass(w||this.$MercuryAttachmentSnippet5[0].icon_type),z=c('joinClasses')(y,"uiIconText _3l6h");return c('React').createElement('span',{key:x},c('React').createElement('span',{className:z},c('React').createElement(c('Image.react'),{src:i("86988")})),v);}.bind(this),this.$MercuryAttachmentSnippet14=function(v){var w=c('MercuryAttachmentSnippetRenderer').renderAttachmentSnippetText(c('MercuryAttachmentSnippetType').ERROR,this.$MercuryAttachmentSnippet18,v);return this.$MercuryAttachmentSnippet17(w);}.bind(this),this.$MercuryAttachmentSnippet2=function(v){this.$MercuryAttachmentSnippet19=v.viewer;this.$MercuryAttachmentSnippet20=v.thread.snippet_sender;this.$MercuryAttachmentSnippet5=v.thread.snippet_attachments;this.$MercuryAttachmentSnippet18=p(this.$MercuryAttachmentSnippet20,this.$MercuryAttachmentSnippet19);}.bind(this),this.$MercuryAttachmentSnippet1=function(v){if(!v)return;this.$MercuryAttachmentSnippet3();if(!c('MercuryParticipants').getNow(v))this.$MercuryAttachmentSnippet21=c('MercuryParticipants').get(v,function(w){return this.forceUpdate();}.bind(this));}.bind(this),this.$MercuryAttachmentSnippet3=function(){this.$MercuryAttachmentSnippet21&&this.$MercuryAttachmentSnippet21.remove();}.bind(this),r;}n.prototype.componentWillMount=function(){this.$MercuryAttachmentSnippet1(this.props.thread.snippet_sender);this.$MercuryAttachmentSnippet2(this.props);};n.prototype.componentWillReceiveProps=function(q){this.$MercuryAttachmentSnippet1(q.thread.snippet_sender);this.$MercuryAttachmentSnippet2(q);};n.prototype.componentWillUnmount=function(){this.$MercuryAttachmentSnippet3();};n.prototype.render=function(){var q=this.$MercuryAttachmentSnippet4(),r=c('MercuryAttachmentSnippetRenderer').getAttachmentSnippetType(this.$MercuryAttachmentSnippet5);switch(r){case c('MercuryAttachmentSnippetType').PHOTO:return this.$MercuryAttachmentSnippet6(q);case c('MercuryAttachmentSnippetType').GIF:return this.$MercuryAttachmentSnippet7(q);case c('MercuryAttachmentSnippetType').VIDEO:return this.$MercuryAttachmentSnippet8(q);case c('MercuryAttachmentSnippetType').AUDIO_CLIP:return this.$MercuryAttachmentSnippet9(q);case c('MercuryAttachmentSnippetType').LIKE_STICKER:return this.$MercuryAttachmentSnippet10(q);case c('MercuryAttachmentSnippetType').STICKER:return this.$MercuryAttachmentSnippet11(q);case c('MercuryAttachmentSnippetType').SHARE:return this.$MercuryAttachmentSnippet12(q);case c('MercuryAttachmentSnippetType').GIFT:return this.$MercuryAttachmentSnippet13(q);case c('MercuryAttachmentSnippetType').ERROR:return this.$MercuryAttachmentSnippet14(q);case c('MercuryAttachmentSnippetType').THIRDPARTYSTICKER:return this.$MercuryAttachmentSnippet15(q);default:return this.$MercuryAttachmentSnippet16(q);}};n.prototype.$MercuryAttachmentSnippet10=function(q){var r=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,text:c('EmoticonsList').symbols.like});if(this.$MercuryAttachmentSnippet18){return c('React').createElement('span',null,j._("You: {conversation_snippet}",[j.param('conversation_snippet',r)]));}else return this.props.thread.is_canonical?c('React').createElement('span',null,j._("{conversation_snippet}",[j.param('conversation_snippet',r)])):c('React').createElement('span',null,j._("{sender name}: {conversation_snippet}",[j.param('sender name',q),j.param('conversation_snippet',r)]));};n.prototype.$MercuryAttachmentSnippet4=function(){if(!this.$MercuryAttachmentSnippet20||this.$MercuryAttachmentSnippet18)return null;var q=c('MercuryParticipants').getNow(this.$MercuryAttachmentSnippet20);if(!q)return null;var r=c('MercuryIDs').getUserIDFromParticipantID(this.$MercuryAttachmentSnippet20),s=this.props.thread.custom_nickname&&this.props.thread.custom_nickname[r];if(s)s=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:s});return s?s:q.short_name;};n.propTypes={thread:m.object.isRequired,viewer:m.string.isRequired};function o(q){return q==c('StickerConstants').LIKE_STICKER_ID||q==c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID||q==c('StickerConstants').HOT_LIKE_MEDIUM_STICKER_ID||q==c('StickerConstants').HOT_LIKE_LARGE_STICKER_ID;}function p(q,r){return !!(q&&c('MercuryIDs').getParticipantIDFromUserID(r)==q);}f.exports=n;}),null);
__d('MercuryThreadSnippet.react',['cx','fbt','immutable','MercuryAttachmentSnippet.react','MercuryIDs','MessengerTextWithEmoticons.react','MNAdsLogMessageUtils','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.shouldComponentUpdate=function(p){return this.props.shouldRenderYou!==p.shouldRenderYou||this.props.thread!==p.thread||this.props.viewer!==p.viewer||this.props.className!==p.className||!c('immutable').is(p.participants,this.props.participants);};m.prototype.render=function(){return c('React').createElement('span',{className:this.props.className},this.$MercuryThreadSnippet1(),this.$MercuryThreadSnippet2());};m.prototype.$MercuryThreadSnippet1=function(){if(!this.props.thread.snippet||!n(this.props.thread))return null;return c('React').createElement('span',{className:"_j0r"});};m.prototype.$MercuryThreadSnippet2=function(){var p=this.props.thread,q=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),r=p.snippet,s=this.props.shouldRenderYou;if(p.snippetCount!=null)return i._({"*":"{number} results","268435456":"1 result"},[i.plural(p.snippetCount,'number')]);if(p.snippet_attachments&&p.snippet_attachments.length>0||!p.snippet_sender)return this.$MercuryThreadSnippet3(r);var t=this.$MercuryThreadSnippet3(r);c('MNAdsLogMessageUtils').logAdsThreadListImpression(p);var u=o(p);if(u)return i._("{name}: {conversation_snippet}",[i.param('name',u),i.param('conversation_snippet',t)]);if(p.snippet_sender===q){if(!s)return t;return i._("You: {conversation_snippet}",[i.param('conversation_snippet',t)]);}if(c('MercuryIDs').isCanonical(p.thread_id)&&!this.props.shouldAlwaysRenderSender)return t;var v=this.props.participants.get(p.snippet_sender);if(!v)return t;var w=v.short_name||v.name;if(p){var x=p.custom_nickname?p.custom_nickname:null,y=c('MercuryIDs').getUserIDFromParticipantID(v.id);if(x&&y&&x[y])w=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:x[y]});}if(!w)return t;return i._("{name}: {conversation_snippet}",[i.param('name',w),i.param('conversation_snippet',t)]);};m.prototype.$MercuryThreadSnippet3=function(p){if(p&&p.startsWith('?OTR'))return i._("[encrypted message]");if(p)return c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:p.replace(/\r\n|[\r\n]/g,' ')});var q=this.props.thread;if(n(q))return c('React').createElement(c('MercuryAttachmentSnippet.react'),{thread:q,viewer:this.props.viewer});return null;};function m(){j.apply(this,arguments);}m.propTypes={participants:l.instanceOf(c('immutable').Map).isRequired,shouldAlwaysRenderSender:l.bool,shouldRenderYou:l.bool,thread:l.object.isRequired,viewer:l.string.isRequired};function n(p){return !!(p.snippet_attachments&&p.snippet_attachments.length>0);}function o(p){if(p&&p.snippet_attachments&&p.snippet_attachments[0]&&p.snippet_attachments[0].share&&p.snippet_attachments[0].share.target&&p.snippet_attachments[0].share.target.genie_name)return p.snippet_attachments[0].share.target.genie_name;return null;}f.exports=m;}),null);
__d('MessengerBotMenuButton.react',['BootloadOnRender.react','ChatFlyoutPlaceholder.react','JSResource','LazyComponent.react','Link.react','MessengerBotMenuDataFetcher','MessengerBotsWebTypedLogger','MessengerContextualDialog.react','MessengerEnvironment','MNBotsLoggerEvents','React','XUIContextualDialog.react'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k=302,l=280;h=babelHelpers.inherits(m,c('React').Component);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.$MessengerBotMenuButton1=false,this.state={flyoutOpen:false,isLoading:false,menuItems:null},this.$MessengerBotMenuButton2=function(){this.setState({flyoutOpen:false});}.bind(this),this.$MessengerBotMenuButton6=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2();}.bind(this),this.$MessengerBotMenuButton4=function(){this.$MessengerBotMenuButton1=this.state.flyoutOpen;}.bind(this),this.$MessengerBotMenuButton3=function(event){event.stopPropagation();if(this.state.flyoutOpen||this.$MessengerBotMenuButton1)return;if(this.state.menuItems===null){this.setState({isLoading:true});this.$MessengerBotMenuButton7();}this.setState({flyoutOpen:!this.state.flyoutOpen});}.bind(this),o;}m.prototype.componentWillUnmount=function(){if(this.state.flyoutOpen)this.$MessengerBotMenuButton2();};m.prototype.render=function(){new (c('MessengerBotsWebTypedLogger'))().setEvent(c('MNBotsLoggerEvents').BOT_COMPOSER_MENU_ICON_DISPLAYED).setPageID(this.props.pageID).log();return c('React').createElement('span',null,c('React').createElement(c('Link.react'),{className:this.props.className,href:'#',onClick:this.$MessengerBotMenuButton3,onMouseDown:this.$MessengerBotMenuButton4,role:'button',ref:'link'}),this.$MessengerBotMenuButton5());};m.prototype.$MessengerBotMenuButton5=function(){if(!this.state.flyoutOpen)return null;var n=c('MessengerEnvironment').messengerui,o=n?k:l,p=n?c('MessengerContextualDialog.react'):c('XUIContextualDialog.react');return c('React').createElement(p,babelHelpers['extends']({alignment:this.props.flyoutAlignment,width:o,position:'above',contextRef:function(){return this.refs.link;}.bind(this),onBeforeHide:this.$MessengerBotMenuButton6,onBlur:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen},this.props,{key:'contextualDialog'}),c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{onEscKeyDown:this.$MessengerBotMenuButton2,shown:this.state.flyoutOpen,isLoading:this.state.isLoading,menuItems:this.state.menuItems,pageID:this.props.pageID,threadID:this.props.threadID,onClick:this.$MessengerBotMenuButton2}),loader:c('JSResource')('MessengerBotMenuDialog.react').__setRef('MessengerBotMenuButton.react'),placeholder:c('React').createElement(c('ChatFlyoutPlaceholder.react'),null)}));};m.prototype.$MessengerBotMenuButton7=function(){c('MessengerBotMenuDataFetcher').getMenuItems(this.props.pageID,function(n){this.setState({menuItems:n,isLoading:false});}.bind(this),function(){this.setState({menuItems:[],isLoading:false});}.bind(this));};m.propTypes={className:j.string,flyoutAlignment:j.string.isRequired,threadID:j.string.isRequired,pageID:j.string.isRequired};f.exports=m;}),null);
__d('MessengerEmojiSpan.react',['cx','EmojiLikeConstants','MessengerSupportedEmojiUtils','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c('MessengerSupportedEmojiUtils').getUrl(o,c('EmojiLikeConstants').size.SMALL);p=p?p:'';return c('React').createElement('span',{className:"_21wj",style:{backgroundImage:'url('+p+')'},'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_21wk"},this.props.children));};function l(){i.apply(this,arguments);}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l;}),null);
__d('MessengerEmoticonSpan.react',['cx','EmojiLikeConstants','MessengerSupportedEmojiUtils','EmoticonEmojiList','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.contentState.getEntity(this.props.entityKey),n=m.getData(),o=n.type,p=c('EmoticonEmojiList').emote2emojis[o],q=c('MessengerSupportedEmojiUtils').getUrl(p,c('EmojiLikeConstants').size.XSMALL);q=q?q:'';return c('React').createElement('span',{className:"_21wj",style:{backgroundImage:'url('+q+')'},'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_21wk"},this.props.children));};function l(){i.apply(this,arguments);}l.propTypes={children:k.arrayOf(k.object),contentState:k.object.isRequired,entityKey:k.string.isRequired,offsetKey:k.string};f.exports=l;}),null);
__d('MessengerMentionSource',[],(function a(b,c,d,e,f,g){'use strict';var h={REPLY:'reply',ATSIGN:'@',TYPEAHEAD:'typeahead'};f.exports=h;}),null);
__d('MessengerMentionsEntityDecorator.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('span',{className:"_fy2"},this.props.children);};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerSingleSectionContactList.react',['cx','MessengerContactAdapters','MessengerContactList.react','MessengerTypeaheadUtils','React','TypeaheadViewPropTypes','joinClasses','wrapNullableForReact'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.entries,n=l.viewProps,o=(!m.length?"_599s":'')+(' '+"_29hl")+(' '+"_8i1")+(' '+"_11_d")+(' '+"_4p-s");return c('React').createElement(c('MessengerContactList.react'),{ariaOwneeID:this.props.ariaOwneeID,className:c('joinClasses')(this.props.className,o,n.className),contactAdapter:c('MessengerContactAdapters').fromSearchableEntry,hasHoverState:true,highlightedEntry:c('wrapNullableForReact')(this.props.highlightedEntry),isLoading:false,listSections:c('MessengerTypeaheadUtils').buildSingleSection(m),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:n.viewer});};function k(){i.apply(this,arguments);}k.propTypes=c('TypeaheadViewPropTypes');k.defaultProps={role:'listbox'};f.exports=k;}),null);
__d('MessengerURLUploader',['AsyncRequest','Event','MercuryConfig','MessengerActions','SubscriptionsHandler','URLMatcher','XShareScrapeAttachmentAsyncController'],(function a(b,c,d,e,f,g){'use strict';var h=c('XShareScrapeAttachmentAsyncController').getURIBuilder().getURI(),i=920,j=920;function k(l,m,n){this.$MessengerURLUploader3=l;this.$MessengerURLUploader5=new (c('SubscriptionsHandler'))();this.$MessengerURLUploader6=n;this.initInput(m);}k.prototype.getData=function(){return this.$MessengerURLUploader2;};k.prototype.getMatchedURL=function(){return this.$MessengerURLUploader4;};k.prototype.initInput=function(l){this.$MessengerURLUploader5.addSubscriptions(c('Event').listen(l,'keyup',this.handleInputValueChange.bind(this)),c('Event').listen(l,'paste',this.handleInputValueChange.bind(this)));};k.prototype.handleInputValueChange=function(l){var m=this.$MessengerURLUploader3(),n=c('URLMatcher').match(m);if(!!n){if(this.$MessengerURLUploader4!==n){this.$MessengerURLUploader4=n;this.$MessengerURLUploader2=null;if(c('MercuryConfig').WWWMessengerURLPreview)c('MessengerActions').loadingPreview(this.$MessengerURLUploader6,n);this.loadShare();}}else if(!c('MercuryConfig').WWWMessengerURLPreview){this.$MessengerURLUploader4=null;this.$MessengerURLUploader2=null;}};k.prototype.loadShare=function(){if(this.$MessengerURLUploader1&&this.$MessengerURLUploader1.abort)this.$MessengerURLUploader1.abort();var l=this.$MessengerURLUploader4;if(l)this.$MessengerURLUploader1=new (c('AsyncRequest'))().setMethod('POST').setURI(h).setData({uri:l,image_width:j,image_height:i,disallow_delayed:true}).setHandler(this.handleShareLoad.bind(this,l)).send();};k.prototype.handleShareLoad=function(l,m){if(l===this.$MessengerURLUploader4)this.$MessengerURLUploader2=(m.payload||0).share_data;};k.prototype.setThreadID=function(l){this.$MessengerURLUploader6=l;};k.prototype.clearShareData=function(){this.$MessengerURLUploader2=null;};f.exports=k;}),null);
__d('createMessengerMentionDraftEntity',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.createEntity('MENTION','SEGMENTED',{id:j.getUniqueID()});return k.getLastCreatedEntityKey();}f.exports=h;}),null);
__d('getEntityMatcher',['DraftEntity'],(function a(b,c,d,e,f,g){var h=c('DraftEntity').get;function i(j,k){var l=k||h;return function(m,n){m.findEntityRanges(function(o){var p=o.getEntity();return typeof p==='string'&&j(l(p));},n);};}f.exports=i;}),null);
__d('getProfileRangesForContentState',['EmojiFormat','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';var h=c('emptyFunction').thatReturnsTrue;function i(j){var k=[],l=0;j.getBlockMap().forEach(function(m){var n=0,o=m.getText();m.findEntityRanges(h,function(p,q){var r=m.getEntityAt(p);if(r){var s=j.getEntity(r);if(s.getType()==='EMOTICON'){n+=s.getData().originalEmoticon.length-1;}else if(s.getType()==='EMOJI'){var t=s.getData().type,u=c('EmojiFormat').codeStringToCodeArray(t),v=String.fromCodePoint.apply(String,u);n+=v.length-1;}else if(s.getType()==='MENTION'){var w=s.getData().id,x=p+n+l;if(/^\d+$/.test(w))k.push({offset:x,length:q-p,id:w});}}});l+=o.length+n+1;});return k;}f.exports=i;}),null);
__d('getVisibleValueForContentStateWithMessengerEmoji',['EmojiFormat','emptyFunction'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getBlockMap().map(function(k){var l=k.getText(),m='';k.findEntityRanges(c('emptyFunction').thatReturnsTrue,function(n,o){var p=k.getEntityAt(n);if(!p){m+=l.slice(n,o);}else{var q=i.getEntity(p);if(q.getType()==='EMOTICON'){m+=q.getData().originalEmoticon;}else if(q.getType()==='EMOJI'){var r=q.getData().type,s=c('EmojiFormat').codeStringToCodeArray(r);m+=String.fromCodePoint.apply(String,s);}else m+=l.slice(n,o);}});return m;});return j.join('\n');}f.exports=h;}),null);
__d('insertMessengerEmojiIntoContentState',['DraftModifier','EmojiFormat'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){var m=j.createEntity('EMOJI','IMMUTABLE',{type:i}),n=m.getLastCreatedEntityKey();return c('DraftModifier').insertText(j,k,c('EmojiFormat').codeStringToUnicode(i),l,n);}f.exports=h;}),null);
__d('handleBeforeInputForMessengerEmoji',['EditorState','MessengerSupportedEmojiUtils','insertMessengerEmojiIntoContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=i.getSelection();if(!k.isCollapsed()||!j)return i;var l=c('MessengerSupportedEmojiUtils').getEmojiMatchObj(j);if(!l||!l.is_supported)return i;var m=c('insertMessengerEmojiIntoContentState')(l.emoji_key,i.getCurrentContent(),k,i.getCurrentInlineStyle());return c('EditorState').push(i,m,'insert-characters');}f.exports=h;}),null);
__d('applyMessengerEmoticonToContentBlock',['CharacterMetadata','EmoticonEmojiList','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='\u3000';function j(k,l,m,n){if(!c('EmoticonEmojiList').names[m])return l;var o=k.createEntity('EMOTICON','IMMUTABLE',{type:c('EmoticonEmojiList').names[m],originalEmoticon:m}),p=o.getLastCreatedEntityKey(),q=l.getText(),r=l.getCharacterList(),s=m.length,t=r.get(n);return l.merge({text:q.slice(0,n)+i+q.slice(n+s),characterList:r.slice(0,n).concat(h.of(c('CharacterMetadata').applyEntity(t,p)),r.slice(n+s))});}f.exports=j;}),null);
__d('getTextAfterNearestEntity',[],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j;while(k>0&&i.getEntityAt(k-1)===null)k--;return i.getText().slice(k,j);}f.exports=h;}),null);
__d('applyMessengerEmoticonToContentState',['EmoticonEmojiList','applyMessengerEmoticonToContentBlock','getTextAfterNearestEntity'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){var k=j.getAnchorKey(),l=j.getAnchorOffset(),m=i.getBlockForKey(k),n=c('getTextAfterNearestEntity')(m,l),o=c('EmoticonEmojiList').regexp.exec(n);if(!o)return i;var p=o[1];if(!p&&l!==n.length)return i;var q=o[2],r=l-n.length,s=r+o.index+o[1].length,t=i.getBlockMap().set(k,c('applyMessengerEmoticonToContentBlock')(i,m,q,s));l-=q.length-1;return i.merge({blockMap:t,selectionBefore:j,selectionAfter:j.merge({anchorOffset:l,focusOffset:l})});}f.exports=h;}),null);
__d('handleBeforeInputForMessengerEmoticon',['DraftModifier','EditorState','applyMessengerEmoticonToContentState'],(function a(b,c,d,e,f,g){'use strict';var h=new RegExp(/[\s\'\".,!?]/);function i(j,k){var l=j.getSelection();if(!l.isCollapsed()||!k||!h.test(k))return j;var m=j.getCurrentContent(),n=c('applyMessengerEmoticonToContentState')(m,l);if(n===m)return j;var o=c('DraftModifier').insertText(n,n.getSelectionAfter(),k);return c('EditorState').push(j,o,'insert-characters');}f.exports=i;}),null);
__d('handleSoftNewlineForMessengerEmoticon',['DraftModifier','EditorState','applyMessengerEmoticonToContentState'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=i.getCurrentContent(),k=i.getSelection(),l=c('applyMessengerEmoticonToContentState')(j,k),m=c('DraftModifier').splitBlock(l,j===l?k:l.getSelectionAfter());return c('EditorState').push(i,m,'split-block');}f.exports=h;}),null);
__d('applyEmoticonToContentBlock',['CharacterMetadata','DraftEntity','EmoticonsList','immutable'],(function a(b,c,d,e,f,g){'use strict';var h=c('immutable').List,i='\u3000';function j(k,l,m){if(!c('EmoticonsList').emotes[l])return k;var n=c('DraftEntity').create('EMOTICON','IMMUTABLE',{type:c('EmoticonsList').emotes[l],originalEmoticon:l}),o=k.getText(),p=k.getCharacterList(),q=l.length,r=p.get(m);return k.merge({text:o.slice(0,m)+i+o.slice(m+q),characterList:p.slice(0,m).concat(h.of(c('CharacterMetadata').applyEntity(r,n)),p.slice(m+q))});}f.exports=j;}),null);
__d('insertEmoticonIntoContentState',['DraftModifier','applyEmoticonToContentBlock'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){var l=c('DraftModifier').replaceText(j,k,i),m=k.getAnchorKey(),n=k.getAnchorOffset(),o=l.getBlockForKey(m),p=l.getBlockMap().set(m,c('applyEmoticonToContentBlock')(o,i,n));n++;return j.merge({blockMap:p,selectionBefore:k,selectionAfter:k.merge({anchorOffset:n,focusOffset:n})});}f.exports=h;}),null);
__d('insertEmoticonIntoEditorState',['DraftModifier','EditorState','insertEmoticonIntoContentState'],(function a(b,c,d,e,f,g){'use strict';var h=' ';function i(j,k){var l=k.getSelection(),m=k.getCurrentContent(),n=l.getStartOffset(),o=l.getEndOffset(),p=m.getBlockForKey(l.getStartKey()).getText(),q=m.getBlockForKey(l.getEndKey()).getText(),r='';if(o<=q.length&&q[o]!==h)r=h;if(n>0&&p[n-1]!==h){m=c('DraftModifier').insertText(m,l,h);l=m.getSelectionAfter();}var s=c('insertEmoticonIntoContentState')(j,m,l);m=c('DraftModifier').insertText(s,s.getSelectionAfter(),r);return c('EditorState').push(k,m,'insert-characters');}f.exports=i;}),null);
__d('isSoftNewlineEvent',['Keys'],(function a(b,c,d,e,f,g){'use strict';function h(i){return i.which===c('Keys').RETURN&&(i.getModifierState('Shift')||i.getModifierState('Alt')||i.getModifierState('Control'));}f.exports=h;}),null);
__d('MessengerComposerInput.react',['cx','fbt','Bootloader','CompositeDraftDecorator','DebouncedMentionsTextEditor.react','DraftModifier','DOMDimensions','EditorState','EmojiFormat','MessengerActions','MessengerEmojiSpan.react','MessengerEmoticonSpan.react','MessengerMentionsEntityDecorator.react','MessengerSingleSectionContactList.react','Event','immutable','MentionsLayer.react','MercuryConfig','MercuryIDs','MercuryThreadIDMap','MercuryThreadSnippet.react','MercuryThreadTitle.react','MercuryTimestamp','MercuryTriodeSourceUtil','MessengerBotMenuButton.react','MessengerConstants','messengerDomIDsRe','MessengerEditorStateManager','MessengerMentionSource','MessengerTabIndices','MessengerURLUploader','React','ReactDOM','Run','SimpleXUIDialog','TypingDetectorController','URLMatcher','clearImmediate','createMessengerMentionDraftEntity','createMentionsSearchSourceFromParticipants','debounce','getEntityMatcher','getProfileRangesForContentState','getThreadTypeNameFromThreadType','getVisibleValueForContentStateWithMessengerEmoji','handleBeforeInputForMessengerEmoji','handleBeforeInputForMessengerEmoticon','handleSoftNewlineForMessengerEmoticon','insertEmoticonIntoEditorState','insertMentionIntoEditorState','insertMessengerEmojiIntoContentState','isSoftNewlineEvent','setImmediate','shouldNotRenderSegoe','throttle'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerDomIDsRe').ids,m=c('React').PropTypes,n=1,o=/^image\//,p='handled',q=8,r='not-handled';j=babelHelpers.inherits(s,c('React').PureComponent);k=j&&j.prototype;function s(v){k.constructor.call(this,v);t.call(this);this.$MessengerInput11=this.$MessengerInput11.bind(this);this.state=this.$MessengerInput12();this.$MessengerInput6=c('debounce')(function(w){if(this.props.isComposing&&w.isComposing)return;if(!this.props.thread||!w.thread||u(this.props,w))this.$MessengerInput13();}.bind(this),300);this.$MessengerInput7=c('throttle')(function(){if(this.$MessengerInput10){var w=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;if(this.$MessengerInput1!==w)this.props.onResize&&this.props.onResize();this.$MessengerInput1=w;}}.bind(this),100);}s.prototype.$MessengerInput12=function(v){return {editorState:this.$MessengerInput14(c('MessengerEditorStateManager').get(this.props.threadID),v)};};s.prototype.componentDidMount=function(){this.$MessengerInput10=true;this.$MessengerInput1=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this)).height;this.$MessengerInput13();this.$MessengerInput2=new (c('MessengerURLUploader'))(this.getValue,c('ReactDOM').findDOMNode(this.refs.input),this.props.threadID);c('Run').onUnload(this.$MessengerInput15);this.$MessengerInput3=c('Event').listen(window,'blur',this.$MessengerInput15);this.$MessengerInput4=c('Event').listen(window,'focus',this.$MessengerInput16);this.$MessengerInput5=c('debounce')(function(){this.$MessengerInput17();}.bind(this),1000);};s.prototype.componentWillUpdate=function(v){if(this.props.threadID!==v.threadID)this.$MessengerInput17();};s.prototype.componentDidUpdate=function(v,w){this.$MessengerInput9=c('setImmediate')(this.$MessengerInput7);if(this.props.threadID!==v.threadID){this.$MessengerInput13();}else this.$MessengerInput6(v);if(w.editorState!==this.state.editorState)this.props.onChange&&this.props.onChange(this.getValue());};s.prototype.componentWillUnmount=function(){this.$MessengerInput10=false;this.$MessengerInput8&&this.$MessengerInput8.destroy();this.props.threadID&&this.$MessengerInput17();this.$MessengerInput9&&c('clearImmediate')(this.$MessengerInput9);this.$MessengerInput3&&this.$MessengerInput3.remove();this.$MessengerInput4&&this.$MessengerInput4.remove();};s.prototype.insertEmoticon=function(v){var w=c('insertEmoticonIntoEditorState')(v,this.state.editorState);if(w!==this.state.editorState)this.$MessengerInput18(w);};s.prototype.insertEmoji=function(v){var w=this.state.editorState,x=c('insertMessengerEmojiIntoContentState')(c('EmojiFormat').codeArrayToCodeString(v),w.getCurrentContent(),w.getSelection(),w.getCurrentInlineStyle()),y=c('EditorState').push(w,x,'insert-characters');if(y!==this.state.editorState)this.$MessengerInput18(c('EditorState').forceSelection(y,x.getSelectionAfter()));};s.prototype.$MessengerInput20=function(){var v=this.props.fileUploader;return Boolean(v&&v.get('uploadingFiles').size>0);};s.prototype.$MessengerInput21=function(){var v='Uploading Files',w='Please wait until the upload is complete before you send your message.';c('SimpleXUIDialog').show(w,v,function(){return this.focus();}.bind(this));};s.prototype.$MessengerInput13=function(){if(!this.$MessengerInput10)return;this.$MessengerInput24();if(this.$MessengerInput2){this.$MessengerInput2.setThreadID(this.props.threadID);this.$MessengerInput2.clearShareData();}var v=this.$MessengerInput12();if(this.props.mentionsEnabled){var w=this.props,x=w.participants,y=w.viewer,z=w.thread;v.mentionsSource=c('createMentionsSearchSourceFromParticipants')(y,x&&x.toArray(),z);}this.setState(v,function(){if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY)c('setImmediate')(function(){if(!this.props.disableAutofocus)this.focus();}.bind(this));}.bind(this));};s.prototype.$MessengerInput17=function(){if(!this.props.threadID)return;c('MessengerEditorStateManager').set(this.props.threadID,this.state.editorState);};s.prototype.$MessengerInput25=function(v){this.setState({editorState:this.$MessengerInput14(c('EditorState').createEmpty()),addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null},v);};s.prototype.$MessengerInput24=function(){this.$MessengerInput8&&this.$MessengerInput8.destroy();this.$MessengerInput8=null;var v=this.props.viewer;if(!v)return;var w=c('ReactDOM').findDOMNode(this.refs.input);if(this.props.threadID!==c('MessengerConstants').NEW_THREAD_KEY&&w)this.$MessengerInput8=new (c('TypingDetectorController'))(c('MercuryIDs').getUserIDFromThreadID(this.props.threadID),w,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),null,c('MercuryThreadIDMap').getForFBID(v).getServerIDFromClientIDNow(this.props.threadID),this.getValue);};s.prototype.$MessengerInput23=function(){var v=this.getMentions();if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:v},function(w){var x,y=this;if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('MessengerActions').cleanFiles(this.props.threadID);if(c('MercuryConfig').WWWMessengerURLPreview)c('MessengerActions').removeSharePreview(this.props.threadID);if(w&&this.props.mentionsEnabled&&(v&&v.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var z=y.state,aa=z.addedMentionsCount,ba=z.mentionsTriggeredCount,ca=z.mentionsTriggerSource,da=y.props,ea=da.thread,fa=da.participants,ga=w;c('Bootloader').loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(ha,ia){new ha().setEvent(ia.MENTION).setGroupSize(fa&&fa.size).setNumDelivered(v&&v.length||0).setNumSelects(aa).setNumTriggers(ba).setThreadid(ea&&ea.thread_id).setThreadType(c('getThreadTypeNameFromThreadType')(ea&&ea.thread_type)).setOfflineThreadid(ga.offline_threading_id).updateExtraData({source:ca}).log();},'MessengerComposerInput.react');})();}.bind(this)))this.$MessengerInput25(function(){this.$MessengerInput17();this.$MessengerInput8&&this.$MessengerInput8.resetState();}.bind(this));};s.prototype.getMentions=function(){return c('getProfileRangesForContentState')(this.state.editorState.getCurrentContent());};s.prototype.getInput=function(){return this.refs.input;};s.prototype.render=function(){var v=this.props,w=v.participants,x=v.thread,y=v.viewer,z=null;if(w&&x&&y){z=i._("Conversation with {participantListAsShownInThreadList}. Updated {lastUpdatedTime} by {recentUpdateStringAsShownInThreadList}",[i.param('participantListAsShownInThreadList',this.$MessengerInput26(x,y)),i.param('lastUpdatedTime',c('MercuryTimestamp').getAbsoluteTimestamp(x.timestamp)),i.param('recentUpdateStringAsShownInThreadList',this.$MessengerInput27(w,x,y))]);}else z=i._("Composing a new message");var aa=null;if(this.props.threadID&&this.props.pageID)aa=c('React').createElement('div',{ref:'botsMenuContainer',className:"_3km1"},c('React').createElement(c('MessengerBotMenuButton.react'),{flyoutAlignment:'left',threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"}));var ba=this.props.thread&&!this.props.thread.is_canonical?i._("Type a message, \u0040name...").toString():i._("Type a message...").toString();return c('React').createElement('div',{className:"_kmc"+(this.props.smallerEqual640?' '+"_2swd":'')+(c('shouldNotRenderSegoe')(this.state.editorState.getCurrentContent().getPlainText())?' '+"_2por":''),onClick:this.focus,role:'presentation'},this.props.showMenu?aa:null,c('React').createElement('div',{className:"_3-8x"+(this.props.showMenu?' '+"_3km3":'')+(' '+"_3oh-")},c('React').createElement(c('DebouncedMentionsTextEditor.react'),{autoHighlight:true,'aria-controls':l.CONVERSATION,ariaDescribedBy:l.COMPOSER_INPUT_DESCRIPTION,ariaLabel:ba,editorState:this.state.editorState,handleBeforeInput:this.$MessengerInput28,handleContentReturn:this.$MessengerInput19,handlePastedFiles:this.$MessengerInput11,handleReturn:this.$MessengerInput19,maxResults:q,mentionCreationFn:this.$MessengerInput29,mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:c('MessengerSingleSectionContactList.react'),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:'above',autoflip:true},mentionsSource:this.state.mentionsSource,onChange:this.$MessengerInput18,placeholder:ba,ref:'input',spellCheck:true,stripPastedStyles:true,tabIndex:this.props.threadID===c('MessengerConstants').NEW_THREAD_KEY?c('MessengerTabIndices').COMPOSER_INPUT:0,textAlignment:'left',onAddMention:this.$MessengerInput30,onShowMentions:this.$MessengerInput31}),c('React').createElement('div',{className:"_5ca7",id:l.COMPOSER_INPUT_DESCRIPTION},z)));};s.prototype.$MessengerInput26=function(v,w){return c('React').createElement(c('MercuryThreadTitle.react'),{thread:v,viewer:w});};s.prototype.$MessengerInput27=function(v,w,x){return c('React').createElement(c('MercuryThreadSnippet.react'),{participants:v,shouldAlwaysRenderSender:true,shouldRenderYou:true,thread:w,viewer:x});};s.prototype.$MessengerInput14=function(v,w){var x=this.$MessengerInput32(v),y=c('EditorState').set(v,{decorator:x});return w||this.props.disableAutofocus?y:c('EditorState').moveFocusToEnd(y);};s.prototype.$MessengerInput32=function(v){var w=c('MessengerEmoticonSpan.react'),x=v.getCurrentContent(),y=[{strategy:c('getEntityMatcher')(function(z){return z.getType()==='EMOTICON';},x.getEntity),component:w}];y.push({strategy:c('getEntityMatcher')(function(z){return z.getType()==='EMOJI';},x.getEntity),component:c('MessengerEmojiSpan.react')});y.push({strategy:c('getEntityMatcher')(function(z){return z.getType()==='MENTION';},x.getEntity),component:c('MessengerMentionsEntityDecorator.react')});return new (c('CompositeDraftDecorator'))(y);};s.prototype.$MessengerInput33=function(v,w){var x=c('handleBeforeInputForMessengerEmoticon')(w,v);if(x===w)return false;this.setState({editorState:x});return true;};s.prototype.$MessengerInput34=function(v,w){var x=c('handleBeforeInputForMessengerEmoji')(w,v);if(x===w)return false;this.setState({editorState:x});return true;};s.prototype.handleTextDropped=function(v){var w=this.state.editorState,x=w.getSelection();if(x.get('hasFocus'))return;var y=c('DraftModifier').replaceText(w.getCurrentContent(),x,v,w.getCurrentInlineStyle()),z=c('EditorState').push(w,y,'insert-fragment');this.$MessengerInput18(z);};s.prototype.getShareData=function(){if(c('MercuryConfig').WWWMessengerURLPreview){var v=this.props.sharePreview;if(v&&v.type&&v.params)return {share_type:v.type,share_params:v.params.get('data')};return null;}var w=c('URLMatcher').match(this.getValue());if(w===this.$MessengerInput2.getMatchedURL())return this.$MessengerInput2.getData();return null;};s.prototype.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode();};s.prototype.triggerSend=function(){if(this.$MessengerInput20()){this.$MessengerInput21();return;}if(this.getValue().trim().length>0||this.hasUploadFiles()||this.$MessengerInput22())this.$MessengerInput23();};s.prototype.$MessengerInput22=function(){var v=this.props.sharePreview;return !!(v&&v.params&&v.type);};s.prototype.hasUploadFiles=function(){var v=this.props.fileUploader;return Boolean(v&&v.get('uploadedFiles'));};s.prototype.addMention=function(v){var w=c('insertMentionIntoEditorState')(v,this.state.editorState,0,this.$MessengerInput29);if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c('MessengerMentionSource').REPLY});this.$MessengerInput18(w);this.$MessengerInput30();};s.propTypes={disableAutofocus:m.bool,fileUploader:m.object,handleOnlyImageUploads:m.bool.isRequired,isComposing:m.bool,mentionsEnabled:m.bool,pageID:m.string,participants:m.instanceOf(c('immutable').Map),sharePreview:m.object,showMenu:m.bool,smallerEqual640:m.bool,thread:m.object,threadID:m.string,viewer:m.string,onBeforeInput:m.func,onChange:m.func,onFileUpload:m.func,onResize:m.func,onMessageSend:m.func};var t=function v(){this.$MessengerInput10=false;this.$MessengerInput18=function(w){if(w!==this.state.editorState)this.setState({editorState:w},function(){this.$MessengerInput5();}.bind(this));}.bind(this);this.$MessengerInput19=function(event,w){if(c('isSoftNewlineEvent')(event)){var x=c('handleSoftNewlineForMessengerEmoticon');this.setState({editorState:x(w)});return p;}this.$MessengerInput20()?this.$MessengerInput21():this.setState({},function(){if(this.getValue().trim().length>0||this.hasUploadFiles()||this.$MessengerInput22())this.$MessengerInput23();}.bind(this));return p;}.bind(this);this.getValue=function(){return c('getVisibleValueForContentStateWithMessengerEmoji')(this.state.editorState.getCurrentContent());}.bind(this);this.focus=function(){this.refs.input&&this.refs.input.focus();}.bind(this);this.$MessengerInput28=function(w,x){this.props.onBeforeInput&&this.props.onBeforeInput(w,x);var y=this.$MessengerInput33(w,x),z=this.$MessengerInput34(w,x);return y||z?p:r;}.bind(this);this.$MessengerInput11=function(w){var x=this.props.handleOnlyImageUploads?w.filter(function(y){return y&&o.test(y.type);}):w;if(x.length){c('MercuryConfig').WWWMessengerUploadFilesPreview?c('MessengerActions').prepareFilesForSend(this.props.threadID,x):this.props.onFileUpload(x);return p;}return r;}.bind(this);this.$MessengerInput15=function(){this.$MessengerInput17();}.bind(this);this.$MessengerInput16=function(){this.setState(this.$MessengerInput12(true));}.bind(this);this.$MessengerInput30=function(){var w=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:w});}.bind(this);this.$MessengerInput31=function(w,x){var y=(this.state.mentionsTriggeredCount||0)+1,z={mentionsTriggeredCount:y};if(!this.state.mentionsTriggerSource)z.mentionsTriggerSource=x===n?c('MessengerMentionSource').ATSIGN:c('MessengerMentionSource').TYPEAHEAD;this.setState(z);}.bind(this);this.$MessengerInput29=function(w){return c('createMessengerMentionDraftEntity')(this.state.editorState.getCurrentContent(),w);}.bind(this);};function u(v,w){var x=v.participants,y=w.participants;if(!x||!y)return true;var z=x.filter(Boolean),aa=y.filter(Boolean);return z.size!==aa.size||!z.equals(aa);}f.exports=s;}),null);
__d('MessengerHotLikeOutlineSVG.react',['cssVar','fbt','CurrentUser','React','MercuryShareAttachmentRenderLocations','uniqueID','UserAgent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m='transparent',n=i._("Thumbs Up Sign");j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={titleId:c('uniqueID')()},q;}o.prototype.render=function(){var p=this.props.color||(c('CurrentUser').isWorkUser()?"#1479fb":"#0084ff"),q=c('UserAgent').isBrowser('Safari')?'0 0 40.16 42.24':'-1 -1 40.16 42.24',r={height:this.props.height||'85%'};if(this.props.location!==c('MercuryShareAttachmentRenderLocations').CHAT&&this.props.location!==c('MercuryShareAttachmentRenderLocations').PAGES_INBOX)r.width='66%';return c('React').createElement('svg',{'aria-labelledby':this.state.titleId,version:'1.1',viewBox:q,preserveAspectRatio:'xMinYMax meet',style:r},c('React').createElement('title',{id:this.state.titleId},n),c('React').createElement('path',{d:'M935.36,1582.44a0,0,0,0,0,0,.06,3.59,3.59,0,0,1-.72,6.53,0,0,0,0,0,0,0,3.56,3.56,0,0,1,.71,2.13,3.6,3.6,0,0,1-3,3.54, 0,0,0,0,0,0,.05,3.56,3.56,0,0,1,.38,1.61,3.61,3.61,0,0,1-3.42,3.6H910v-19.6l5.27-7.9a4,4,0,0,0,.66-2.31l-0.1-4c-0.22-2.4-.09-2.06, 1.13-2.37,2-.51,7.16,1.59,5.13,12.17h11.06A3.59,3.59,0,0,1,935.36,1582.44ZM899,1581h7v22h-7v-22Z',transform:'translate(-898.5 -1563.26)',fill:m,fillRule:'evenodd',stroke:p,strokeLinecap:'round',strokeWidth:'5%'}));};o.propTypes={color:l.string,height:l.string,location:l.string};f.exports=o;}),null);
__d('MessengerHotLikeButton.react',['cx','fbt','EmojiLikeConstants','Image.react','ImmutableObject','Keys','KeyStatus','Link.react','MercuryMessageObject','MercuryTriodeSourceUtil','MessengerEnvironment','MessengerHotLikePreviewEvents','MessengerHotLikeOutlineSVG.react','MessengerHotLikeUtils','MessengerSupportedEmojiUtils','React','StickerConstants','clearTimeout','ifRequired','joinClasses','setIntervalAcrossTransitions','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryMessageObject').get(),m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$MessengerHotLikeButton1=null,this.$MessengerHotLikeButton2=null,this.$MessengerHotLikeButton3=null,this.$MessengerHotLikeButton4=null,this.$MessengerHotLikeButton6=function(t){if(this.props.disabled||this.$MessengerHotLikeButton3){t.preventDefault();t.stopPropagation();}if(this.props.disabled||t.button!==0)return;this.props.onMouseDown&&this.props.onMouseDown();this.$MessengerHotLikeButton3=Date.now();this.$MessengerHotLikeButton9();this.$MessengerHotLikeButton10();}.bind(this),this.$MessengerHotLikeButton8=function(){if(!(this.props.threadID&&this.$MessengerHotLikeButton3))return;this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton12();}.bind(this),this.$MessengerHotLikeButton14=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').POP,this.props.threadID);}.bind(this),this.$MessengerHotLikeButton7=function(){if(this.$MessengerHotLikeButton3){this.$MessengerHotLikeButton3=0;this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton14();}}.bind(this),this.$MessengerHotLikeButton5=function(t){t.stopPropagation();if(this.props.disabled)return;if(c('KeyStatus').getKeyDownCode()===c('Keys').RETURN||!this.props.threadID){var u=this.props.sendCustomLike;if(this.props.customLike&&u){u(this.props.customLike,c('MessengerHotLikeUtils').getEmojiSizeForTime(1));}else this.props.sendSticker(c('MessengerHotLikeUtils').getStickerIDForTime(1));}}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerHotLikeButton4=c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(o,p,q){if(o===this.props.threadID)if(q&&this.props.customLike&&this.props.sendCustomLike){this.props.sendCustomLike(this.props.customLike,q,c('EmojiLikeConstants').source.HOT_LIKE);}else this.props.sendSticker(p);}.bind(this));};n.prototype.componentWillUnmount=function(){this.$MessengerHotLikeButton4&&this.$MessengerHotLikeButton4.remove();};n.prototype.render=function(){var o=null,p={};if(this.props.customLike&&this.props.customLike.emoji){var q=this.props.customLike.emoji,r=c('MessengerSupportedEmojiUtils').getNewEmojiData(q,c('EmojiLikeConstants').size.SMALL),s=this.props.renderSize?this.props.renderSize:16;p.background='none';o=c('React').createElement(c('Image.react'),{src:r&&r.url,style:{padding:s==16?0:3,display:'block',height:s,width:s}});}else if(this.props.CustomRenderer){var t=this.props.CustomRenderer;o=c('React').createElement(t,{color:this.props.customColor,location:this.props.location,renderSize:this.props.renderSize});}else if(this.props.customColor)o=c('React').createElement(c('MessengerHotLikeOutlineSVG.react'),{color:this.props.customColor,location:this.props.location});var u=i._("Send a Like");return c('React').createElement(c('Link.react'),{'aria-label':u,className:c('joinClasses')(this.props.customColor||this.props.CustomRenderer?"_5j_u":'',this.props.className),disabled:this.props.disabled,href:'#',onClick:this.$MessengerHotLikeButton5,onDragStart:function v(w){return w.preventDefault();},onMouseDown:this.$MessengerHotLikeButton6,onMouseLeave:this.$MessengerHotLikeButton7,onMouseUp:this.$MessengerHotLikeButton8,role:'button',style:p,title:u},o);};n.prototype.$MessengerHotLikeButton9=function(){if(!this.props.threadID)return;c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').START,this.$MessengerHotLikeButton13(),this.props.threadID);};n.prototype.$MessengerHotLikeButton12=function(){if(!this.props.threadID)return;if(!c('MessengerEnvironment').messengerui){c('ifRequired')('MessengerHotLikePreview.react',function(){c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);}.bind(this),function(){if(this.$MessengerHotLikeButton1!==null)return;this.$MessengerHotLikeButton1=c('setIntervalAcrossTransitions')(function(){c('ifRequired')('MessengerHotLikePreview.react',function(){if(this.$MessengerHotLikeButton1!==null){clearInterval(this.$MessengerHotLikeButton1);this.$MessengerHotLikeButton1=null;}c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);}.bind(this));}.bind(this),100);}.bind(this));}else c('MessengerHotLikePreviewEvents').emit(c('MessengerHotLikePreviewEvents').STOP,this.props.threadID);};n.prototype.$MessengerHotLikeButton13=function(){var o=this.props.threadID;if(!o)return null;var p=l.constructStickerMessageObject(c('StickerConstants').HOT_LIKE_SMALL_STICKER_ID,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),o);l.normalizeNewMessage(p);p.is_like_preview=true;p.like_preview_since=this.$MessengerHotLikeButton3;p.customLike=this.props.customLike&&this.props.customLike.emoji?this.props.customLike:null;p.body='';return new (c('ImmutableObject'))(p);};n.prototype.$MessengerHotLikeButton10=function(){this.$MessengerHotLikeButton11();this.$MessengerHotLikeButton2=c('setTimeoutAcrossTransitions')(this.$MessengerHotLikeButton14,c('MessengerHotLikeUtils').SizeTimes.large);};n.prototype.$MessengerHotLikeButton11=function(){c('clearTimeout')(this.$MessengerHotLikeButton2);};n.propTypes={CustomRenderer:m.func,onMouseDown:m.func,customLike:m.object,customColor:m.string,location:m.string,sendSticker:m.func.isRequired,sendCustomLike:m.func,threadID:m.string,disabled:m.bool,renderSize:m.number};f.exports=n;}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messages\/commerce\/page\/nullstate\/",{});}),null);
__d('messengerFileSizeErrorDialogReact',['fbt','bs_curry','reasonReact','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';function i(o){switch(o){case "size-exceeded":return 1;case "wrong-type":return 0;default:return 2;}}var j=c('reasonReact').statefulComponent("MessengerFileSizeErrorDialogReact");function k(o){if(o){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function l(o){switch(o){case 0:return h._("The type of file you're trying to attach isn't allowed. Please try again with a different format.");case 1:return h._("The file you have selected is too large. The maximum size is 25MB.");case 2:return null;}}function m(o,p){var q=j.slice();q[9]=function(){return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,k,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[h._("Failed to upload files")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[l(o)])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[[0],[h._("OK")],0,0,0,[0],0,0,[]]))]))]));};return q;}var n=c('reasonReact').wrapReasonForJs(j,function(o){return m(i(o.error),[]);});g.errorOfString=i;g.component=j;g.handleToggle=k;g.renderDialogBody=l;g.make=m;g.jsComponent=n;}),null);
__d('messengerSendButtonReact',['fbt','bs_block','linkReact','reasonReact','bs_js_primitive','bs_camlinternalLazy'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerSendButtonReact"),j=c('bs_block').__(246,[function(){return h._("Press Enter to send")+("\n"+h._("Press Shift+Enter to add a new paragraph"));}]);function k(m,n,o,p){var q=i.slice();q[9]=function(){var r=n?[{color:n[0]}]:0,s=j.tag|0;return c('reasonReact').element(0,0,c('linkReact').make(0,[m],["tooltip"],[s===250?j[0]:s===246?c('bs_camlinternalLazy').force_lazy_block(j):j],0,[o],0,0,0,r,0,0,0,[h._("Send")]));};return q;}var l=c('reasonReact').wrapReasonForJs(i,function(m){return k(m.className,c('bs_js_primitive').null_undefined_to_opt(m.customColor),m.onClick,[]);});g.component=i;g.title=j;g.make=k;g.jsComponent=l;}),null);
__d('MessengerComposer.react',['cx','fbt','invariant','AsyncRequest','AutoFocusableLink.react','BootloadedComponent.react','MercuryBootloadOnInteraction.react','BootloadOnRender.react','Bootloader','ChatPhotoUploader.react','ChatConfig','CurrentUser','EmoticonsList','immutable','JSResource','LazyComponent.react','MercuryConfig','MercuryIDs','MercuryReadOnlyReason','MercuryThreadActions','MessageRequestUtils','MessagingTag','MessengerActions','MessengerBotMenuDataFetcher','messengerButtonReact','MessengerComposerInput.react','ChatPageComposerNullState.react','MessengerConfig','MessengerConstants','MessengerContextualDialog.react','messengerDialogsRe','messengerFileSizeErrorDialogReact','MessengerHotLikeButton.react','MessengerHotLikeUtils','MessengerQuickCamOrigins','MessengerResponsiveBlock.react','messengerSendButtonReact','MessengerView','MNCommercePostbackCTADataManager','MNCommercePostbackRefSendManager','P2PGKValues','React','MercuryShareAttachmentRenderLocations','WorkQEWorkChatFileAttachmentIcon','XMessagingUnblockMessagesController','XMNCommercePageNullStateCTAController','getPageIDFromThreadID','isWebGLEnabled'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerButtonReact').jsComponent,n=c('messengerFileSizeErrorDialogReact').jsComponent,o=c('messengerSendButtonReact').jsComponent,p=c('React').PropTypes,q=640,r=360,s=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;k=babelHelpers.inherits(t,c('React').PureComponent);l=k&&k.prototype;function t(u){l.constructor.call(this,u);this.handleFileUpload=function(v){c('MercuryConfig').WWWMessengerUploadFilesPreview?c('MessengerActions').prepareFilesForSend(this.props.threadID,v):this.refsUploader&&this.refsUploader.uploadFiles(v);this.exitCurrentMode();}.bind(this);this.$MessengerComposer25=function(v){var w=c('EmoticonsList').symbols[v];if(!w)return;this.refsInput&&this.refsInput.insertEmoticon(w);}.bind(this);this.$MessengerComposer41=function(){var v=c('XMessagingUnblockMessagesController').getURIBuilder().getURI(),w=this.props.threadID;new (c('AsyncRequest'))(v).setMethod('POST').setData({fbid:c('MercuryIDs').getUserIDFromThreadID(w)}).send();}.bind(this);this.$MessengerComposer39=function(){this.$MessengerComposer37()['delete'](this.props.threadID);c('MessengerActions').selectThread(null);}.bind(this);this.$MessengerComposer38=function(){this.$MessengerComposer37().archive(this.props.threadID);c('MessengerActions').selectThread(null);}.bind(this);this.$MessengerComposer35=function(v,w){if(v.platformFBID.toString()===c('MercuryConfig').MessengerAppID){this.props.onStickerSelect(v.resultID.toString());}else this.refsGifUploader&&this.refsGifUploader.uploadURL({attribution_app_id:v.platformFBID,external_image_url:v.source.url,preview_url:v.media.preview?v.media.preview.url:v.media.thumbnail.url,source:v.source});}.bind(this);this.$MessengerComposer36=function(v){this.focusInput();this.refsInput&&this.refsInput.insertEmoji(v);}.bind(this);this.$MessengerComposer11=function(v){this.setState({currentValue:v});}.bind(this);this.$MessengerComposer10=function(v,w,x){this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();return this.props.onMessageSend&&this.props.onMessageSend(v,w,x);}.bind(this);this.$MessengerComposer34=function(v){this.refsInput&&this.refsInput.triggerSend();}.bind(this);this.$MessengerComposer8=function(){if(this.state.nullStateCTA!==null){this.setState({disableNullState:true});if(c('MNCommercePostbackRefSendManager').hasMDotMeRef(this.$MessengerComposer4())){c('MNCommercePostbackCTADataManager').sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1,c('MNCommercePostbackRefSendManager').getMdotMeRef());c('MessengerActions').changeMDotMeReferral();}else c('MNCommercePostbackCTADataManager').sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1);}}.bind(this);this.$MessengerComposer1=function(){this.setState({showNullState:true,disableNullState:false});}.bind(this);this.$MessengerComposer1=this.$MessengerComposer1.bind(this);this.state=this.$MessengerComposer2();}t.prototype.componentWillReceiveProps=function(u){if(u.threadID!==this.props.threadID){this.setState(this.$MessengerComposer2());if(u.thread)this.$MessengerComposer3(u.thread.message_count,c('getPageIDFromThreadID')(u.threadID));}if(u.thread&&u.thread.message_count>0)this.setState({showNullState:false});};t.prototype.componentWillMount=function(){if(this.props.thread)this.$MessengerComposer3(this.props.thread.message_count,this.$MessengerComposer4());};t.prototype.componentDidUpdate=function(u){if(u.canReply!==this.props.canReply)this.props.onResize&&this.props.onResize();if(this.props.thread)this.$MessengerComposer5();};t.prototype.render=function(){if(!this.props.canReply){return this.$MessengerComposer6();}else if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$MessengerComposer7();var u=this.props.thread&&this.props.thread.message_count;c('MNCommercePostbackRefSendManager').sendMDotMeRef(this.$MessengerComposer4(),u);if(this.state.showNullState&&this.state.nullStateCTA!==null)return c('React').createElement(c('ChatPageComposerNullState.react'),{title:this.state.nullStateCTA.title,onClick:this.$MessengerComposer8,disabled:this.state.disableNullState});var v=this.$MessengerComposer9();return c('React').createElement(c('MessengerResponsiveBlock.react'),{breakpointsToggles:function w(x){return [x!=null&&x<=q,x];}},function(w){var x=w[0],y=w[1];return c('React').createElement('div',{'aria-label':i._("New message"),className:"_4rv3",role:'region'},c('React').createElement('div',{className:"_5irm"+(x?' '+"_1_73":'')},c('React').createElement(c('MessengerComposerInput.react'),{disableAutofocus:!!this.props.disableAutofocus,fileUploader:this.props.fileUploader,handleOnlyImageUploads:false,isComposing:v,mentionsEnabled:this.props.mentionsEnabled,ref:function(z){return this.refsInput=z;}.bind(this),onBeforeInput:function(){return this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();}.bind(this),onResize:this.props.onResize,onMessageSend:this.$MessengerComposer10,participants:this.props.participants,sharePreview:this.props.sharePreview,smallerEqual640:x,thread:this.props.thread,threadID:v?c('MessengerConstants').NEW_THREAD_KEY:this.props.threadID,pageID:this.$MessengerComposer4(),viewer:this.props.viewer,onFileUpload:this.handleFileUpload,onChange:this.$MessengerComposer11,showMenu:this.state.showMenu}),c('React').createElement('div',{ref:function(z){this.refsButtonsContainer=z;}.bind(this),className:"_4rv4"},this.$MessengerComposer12(y),this.$MessengerComposer13())));}.bind(this));};t.prototype.$MessengerComposer12=function(u){if(this.props.hideActions)return null;if(u&&u<r)return c('React').createElement('div',null,c('React').createElement('ul',{className:"_39bj"},this.$MessengerComposer14(),this.$MessengerComposer15(),this.$MessengerComposer16(),this.$MessengerComposer17()),c('React').createElement('ul',{className:"_39bj"},this.$MessengerComposer18(),this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22()));return c('React').createElement('ul',{className:"_39bj"},c('CurrentUser').isWorkUser()&&c('WorkQEWorkChatFileAttachmentIcon').showIcon?this.$MessengerComposer23():null,this.$MessengerComposer14(),this.$MessengerComposer15(),this.$MessengerComposer16(),this.$MessengerComposer17(),this.$MessengerComposer18(),this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22());};t.prototype.$MessengerComposer24=function(u){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(n,{error:u.error});});};t.prototype.handleTextDropped=function(u){this.refsInput&&this.refsInput.handleTextDropped(u);};t.prototype.focusInput=function(){this.refsInput&&this.refsInput.focus();};t.prototype.$MessengerComposer19=function(){return c('React').createElement('li',null,this.$MessengerComposer26());};t.prototype.$MessengerComposer26=function(){if(!c('P2PGKValues').P2PVisible||!this.props.threadID||this.$MessengerComposer27())return null;var u="_30yy _25pc _39bk";return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:u,ContextualDialog:c('MessengerContextualDialog.react'),threadID:this.props.threadID}),loader:c('JSResource')('P2PSendMoneyContainerBootloader.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:u,role:'button'})});};t.prototype.$MessengerComposer22=function(){if(c('ChatConfig').get('messenger_www_quickcam')&&c('ChatConfig').get('messenger_www_html5_quickcam')&&this.props.threadID)return c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:"_4rv5"+(' '+"_39bk")+(this.state.flyoutOpen?' '+"_5jhb":''),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerQuickCamButtonHTML5.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv5 _39bk",role:'button'})});return null;};t.prototype.$MessengerComposer18=function(){if(!s)return null;return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:c('JSResource')('MessengerVoiceClipButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_4rv7 _39bk _30yy",role:'button'})}));};t.prototype.$MessengerComposer20=function(){if(this.props.thread&&this.props.thread.is_canonical)return null;if(!this.props.threadFBID)return null;return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID}),loader:c('JSResource')('MessengerGroupPollingButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_39bk _30yy _2o-b",role:'button'})}));};t.prototype.$MessengerComposer21=function(){var u=c('MercuryConfig').MessengerGamesGK&&c('isWebGLEnabled')();return u&&this.props.threadFBID&&!this.$MessengerComposer27()?c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID}),loader:c('JSResource')('MessengerGamesButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:"_39bk _30yy _4ce_",role:'button'})})):null;};t.prototype.$MessengerComposer28=function(u){return c('React').createElement('li',{className:"_39bk"},c('React').createElement(c('ChatPhotoUploader.react'),{allowCrossPage:true,disabled:!(this.props.threadID||this.$MessengerComposer29()),ref:function(v){return this.refsUploader=v;}.bind(this),imageClassName:(u=='files'?"_5vn8":'')+(u=='attachment'?' '+"_46si":''),imagesOnly:false,inputClassname:"_260t",linkClassName:"_30yy _260u",onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer24,threadID:this.props.threadID}));};t.prototype.$MessengerComposer14=function(){return this.$MessengerComposer28('files');};t.prototype.$MessengerComposer23=function(){return this.$MessengerComposer28('attachment');};t.prototype.$MessengerComposer30=function(){return this.state.currentValue.length>0||this.$MessengerComposer31()||this.$MessengerComposer32();};t.prototype.$MessengerComposer31=function(){var u=this.props.fileUploader;return Boolean(u&&u.get('uploadedFiles').size>0);};t.prototype.$MessengerComposer32=function(){var u=this.props.sharePreview;return !!(u&&u.params&&u.type);};t.prototype.$MessengerComposer33=function(){var u=this.props.fileUploader;return Boolean(u&&u.get('uploadingFiles').size>0);};t.prototype.$MessengerComposer13=function(){var u=!(this.props.threadID||this.$MessengerComposer29());if(!u&&this.$MessengerComposer30()&&!this.$MessengerComposer33())return c('React').createElement(o,{className:(this.props.threadID?"_30yy":'')+(' '+"_38lh")+(' '+"_39bl"),customColor:this.props.thread&&this.props.thread.custom_color,onClick:this.$MessengerComposer34});return c('React').createElement(c('MessengerHotLikeButton.react'),{className:"_4rv9"+(this.props.threadID?' '+"_30yy":'')+(' '+"_39bl"),disabled:u,customColor:this.props.thread&&this.props.thread.custom_color,customLike:c('MessengerHotLikeUtils').getCustomEmojiFromThread(this.props.thread)||undefined,sendSticker:this.props.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24});};t.prototype.$MessengerComposer15=function(){var u=(this.props.threadID?"_30yy":'')+(' '+"_4rv6")+(' '+"_39bk");return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:u,ContextualDialogClass:c('MessengerContextualDialog.react'),disabled:!(this.props.threadID||this.$MessengerComposer29()),getInput:function(){return this.refsInput;}.bind(this),flyoutAlignment:'right',flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this.$MessengerComposer25,threadID:this.props.threadID}),loader:c('JSResource')('ChatStickerButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:u,role:'button'})}));};t.prototype.$MessengerComposer16=function(){var u=(this.props.threadID?"_30yy":'')+(' '+"_yht")+(' '+"_39bk");return c('React').createElement('li',null,c('React').createElement('div',{style:{display:'none'}},c('React').createElement(c('ChatPhotoUploader.react'),{allowCrossPage:true,disabled:false,ref:function(v){return this.refsGifUploader=v;}.bind(this),imagesOnly:false,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer24})),c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:u,ContextualDialogClass:c('MessengerContextualDialog.react'),getInput:function(){return this.refsInput;}.bind(this),getQuery:function(){return this.refsInput?this.refsInput.getValue():'';}.bind(this),location:c('MercuryShareAttachmentRenderLocations').MESSENGER,onSelect:this.$MessengerComposer35}),loader:c('JSResource')('ChatContentSearchButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:u,role:'button'})}));};t.prototype.$MessengerComposer17=function(){var u=(this.props.threadID?"_30yy":'')+(' '+"_5s2p")+(' '+"_39bk");return c('React').createElement('li',null,c('React').createElement(c('MercuryBootloadOnInteraction.react'),{component:c('React').createElement(c('LazyComponent.react'),{className:u,ContextualDialogClass:c('MessengerContextualDialog.react'),flyoutAlignment:'right',getInput:function(){return this.refsInput;}.bind(this),onSelect:this.$MessengerComposer36,onMount:function(v){return this.refsEmojiButton=v;}.bind(this),sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:c('JSResource')('ChatEmojiButton.react').__setRef('MessengerComposer.react'),placeholder:c('React').createElement(c('AutoFocusableLink.react'),{className:u,role:'button'})}));};t.prototype.$MessengerComposer7=function(){return c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',{style:{height:51}}),bootloadLoader:c('JSResource')('MessengerPendingActions.react').__setRef('MessengerComposer.react'),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){this.$MessengerComposer37().changeFolder(this.props.threadID,c('MessagingTag').INBOX);this.setState({pendingActionsBypassed:true});}.bind(this),onDeleteClick:function(){c('Bootloader').loadModules(["messengerDeleteDialogReact"],function(u){var v=u.jsComponent;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(v,{onArchive:this.$MessengerComposer38,onDelete:this.$MessengerComposer39,onToggle:this.$MessengerComposer40});}.bind(this));}.bind(this),'MessengerComposer.react');}.bind(this),onIgnoreClick:function(){this.$MessengerComposer37().changeFolder(this.props.threadID,c('MessagingTag').OTHER);c('MessengerActions').selectThread(null);}.bind(this)});};t.prototype.$MessengerComposer6=function(){if(!this.props.thread||this.props.view===c('MessengerView').DETAIL.COMPOSE)return null;var u=this.props.thread,v=this.props.participants,w=false,x=false;if(u.cannot_reply_reason==='blocked'){w=true;u.is_canonical===true||j(0);v!=null||j(0);var y=u.other_user_fbid;y!=null||j(0);var z=v.get(c('MercuryIDs').getParticipantIDFromUserID(y));z!=null||j(0);if(z.is_messenger_blocked)x=true;}if(w)if(x){return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},i._("You've blocked messages from this person. {unblock_now_button}",[i.param('unblock_now_button',c('React').createElement(m,{label:i._("Unblock Now"),onClick:this.$MessengerComposer41,type:'secondary'}))])));}else return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},i._("This person isn't available right now.")));return c('React').createElement('div',{className:"_4rv3"},c('React').createElement('div',{className:"_2wy4"},c('MercuryReadOnlyReason').getReason(u.has_email_participant)));};t.prototype.$MessengerComposer40=function(u){if(!u)c('messengerDialogsRe').removeDialog();};t.prototype.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode();};t.prototype.$MessengerComposer9=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE;};t.prototype.$MessengerComposer29=function(){return !!(this.$MessengerComposer9()&&this.props.recipients&&this.props.recipients.size);};t.prototype.$MessengerComposer27=function(){return !!this.$MessengerComposer4();};t.prototype.$MessengerComposer4=function(){return c('getPageIDFromThreadID')(this.props.threadID);};t.prototype.$MessengerComposer5=function(){var u=this.$MessengerComposer4();if(u){c('MessengerBotMenuDataFetcher').getHasMenu(u,function(v){this.setState({showMenu:v});}.bind(this),function(){this.setState({showMenu:false});}.bind(this));}else this.setState({showMenu:false});};t.prototype.$MessengerComposer3=function(u,v){var w=u===0,x=!!v;if(x&&w){var y=c('XMNCommercePageNullStateCTAController').getURIBuilder();new (c('AsyncRequest'))().setURI(y.getURI()).setMethod('POST').setData({page_id:v}).setHandler(function(z){if(z&&z.payload){this.setState({showNullState:true,nullStateCTA:z.payload});}else this.setState({showNullState:false,disableNullState:false});}.bind(this)).send();}else this.setState({showNullState:false,disableNullState:false});};t.prototype.$MessengerComposer2=function(){return {pendingActionsBypassed:false,currentValue:'',nullStateCTA:null,showMenu:false,showNullState:false,disableNullState:false};};t.prototype.$MessengerComposer37=function(){return c('MercuryThreadActions').getForFBID(this.props.viewer);};t.prototype.testUtils_renderRawP2PSendMoneyButton=function(){return this.$MessengerComposer26();};t.prototype.replyToMention=function(u){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(u);};t.propTypes={canReply:p.bool,disableAutofocus:p.bool,fileUploader:p.object,hideActions:p.bool,mentionsEnabled:p.bool,onCustomLikeSelect:p.func,onMessageSend:p.func,onPhotoUploadComplete:p.func,onPhotoUploadCancel:p.func,onPhotoUploadFail:p.func,onPhotoUploadSubmit:p.func,onResize:p.func,onStickerSelect:p.func.isRequired,onVoiceClipCreate:p.func,participants:p.instanceOf(c('immutable').Map),recipients:p.instanceOf(c('immutable').List),sharePreview:p.object,threadID:p.string,threadFBID:p.string,thread:p.object,view:p.string,viewer:p.string};f.exports=t;}),null);
__d('MessengerEmojiUsageUtils',['MessengerSupportedEmojiUtils','Utf16'],(function a(b,c,d,e,f,g){'use strict';var h=65039,i={findAllEmojis:function j(k){var l=[],m=c('MessengerSupportedEmojiUtils').parse(k);m.forEach(function(n){var o=[];n.emoji.forEach(function(p){var q=c('Utf16').decode(p);if(q)o.push(q);});o[o.length-1]===h&&o.pop();l.push(o);});return l;}};f.exports=i;}),null);
__d('MessengerUploadFilesUtil',['FantaTypeFileUploader'],(function a(b,c,d,e,f,g){var h={addAttachmentIDsToMessage:function i(j,k){if(!k)return j;var l=k.getTypeIDs(c('FantaTypeFileUploader').fileTypes.IMAGE);if(l.length>0){j.image_ids=l;j.has_attachment=true;}var m=k.getTypeIDs(c('FantaTypeFileUploader').fileTypes.ANIMATED_IMAGE);if(m.length>0){j.gif_ids=m;j.has_attachment=true;}var n=k.getTypeIDs(c('FantaTypeFileUploader').fileTypes.VIDEO);if(n.length>0){j.video_ids=n;j.has_attachment=true;}var o=k.getTypeIDs(c('FantaTypeFileUploader').fileTypes.AUDIO);if(o.length>0){j.audio_ids=o;j.has_attachment=true;}var p=k.getTypeIDs(c('FantaTypeFileUploader').fileTypes.FILE);if(p.length>0){j.file_ids=p;j.has_attachment=true;}return j;}};f.exports=h;}),null);
__d('messengerSimpleDialogReact',['fbt','bs_curry','reasonReact','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerSimpleDialogReact");function j(m){if(m){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function k(m,n,o){var p=i.slice();p[9]=function(){return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,j,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[m])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[n])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[[0],[h._("OK")],0,0,0,[0],0,0,[]]))]))]));};return p;}var l=c('reasonReact').wrapReasonForJs(i,function(m){return k(m.title,m.body,[]);});g.component=i;g.handleToggle=j;g.make=k;g.jsComponent=l;}),null);
__d('MessengerComposerContainer.react',['fbt','Arbiter','AsyncUploadRequest','EmojiLikeUtils','EmojiState','EmojiDispatcher','immutable','MercuryAttachment','MercuryAttachmentType','MercuryConfig','MercuryThreadIDMap','MercuryThreadInformer','MercuryIDs','MercuryLocalIDs','MercuryMessageActions','MercuryMessageObject','MercuryParticipants','MercurySendMessageHandler','MercuryThreads','MercuryThreadActions','MercuryTriodeSourceUtil','MessageRequestUtils','MessengerActions','MessengerComposer.react','MessengerComposerActions','messengerDialogsRe','MessengerEmojiUsageUtils','messengerSimpleDialogReact','MessengerUploadFilesUtil','MessengerView','MNPlatformTagsDataManager','PhotosUploadID','React','ReactDOM','SearchableEntry','SubscriptionsHandler','setImmediate','EmojiStateStore'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerSimpleDialogReact').jsComponent,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerComposerContainer8=function(t,u,v){c('EmojiState').updateRecentlyUsed(c('MessengerEmojiUsageUtils').findAllEmojis(t));if(!this.props.canReply){v&&v(null);return false;}var w=null,x=this.$MessengerComposerContainer16(function(y){var z=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),y),aa=c('MercuryIDs').getUserIDFromThreadID(y);if(c('MNPlatformTagsDataManager').hasThreadTags(aa)){var ba=c('MNPlatformTagsDataManager').getThreadTags();z.tags=ba;}if(u){if(u.shareable_attachment)z.shareable_attachment=u.shareable_attachment;if(u.profile_ranges)z.profile_ranges=z.profile_xmd=u.profile_ranges;}if(c('MercuryConfig').WWWMessengerUploadFilesPreview)z=c('MessengerUploadFilesUtil').addAttachmentIDsToMessage(z,this.props.fileUploader);w=z;return z;}.bind(this));v&&v(x?w:null);w=null;return x;}.bind(this),this.$MessengerComposerContainer10=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u);}.bind(this),this.$MessengerComposerContainer9=function(t,u){this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(u.upload_id,u);}.bind(this),this.$MessengerComposerContainer11=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u);var v=h._("Photo Upload failed"),w=h._("Please try again. Make sure you are uploading a valid photo.");if(u.errorDialogParams){v=u.errorDialogParams.title||v;w=u.errorDialogParams.body||w;}this.$MessengerComposerContainer17(v,w);}.bind(this),this.$MessengerComposerContainer12=function(t,u){this.$MessengerComposerContainer16(function(v){return this.$MessengerComposerContainer2.constructAttachmentMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),v);}.bind(this),function(v){this.$MessengerComposerContainer3.addAttachmentPlaceholder(v,u.upload_id,u);this.handleMessageSentToPendingThread();}.bind(this));}.bind(this),this.$MessengerComposerContainer15=function(t){var u='upload_'+c('PhotosUploadID').getNewID();this.$MessengerComposerContainer1.sendAttachment(this.props.threadID,n(u),c('MercuryTriodeSourceUtil').getMercuryTriodeSource());var v={};v[u]=t;var w=new (c('AsyncUploadRequest'))(c('MercuryConfig').upload_url).setAllowCrossOrigin(true).setRelativeTo(c('ReactDOM').findDOMNode(this)).setData({voice_clip:true}).setFiles(v);this.$MessengerComposerContainer4.addSubscriptions(w.subscribe('success',function(x,y){return this.$MessengerComposerContainer18(y);}.bind(this)));w.send();}.bind(this),this.$MessengerComposerContainer18=function(t){var u=t.getName(),v=t.getResponse().payload.metadata[0].audio_id;this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(u,{upload_id:u,audio_ids:[v]});}.bind(this),this.$MessengerComposerContainer13=function(t){return this.$MessengerComposerContainer16(function(u){return this.$MessengerComposerContainer2.constructStickerMessageObject(t,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),u);}.bind(this));}.bind(this),this.$MessengerComposerContainer14=function(t,u,v){var w=this.props.threadID,x=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t.emoji,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),w);x.has_attachment=false;return this.$MessengerComposerContainer16(function(y){c('EmojiLikeUtils').setEmojiSize(x,u);return c('EmojiLikeUtils').setEmojiSource(x,v);});}.bind(this),this.$MessengerComposerContainer16=function(t,u){var v=this.props.threadID,w=this.props.recipients,x=false;if(!v&&w&&w.size>1){v=c('MercuryLocalIDs').generateThreadID();x=true;}if(!v)return false;var y=t(v);if(x){var z=w.map(function(aa){return c('MercuryIDs').getParticipantIDFromUserID(aa.getUniqueID());}).toArray();this.$MessengerComposerContainer5.createNewLocalThread(v,z);y.offline_threading_id=c('MercuryIDs').tokenize(v).value;y.specific_to_list=z;}if(u){u(y);}else this.$MessengerComposerContainer3.send(y,this.handleMessageSentToPendingThread);if(this.props.view===c('MessengerView').DETAIL.COMPOSE){if(c('MercuryAttachment').get(y).length>0)c('MessengerComposerActions').moveDraftToNextThread(v);c('MessengerComposerActions').exitComposeState();if(c('MercuryIDs').isLocalThread(v)){this.$MessengerComposerContainer6.subscribeOnce('messages-updated',function(aa,ba){var ca=c('MercuryThreadIDMap').get();if(ca.canLinkExternally(v))c('MessengerActions').selectThread(v);});}else c('MessengerActions').selectThread(v);}this.focusInput();return true;}.bind(this),this.handleMessageSentToPendingThread=function(){if(this.props.thread&&c('MessageRequestUtils').isMessageRequest(this.props.thread))c('MercuryThreadActions').getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID);}.bind(this),this.$MessengerComposerContainer7=function(t,event){if(event.threadID===this.props.threadID)c('MercuryParticipants').get(event.participantID,function(u){if(!u||!this.refsComposer)return;var v=new (c('SearchableEntry'))({uniqueID:u.fbid,title:'@'+u.name});c('setImmediate')(function(){if(this.refsComposer){this.refsComposer.focusInput();this.refsComposer&&this.refsComposer.replyToMention&&this.refsComposer.replyToMention(v);}}.bind(this));}.bind(this));}.bind(this),p;}m.prototype.componentDidMount=function(){this.$MessengerComposerContainer1=c('MercurySendMessageHandler').getForFBID(this.props.viewer);this.$MessengerComposerContainer3=c('MercuryMessageActions').getForFBID(this.props.viewer);this.$MessengerComposerContainer5=c('MercuryThreads').getForFBID(this.props.viewer);this.$MessengerComposerContainer2=c('MercuryMessageObject').getForFBID(this.props.viewer);this.$MessengerComposerContainer6=c('MercuryThreadInformer').getForFBID(this.props.viewer);this.$MessengerComposerContainer4=new (c('SubscriptionsHandler'))();c('EmojiDispatcher').explicitlyRegisterStores([c('EmojiStateStore')]);if(c('MercuryConfig').MentionsReplyEvent)this.$MessengerComposerContainer4.addSubscriptions(c('Arbiter').subscribe(c('MercuryConfig').MentionsReplyEvent,this.$MessengerComposerContainer7));this.props.onMount&&this.props.onMount(this);};m.prototype.componentWillUnmount=function(){this.$MessengerComposerContainer4.release();};m.prototype.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput();};m.prototype.render=function(){return c('React').createElement(c('MessengerComposer.react'),{canReply:this.props.canReply,fileUploader:this.props.fileUploader,mentionsEnabled:true,onMessageSend:this.$MessengerComposerContainer8,onPhotoUploadComplete:this.$MessengerComposerContainer9,onPhotoUploadCancel:this.$MessengerComposerContainer10,onPhotoUploadFail:this.$MessengerComposerContainer11,onPhotoUploadSubmit:this.$MessengerComposerContainer12,onResize:this.props.onResize,onStickerSelect:this.$MessengerComposerContainer13,onCustomLikeSelect:this.$MessengerComposerContainer14,onVoiceClipCreate:this.$MessengerComposerContainer15,participants:this.props.participants,recipients:this.props.recipients,ref:function(o){return this.refsComposer=o;}.bind(this),sharePreview:this.props.sharePreview,threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer});};m.prototype.handleFileUpload=function(o){var p=o.reduce(function(q,r){var s=r.type.split('/')[0];if(q[s]){q[s].push(r);}else q.other.push(r);return q;},{audio:[],image:[],other:[]});p.audio.forEach(function(q){return this.$MessengerComposerContainer15(q);}.bind(this));if(this.refsComposer)this.refsComposer.handleFileUpload(p.image.concat(p.other));};m.prototype.handleTextDropped=function(o){if(this.refsComposer)this.refsComposer.handleTextDropped(o);};m.prototype.resetDrag=function(){if(this.refsComposer)this.refsComposer.exitCurrentMode();};m.prototype.$MessengerComposerContainer17=function(o,p){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{title:o,body:p});});};m.propTypes={canReply:l.bool,fileUploader:l.object,onMount:l.func,onResize:l.func,participants:l.instanceOf(c('immutable').Map),recipients:l.instanceOf(c('immutable').List),sharePreview:l.object,threadID:l.string,threadFBID:l.string,thread:l.object,view:l.string,viewer:l.string};function n(o){return {upload_id:o,preview_attachments:[{upload_id:o,attach_type:c('MercuryAttachmentType').PHOTO,preview_uploading:true}]};}f.exports=m;}),null);
__d('MercuryMessageGroup',['MercuryActionType','MercuryAttachmentType','MercuryShareAttachmentRenderLocations','MercuryThreadlistConstants','MessengerLightweightActionUtils','enumerate'],(function a(b,c,d,e,f,g){'use strict';var h={calculateMessageGroups:function k(l,m){var n=[],o=null,p={value:null},q=c('enumerate')(l),r=void 0;while(!(r=q.next()).done){var s=h.canAppendMessageToLastGroup(p.value,r.value,m);if(!s){o=[];n.push(o);}o.push(r.value);p=r;}return n;},canAppendMessageToLastGroup:function k(l,m,n){var o=c('MercuryThreadlistConstants').GROUPING_THRESHOLD;if(!l||i(l,n)||i(m,n)||l.author!=m.author||l.timestamp<m.timestamp-o||l.is_spoof_warning!==m.is_spoof_warning||l.page_admin_notes)return false;return true;}};function i(k,l){var m=k.has_attachment;if(m&&(l===c('MercuryShareAttachmentRenderLocations').MESSENGER||l===c('MercuryShareAttachmentRenderLocations').CHAT))m=j(k);return !!(c('MessengerLightweightActionUtils').isLWAMessage(k)||k.action_type==c('MercuryActionType').LOG_MESSAGE||m||k.html_body||k.body&&k.body.length>c('MercuryThreadlistConstants').MAX_CHARS_BEFORE_BREAK);}function j(k){var l=k.attachments[0];return !l||l.attach_type===c('MercuryAttachmentType').STICKER||l.attach_type===c('MercuryAttachmentType').ANIMATED_IMAGE;}f.exports=h;}),null);
__d("XMercuryChatTabPagesNullStateConfigController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pages\/messaging\/mercury\/greeting\/",{});}),null);
__d('PagesMessageListGreeting.react',['cx','FluxContainer','PagesMessagingMercuryChatTabActions','PagesMessagingMercuryChatTabStore','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.getStores=function(){return [c('PagesMessagingMercuryChatTabStore')];};k.calculateState=function(l,m){if(m.messageCount>0)return {shouldShowGreeting:false};var n=c('PagesMessagingMercuryChatTabStore').getStateByThread(m.threadID);return {greetingContent:n.pagesGreetingContent,shouldShowGreeting:n.pagesGreetingShouldShow};};k.prototype.componentDidMount=function(){c('PagesMessagingMercuryChatTabActions').requestGreetingConfig(this.props.threadID);};k.prototype.render=function(){if(!this.state.shouldShowGreeting||!this.state.greetingContent||this.state.greetingContent.trim().length===0)return null;return c('React').createElement('div',{className:"_4fsh _3-8z"},this.state.greetingContent);};function k(){i.apply(this,arguments);}f.exports=c('FluxContainer').create(k,{withProps:true});}),null);
__d('MessageList.react',['cx','immutable','ImmutableObject','MercuryActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageGroup','MessagingGenericAdminTextType','MessengerAdminGroupUtils','messengerDomIDsRe','MessengerLightweightActionUtils','PagesMessageListGreeting.react','React','ReactDOM','MercuryShareAttachmentRenderLocations','idx'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDomIDsRe').ids,l=c('React').PropTypes,m=1000*60*60,n=function v(w){var x,y,z,aa=(x=w)!=null?(x=x.log_message_data)!=null?x.message_type:x:x;switch(aa){case c('MessagingGenericAdminTextType').GROUP_POLL:return (y=w)!=null?(y=y.log_message_data)!=null?(y=y.untypedData)!=null?y.question_id:y:y:y;case c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE:return (z=w)!=null?(z=z.log_message_data)!=null?(z=z.untypedData)!=null?z.game_id:z:z:z;default:return null;}},o=function v(w){if(c('MessengerLightweightActionUtils').isLWAMessage(w))return 'lwa';return null;};i=babelHelpers.inherits(p,c('React').PureComponent);j=i&&i.prototype;function p(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=j.constructor).call.apply(v,[this].concat(y)),this.state={activeMessageID:null,messageGroups:c('MercuryMessageGroup').calculateMessageGroups(this.props.messages,this.props.location)},this.$MessageList4=function(aa){this.setState(function(ba){return {activeMessageID:ba.activeMessageID===aa?null:ba.activeMessageID};});}.bind(this),this.$MessageList5=function(aa){this.setState({activeMessageID:aa});}.bind(this),w;}p.prototype.componentWillReceiveProps=function(v){if(v.messages!==this.props.messages)this.setState({messageGroups:c('MercuryMessageGroup').calculateMessageGroups(v.messages,v.location)});};p.prototype.render=function(){var v=this.props,w=v.DateBreak,x=v.location,y=v.MessageGroup,z=v.CollapsedLogMessageGroup,aa=[],ba=[],ca=void 0,da=this.props.thread&&this.props.thread.custom_color,ea=da?{backgroundColor:da}:null,fa=this.state.activeMessageID,ga=this.state.messageGroups,ha=ga.length,ia=this.props.readReceipts,ja=ia.last(),ka=ja?ja.watermark:0,la=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),ma=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread),na={};for(var oa=this.props.messages.size-1;oa>=0;oa--){var pa=this.props.messages.get(oa),qa=n(pa)||o(pa);if(qa&&!na[qa])na[qa]=pa.message_id;}for(var ra=0;ra<ha;ra++){var sa=ra>0?ga[ra-1]:null,ta=sa&&sa.length>0?sa[sa.length-1]:null,ua=ga[ra],va=ua[0],wa=ua[ua.length-1],xa=false;if(!ta||va.timestamp-ta.timestamp>m){xa=true;var ya=c('React').createElement(w,{date:new Date(va.timestamp),key:'db:'+va.message_id,ref:'db:'+va.message_id});if(ba.length===0)aa.push(ya);}if(c('MessengerLightweightActionUtils').isLWAMessage(va))if(na[o(va)]!==va.message_id){var za=this.$MessageList1(va,na);aa.push(za);continue;}if(va.action_type==c('MercuryActionType').LOG_MESSAGE){var ab,bb=(ab=va)!=null?(ab=ab.log_message_data)!=null?ab.message_type:ab:ab,cb=bb===c('MessagingGenericAdminTextType').INSTANT_GAME_UPDATE,db=bb===c('MessagingGenericAdminTextType').GROUP_POLL;if((x===c('MercuryShareAttachmentRenderLocations').CHAT||x===c('MercuryShareAttachmentRenderLocations').MESSENGER)&&(va.log_message_type===c('MercuryLogMessageType').VIDEO_CALL||va.log_message_type===c('MercuryLogMessageType').PHONE_CALL)){var eb=this.$MessageList2(va,la,ga,ha,ra,ia,ka,wa);aa.push(eb);}else{var fb=this.$MessageList3(va,na);ca=va.message_id;if(ma&&!cb&&!db){ba.push(fb);}else{if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}aa.push(fb);}}continue;}if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}ua=c('immutable').List(ua);var gb=r(ga,ha,ra),hb=!t(ia,ua,gb),ib=s(ka,wa),jb=u(this.props.deliveryTimestamp,wa);aa.push(c('React').createElement(y,{activeMessageID:q(fa,ua),author:ua.first().author,deliveryTimestamp:jb,hasDateBreak:xa,isCanonical:this.props.isCanonical,isFromViewer:la===va.author,isPageMessage:this.props.isPageMessage,key:'mg:'+va.message_id,lastReadTimestamp:ib,maxBubbleWidth:this.props.maxBubbleWidth,messages:ua,nextTimestamp:gb,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,pageID:this.props.isPageMessage?this.props.viewer:null,readReceipts:hb?ia:c('immutable').OrderedMap(),ref:'mg:'+va.message_id,thread:this.props.thread,threadID:this.props.threadID}));}if(ba.length!==0){if(ba.length>1){aa.push(c('React').createElement(z,{key:'mg:'+ca,style:ea},ba));}else aa.push(c('React').createElement('div',{key:'mg:'+ca},ba));ba=[];}var kb=this.props.threadID||this.props.thread&&this.props.thread.thread_id||this.props.thread&&this.props.thread.thread_fbid,lb=null;if(x===c('MercuryShareAttachmentRenderLocations').MESSENGER&&kb&&this.props.isPageMessage)lb=c('React').createElement(c('PagesMessageListGreeting.react'),{messageCount:ba.length+ha,threadID:kb});return c('React').createElement('div',{id:x===c('MercuryShareAttachmentRenderLocations').MESSENGER?k.CONVERSATION:null},lb,aa);};p.prototype.getMessageElement=function(v,w){if(w){var x=this.refs['db:'+v];if(x)return c('ReactDOM').findDOMNode(x);}var y=this.state.messageGroups.find(function(ba){return ba.some(function(ca){return ca.message_id===v;});});if(!y)return null;var z=y[0].message_id,aa=this.refs['mg:'+z];if(!aa)return null;if(w&&z===v)return c('ReactDOM').findDOMNode(aa);return aa.getMessageElement(v);};p.prototype.$MessageList2=function(v,w,x,y,z,aa,ba,ca){var da=this.props.MessageGroup,ea={attach_type:'share',share:{style_list:['rtc_call_log','fallback'],log_message_body:v.log_message_body,log_message_data:v.log_message_data,log_message_type:v.log_message_type,timestamp:v.timestamp}},fa=c('ImmutableObject').setProperty(v,'attachments',[ea]);fa=c('ImmutableObject').setProperty(fa,'body','');var ga=c('immutable').List([fa]),ha=r(x,y,z),ia=!t(aa,ga,ha),ja=s(ba,ca),ka=u(this.props.deliveryTimestamp,ca);return c('React').createElement(da,{author:ga.first().author,deliveryTimestamp:ka,isFromViewer:w===v.author,key:v.message_id,lastReadTimestamp:ja,maxBubbleWidth:this.props.maxBubbleWidth,messages:ga,nextTimestamp:ha,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this.$MessageList4,onMessageSelect:this.$MessageList5,onStickerClick:this.props.onStickerClick,readReceipts:ia?aa:c('immutable').OrderedMap(),thread:this.props.thread,threadID:this.props.threadID});};p.prototype.$MessageList3=function(v,w){var x=this.props.LogMessage,y=w[n(v)];if(v.log_message_type!==c('MercuryLogMessageType').SERVER_ERROR)return c('React').createElement(x,{className:this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?"_5w0o":null,key:v.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:v,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:y===v.message_id});return null;};p.prototype.$MessageList1=function(v,w){var x=w[o(v)],y=this.props.LogMessage;return c('React').createElement(y,{className:this.props.location===c('MercuryShareAttachmentRenderLocations').CHAT?"_5w0o":null,key:v.message_id,onLogMessageExpanded:this.props.onAttachmentLoad,loadMoreMessages:this.props.loadMoreMessages,message:v,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer,thread:this.props.thread,isLastOfType:x===v.message_id});};p.propTypes={CollapsedLogMessageGroup:l.func.isRequired,DateBreak:l.func.isRequired,deliveryTimestamp:l.number.isRequired,isCanonical:l.bool,isPageMessage:l.bool,location:l.string.isRequired,LogMessage:l.func.isRequired,loadMoreMessages:l.func,MessageGroup:l.func.isRequired,messages:l.instanceOf(c('immutable').List).isRequired,onAttachmentLoad:l.func,onStickerClick:l.func,readReceipts:l.instanceOf(c('immutable').OrderedMap).isRequired,viewer:l.string.isRequired,thread:l.object,threadID:l.string};function q(v,w){return w.find(function(x){return x.message_id===v;})?v:null;}function r(v,w,x){return x<w-1?v[x+1][0].timestamp:Infinity;}function s(v,w){return w.timestamp>v?v:Infinity;}function t(v,w,x){return w.isEmpty()||v.last()<w.first().timestamp||v.first()>=x;}function u(v,w){return w.timestamp>v?v:Infinity;}f.exports=p;}),null);
__d('MessengerBootloadedLogMessage.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').PureComponent);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('MessengerLogMessage.react').__setRef('MessengerBootloadedLogMessage.react'),placeholder:c('React').createElement('div',{className:"_497p"},'...')});};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('MessengerCollapsedLogMessageGroup.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;j=babelHelpers.inherits(l,c('React').PureComponent);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.state={collapsed:true},n;}l.prototype.render=function(){var m=i._("See Latest Activity"),n=i._("See Less Activity");return c('React').createElement('div',{className:"_497p"},c('React').createElement(c('Link.react'),{className:"_4ea1",onClick:function(){return this.setState({collapsed:!this.state.collapsed});}.bind(this)},this.state.collapsed?m:n),!this.state.collapsed?c('React').createElement('div',null,c('React').createElement('div',{className:"_4ea2"}),this.props.children,c('React').createElement('div',{className:"_4ea2"})):null);};f.exports=l;}),null);
__d('MessengerDateBreak.react',['cx','React','formatDate','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m){'use strict';return this.props.date.getTime()!==m.date.getTime();};l.prototype.render=function(){'use strict';var m=c('formatDate')(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return c('React').createElement('h4',{className:c('joinClasses')(this.props.className,"_497p _2lpt")},c('React').createElement('time',{className:"_3oh-"},m));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={date:k.instanceOf(Date).isRequired};f.exports=l;}),null);
__d('MercuryErrorInfo',['fbt','MercuryErrorType','MercuryMessageInfo'],(function a(b,c,d,e,f,g,h){var i={getMessage:function j(k){var l='';if(i.isConnectionError(k)){l=h._("This message didn't send.");if(i.isTransient(k))l=h._("{message} Check your internet connection and click to try again.",[h.param('message',l)]);}else{if(k&&k.description){l=k.description;}else l=h._("This message failed to send.");if(i.isTransient(k))l=h._("{message} Click to send again.",[h.param('message',l)]);}return l;},isConnectionError:function j(k){if(k&&k.type==c('MercuryErrorType').TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function j(k){return k&&k.is_transient;},isPermanent:function j(k){return k?!this.isTransient(k):false;},hasErrorStatus:function j(k){return c('MercuryMessageInfo').hasError(k);}};f.exports=i;}),null);
__d("messengerMessageSeenHeadsReact",["cx","fbt","cssVar","React","immutable","imageReact","bs_pervasives","reasonReact","joinClasses","bs_js_primitive","MessengerConfig","MercuryTimestamp","MercuryAttachment","MercuryMessageInfo","getViewportDimensions"],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c("MessengerConfig").MaxSeenHeadCount;function l(){var p=c("getViewportDimensions")().width;if(p<parseInt("920px".replace("px",""),10)){return c("bs_pervasives").min(k,8);}else if(p<parseInt("1211px".replace("px",""),10)){return c("bs_pervasives").min(k,3);}else return k;}var m=c("reasonReact").statefulComponent("MessengerMessageSeenHeadsReact");function n(p,q,r,s,t,u,v){var w=m.slice();w[9]=function(){if(c("MercuryMessageInfo").isSending(r)||u.isEmpty()||c("MercuryMessageInfo").hasError(r)){return null;}else{var x=c("immutable").Seq(u).filter(function(fa){var ga=+(fa.watermark>=r.timestamp&&fa.watermark<s);if(ga!==0){return true;}else return false;}).sort(function(fa,ga){return fa.action-ga.action|0;});if(x.isEmpty()){return null;}else{var y=q!==0?k:l(0),z=+(x.count()>(y+1|0)),aa=z!==0?x.slice(0,y):x,ba=aa.map(function(fa,ga,ha){var ia=t.get(ga);if(c("bs_js_primitive").is_nil_undef(ia)){return null;}else{var ja=i._("Seen by {full name} at {seen time}",[i.param("full name",ia.name),i.param("seen time",c("MercuryTimestamp").getPreciseTimestamp(fa.action))]);return c("reasonReact").element([c("bs_pervasives").string_of_int(ga)],0,c("imageReact").make(["_jf2"],[ja],[ia.image_src],0,[ja],0,0,[]));}}).toArray(),ca=ba.length;if(ca){var da=z!==0?x.slice(y,undefined).count():0;if(da>0){var ea=x.slice(y,undefined).map(function(fa,ga,ha){var ia=t.get(ga);if(c("bs_js_primitive").is_nil_undef(ia)){return "";}else return ia.name;}).filter(function(fa){var ga=+(fa==="");if(ga!==0){return false;}else return true;}).join("\n")+" ";ba.unshift(c("React").createElement("span",{key:"overflow",className:"_jf3",title:ea},"+"+c("bs_pervasives").string_of_int(da)));}return c("React").createElement("span",{className:c("joinClasses")(p,"_jf4"+(+((ca+da|0)===1)?" "+"_jf5":"")+(+c("MercuryAttachment").isSinglePhotoGroupAttachment(r)?" "+"_ba3":""))},ba);}else return null;}}};return w;}var o=c("reasonReact").wrapReasonForJs(m,function(p){return n(p.className,+p.isFromViewer,p.message,p.nextTimestamp,p.participants,p.readReceipts,[]);});g.maxSeenHeads=k;g.calculateSliceNumber=l;g.component=m;g.make=n;g.jsComponent=o;}),null);
__d('MessengerPageAdminNoteList.react',['cx','fbt','LeftRight.react','MessengerBubble.react','PagesMessengerCreatorInfo.react','ReactComponentWithPureRenderMixin','React','enumerate','classWithMixins','immutable','mixin'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('ReactComponentWithPureRenderMixin'))));k=j&&j.prototype;m.prototype.render=function(){var n=[],o=this.calculateGroups(this.props.notes);o.forEach(function(p,q){n.push(c('React').createElement('li',{className:"_4kd2",key:'group:'+q},this.$MessengerPageAdminNoteList1(p)));}.bind(this));return c('React').createElement('ul',{className:"_4kd3"},n);};m.prototype.$MessengerPageAdminNoteList1=function(n){var o=[];n.forEach(function(p,q){o.push(c('React').createElement('div',{className:"_4kd4",key:'note:'+q},this.$MessengerPageAdminNoteList2(p,n)));}.bind(this));return o;};m.prototype.$MessengerPageAdminNoteList2=function(n,o){var p=c('immutable').List([c('React').createElement(c('LeftRight.react'),{className:"_561k"},c('React').createElement('div',{className:"_561l"},i._("Private Note")),c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info',creator_info:o[0].creator_info,isNote:true}))]);return c('React').createElement('div',{className:"_o46 _3i_m _nd_"},c('React').createElement('div',{className:'clearfix'},c('React').createElement(c('MessengerBubble.react'),{body:n.body.text,attachments:p,className:"_3058 _4kd5"})));};m.prototype.calculateGroups=function(n){var o=[],p=null,q=null,r=c('enumerate')(n),s=void 0;while(!(s=r.next()).done){var t=q&&q.value.creator_info.creatorID===s.value.creator_info.creatorID;if(!t){p=[];o.push(p);}if(p)p.push(s.value);q=s;}return o;};function m(){j.apply(this,arguments);}m.propTypes={notes:l.arrayOf(l.shape({id:l.string,body:l.object.isRequired,creator_info:l.shape({creatorID:l.string.isRequired,creatorName:l.string.isRequired,creatorType:l.string.isRequired,labelType:l.string.isRequired,pageID:l.string.isRequired,profileURI:l.string}),timestamp:l.number.isRequired})).isRequired};f.exports=m;}),null);
__d('MessengerMessageGroup.react',['cx','fbt','invariant','BootloadOnRender.react','immutable','ImmutableObject','Image.react','JSResource','LazyComponent.react','Link.react','MercuryConfig','MercuryIDs','MercuryParticipants','MercuryParticipantSilhouettes','MercuryTimestamp','MessengerActions','MessengerConfig','messengerContactActionsRe','MessengerDateBreak.react','MessengerMessage.react','MessengerPageAdminNoteList.react','MessengerProfileImageWrapper.react','MessengerStickerUtils','MessengerTextWithEmoticons.react','messengerURIUtilsRe','PagesMessengerCreatorInfo.react','React','ReactDOM','SimpleXUIDialog','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('messengerContactActionsRe').actions,l=c('immutable').List,m=c('immutable').OrderedMap,n=c('React').PropTypes,o=32,p=new (c('ImmutableObject'))({image_src:c('MercuryParticipantSilhouettes').neutralSilhouette,is_messenger_user:true,name:''}),q=c('React').createClass({displayName:'MessengerMessageGroup',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{activeMessageID:n.string,deliveryTimestamp:n.number.isRequired,hasDateBreak:n.bool,isCanonical:n.bool,isFromViewer:n.bool,isPageMessage:n.bool,lastReadTimestamp:n.number.isRequired,messages:n.instanceOf(l).isRequired,nextTimestamp:n.number.isRequired,onAttachmentLoad:n.func,onMessageDeselect:n.func.isRequired,onMessageSelect:n.func.isRequired,readReceipts:n.instanceOf(m).isRequired,thread:n.object,pageCustomAction:n.func,pageID:n.string},statics:{calculateState:function t(u){return {participants:r(u)};}},shouldComponentUpdate:function t(u,v){return this.props.activeMessageID!==u.activeMessageID||this.props.isFromViewer!==u.isFromViewer||this.props.deliveryTimestamp!==u.deliveryTimestamp||this.props.lastReadTimestamp!==u.lastReadTimestamp||!c('immutable').is(this.props.messages,u.messages)||!c('immutable').is(this.props.readReceipts,u.readReceipts)||!c('immutable').is(this.state.participants,v.participants)||!!(u.thread&&this.props.thread&&this.props.thread!==u.thread);},render:function t(){return c('React').createElement('div',null,c('React').createElement('div',{className:"_1t_p"+(' '+"clearfix")+(c('MessengerStickerUtils').isStickerMessageGroup(this.props.messages)?' '+"_5tx1":'')+(this._hasSeenHeadsAtBottom()?' '+"_35fy":'')},this._renderProfileColumn(),c('React').createElement('div',{className:"_41ud"},this._renderName(),this._renderMessages())),this.props.isPageMessage?this._renderNotes():null);},_renderProfileColumn:function t(){if(this.props.isFromViewer)return null;var u=this.props.messages.last(),v=this.state.participants.get(u.author)||p,w=i._("{name} {time}",[i.param('name',v.name),i.param('time',c('MercuryTimestamp').getPreciseTimestamp(u.timestamp))]),x=c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:v.is_messenger_user,size:o,showBadge:true,tooltipContent:w},c('React').createElement(c('Image.react'),{alt:v.name,src:v.image_src,height:o,width:o}));if(v.fbid){var y=c('messengerURIUtilsRe').getURIForUserID(v.fbid);if(c('MercuryConfig').WWWMessengerAvatarActions){x=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerMessageGroupAvatarActions.react').__setRef('MessengerMessageGroup.react'),placeholder:!this.props.isCanonical?c('React').createElement(c('Link.react'),{className:"_5f0v",href:y.toString(),onClick:this._handleContactSelect.bind(this,v),tabIndex:-1},x):x,component:c('React').createElement(c('LazyComponent.react'),{avatar:x,contact:v,showSendMessageItem:!this.props.isCanonical,onAction:this._handleContactAction})});}else if(!this.props.isCanonical)x=c('React').createElement(c('Link.react'),{className:"_5f0v",href:y.toString(),onClick:this._handleContactSelect.bind(this,v),tabIndex:-1},x);}return c('React').createElement('div',{className:"_1t_q"},x);},_handleContactAction:function t(u,v,w){switch(u){case k.MESSAGE:this._handleContactSelect(v,w);break;case k.PROFILE:var x=this.state.participants.get(v.id);if(x&&x.href){window.open(x.href);}else this._handleContactSelect(v,w);break;case k.FREE_CALL:e(['FBRTCCore','MNRTCCallabilityStore'],function(y,z){var aa=v.fbid;aa||j(0);if(y.isAvailableForWebrtcCalling(aa)||z.isCallable(aa)){y.startOutgoingCall(aa,'messenger_dot_com',false);}else c('SimpleXUIDialog').show(i._("{firstname} can't be reached right now.",[i.param('firstname',v.short_name)]),i._("Can't Connect Call"));});break;}},_renderMessages:function t(){var u=this.props.messages.size,v=[];this.props.messages.forEach(function(w,x,y){var z=w.message_id===this.props.activeMessageID;if(z&&!(x===0&&this.props.hasDateBreak)&&!c('MessengerConfig').SentTimestampEnabled)v.push(c('React').createElement(c('MessengerDateBreak.react'),{className:"_5r8z",date:new Date(w.timestamp),key:'db:'+w.message_id}));var aa=this.props.isPageMessage&&this.props.pageCustomAction?this.props.pageCustomAction:null;if(aa)v.push(c('React').createElement('h4',{key:'page_action'+w.message_id},c('React').createElement(aa,{message:w})));var ba=c('MercuryIDs').getUserIDFromParticipantID(this.props.author),ca=this.props.thread?this.props.thread.custom_color:'';v.push(c('React').createElement(c('MessengerMessage.react'),{customColor:ca,deliveryTimestamp:this.props.deliveryTimestamp,isActive:z,isFromViewer:this.props.isFromViewer,isPageMessage:this.props.isPageMessage,key:w.message_id,message:w,messageActionsWrapper:this.props.messageActionWrapper,onAttachmentLoad:this.props.onAttachmentLoad,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(y,u,x),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:w.timestamp>this.props.lastReadTimestamp,ref:w.message_id,authorFBID:ba==null?undefined:ba,threadCustomColor:ca,pageID:this.props.pageID}));if(s(this.props.isPageMessage,y,x,w))v.push(c('React').createElement(c('PagesMessengerCreatorInfo.react'),{key:'creator_info:'+x,creator_info:w.creator_info}));}.bind(this));return v;},_renderNotes:function t(){var u=[];this.props.messages.forEach(function(v,w,x){if(this.props.isPageMessage&&v.page_admin_notes)u.push(c('React').createElement(c('MessengerPageAdminNoteList.react'),{key:'notes:'+v.message_id,notes:v.page_admin_notes}));}.bind(this));return u;},_renderName:function t(){var u=this.state.participants.get(this.props.messages.first().author);if(!u)return null;var v=u.short_name;if(this.props.thread){var w=this.props.thread.custom_nickname?this.props.thread.custom_nickname:null,x=c('MercuryIDs').getUserIDFromParticipantID(u.id);if(w&&x&&w[x])v=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:w[x]});}return c('React').createElement('h5',{className:"_ih3"+(this.props.isFromViewer?' '+"accessible_elem":'')+(this.props.isCanonical?' '+"_-ne":'')},v);},getMessageElement:function t(u){return c('ReactDOM').findDOMNode(this.refs[u]);},_hasSeenHeadsAtBottom:function t(){var u=this.props,v=u.messages,w=u.nextTimestamp,x=u.readReceipts,y=v.last().timestamp,z=0;x.forEach(function(aa){if(aa>=y&&aa<w)if(++z===2)return false;});return z===2;},_getNextTimestamp:function t(u,v,w){return w<v-1?u.get(w+1).timestamp:this.props.nextTimestamp;},_handleContactSelect:function t(u,v){v&&v.preventDefault();var w=c('MercuryIDs').getThreadIDFromParticipantID(u.id);w&&c('MessengerActions').selectThread(w);}});function r(t){var u=t.messages.first().author;return c('immutable').Map().withMutations(function(v){t.readReceipts.forEach(function(w,x){v.set(x,c('MercuryParticipants').getOrFetch(x));});v.set(u,c('MercuryParticipants').getOrFetch(u));});}function s(t,u,v,w){if(!t||!w.creator_info)return false;if(v===u.size-1)return true;var x=u.get(v+1).creator_info;if(!x)return true;return w.creator_info.creatorID!==x.creatorID;}f.exports=q;}),null);
__d('MessengerNewMessagesNotice.react',['cx','fbt','ix','Image.react','Link.react','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes,n=j("86939");k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){return c('React').createElement('div',{'aria-hidden':!this.props.isOpen,className:"_4wzq"+(this.props.isOpen?' '+"_4wzr":'')+(!this.props.isOpen?' '+"_4-je":'')},c('React').createElement(c('Link.react'),{className:"_5f0v _4wzs",onClick:this.props.onClick,tabIndex:this.props.isOpen?0:-1},c('React').createElement(c('Image.react'),{className:"_4wzt",src:n}),c('React').createElement('div',{className:"_1bqr"},this.props.label)));};function o(){k.apply(this,arguments);}o.propTypes={isOpen:m.bool.isRequired,label:m.node,onClick:m.func};o.defaultProps={label:i._("New Messages")};f.exports=o;}),null);
__d("create-react-class",["React","create-react-class/factory"],(function a(b,c,d,e,f,g){'use strict';var h=new (c("React").Component)().updater;f.exports=c("create-react-class/factory")(c("React").Component,c("React").isValidElement,h);}),null);
__d('createReactClass_DEPRECATED',['create-react-class'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('create-react-class');}),null);
__d('MessengerTypingIndicator.react',['cx','Image.react','immutable','MercuryParticipants','MercuryTypingAnimation.react','MessengerProfileImageWrapper.react','MessengerBubble.react','ReactComponentWithPureRenderMixin','React','createReactClass_DEPRECATED','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g,h){var i=c('React').PropTypes,j=32,k=c('createReactClass_DEPRECATED')({displayName:'MessengerTypingIndicator',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{userID:i.string,showName:i.bool},statics:{calculateState:function l(m){return {author:c('MercuryParticipants').getOrFetch(m.userID)};}},render:function l(){if(!this.state.author)return null;var m=this.state.author;return c('React').createElement('div',{className:"_1t_p _1hbw"},c('React').createElement('div',{className:"_1t_q"},c('React').createElement(c('MessengerProfileImageWrapper.react'),{className:"_1t_r",isMessengerUser:m.is_messenger_user,size:j,showBadge:true},c('React').createElement(c('Image.react'),{alt:'',src:m.image_src,height:j,width:j}))),c('React').createElement('div',{className:"_41ud"},c('React').createElement('div',{className:"_o46 _3erg _29_7"},c('React').createElement(c('MessengerBubble.react'),{attachments:c('immutable').List([c('React').createElement(c('MercuryTypingAnimation.react'),{key:'animation'})]),body:'',className:"_3058",ref:'bubble'}))));},getBubble:function l(){return this.refs.bubble;}});f.exports=k;}),null);
__d('MessengerConversation.react',['cx','csx','fbt','BootloadOnRender.react','ChatTypingIndicators.react','CSS','DOM','DOMDimensions','Event','FluxContainer','immutable','ImmutableObject','JSResource','KeyEventController','LazyComponent.react','MercuryConfig','MercuryIDs','MercuryDeliveryReceipts','mercuryRogerRe','MercuryShareAttachmentRenderLocations','MessageList.react','MessengerAttachmentRenderer','messengerButtonReact','MessengerCollapsedLogMessageGroup.react','MessengerConfig','MessengerContextBannerContainer.react','MessengerDateBreak.react','MessengerFlexScrollableArea.react','MessengerBootloadedLogMessage.react','MessengerMessageGroup.react','MessengerNewMessagesNotice.react','MessengerPlatformSubscriptionMessageClassification','MessengerQuickCamButtonHTML5.react','MessengerQuickCamOrigins','MessengerSpinner.react','MessengerTypingIndicator.react','MessengerVideoAutoplayActions','MessengerVideoAutoplayStore','MNOmniMConstants','OmniMStore','Parent','React','ReactDOM','Set','SubscriptionsHandler','UserActivity','WebMessengerConstants','convertMIGColorToFIGColor','joinClasses','setImmediate','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('MercuryDeliveryReceipts').get(),n=c('mercuryRogerRe').get(),o=c('messengerButtonReact').jsComponent,p=c('immutable').OrderedMap,q=c('React').PropTypes,r=20,s=100;function t(event,x){return !!(c('KeyEventController').filterEventTypes(event,x)&&c('KeyEventController').filterEventModifiers(event,x)&&event.target instanceof Element&&c('Parent').bySelector(event.target,"._4_j4"));}k=babelHelpers.inherits(u,c('React').PureComponent);l=k&&k.prototype;function u(){var x,y;for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return y=(x=l.constructor).call.apply(x,[this].concat(aa)),this.state={readReceipts:v(this.props),deliveryTimestamp:0,scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:this.props.thread?this.props.thread.unread_count:0,width:0,suggestions:null,omniMPrefs:null},this.$MessengerConversation1=null,this.$MessengerConversation2=0,this.$MessengerConversation3=0,this.$MessengerConversation4=null,this.isScrolledToBottom=function(){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottom());}.bind(this),this.isScrolledToBottomWithHeight=function(ca){return !!(this.refs.scrollable&&this.refs.scrollable.isScrolledToBottomWithHeight(ca));}.bind(this),this.$MessengerConversation21=function(){return c('React').createElement(c('MessengerNewMessagesNotice.react'),{isOpen:this.state.showUnreadNotice,label:j._({"*":"{number} unread messages","268435456":"1 unread message"},[j.plural(this.state.unreadCount,'number')]),onClick:this.$MessengerConversation25});}.bind(this),this.$MessengerConversation22=function(){if(!this.props.isLoaded||!c('MessengerConfig').ShowContextBanner)return null;return c('React').createElement(c('MessengerContextBannerContainer.react'),{location:c('MercuryShareAttachmentRenderLocations').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer});}.bind(this),this.$MessengerConversation23=function(){if(this.props.isLoaded)return null;return c('React').createElement('div',{className:"_2k8v"},this.props.isLoading?c('React').createElement(c('MessengerSpinner.react'),null):null);}.bind(this),this.$MessengerConversation19=function(){return c('React').createElement('div',{className:"_4xu0"},c('React').createElement(c('MessengerSpinner.react'),{className:"_4xu1",size:c('MessengerSpinner.react').Sizes.LARGE}));},this.trackBottomIfRequired=function(){this.refs.scrollable&&this.refs.scrollable.trackBottomIfRequired();}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom();}.bind(this),this.scrollToTop=function(ca){this.refs.scrollable&&this.refs.scrollable.scrollToTop(ca);}.bind(this),this.$MessengerConversation6=function(){var ca=this.$MessengerConversation14();ca&&ca.pageUp();return false;}.bind(this),this.$MessengerConversation7=function(){var ca=this.$MessengerConversation14();ca&&ca.pageDown();return false;}.bind(this),this.$MessengerConversation8=function(ca){if(ca.target===document.body){this.scrollToTop();return false;}return null;}.bind(this),this.$MessengerConversation9=function(ca){if(ca.target===document.body){this.scrollToBottom();return false;}return null;}.bind(this),this.$MessengerConversation12=function(){if(!this.refs.scrollable)return;var ca=this.$MessengerConversation14(),da=this.refs.quickReply;da&&c('CSS').conditionClass(da,"_1mzg",!this.isScrolledToBottom());this.$MessengerConversation10();this.$MessengerConversation11();if(ca&&this.state.unreadCount&&this.$MessengerConversation18(ca))this.setState({showUnreadNotice:false,unreadCount:0});this.$MessengerConversation26(ca);}.bind(this),this.$MessengerConversation25=function(ca){ca.preventDefault();this.setState({showUnreadNotice:false});this.$MessengerConversation16();}.bind(this),this.$MessengerConversation24=function(ca){return function(){if(this.props.threadID!==ca)return;this.trackBottomIfRequired();}.bind(this);}.bind(this),this.$MessengerConversation15=function(){c('DOM').scry(c('ReactDOM').findDOMNode(this),'img').forEach(function(ca){if(ca.complete)return;var da=this.props.threadID,ea=c('Event').listen(ca,'load',function(){if(this.props.threadID===da)this.trackBottomIfRequired();ea.remove();}.bind(this));}.bind(this));}.bind(this),this.$MessengerConversation27=function(){var ca=this.props.messages,da=this.state.unreadCount;if(!da||da>ca.size)return null;return ca.get(ca.size-da);}.bind(this),this.$MessengerConversation18=function(ca){var da=this.$MessengerConversation27();if(!da)return false;var ea=this.refs.messageList.getMessageElement(da.message_id);if(!ea)return false;var fa=ea.getBoundingClientRect().top,ga=ca.getElement().getBoundingClientRect().top;if(fa-ga<0)return false;return true;}.bind(this),this.$MessengerConversation28=function(ca){return !!this.props.messages.find(function(da){return da.message_id===ca;});}.bind(this),this.$MessengerConversation16=function(){if(!this.state.unreadCount)return;this.setState({scrollingToUnreadMessage:true});var ca=this.$MessengerConversation27();if(!ca){this.scrollToTop(false);return;}this.$MessengerConversation29(ca.message_id,function(){this.setState({scrollingToUnreadMessage:false,unreadCount:0});}.bind(this));}.bind(this),this.$MessengerConversation29=function(ca,da){var ea=this.refs.messageList.getMessageElement(ca,true),fa=this.$MessengerConversation14();if(!ea||!fa)return;var ga=ea.getBoundingClientRect().top,ha=c('ReactDOM').findDOMNode(this.refs.messageList).getBoundingClientRect().top,ia=fa.getElement().getBoundingClientRect().top,ja=ga+Math.abs(ha)+ia;fa.setScrollTop(ja,true,{callback:da});}.bind(this),this.$MessengerConversation11=function(){if(!this.isScrolledToBottom()||this.props.messages.size===0)return;if(c('UserActivity').isOnTab()&&c('UserActivity').isActive()){this.props.onRead(this.props.threadID);}else if(!this.$MessengerConversation4)this.$MessengerConversation4=c('UserActivity').subscribe(function(){if(c('UserActivity').isOnTab()){this.$MessengerConversation13();this.props.onRead(this.props.threadID);}}.bind(this));}.bind(this),this.handleResize=function(){if(this.refs.scrollable){this.refs.scrollable.handleResize();var ca=c('DOMDimensions').getElementDimensions(c('ReactDOM').findDOMNode(this.refs.scrollable)).width;if(ca!==this.state.width)this.setState({width:ca});}var da=this.refs.quickReply;da&&c('CSS').conditionClass(da,"_1mzg",!this.isScrolledToBottom());this.trackBottomIfRequired();}.bind(this),this.$MessengerConversation14=function(){return this.refs.scrollable&&this.refs.scrollable.getArea();}.bind(this),this.$MessengerConversation13=function(){this.$MessengerConversation4&&this.$MessengerConversation4.unsubscribe();this.$MessengerConversation4=null;}.bind(this),y;}u.getStores=function(){return [c('OmniMStore')];};u.calculateState=function(x,y){if(!c('MercuryIDs').isValid(y.threadID))return babelHelpers['extends']({},x);return {suggestions:c('OmniMStore').suggestionsForThread(y.threadID),omniMPrefs:c('OmniMStore').prefs()};};u.prototype.componentDidMount=function(){var x=new (c('SubscriptionsHandler'))();x.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.handleResize,50)),c('KeyEventController').registerKey('PAGE_UP',this.$MessengerConversation6,t),c('KeyEventController').registerKey('PAGE_DOWN',this.$MessengerConversation7,t),c('KeyEventController').registerKey('HOME',this.$MessengerConversation8,t),c('KeyEventController').registerKey('END',this.$MessengerConversation9,t),n.subscribe('change',function(y,z){z[this.props.threadID]&&this.setState({readReceipts:v(this.props)});}.bind(this)),m.subscribe('change',function(y,z){this.setState({deliveryTimestamp:this.props.threadID?m.getDeliveryTime(this.props.threadID):0});}.bind(this)));this.$MessengerConversation1=x;this.$MessengerConversation10();this.handleResize();this.$MessengerConversation11();this.$MessengerConversation5=c('throttle')(this.$MessengerConversation12,s);};u.prototype.componentWillReceiveProps=function(x){var y=x.threadID!==this.props.threadID;if(y){this.$MessengerConversation13();this.setState({scrollingToUnreadMessage:false,showUnreadNotice:false,unreadCount:x.thread?x.thread.unread_count:0});}if(y||x.messages!==this.props.messages)this.setState({readReceipts:v(x),deliveryTimestamp:x.threadID?m.getDeliveryTime(x.threadID):0});};u.prototype.componentWillUnmount=function(){this.$MessengerConversation13();this.$MessengerConversation1&&this.$MessengerConversation1.release();};u.prototype.componentWillUpdate=function(){var x=this.$MessengerConversation14();if(x){this.$MessengerConversation2=x.getScrollHeight();this.$MessengerConversation3=x.getScrollTop();}};u.prototype.componentDidUpdate=function(x){if(!this.refs.scrollable)return;if(this.props.threadID!==x.threadID||w(x,this.props)){this.scrollToBottom();this.$MessengerConversation15();}else{var y=this.$MessengerConversation14();if(y){var z=y.getScrollHeight();if(z!==this.$MessengerConversation2){var aa=y.getScrollHeight()-this.$MessengerConversation2+this.$MessengerConversation3;this.refs.scrollable.scrollToPosition(aa);}else this.$MessengerConversation15();}}if(this.props.messages!==x.messages){this.$MessengerConversation11();if(this.state.scrollingToUnreadMessage)this.$MessengerConversation16();c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17());}setTimeout(function(){var ba=this.$MessengerConversation14();this.trackBottomIfRequired();if(ba&&this.state.unreadCount&&!this.state.scrollingToUnreadMessage&&!this.props.isLoading)if(this.$MessengerConversation18(ba)){this.setState({showUnreadNotice:false,unreadCount:0});}else this.setState({showUnreadNotice:true});this.$MessengerConversation10();}.bind(this),0);};u.prototype.render=function(){if(this.props.isLoading&&this.props.messages.isEmpty())return this.$MessengerConversation19();var x=this.props.messages.last(),y=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),z=null,aa=null,ba=this.state.suggestions||{},ca=ba.quickReplies,da=ba.agentSuggestions;if(!ca||!ca.length)ca=this.$MessengerConversation20(x);if(ca&&ca.length&&x.author!==y){z=ca;aa=c('MNOmniMConstants').QUICKREPLIES;}else if(da&&da.length&&c('MercuryConfig').EnableOmniM){z=da;aa=c('MNOmniMConstants').OMNIM;}var ea=z&&z.length&&z.filter(function(na){return !na.dismissed;}).length?c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{options:z,threadID:x.thread_id,source:aa,omniMPrefs:this.state.omniMPrefs}),loader:c('JSResource')('MessengerBotsQuickReplyButtonList.react').__setRef('MessengerConversation.react'),placeholder:c('React').createElement('div',null)}):null,fa=null;if(x&&x.message_source&&x.author!==y&&c('MercuryConfig').WebCamQuickReply){var ga=x.message_source;if(ga==='camera'){var ha=this.props.thread?c('convertMIGColorToFIGColor')(this.props.thread.custom_color):null,ia=c('React').createElement('div',{className:"_1gc5",style:ha&&{color:ha}},j._("Send a photo reply"));fa=c('React').createElement('div',{className:"_1gc6"},c('React').createElement(c('MessengerQuickCamButtonHTML5.react'),{className:"_4rv5"+(' '+"_1gcb"),location:c('MessengerQuickCamOrigins').MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer,textChild:ia}));}}var ja=null,ka=null;if(fa||ea){ja=c('React').createElement('div',{className:"_51op"},c('React').createElement('div',{className:"_51oq",onResize:this.handleResize}));ka=c('React').createElement('div',{ref:'quickReply'},c('React').createElement('div',{className:"_1mzb",onResize:this.handleResize},fa,ea));}var la=j._("Messages"),ma=j._("Load more...");return c('React').createElement(c('MessengerFlexScrollableArea.react'),{className:this.props.className,flexChildren:this.$MessengerConversation21(),footerChildren:ka,onMount:function(){return c('setImmediate')(this.$MessengerConversation11);}.bind(this),onScroll:this.props.useManualFetch?undefined:this.$MessengerConversation5,ref:'scrollable',shouldStickToBottom:true,tabIndex:0,useScrollProtection:c('MessengerConfig').ChatScrollInterval},c('React').createElement('div',{'aria-label':la,className:c('joinClasses')("__i_",this.props.innerClassName),role:'region'},c('React').createElement('h3',{className:"accessible_elem"},la),this.$MessengerConversation22(),this.props.useManualFetch&&!this.props.upExhausted?c('React').createElement(o,{className:"_41jf",label:ma,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP);}.bind(this),type:'primary',use:'default'}):null,this.$MessengerConversation23(),c('React').createElement(c('MessageList.react'),{DateBreak:c('MessengerDateBreak.react'),deliveryTimestamp:this.state.deliveryTimestamp,isCanonical:this.props.isCanonical,LogMessage:c('MessengerBootloadedLogMessage.react'),CollapsedLogMessageGroup:c('MessengerCollapsedLogMessageGroup.react'),MessageGroup:c('MessengerMessageGroup.react'),messages:this.props.messages,onAttachmentLoad:this.$MessengerConversation24(this.props.threadID),readReceipts:this.state.readReceipts,ref:'messageList',location:c('MercuryShareAttachmentRenderLocations').MESSENGER,viewer:this.props.viewer,thread:this.props.thread}),this.props.useManualFetch&&!this.props.downExhausted?c('React').createElement(o,{className:"_41jf",label:ma,onClick:function(){return this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_DOWN);}.bind(this),type:'primary',use:'default'}):null,c('React').createElement(c('ChatTypingIndicators.react'),{indicatorClass:c('MessengerTypingIndicator.react'),indicatorsDidShow:function(){this.trackBottomIfRequired();}.bind(this),rootClassName:"clearfix _17pz",threadID:this.props.threadID,viewer:this.props.viewer}),ja));};u.prototype.$MessengerConversation20=function(x){var y=null,z=x&&x.platform_xmd&&JSON.parse(x.platform_xmd),aa=z&&z.message_classification===c('MessengerPlatformSubscriptionMessageClassification').AD_MESSAGE;if(aa)y=z&&z.quick_replies;return y;};u.prototype.$MessengerConversation10=function(){if(this.props.useManualFetch)return;var x=this.$MessengerConversation14();if(x&&x.getScrollTop()<r){this.props.fetchMessages(c('WebMessengerConstants').MORE_SEARCH_CONTEXT_UP);c('MessengerVideoAutoplayActions').updateStore(this.props.threadID,this.$MessengerConversation17());}};u.prototype.$MessengerConversation17=function(){return this.props.messages.filter(function(x){return c('MessengerAttachmentRenderer').isSingleVideoAttachment(x)||c('MessengerAttachmentRenderer').isSharedVideoAttachmentMessage(x);}).reverse().map(function(x){return x.message_id;});};u.prototype.$MessengerConversation26=function(x){var y=this.refs.messageList;if(!y||!x)return;var z=[],aa=x.getElement().getBoundingClientRect(),ba=c('MessengerVideoAutoplayStore').getMessageIDs(this.props.threadID),ca=ba||this.$MessengerConversation17()||c('immutable').List();ca.map(function(da){var ea=c('MessengerAttachmentRenderer').getVideoElem(da,y);if(ea)z.push([da,ea.getBoundingClientRect()]);});if(z.length)c('MessengerVideoAutoplayActions').onScroll(this.props.threadID,ba?null:ca,c('immutable').Map(z),aa);};u.propTypes={contact:q.instanceOf(c('ImmutableObject')),downExhausted:q.bool,fetchMessages:q.func.isRequired,innerClassName:q.string,isCanonical:q.bool,isLoaded:q.bool,isLoading:q.bool,messages:q.instanceOf(c('immutable').List).isRequired,participants:q.instanceOf(c('immutable').Map),thread:q.object,threadID:q.string.isRequired,upExhausted:q.bool,useManualFetch:q.bool,viewer:q.string.isRequired};function v(x){var y=c('MercuryIDs').getParticipantIDFromUserID(x.viewer),z=n.getSeenTimestamps(x.threadID),aa=new (c('Set'))(x.thread?x.thread.participants:z.keys());aa['delete'](y);return z.withMutations(function(ba){c('immutable').Seq(x.messages).reverse().forEach(function(ca){if(aa.size===0)return false;if(!aa.has(ca.author))return;ba.update(ca.author,function(da){if(!da||da.watermark<=ca.timestamp)return {watermark:ca.timestamp,action:ca.timestamp};return da;});aa['delete'](ca.author);});});}function w(x,y){var z=c('MercuryIDs').getParticipantIDFromUserID(y.viewer);return y.threadID===x.threadID&&y.messages!==x.messages&&!y.messages.isEmpty()&&y.messages.last()!==x.messages.last()&&y.messages.last().author===z;}f.exports=c('FluxContainer').create(u,{withProps:true});}),null);
__d('MessengerLeaveGroupAction',['MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryThreadInfo','MercuryTriodeSourceUtil'],(function a(b,c,d,e,f,g){var h={leaveGroup:function i(j,k){if(c('MercuryThreadInfo').isEmptyLocalThread(j))return;var l=c('MercuryMessageObject').getForFBID(k),m=l.constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),j.thread_id,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(k)]}),n=c('MercuryMessageActions').getForFBID(k);n.send(m);}};f.exports=h;}),null);
__d('messengerBlockedGroupThreadWarningDialogReact',['fbt','bs_curry','reasonReact','CacheStorage','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=h._("People you've blocked are in this conversation. If you see this conversation, you'll get each other's messages to the group."),j=h._("See Conversation?"),k=h._("Cancel"),l=h._("Leave Group"),m=h._("See Conversation"),n=new (c('CacheStorage'))("localstorage");function o(v){return "see_blocked_group:"+v;}function p(v,w){n.set("see_blocked_group:"+v,w,true);return 0;}function q(v){return n.get("see_blocked_group:"+v,false);}var r=c('reasonReact').statefulComponent("MessengerBlockedGroupThreadWarningDialogReact");function s(v){if(v){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function t(v,w,x,y,z){var aa=function ea(fa){fa.stopPropagation();c('bs_curry')._1(v,0);return c('messengerDialogsRe').removeDialog(0);},ba=function ea(fa){fa.stopPropagation();c('bs_curry')._1(w,y);return c('messengerDialogsRe').removeDialog(0);},ca=function ea(fa){fa.stopPropagation();c('bs_curry')._1(x,y);return c('messengerDialogsRe').removeDialog(0);},da=r.slice();da[9]=function(){return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,s,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').Title[0],0,[j]))])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[i])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[[1],[k],0,0,[ca],[1],0,0,[]])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[[1],[l],0,0,[ba],[1],0,0,[]])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[[1],[m],0,["danger"],[aa],[0],0,0,[]]))]))]));};return da;}var u=c('reasonReact').wrapReasonForJs(r,function(v){return t(v.onSee,v.onLeave,v.onCancel,v.prevThreadID,[]);});g.bodyText=i;g.titleText=j;g.cancelText=k;g.leaveText=l;g.seeConvoText=m;g.storage=n;g.getSeeConversationCacheKey=o;g.setWantsToSee=p;g.getWantsToSee=q;g.component=r;g.handleToggle=s;g.make=t;g.jsComponent=u;}),null);
__d('MessengerConversationContainer.react',['immutable','ImmutableObject','mercuryBlockedParticipantsRe','MercuryIDs','MercuryMessageStore','MessengerActions','messengerBlockedGroupThreadWarningDialogReact','MessengerConfig','MessengerConversation.react','messengerDialogsRe','MessengerHotLikePreviewEvents','MessengerLeaveGroupAction','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('mercuryBlockedParticipantsRe').get(),k=c('React').PropTypes,l=c('messengerBlockedGroupThreadWarningDialogReact').jsComponent;h=babelHelpers.inherits(m,c('React').PureComponent);i=h&&h.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=i.constructor).call.apply(n,[this].concat(q)),this.state={isLoaded:false,isLoading:true,messages:c('immutable').List()},this.$MessengerConversationContainer2=undefined,this.$MessengerConversationContainer3=false,this.$MessengerConversationContainer4=undefined,this.$MessengerConversationContainer5=undefined,this.$MessengerConversationContainer6=undefined,this.$MessengerConversationContainer11=function(){var s=this.props.thread;if(s==null)return;c('messengerBlockedGroupThreadWarningDialogReact').setWantsToSee(s.thread_id,true);}.bind(this),this.$MessengerConversationContainer12=function(s){var t=this.props.thread;if(t==null)return;c('MessengerLeaveGroupAction').leaveGroup(t,this.props.viewer);this.$MessengerConversationContainer14(s);}.bind(this),this.$MessengerConversationContainer13=function(s){this.$MessengerConversationContainer14(s);}.bind(this),this.$MessengerConversationContainer10=function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:true});if(!this.$MessengerConversationContainer1.fetchMoreMessages())this.setState({isLoading:false,isLoaded:true});}.bind(this),o;}m.prototype.componentWillUnmount=function(){this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();clearTimeout(this.$MessengerConversationContainer6);};m.prototype.componentDidMount=function(){this.$MessengerConversationContainer7(this.props.threadID);if(this.$MessengerConversationContainer8())this.$MessengerConversationContainer9();};m.prototype.componentDidUpdate=function(n){var o=this.props.threadID!==n.threadID;if(o&&this.$MessengerConversationContainer8())this.$MessengerConversationContainer9(n.threadID);};m.prototype.componentWillReceiveProps=function(n){if(this.props.threadID!==n.threadID){this.setState({isLoading:true,messages:c('immutable').List()});this.$MessengerConversationContainer7(n.threadID);}};m.prototype.render=function(){return c('React').createElement(c('MessengerConversation.react'),{className:this.props.className,contact:this.props.contact,fetchMessages:this.$MessengerConversationContainer10,isCanonical:c('MercuryIDs').isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this.props.onMarkRead,participants:this.props.participants,ref:'conversation',thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer});};m.prototype.handleResize=function(){this.refs.conversation.handleResize();};m.prototype.isScrolledToBottom=function(){return !!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom());};m.prototype.$MessengerConversationContainer8=function(){var n=this.props.thread;if(n==null)return false;if(c('MercuryIDs').isCanonical(this.props.threadID))return false;if(!n.is_subscribed)return false;if(!j.isPresentInGroupThread(n))return false;var o=c('messengerBlockedGroupThreadWarningDialogReact').getWantsToSee(n.thread_id);if(o)return false;return true;};m.prototype.$MessengerConversationContainer9=function(n){c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{onSee:this.$MessengerConversationContainer11,onLeave:this.$MessengerConversationContainer12,onCancel:this.$MessengerConversationContainer13,prevThreadID:n});}.bind(this));};m.prototype.$MessengerConversationContainer14=function(n){if(n==null)c('MessengerActions').selectThread(null);c('MessengerActions').selectThread(n);};m.prototype.$MessengerConversationContainer7=function(n){if(!n)return;this.setState({isLoaded:false});this.$MessengerConversationContainer1&&this.$MessengerConversationContainer1.destroy();this.$MessengerConversationContainer1=new (c('MercuryMessageStore'))(n,c('MessengerConfig').MessageLoadCount);clearTimeout(this.$MessengerConversationContainer6);this.$MessengerConversationContainer6=setTimeout(function(){if(this.props.thread&&this.props.thread.message_count<1)this.setState({isLoaded:true,isLoading:false});}.bind(this),6000);this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();this.$MessengerConversationContainer2=new (c('SubscriptionsHandler'))();this.$MessengerConversationContainer2.addSubscriptions(this.$MessengerConversationContainer1.subscribe(function(o){this.setState({messages:this.$MessengerConversationContainer15(c('immutable').List(o.messages)),isLoading:false});}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').START,function(o){this.$MessengerConversationContainer3=true;this.$MessengerConversationContainer4=o;this.setState({messages:this.$MessengerConversationContainer15(this.state.messages)});clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer5=setInterval(this.refs.conversation.scrollToBottom,50);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_ANIMATION,function(o){clearInterval(this.$MessengerConversationContainer5);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').FINISH_EMOJI_ANIMATION,function(o){clearInterval(this.$MessengerConversationContainer5);}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null;}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').STOP_EMOJI,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null;}.bind(this)),c('MessengerHotLikePreviewEvents').addListener(c('MessengerHotLikePreviewEvents').REMOVE,function(){clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer3=false;this.setState({messages:this.$MessengerConversationContainer15(this.state.messages)});}.bind(this)));};m.prototype.$MessengerConversationContainer15=function(n){if(this.$MessengerConversationContainer3){n=n.set(n.size,this.$MessengerConversationContainer4);}else{n=n.filterNot(function(o){return o.is_like_preview;});this.$MessengerConversationContainer4=null;}return n;};m.propTypes={contact:k.instanceOf(c('ImmutableObject')),onMarkRead:k.func.isRequired,participants:k.instanceOf(c('immutable').Map),thread:k.object,threadID:k.string.isRequired,viewer:k.string.isRequired};f.exports=m;}),null);
__d("archiveWarningReact",["cx","ix","React","bs_js_boolean","Image.react","reasonReact","TooltipData","bs_js_primitive","bs_js_null_undefined"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("ArchiveWarningReact");function k(m,n,o){var p=j.slice();p[9]=function(){var q=c("TooltipData").propsFor("All employee-to-employee conversations will be archived","above");if(m!==0){var r=m!==0?i("28105"):i("28106");return c("React").createElement(c("Image.react"),{className:"titanArchiveWarning"+(" "+"button")+(c("bs_js_boolean").to_js_boolean(1-n)?" "+"hidden_elem":""),src:r,"data-tooltip-content":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-content"])),"data-hover":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-hover"])),"data-tooltip-position":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-position"]))});}else if(n!==0){return c("reasonReact").createDomElement("div",{className:"_3a61","data-tooltip-content":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-content"])),"data-hover":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-hover"])),"data-tooltip-position":c("bs_js_null_undefined").from_opt(c("bs_js_primitive").undefined_to_opt(q["data-tooltip-position"]))},[c("React").createElement("i",{className:"_3olv _14lt"})]);}else return null;};return p;}var l=c("reasonReact").wrapReasonForJs(j,function(m){return k(+m.isFBAtWork,+m.shown,[]);});g.component=j;g.make=k;g.jsComponent=l;}),null);
__d('mercuryThreadTitleReact',['utilsRe','reasonReact','bs_js_null_undefined','MercuryThreadTitle.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){return c('reasonReact').wrapJsForReason(c('MercuryThreadTitle.react'),{className:c('bs_js_null_undefined').from_opt(i),thread:j,viewer:k,isNewThread:c('utilsRe').optionBoolToNullUndefinedBoolean(l),showUnreadCount:c('utilsRe').optionBoolToNullUndefinedBoolean(m),useShortName:c('utilsRe').optionBoolToNullUndefinedBoolean(n),useAndSeparator:c('utilsRe').optionBoolToNullUndefinedBoolean(o)},p);}g.make=h;}),null);
__d('messengerCalculateTruncationState',['Style'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){if(!l||!j)return;var n=m?m.offsetWidth:0,o=Math.ceil(.5*(i.offsetWidth+l.offsetWidth)),p=i.offsetWidth-k.offsetWidth-12;if(o<=p){c('Style').set(i,'text-align','center');c('Style').set(j,'width','auto');c('Style').set(j,'margin-left','auto');}else{if(document.body.dir==='rtl'){c('Style').set(i,'text-align','right');}else{c('Style').set(i,'text-align','left');c('Style').set(j,'margin-left',n+'px');}var q=Math.max(i.offsetWidth-n-k.offsetWidth-11,0);c('Style').set(j,'width',q+'px');}}f.exports=h;}),null);
__d("messengerCustomColorUtilsRe",["cssVar","CurrentUser"],(function a(b,c,d,e,f,g,h){'use strict';function i(j){var k=j.custom_color,l=0;if(k!==null){if(k===""){l=1;}else return k;}else l=1;if(l===1){var m=+c("CurrentUser").isWorkUser();if(m!==0){return "#1479fb";}else return "#0084ff";}}g.customColorOrBlue=i;}),null);
__d("messengerInfoPanelButtonReact",["React"],(function a(b,c,d,e,f,g){'use strict';var h={height:"32px",width:"32px"};function i(l){return c("React").createElement("svg",{viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{style:{fill:l},d:"M32,10c-12.2,0-22,9.8-22,22s9.8,22,22,22s22-9.8,22-22S44.2,10,32,10z M32,19c1.6,0,3,1.4,3,3s-1.4,3-3,3 c-1.6,0-3-1.4-3-3S30.4,19,32,19z M36,45h-2h-4h-2v-1h2V29h-2v-1h2h4v1v15h2V45z"}))));}function j(l){var m={fill:l};return c("React").createElement("svg",{style:{stroke:l},viewBox:"0 0 64 64"},c("React").createElement("g",undefined,c("React").createElement("polygon",{style:m,points:"34,44 34,29 34,28 30,28 28,28 28,29 30,29 30,44 28,44 28,45 30,45 34,45 36,45 36,44"}),c("React").createElement("circle",{style:m,cx:"32",cy:"22",r:"3"})),c("React").createElement("path",{style:{fill:"none",stroke:l,strokeMiterlimit:"10",strokeWidth:"2"},d:"M32,11c11.6,0,21,9.4,21,21s-9.4,21-21,21s-21-9.4-21-21S20.4,11,32,11z"}));}function k(l,m){return c("React").createElement("div",{style:h},m!==0?j(l):i(l));}g.svgWrapperStyle=h;g.selected=i;g.notSelected=j;g.make=k;}),null);
__d("messengerPresenceStatusReact",["fbt","React","reasonReact","bs_js_primitive"],(function a(b,c,d,e,f,g,h){'use strict';var i=c("reasonReact").statefulComponent("MessengerPresenceStatusReact");function j(l,m,n,o,p){var q=i.slice();q[9]=function(){var r,s=0;if(m!==0&&o){r=h._("Active on {platform}",[h.param("platform",o[0])]);}else s=1;if(s===1)r=n?h._("Active {time} ago",[h.param("time",n[0])]):o?o[0]:null;return c("React").createElement("span",{className:l?l[0]:undefined},r);};return q;}var k=c("reasonReact").wrapReasonForJs(i,function(l){return j(c("bs_js_primitive").null_undefined_to_opt(l.className),+l.isUserActive,c("bs_js_primitive").null_undefined_to_opt(l.lastActive),c("bs_js_primitive").null_undefined_to_opt(l.platform),[]);});g.component=i;g.make=j;g.jsComponent=k;}),null);
__d('MessengerRTCGroupCallParticipantsPickerDialog.react',['cx','fbt','FBRTCCore','immutable','ImmutableObject','MessengerDialog.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogHeader.react','MessengerDialogTitle.react','MessengerRTCGroupCallContactList.react','MessengerRTCGroupCallRingParticipantsRow.react','MessengerRTCGroupCallThreadRow.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes,m=460,n=5;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={isParticipantSelected:this.props.participants.mapEntries(function(u){var v=u[0],w=u[1];return [v,this.props.participants.size<=n];}.bind(this))},this.$MessengerRTCGroupCallParticipantsPickerDialog1=function(){var u=this.$MessengerRTCGroupCallParticipantsPickerDialog2().map(function(v){return v.fbid;});if(this.props.handleCall){this.props.handleCall(u);}else c('FBRTCCore').startGroupCall({conferenceName:this.props.conferenceName,hasVideo:this.props.hasVideo,trigger:this.props.trigger,usersToRing:u});this.props.onUnmount();}.bind(this),q;}o.prototype.render=function(){var p=this.props,q=p.participants,r=p.thread,s=p.viewerID;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.props.onUnmount,type:'default',width:m},c('React').createElement('div',{className:"_2m1r"},c('React').createElement(c('MessengerDialogHeader.react'),null,c('React').createElement(c('MessengerDialogCancelButton.react'),null),c('React').createElement(c('MessengerDialogTitle.react'),null,i._("Ring Group Members")),c('React').createElement(c('MessengerDialogButton.react'),{label:i._("Call"),onClick:this.$MessengerRTCGroupCallParticipantsPickerDialog1,disabled:this.$MessengerRTCGroupCallParticipantsPickerDialog2().length===0,type:'primary'})),c('React').createElement(c('MessengerRTCGroupCallThreadRow.react'),{participants:q,thread:r,viewerID:s}),c('React').createElement(c('MessengerRTCGroupCallRingParticipantsRow.react'),{names:this.$MessengerRTCGroupCallParticipantsPickerDialog2().map(function(t){var u=t.name;return u;}).sort(function(t,u){return t.localeCompare(u);})}),c('React').createElement(c('MessengerRTCGroupCallContactList.react'),{participants:q.toArray().sort(function(t,u){return t.name.localeCompare(u.name);}),isParticipantSelected:this.state.isParticipantSelected,onClick:function(t){return this.setState({isParticipantSelected:this.state.isParticipantSelected.set(t,!this.state.isParticipantSelected.get(t))});}.bind(this)})));};o.prototype.$MessengerRTCGroupCallParticipantsPickerDialog2=function(){return this.props.participants.filter(function(p,q){return this.state.isParticipantSelected.get(q);}.bind(this)).toArray();};o.propTypes={participants:l.instanceOf(c('immutable').Map).isRequired,thread:l.instanceOf(c('ImmutableObject')),viewerID:l.string.isRequired,trigger:l.string.isRequired,conferenceName:l.string.isRequired,hasVideo:l.bool.isRequired,handleCall:l.func,onUnmount:l.func.isRequired};f.exports=o;}),null);
__d('MessengerRTCGroupCallParticipantsPickerDialogController',['DOM','MessengerRTCGroupCallParticipantsPickerDialog.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h={_container:c('DOM').create('div'),render:function i(j){var k=j.participants,l=j.thread,m=j.viewerID,n=j.trigger,o=j.conferenceName,p=j.hasVideo,q=j.handleCall;c('ReactDOM').render(c('React').createElement(c('MessengerRTCGroupCallParticipantsPickerDialog.react'),{participants:k,thread:l,viewerID:m,trigger:n,conferenceName:o,hasVideo:p,handleCall:q,onUnmount:function(){return this._onUnmount();}.bind(this)}),this._container);},_onUnmount:function i(){c('ReactDOM').unmountComponentAtNode(this._container);}};f.exports=h;}),null);
__d('MessengerRTCUnavailableDialog.react',['fbt','messengerDialogsRe','MessengerDialog.react','messengerDialogBodyReact','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerDialogBodyReact').jsComponent,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$MessengerRTCUnavailableDialog2=function(){return c('React').createElement('div',null,h._("{name} is not available right now.",[h.param('name',this.props.name)]));}.bind(this),o;}m.prototype.render=function(){return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MessengerRTCUnavailableDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,h._("Can't Make Call")),c('React').createElement(k,null,this.$MessengerRTCUnavailableDialog2()),c('React').createElement(c('MessengerDialogFooter.react'),null,c('React').createElement(c('MessengerDialogButton.react'),{action:'cancel',label:h._("OK"),type:'primary'})));};m.prototype.$MessengerRTCUnavailableDialog1=function(n){if(!n)c('messengerDialogsRe').removeDialog();};m.propTypes={name:l.string.isRequired};f.exports=m;}),null);
__d("messengerRTCVideoCallButtonReact",["fbt","React","reasonReact"],(function a(b,c,d,e,f,g,h){'use strict';var i={height:"32px",width:"32px"};function j(o,p){return {clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:o,strokeMiterlimit:"10",strokeWidth:"2"};}var k=j("#888888",0),l=c("reasonReact").statefulComponent("MessengerRTCVideoCallButtonReact");function m(o,p,q,r){var s=l.slice();s[9]=function(){var t=q!==0?h._("Start a group video chat"):h._("Start a video call"),u=p!==0?j(o,0):k;return c("React").createElement("div",{style:i,title:t},c("React").createElement("svg",{style:u,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,t),c("React").createElement("g",undefined,c("React").createElement("g",undefined,c("React").createElement("path",{d:"M47,27.8v7.5l9,4.5V23.2L47,27.8z M37.2,17H13.8C10.6,17,8,19.6,8,22.8v17.4c0,3.2,2.6,5.8,5.8,5.8h23.3\nc3.2,0,5.8-2.6,5.8-5.8V22.8C43,19.6,40.4,17,37.2,17z"})))));};return s;}var n=c("reasonReact").wrapReasonForJs(l,function(o){return m(o.customColor,+o.isAvailable,+o.isGroupChat,[]);});g.svgWrapperStyle=i;g.svgStyle=j;g.unavailable=k;g.component=l;g.make=m;g.jsComponent=n;}),null);
__d("messengerRTCVoiceCallButtonReact",["fbt","React","reasonReact"],(function a(b,c,d,e,f,g,h){'use strict';var i={height:"32px",width:"32px"};function j(o,p){return {clipRule:"evenodd",fill:"none",fillRule:"evenodd",stroke:o,strokeMiterlimit:"10",strokeWidth:"2"};}var k=j("#888888",0),l=c("reasonReact").statefulComponent("MessengerRTCVoiceCallButtonReact");function m(o,p,q,r){var s=l.slice();s[9]=function(){var t=q!==0?h._("Start a group call"):h._("Start a voice call"),u=p!==0?j(o,0):k;return c("React").createElement("div",{style:i,title:t},c("React").createElement("svg",{style:u,viewBox:"0 0 64 64"},c("React").createElement("title",undefined,t),c("React").createElement("path",{d:"M48.3,50.5c-7.7,6.5-24.2-10-24.5-10.3C23.5,39.9,7,23.4,13.5,15.7c4.8-5.7,6.3-3.4,7-2.7\nc0.6,0.5,5.7,7.8,6,9.2c0.3,1.4-2.4,4.6-2.2,5.9c0.2,1.2,3.6,5,5.1,6.5c1.5,1.5,5.3,4.9,6.5,5.1c1.2,0.2,4.4-2.5,5.9-2.2\nc1.4,0.3,8.7,5.4,9.2,6C51.6,44.2,54,45.7,48.3,50.5z"})));};return s;}var n=c("reasonReact").wrapReasonForJs(l,function(o){return m(o.customColor,+o.isAvailable,+o.isGroupChat,[]);});g.svgWrapperStyle=i;g.svgStyle=j;g.unavailable=k;g.component=l;g.make=m;g.jsComponent=n;}),null);
__d('MessengerRTCCallButton.react',['invariant','immutable','ImmutableObject','Link.react','MercuryIDs','MercuryThreadIDMap','messengerDialogsRe','MessengerRTCUnavailableDialog.react','messengerRTCVideoCallButtonReact','messengerRTCVoiceCallButtonReact','MNRTCCallabilityStore','React','StoreAndPropBasedStateMixin','FBRTCLogger'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryThreadIDMap').get(),j=c('messengerRTCVideoCallButtonReact').jsComponent,k=c('messengerRTCVoiceCallButtonReact').jsComponent,l=c('FBRTCLogger').Trigger,m=c('React').PropTypes,n=c('React').createClass({displayName:'MessengerRTCCallButton',mixins:[c('StoreAndPropBasedStateMixin')(c('MNRTCCallabilityStore'))],statics:{calculateState:function o(p){if(c('MercuryIDs').isGroupChat(p.threadID))return {isCallable:true};var q=c('MercuryIDs').getUserIDFromThreadID(p.threadID);q||h(0);return {isCallable:c('MNRTCCallabilityStore').isCallable(q)};}},propTypes:{className:m.string.isRequired,customColor:m.string.isRequired,isVideo:m.bool.isRequired,participants:m.instanceOf(c('immutable').Map).isRequired,thread:m.instanceOf(c('ImmutableObject')).isRequired,threadID:m.string.isRequired,viewer:m.string.isRequired,calleeName:m.string.isRequired},render:function o(){var p={customColor:this.props.customColor,isAvailable:this.state.isCallable,isGroupChat:c('MercuryIDs').isGroupChat(this.props.threadID)};return c('React').createElement(c('Link.react'),{className:this.props.className,onClick:this._handleStartCall},this.props.isVideo?c('React').createElement(j,p):c('React').createElement(k,p));},_handleStartCall:function o(p){p.preventDefault();if(this.state.isCallable){if(c('MercuryIDs').isGroupChat(this.props.threadID)){e(['FBRTCCore','FBRTCSupport','MessengerRTCGroupCallUnsupportedBrowserDialogController','MessengerRTCGroupCallParticipantsPickerDialogController'],function(q,r,s,t){var u=this.props.thread.rtc_call_data;if(u&&u.call_state!=='NO_ONGOING_CALL'&&u.server_info_data){q.startGroupCall({conferenceName:'GROUP:'+this.props.thread.thread_fbid,hasVideo:this.props.isVideo,serverInfoData:u.server_info_data,trigger:u.call_state!=='AUDIO_GROUP_CALL'?this.props.isVideo?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:this.props.isVideo?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON});return;}if(!r.isGroupCallWebtrcSupported()){s.render({hasVideo:this.props.isVideo});return;}var v=function(w){t.render({participants:this.props.participants.filter(function(x){var y=x.fbid;return y!==this.props.viewer;}.bind(this)),thread:this.props.thread,viewerID:this.props.viewer,trigger:this.props.isVideo?l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON,conferenceName:'GROUP:'+w,hasVideo:this.props.isVideo});}.bind(this);if(c('MercuryIDs').isLocalThread(this.props.threadID)){i.getServerIDFromClientID(this.props.threadID,function(w){return v(w);});}else v(c('MercuryIDs').getThreadFBIDFromThreadID(this.props.threadID));}.bind(this));}else e(['FBRTCCore'],function(q){var r=c('MercuryIDs').getUserIDFromThreadID(this.props.threadID);r||h(0);q.startOutgoingCall(r,'messenger_dot_com',!this.props.isVideo);}.bind(this));}else c('messengerDialogsRe').showDialog(function(){return c('React').createElement(c('MessengerRTCUnavailableDialog.react'),{name:this.props.calleeName});}.bind(this));}});f.exports=n;}),null);
__d('messengerRTCCallButtonReact',['bs_js_boolean','reasonReact','MessengerRTCCallButton.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q){return c('reasonReact').wrapJsForReason(c('MessengerRTCCallButton.react'),{className:i,customColor:j,isVideo:c('bs_js_boolean').to_js_boolean(k),participants:l,thread:m,threadID:n,viewer:o,calleeName:p},q);}g.make=h;}),null);
__d('montageThreadViewContainerReact',['reasonReact','bs_js_null_undefined','MontageThreadViewContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MontageThreadViewContainer.react'),{threadID:i,onResize:c('bs_js_null_undefined').from_opt(j)},k);}g.make=h;}),null);
__d('messengerDetailViewHeaderReact',['cx','fbt','bs_curry','Event','React','ReactDOM','debounce','RTCConfig','bs_js_boolean','Link.react','reasonReact','FBRTCSupport','bs_js_primitive','MercuryConfig','WorkModeConfig','bs_js_null_undefined','MercuryThreadInfo','messengerDomIDsRe','archiveWarningReact','MercuryParticipantTypes','mercuryThreadTitleReact','messengerLocalTimeReact','WorkFocusModeController','MessengerJoinableModeType','MessengerWebDriverTestIDs','messengerCustomColorUtilsRe','messengerRTCCallButtonReact','messengerPresenceStatusReact','messengerInfoPanelButtonReact','montageThreadViewContainerReact','messengerCalculateTruncationState'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('WorkFocusModeController').MessengerWorkAvailabilityStatus;function k(w){var x=w[0],y=w[1],z=w[2],aa=w[3],ba=w[4],ca=c('bs_js_null_undefined').from_opt(x),da=c('bs_js_null_undefined').from_opt(y),ea=c('bs_js_null_undefined').from_opt(z),fa=c('bs_js_null_undefined').from_opt(aa),ga=c('bs_js_null_undefined').from_opt(ba);return c('messengerCalculateTruncationState')(ca,da,ea,fa,ga);}function l(w,x){x[3][3]=w!==null?[c('ReactDOM').findDOMNode(w)]:0;return 0;}function m(w,x){x[3][1]=w===null?0:[w];return 0;}function n(w,x){x[3][0]=w===null?0:[w];return 0;}function o(w,x){x[3][2]=w===null?0:[w];return 0;}function p(w,x){x[3][4]=w===null?0:[w];return 0;}function q(w,x){if(w.has_montage&&c('MercuryConfig').MontageThreadViewer){return c('React').createElement("div",{ref:c('bs_curry')._1(x[1],p),className:"_1cwz"},c('reasonReact').element(0,0,c('montageThreadViewContainerReact').make(w.thread_id,0,[])));}else return null;}function r(w,x){var y=x.filter(function(ba,ca,da){if(c('bs_js_primitive').is_nil_undef(ba)){return false;}else{var ea=ba.fbid;if(c('bs_js_primitive').is_nil_undef(ea)){return false;}else return c('bs_js_boolean').to_js_boolean(+(ea!==w));}}),z=y.count(),aa=y.first();if(z!==1||aa===undefined){return null;}else return c('reasonReact').element(0,0,c('messengerLocalTimeReact').make("_5eu7",c('bs_js_primitive').null_undefined_to_opt(aa.timezone),[]));}function s(w,x,y){var z=+(c('FBRTCSupport').isWebrtcSupported()&&c('FBRTCSupport').isOSSupported()),aa=w?+(w[0].contact.type===c('MercuryParticipantTypes').PAGE):0,ba=x?+(x[0].joinable_mode===c('MessengerJoinableModeType').JOINABLE):0,ca;if(x){var da=x[0];ca=+(da.participants.length>1)&&+c('MercuryThreadInfo').canReply(da)&&(+da.is_canonical||y&&+c('RTCConfig').RtcConferencingVideoGK||1-y&&c('RTCConfig').RtcConferencingGK);}else ca=0;if(z&&!aa&&!ba){return ca;}else return 0;}var t=c('reasonReact').statefulComponent("MessengerDetailViewHeaderReact");function u(w,x,y,z,aa,ba,ca){var da=function ga(){if(s(w,aa,0)){if(aa){var ha=aa[0],ia=ha.thread_id;return c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('messengerRTCCallButtonReact').make("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(ha),0,z,ha,ia,ba,w?w[0].contact.name:"",[])));}else return null;}else return null;},ea=function ga(){if(s(w,aa,1)){if(aa){var ha=aa[0],ia=ha.thread_id;return c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('messengerRTCCallButtonReact').make("_30yy",c('messengerCustomColorUtilsRe').customColorOrBlue(ha),1,z,ha,ia,ba,w?w[0].contact.name:"",[])));}else return null;}else return null;},fa=function ga(){var ha;if(j!==null){var ia=+j.displayFocusBanner(ba,z);ha=ia!==0?[j]:0;}else ha=0;if(ha){return [0,c('React').createElement(ha[0],{className:"_2v6o",viewer:ba,thread:c('bs_js_null_undefined').from_opt(aa),participants:z})];}else if(w){var ja=w[0];return [0,c('reasonReact').element(0,0,c('messengerPresenceStatusReact').make(["_2v6o"],+ja.isUserActive,c('bs_js_primitive').null_undefined_to_opt(ja.lastActive),[ja.platform],[]))];}else return [1,null];};return [t[0],t[1],t[2],t[3],function(ga){var ha=ga[3];ha[5]=[c('Event').listen(window,"resize",c('debounce')(function(){return k(ha);},20))];return 0;},function(ga){return k(ga[1][3]);},function(ga){var ha=ga[3][5];if(ha){return ha[0].remove();}else return 0;},t[7],t[8],function(ga){if(aa){var ha=aa[0],ia=1- +z.isEmpty()&&+z.every(function(la,ma,na){if(c('bs_js_primitive').is_nil_undef(la)){return false;}else return la.employee;}),ja=i._("Conversation Information"),ka=fa(0);return c('React').createElement("div",{ref:c('bs_curry')._1(ga[1],n),className:"_5742"+(c('bs_js_boolean').to_js_boolean(ka[0])?' '+"_1_fz":'')},q(ha,ga),c('React').createElement("div",{key:"threadTitle",ref:c('bs_curry')._1(ga[1],m),className:"_5743"},c('React').createElement("h2",{className:"_17w2",id:c('messengerDomIDsRe').ids.THREAD_TITLE},c('reasonReact').element(0,[c('bs_curry')._1(ga[1],l)],c('mercuryThreadTitleReact').make(["_3oh-"],ha,ba,0,0,0,0,[]))),ka[1],r(ba,z)),c('React').createElement("ul",{key:"buttonsContainer",ref:c('bs_curry')._1(ga[1],o),className:"_fl2"},c('React').createElement("li",undefined,c('reasonReact').element(0,0,c('archiveWarningReact').make(+c('WorkModeConfig').is_work_user,ia,[]))),da(0),ea(0),c('React').createElement("li",undefined,c('React').createElement(c('Link.react'),{"aria-expanded":x!==0?false:true,"aria-label":ja,className:"_30yy","data-testid":c('MessengerWebDriverTestIDs').INFO_PANEL_BUTTON,onClick:y,role:"button",title:ja},c('messengerInfoPanelButtonReact').make(c('messengerCustomColorUtilsRe').customColorOrBlue(ha),x)),c('React').createElement("div",{"aria-owns":c('messengerDomIDsRe').ids.THREAD_INFO_PANEL}))));}else return null;},function(){return [0,0,0,0,0,0];},t[11],t[12]];}var v=c('reasonReact').wrapReasonForJs(t,function(w){return u(c('bs_js_primitive').null_undefined_to_opt(w.contactData),+w.infoPanelCollapsed,w.onInfoPanelToggle,w.participants,c('bs_js_primitive').null_undefined_to_opt(w.thread),w.viewer,[]);});g.messengerWorkAvailabilityStatus_=j;g.calculateTruncationState=k;g.findMercuryTitle=l;g.findTitle=m;g.findRoot=n;g.findButtons=o;g.findMontage=p;g.renderMontageThread=q;g.renderLocalTime=r;g.shouldShowCallButton=s;g.component=t;g.make=u;g.jsComponent=v;}),null);
__d('MessengerDetailViewHeaderContainer.react',['immutable','ImmutableObject','MercuryIDs','MercuryThreadIDMap','MercuryTypeaheadConstants','MessengerActions','MessengerComposerActions','MessengerComposeViewHeader.react','messengerDetailViewHeaderReact','MessengerView','React','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('messengerDetailViewHeaderReact').jsComponent,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerDetailViewHeaderContainer1=function(r){var s=r.getUniqueID(),t=r.getType();if(t===c('MercuryTypeaheadConstants').THREAD_TYPE){var u=c('MercuryThreadIDMap').getForFBID(this.props.viewer);u.getClientIDFromServerID(s,function(v){c('MessengerComposerActions').moveDraftToNextThread(v);c('MessengerActions').selectThread(v);});c('MessengerComposerActions').exitComposeState();}else if(s===this.props.viewer||t===c('MercuryTypeaheadConstants').PAGE_TYPE){c('MessengerComposerActions').moveDraftToNextThread(c('MercuryIDs').getThreadIDFromUserID(s));c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(c('MercuryIDs').getThreadIDFromUserID(s));}else c('MessengerComposerActions').addToken(r);}.bind(this),this.$MessengerDetailViewHeaderContainer2=function(r){c('MessengerComposerActions').removeToken(r);},n;}l.prototype.shouldComponentUpdate=function(m){var n=m.contactData,o=babelHelpers.objectWithoutProperties(m,['contactData']),p=this.props,q=p.contactData,r=babelHelpers.objectWithoutProperties(p,['contactData']);return !c('shallowEqual')(o,r)||!c('shallowEqual')(n,q);};l.prototype.render=function(){return this.props.view===c('MessengerView').DETAIL.COMPOSE?c('React').createElement(c('MessengerComposeViewHeader.react'),{forceHideClearButton:true,onAddRecipient:this.$MessengerDetailViewHeaderContainer1,onRemoveRecipient:this.$MessengerDetailViewHeaderContainer2,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer}):c('React').createElement(j,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer});};l.propTypes={contactData:k.object,infoPanelCollapsed:k.bool.isRequired,onInfoPanelToggle:k.func.isRequired,onResize:k.func.isRequired,participants:k.instanceOf(c('immutable').Map).isRequired,recipients:k.instanceOf(c('immutable').List).isRequired,thread:k.instanceOf(c('ImmutableObject')),view:k.string,viewer:k.string.isRequired};f.exports=l;}),null);
__d('MessengerPresenceStatusUtils',['fbt','AvailableListConstants','CurrentUser','LastActiveTimes','MercuryIDs','PresenceStatus'],(function a(b,c,d,e,f,g,h){'use strict';var i={getStatusFromCanonicalThread:function j(k,l){var m=null;if(l&&l.is_canonical){var n=k.get(c('MercuryIDs').getParticipantIDFromFromThreadID(l.thread_id));if(n){var o=void 0;if(n.is_messenger_user){o=c('CurrentUser').isWorkUser()?h._("Work Chat"):h._("Messenger");}else o=c('CurrentUser').isWorkUser()?h._("Workplace"):h._("Facebook");var p=c('PresenceStatus').get(n.fbid),q=void 0,r=void 0;if(p!==c('AvailableListConstants').ACTIVE){q=c('LastActiveTimes').get(n.fbid);r=c('LastActiveTimes').getShortDisplay(n.fbid);}m={contact:n,platform:o,isUserActive:p===c('AvailableListConstants').ACTIVE,lastActiveTS:q,lastActive:r};}}return m;}};f.exports=i;}),null);
__d('customColorHighlightingReact',['reasonReact','bs_js_null_undefined','CustomColorHighlighting.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('CustomColorHighlighting.react'),{customColor:c('bs_js_null_undefined').from_opt(i)},j);}g.make=h;}),null);
__d('messengerMenuReact',['reasonReact','bs_js_null_undefined','MessengerMenu.react'],(function a(b,c,d,e,f,g){'use strict';function h(n){return c('reasonReact').wrapJsForReason(c('MessengerMenu.react'),{},n);}var i=[h];function j(n,o,p,q,r){return c('reasonReact').wrapJsForReason(c('MessengerMenu.react').Item,{href:c('bs_js_null_undefined').from_opt(n),label:o,onclick:c('bs_js_null_undefined').from_opt(p),target:c('bs_js_null_undefined').from_opt(q)},r);}var k=[j];function l(n){return c('reasonReact').wrapJsForReason(c('MessengerMenu.react').Separator,{},n);}var m=[l];g.Menu=i;g.MenuItem=k;g.MenuSeparator=m;}),null);
__d('messengerPopoverMenuReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerPopoverMenu.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){return c('reasonReact').wrapJsForReason(c('MessengerPopoverMenu.react'),{disableArrowKeyActivation:c('utilsRe').optionBoolToNullUndefinedBoolean(i),isOpen:c('utilsRe').optionBoolToNullUndefinedBoolean(j),menu:k,onHide:c('bs_js_null_undefined').from_opt(l),onShow:c('bs_js_null_undefined').from_opt(m)},n);}g.make=h;}),null);
__d('messengerInfoPanelSectionReact',['cx','fbt','bs_curry','React','utilsRe','bs_js_boolean','Link.react','reasonReact','bs_js_primitive','bs_js_null_undefined','messengerMenuReact','MessengerMenu.react','messengerPopoverMenuReact','MessengerWebDriverTestIDs','customColorHighlightingReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statefulComponent("MessengerInfoPanelSectionReact");function k(o,p){var q=c('utilsRe').isSomeTrue(o),r=q!==0?i._("Show section"):i._("Hide section");return c('reasonReact').element(0,0,c('bs_curry')._1(c('messengerMenuReact').Menu[0],[c('React').createElement(c('MessengerMenu.react').Item,{"data-testid":c('MessengerWebDriverTestIDs').INFO_PANEL_TOGGLER_OPTION,label:r,onclick:c('bs_js_null_undefined').from_opt(p)},r)]));}function l(o,p,q){var r=c('utilsRe').isSomeTrue(o);if(r!==0){return c('reasonReact').element(0,0,c('messengerPopoverMenuReact').make(0,0,k(p,q),0,0,[c('React').createElement(c('Link.react'),{"aria-haspopup":1,"aria-label":i._("Info panel options"),className:"_1lj1",role:"button"})]));}else return null;}function m(o,p,q,r,s,t){var u=j.slice();u[9]=function(){return c('React').createElement("div",{className:"_1lix"+(c('bs_js_boolean').to_js_boolean(c('utilsRe').isSomeTrue(p))?' '+"_1liy":'')+(c('bs_js_boolean').to_js_boolean(c('utilsRe').isSomeTrue(p)&&c('utilsRe').isSomeTrue(q))?' '+"_1liz":'')},c('React').createElement("div",{className:"_1li-"}),s?c('React').createElement("h4",{className:"_1lj0"},s[0],l(p,q,r)):null,c('React').createElement("div",{className:"_1li_"},c('reasonReact').element(0,0,c('customColorHighlightingReact').make(o,t))));};return u;}var n=c('reasonReact').wrapReasonForJs(j,function(o){return m(c('bs_js_primitive').null_undefined_to_opt(o.customColor),c('utilsRe').nullUndefinedBooleanToOptionBool(o.isCollapsible),c('utilsRe').nullUndefinedBooleanToOptionBool(o.isCollapsed),c('bs_js_primitive').null_undefined_to_opt(o.onToggle),c('bs_js_primitive').null_undefined_to_opt(o.title),o.children);});g.component=j;g.renderMenu=k;g.renderToggle=l;g.make=m;g.jsComponent=n;}),null);
__d('MessengerInfoPanelAssociatedObjectSection.react',['cx','fbt','CurrentUser','Image.react','Link.react','MessageThreadAssociatedObjectKey','messengerInfoPanelSectionReact','React','TimeSpentRoomTypeEnum','TimeSpentRoomTypeEnum$FbtEnum'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerInfoPanelSectionReact').jsComponent,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;n.prototype.render=function(){var o=this.props,p=o.isCollapsed,q=o.onToggle,r=o.associatedObject,s=o.customColor,t=r[c('MessageThreadAssociatedObjectKey').ACTION_LINK];return c('React').createElement(l,{customColor:s,isCollapsible:true,isCollapsed:p,onToggle:q,title:i._("Part of")},c('React').createElement(c('Link.react'),{href:t,target:'_blank',style:{textDecoration:'none'},className:"_35-k"},this.$MessengerInfoPanelAssociatedObjectSection1(),this.$MessengerInfoPanelAssociatedObjectSection2()));};n.prototype.$MessengerInfoPanelAssociatedObjectSection1=function(){var o=this.props.associatedObject,p=o[c('MessageThreadAssociatedObjectKey').PROFILE_PICTURE];return c('React').createElement('div',null,c('React').createElement(c('Image.react'),{className:"_35-n",src:p}));};n.prototype.$MessengerInfoPanelAssociatedObjectSection2=function(){var o=this.props.associatedObject,p=o[c('MessageThreadAssociatedObjectKey').NAME],q=c('TimeSpentRoomTypeEnum')[o[c('MessageThreadAssociatedObjectKey').ROOM_TYPE]],r=c('CurrentUser').isWorkUser()?'Workplace':'Facebook';return c('React').createElement('div',{className:"_35-o"},c('React').createElement('div',{className:"_35-p"},p),c('React').createElement('div',{className:"_35-q"},i._({"EVENT":"Go to {productName} Event","GROUP":"Go to {productName} Group"},[i.param('productName',r),i['enum'](q,{EVENT:'Event',GROUP:'Group'})])));};function n(){j.apply(this,arguments);}n.propTypes={isCollapsed:m.bool.isRequired,onToggle:m.func.isRequired,customColor:m.string,associatedObject:m.instanceOf(Object).isRequired};f.exports=n;}),null);
__d('FBToggleSwitch.react',['cx','AbstractCheckboxInput.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$FBToggleSwitch1=function(r){if(this.props.onToggle&&!this.props.disabled)this.props.onToggle(r.target.checked);}.bind(this),n;}l.prototype.render=function(){var m="_ypo"+(this.props.animate?' '+"_ypp":'')+(this.props.disabled?' '+"_ypq":''),n=void 0,o=void 0;if(this.props.indeterminate){o=this.props.checked;}else n=this.props.checked;return c('React').createElement(c('AbstractCheckboxInput.react'),babelHelpers['extends']({},this.props,{checked:n,className:c('joinClasses')(this.props.className,m),defaultChecked:o,onChange:this.$FBToggleSwitch1}),undefined);};l.propTypes={animate:k.bool,indeterminate:k.bool,onToggle:k.func,disabled:k.bool,tooltip:k.oneOfType([k.node,k.string])};f.exports=l;}),null);
__d('MessengerApprovalRequester.react',['cx','fbt','Link.react','MercuryThreadActions','messengerContactImageReact','MessengerTextWithEmoticons.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerContactImageReact').jsComponent,n=32;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;o.prototype.render=function(){var p=this.props,q=p.isMessengerUser,r=p.imageSRC,s=p.name,t=c('React').createElement(c('MessengerTextWithEmoticons.react'),{renderEmoticons:true,renderEmoji:true,text:s});return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq _4fq"},c('React').createElement(m,{className:"_5l39 _5rmm",isMessengerUser:q,size:n,src:r}),c('React').createElement('span',{className:"_3tkx"},t)),c('React').createElement('div',{className:"_3ihq _4fs"},c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester1.bind(this)},i._("Accept")),c('React').createElement(c('Link.react'),{className:"_5a73",href:'#',onClick:this.$MessengerApprovalRequester2.bind(this)},i._("Ignore"))));};o.prototype.$MessengerApprovalRequester1=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.acceptToJoinableGroup(q,r);};o.prototype.$MessengerApprovalRequester2=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.rejectToJoinableGroup(q,r);};function o(){j.apply(this,arguments);}f.exports=o;}),null);
__d('MessengerInfoPanelGroupSection.react',['cx','fbt','FBToggleSwitch.react','immutable','MercuryIDs','MercuryParticipants','MercuryThreadActions','MessengerAdminGroupUtils','MessengerApprovalModeTypes','MessengerApprovalRequester.react','messengerInfoPanelSectionReact','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('MercuryThreadActions').get(),m=c('messengerInfoPanelSectionReact').jsComponent;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={approvalQueue:c('immutable').Map()};}n.prototype.componentDidMount=function(){this.$MessengerInfoPanelGroupSection1(this.props.thread);};n.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:i._("Group Options")},c('React').createElement('div',{className:"_3iho"},this.$MessengerInfoPanelGroupSection2(),this.$MessengerInfoPanelGroupSection3())),this.$MessengerInfoPanelGroupSection4());};n.prototype.componentWillReceiveProps=function(o){this.$MessengerInfoPanelGroupSection1(o.thread);};n.prototype.$MessengerInfoPanelGroupSection1=function(o){var p=o&&o.approval_queue_ids;if(p)c('MercuryParticipants').getMulti(p,function(q){this.setState({approvalQueue:c('immutable').Map(q)});}.bind(this));};n.prototype.$MessengerInfoPanelGroupSection2=function(){var o=this.props.thread,p=o.joinable_mode.link;if(!c('MessengerAdminGroupUtils').showJoinableLink(o))return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("Share the link"),c('React').createElement('div',{className:"_3ihp _3oh-"},p)));};n.prototype.$MessengerInfoPanelGroupSection3=function(){var o=this.props,p=o.viewer,q=o.thread,r=c('MessengerAdminGroupUtils').isApprovalOpenThread(q);if(!c('MessengerAdminGroupUtils').showJoinableApprovalToggle(q,p))return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szq"},i._("New member approval"),c('React').createElement('div',{className:"_3ihp"},i._("Approve who can join the group"))),c('React').createElement('div',{className:"_3ihq"},c('React').createElement(c('FBToggleSwitch.react'),{animate:true,checked:!r,onToggle:function s(t){return l.setApprovalMode(t?c('MessengerApprovalModeTypes').APPROVALS:c('MessengerApprovalModeTypes').OPEN,q);}})));};n.prototype.$MessengerInfoPanelGroupSection4=function(){var o=this.props,p=o.viewer,q=o.thread,r=0;if(q&&q.approval_queue_ids&&q.approval_queue_ids.length)r=q.approval_queue_ids.length;if(!c('MessengerAdminGroupUtils').showApprovalQueue(q,p))return null;return c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:i._("Pending Requests ({pendingRequestCount})",[i.param('pendingRequestCount',r)])},c('React').createElement('div',{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(s){return c('React').createElement(c('MessengerApprovalRequester.react'),{key:s.id,imageSRC:s.image_src,isMessengerUser:s.is_messenger_user,name:s.name,threadFBID:this.props.thread.thread_fbid,userID:c('MercuryIDs').getUserIDFromParticipantID(s.id)});}.bind(this)).toArray()));};f.exports=n;}),null);
__d('messengerMakeAsOwnerDialogReact',['bs_curry','bs_js_boolean','reasonReact','bs_js_primitive','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statefulComponent("MessengerMakeAsOwnerDialogReact");function i(k,l,m,n,o){var p=function r(s){c('bs_curry')._1(l,false);if(k){return c('bs_curry')._1(k[0],s);}else return 0;},q=h.slice();q[9]=function(){var r=c('bs_js_boolean').to_js_boolean(n),s=c('MessengerAdminGroupUtils').getMakeOwnerTitleText(r,m),t=c('MessengerAdminGroupUtils').getMakeOwnerBodyText(r,m),u=c('MessengerAdminGroupUtils').getMakeOwnerButtonText(r,m);return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,l,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[s])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[t])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[u],0,["danger"],[p],[0],0,0,[]]))]))]));};return q;}var j=c('reasonReact').wrapReasonForJs(h,function(k){return i(c('bs_js_primitive').null_undefined_to_opt(k.onMakeOwner),k.onToggle,k.name,+k.isUserViewer,[]);});g.component=h;g.make=i;g.jsComponent=j;}),null);
__d('messengerRemoveAsOwnerDialogReact',['fbt','bs_curry','bs_js_boolean','reasonReact','bs_js_primitive','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerRemoveAsOwnerDialogReact");function j(l,m,n,o,p,q){var r=function t(u){c('bs_curry')._1(m,false);if(l){return c('bs_curry')._1(l[0],u);}else return 0;},s=i.slice();s[9]=function(){var t=c('MessengerAdminGroupUtils').getRemoveOwnerBodyText(c('bs_js_boolean').to_js_boolean(o),c('bs_js_boolean').to_js_boolean(p),n);return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,m,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[h._("Remove as group owner?")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[t])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[h._("Remove owner")],0,["danger"],[r],[0],0,0,[]]))]))]));};return s;}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(c('bs_js_primitive').null_undefined_to_opt(l.onRemove),l.onToggle,l.name,+l.isUserViewer,+l.isLastAdminInThread,[]);});g.component=i;g.make=j;g.jsComponent=k;}),null);
__d('messengerRemoveFromGroupDialogReact',['fbt','bs_curry','reasonReact','bs_js_primitive','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerRemoveFromGroupDialogReact");function j(l,m,n){var o=function q(r){c('bs_curry')._1(m,false);if(l){return c('bs_curry')._1(l[0],r);}else return 0;},p=i.slice();p[9]=function(){return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,m,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[h._("Remove from Group")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[h._("Are you sure you want to remove this person from the group? They will no longer be able to send or receive new messages")])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[h._("Remove")],0,["danger"],[o],[0],0,0,[]]))]))]));};return p;}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(c('bs_js_primitive').null_undefined_to_opt(l.onRemove),l.onToggle,[]);});g.component=i;g.make=j;g.jsComponent=k;}),null);
__d('MessengerInfoPanelContactActions.react',['cx','fbt','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryThreads','MessengerAdminGroupUtils','messengerContactActionsRe','messengerDialogsRe','messengerMakeAsOwnerDialogReact','MessengerMenu.react','MessengerPopoverMenu.react','messengerRemoveAsOwnerDialogReact','messengerRemoveFromGroupDialogReact','MessengerStateStore','ReactComponentWithPureRenderMixin','React','ShimButton.react','StoreAndPropBasedStateMixin','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerContactActionsRe').actions,k=c('messengerMakeAsOwnerDialogReact').jsComponent,l=c('messengerRemoveAsOwnerDialogReact').jsComponent,m=c('messengerRemoveFromGroupDialogReact').jsComponent,n=c('MessengerMenu.react').Item,o=c('MessengerMenu.react').Separator,p=c('React').PropTypes,q=c('React').createClass({displayName:'MessengerInfoPanelContactActions',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerStateStore'))],propTypes:{adminIds:p.arrayOf(p.string),extrasEnabled:p.bool.isRequired,contact:p.instanceOf(c('ImmutableObject')).isRequired,isOpen:p.bool,onAction:p.func.isRequired,onToggle:p.func.isRequired,viewer:p.string.isRequired},statics:{calculateState:function r(s){var t=c('MercuryThreads').getForFBID(s.viewer),u=c('MessengerStateStore').getState().activeThreadID,v=u?t.getOrFetch(u):null;return {thread:v};}},render:function r(){var s=this._isViewerAdmin(),t=c('MessengerAdminGroupUtils').isAdmin(this.props.adminIds,this.props.contact.uid),u=this._isUserViewer(),v=c('MessengerAdminGroupUtils').canRemoveAdmin(s,t,this.state.thread)?c('React').createElement(n,{label:i._("Remove As Admin"),onclick:this._handleRemoveAsOwnerClick}):null,w=null,x=c('MessengerAdminGroupUtils').canMakeOthersAdmins(s,t,this.state.thread),y=c('MessengerAdminGroupUtils').canMakeSelfAdmin(u,this.state.thread);if(x||y)w=c('React').createElement(n,{label:i._("Make Admin"),onclick:this._hanleMakeOwnerClick});var z=void 0;if(u){if(w||v){z=c('React').createElement(c('MessengerMenu.react'),null,w,v);}else return null;}else z=c('React').createElement(c('MessengerMenu.react'),null,c('React').createElement(n,{label:i._("Message"),onclick:this._makeActionHandler(j.MESSAGE)}),this.props.contact.href?c('React').createElement(n,{label:i._("View Profile"),onclick:this._makeActionHandler(j.PROFILE)}):null,w,v,this._renderExtras());return c('React').createElement(c('MessengerPopoverMenu.react'),{menu:z,onHide:function(){return this.props.onToggle(false);}.bind(this),onShow:function(){return this.props.onToggle(true);}.bind(this)},c('React').createElement(c('ShimButton.react'),{className:c('joinClasses')(this.props.className,"_57gs"+(this.props.isOpen?' '+"_57gt":'')),onClick:this._handleClick}));},_renderExtras:function r(){if(!this.props.extrasEnabled)return null;var s=[c('React').createElement(o,{key:'separator'})],t=this._isViewerAdmin();if(c('MessengerAdminGroupUtils').canRemoveFromGroup(t,this.state.thread))s.push(c('React').createElement(n,{key:'remove-from-group',label:i._("Remove from Group"),onclick:this._handleRemoveClick}));return s.length>=2?s:null;},_handleClick:function r(s){s.stopPropagation();s.preventDefault();},_makeActionHandler:function r(s){return function(t){this._handleClick(t);this.props.onAction(s,t);}.bind(this);},_handleRemoveClick:function r(s){this._handleClick(s);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(m,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick});}.bind(this));},_handleRemoveAsOwnerClick:function r(s){this._handleClick(s);var t=c('MercuryParticipants').getNow(this.props.contact.uid);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick,name:t&&t.name,isUserViewer:this._isUserViewer(),isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1});}.bind(this));},_handleDialogRemoveClick:function r(s){this.props.onAction(j.REMOVE,s);},_handleOwnerRemoveClick:function r(s){this.props.onAction(j.REMOVE_OWNER,s);},_hanleMakeOwnerClick:function r(s){this._handleClick(s);var t=c('MercuryParticipants').getNow(this.props.contact.uid);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:t&&t.name,isUserViewer:this._isUserViewer()});}.bind(this));},_handleOwnerAddClick:function r(s){this.props.onAction(j.ADD_OWNER,s);},_handleDialogToggle:function r(s){if(!s)c('messengerDialogsRe').removeDialog();},_isUserViewer:function r(){return c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid;},_isViewerAdmin:function r(){return c('MessengerAdminGroupUtils').isViewerAdmin(this.props.adminIds,this.props.viewer);}});f.exports=q;}),null);
__d("MessengerSortParticipants",[],(function a(b,c,d,e,f,g){var h={sortAlphabeticalWithAdmins:function i(j,k){var l=k.filter(function(n){return !!n&&j&&j.indexOf(n.id)!==-1;}).toArray().sort(function(n,o){return n.name.localeCompare(o.name);}),m=k.filter(function(n){return !!n&&(!j||j.indexOf(n.id)===-1);}).toArray().sort(function(n,o){return n.name.localeCompare(o.name);});return l.concat(m);}};f.exports=h;}),null);
__d('MessengerInfoPanelPeopleSection.react',['cssVar','cx','fbt','immutable','ImmutableObject','Link.react','MessengerAddIconSVG.react','MessengerAdminGroupUtils','MessengerContactList.react','MessengerInfoPanelContactActions.react','messengerInfoPanelSectionReact','MessengerSortParticipants','React'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('messengerInfoPanelSectionReact').jsComponent,n=c('React').PropTypes;k=babelHelpers.inherits(o,c('React').PureComponent);l=k&&k.prototype;o.prototype.render=function(){var p=this.props,q=p.adminIds,r=p.contactAdapter,s=p.isCollapsed,t=p.isViewerSubscribed,u=p.onContactAction,v=p.onContactSelect,w=p.onToggle,x=p.participants,y=p.thread,z=p.viewer;return c('React').createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:s,onToggle:w,title:j._("People")},this.$MessengerInfoPanelPeopleSection1(),c('React').createElement(c('MessengerContactList.react'),{actionsClass:c('MessengerInfoPanelContactActions.react'),className:"_4wc-",contactAdapter:r,disableRole:true,extraActionsEnabled:t,listSections:c('immutable').OrderedMap([[null,c('MessengerSortParticipants').sortAlphabeticalWithAdmins(q,x)]]),onSelect:v,onAction:u,viewer:z,adminIds:q,thread:y}));};o.prototype.$MessengerInfoPanelPeopleSection1=function(){if(!this.props.canViewerReply)return null;var p=c('MessengerAdminGroupUtils').shouldInvite(this.props.thread)?j._("Invite"):j._("Add People"),q=this.props.thread.custom_color||"#0084ff";return c('React').createElement(c('Link.react'),{className:"_4rph",onClick:this.props.onAddPeopleClick},c('React').createElement(c('MessengerAddIconSVG.react'),{className:"_4rpi",customColor:q}),c('React').createElement('div',{className:"_4rpj"},p));};function o(){k.apply(this,arguments);}o.propTypes={adminIds:n.arrayOf(n.string),canViewerReply:n.bool.isRequired,contactAdapter:n.func.isRequired,isCollapsed:n.bool.isRequired,isViewerSubscribed:n.bool.isRequired,onAddPeopleClick:n.func.isRequired,onContactAction:n.func.isRequired,onContactSelect:n.func.isRequired,onToggle:n.func.isRequired,participants:n.instanceOf(c('immutable').Map).isRequired,thread:n.instanceOf(c('ImmutableObject')).isRequired,viewer:n.string.isRequired};f.exports=o;}),null);
__d('MessengerSharedFile.react',['cx','Link.react','React','joinClasses'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.$MessengerSharedFile1=function(m){if(m==='application/pdf'||m==='text/pdf'||m==='application/x-pdf'||m==='application/vnd.pdf'){return "_y36";}else if(m==='application/msword'||m==='application/vnd.ms-word'){return "_y33";}else if(m==='application/vnd.ms-excel'){return "_y34";}else if(m==='application/vnd.ms-powerpoint'){return "_y35";}else if(m==='text/plain'){return "_y32";}else if(m.startsWith('image/')){return "_y2-";}else if(m.startsWith('video/')){return "_y2_";}else if(m.startsWith('audio/'))return "_2a41";return "_y36";};l.prototype.render=function(){var m=this.props,n=m.filename,o=m.url,p=m.mimetype,q=this.$MessengerSharedFile1(p);return c('React').createElement('li',{className:"_2a42"},c('React').createElement(c('Link.react'),{className:c('joinClasses')("_2a43",q),target:'_blank',href:o},c('React').createElement('div',{className:"_2a44"},c('React').createElement('i',{className:'img'}),c('React').createElement('span',{className:"_2a45"},n))));};function l(){i.apply(this,arguments);}l.propTypes={filename:k.string.isRequired,url:k.string.isRequired,mimetype:k.string.isRequired};f.exports=l;}),null);
__d('MessengerSharedFiles.react',['cx','MessengerSharedFile.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.sharedFiles,n=m.edges;return c('React').createElement('ul',{className:"_2o39"},n.map(function(o){var p=o.node;return c('React').createElement(c('MessengerSharedFile.react'),{key:p.legacy_attachment_id,filename:p.filename,url:p.url,mimetype:p.mimetype});}));};function l(){i.apply(this,arguments);}l.propTypes={sharedFiles:k.object.isRequired,threadFBID:k.string.isRequired};f.exports=c('Relay').createContainer(l,{fragments:{sharedFiles:function m(){return function(){return {children:[{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'SiteEnum'},name:'site',value:{kind:'CallValue',callValue:'www'}}],fieldName:'url',kind:'Field',metadata:{},type:'Url'},{fieldName:'filename',kind:'Field',metadata:{},type:'String'},{fieldName:'mimetype',kind:'Field',metadata:{},type:'String'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageFile',type:'MessageFile'},{children:[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'IdFragment',type:'Node'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'MessageSharedMedia'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessageSharedMediaEdge'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedFiles_react_SharedFilesRelayQL',type:'MessageSharedMediaConnection'};}();}}});}),null);
__d('MessengerSharedFilesContainer.react',['fbt','messengerInfoPanelSectionReact','MessengerSharedFiles.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerInfoPanelSectionReact').jsComponent,j=c('React').PropTypes,k=10,l=c('React').createClass({displayName:'MessengerSharedFilesContainer',propTypes:{sharedFiles:j.object,threadFBID:j.string,isCollapsed:j.bool,onToggle:j.func},render:function m(){var n=this.props,o=n.sharedFiles,p=n.threadFBID,q=n.isCollapsed,r=n.onToggle;if(!p||!o)return null;var s=o.message_shared_media;if(!s||s.count===0)return null;return c('React').createElement(i,{isCollapsible:true,isCollapsed:q,onToggle:r,title:h._("Shared Files")},c('React').createElement(c('MessengerSharedFiles.react'),{sharedFiles:s,threadFBID:p}));}});f.exports=c('Relay').createContainer(l,{initialVariables:{count:k},fragments:{sharedFiles:function m(){return function(n){return {children:[{calls:[{kind:'Call',metadata:{type:'MessageMediaType'},name:'message_shared_media_type',value:{kind:'CallValue',callValue:'FILE'}},{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[{fieldName:'count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(n)]),fieldName:'message_shared_media',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessageSharedMediaConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedFilesContainer_react_SharedFilesRelayQL',type:'MessageThread'};}(c('MessengerSharedFiles.react').getFragment('sharedFiles'));}}});}),null);
__d('MessengerSharedFilesContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerSharedFilesContainerRoute';j.paramDefinitions={threadFBID:{type:'String',required:true}};j.queries={sharedFiles:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(m)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MessengerSharedFilesContainerRoute',type:'MessageThread'};}(l.getFragment('sharedFiles'));}};f.exports=j;}),null);
__d('MessengerSharedPhotos.react',['cx','MessengerSharedPhoto.react','MessengerSpinner.react','MessengerSharedPhotosAlbumViewContainer.react','React','Relay','RelayQL','SpotlightViewer','SpotlightMessengerSharedMediaViewerContainer.react','Vector','cancelAnimationFrame','requestAnimationFrame'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes,l=10,m=80;i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={albumView:null,imagesLoaded:l,shownID:null},this.$MessengerSharedPhotos1=null,this.$MessengerSharedPhotos3=function(t){var u=c('Vector').getViewportDimensions().x,v=this.props.sharedPhotoAndVideos.edges.length,w=this.props.sharedPhotoAndVideos.edges.find(function(aa){return aa.node.id===t;});if(!w)return;var x=this.props.sharedPhotoAndVideos.edges.indexOf(w),y=(v-x)*m;if(y>u/2)return;var z=Math.ceil((u/2-y)/m);this.props.fetchMore(z);}.bind(this),this.$MessengerSharedPhotos4=function(t){var u=this.props.sharedPhotoAndVideos,v=u.edges.find(function(w){var x=w.node;return x.id===t;});return v.node;}.bind(this),this.$MessengerSharedPhotos5=function(t){this.setState({shownID:t});}.bind(this),this.$MessengerSharedPhotos6=function(t){this.setState({shownID:t},function(){this.$MessengerSharedPhotos3(this.state.shownID);this.$MessengerSharedPhotos7();}.bind(this));}.bind(this),this.$MessengerSharedPhotos8=function(t){this.setState({shownID:t});}.bind(this),this.$MessengerSharedPhotos7=function(){this.setState({albumView:null});}.bind(this),this.$MessengerSharedPhotos9=function(t){this.setState({albumView:t,shownID:null});}.bind(this),this.$MessengerSharedPhotos10=function(t){this.setState({albumView:null,shownID:t});}.bind(this),this.$MessengerSharedPhotos11=function(){this.setState({shownID:null});}.bind(this),p;}n.prototype.componentDidMount=function(){this.$MessengerSharedPhotos2();};n.prototype.componentWillReceiveProps=function(o){if(o.threadFBID!==this.props.threadFBID)this.setState({imagesLoaded:l});};n.prototype.componentDidUpdate=function(){this.$MessengerSharedPhotos2();};n.prototype.componentWillUnmount=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1);};n.prototype.shouldComponentUpdate=function(o,p){var q=o.sharedPhotoAndVideos,r=q.edges,s=q.pageInfo&&q.pageInfo.has_next_page,t=r.find(function(u){var v=u.node;return v.id===p.shownID;});if(!t&&s&&r.length<p.imagesLoaded){setTimeout(function(){return this.props.fetchMore(p.imagesLoaded);}.bind(this),1000);return false;}return true;};n.prototype.$MessengerSharedPhotos2=function(){c('cancelAnimationFrame')(this.$MessengerSharedPhotos1);var o=this.props.sharedPhotoAndVideos;if(this.state.imagesLoaded<o.edges.length){this.$MessengerSharedPhotos1=c('requestAnimationFrame')(function(){this.setState({imagesLoaded:Math.min(o.edges.length,this.state.imagesLoaded+l)});}.bind(this));}else if(!this.props.allPhotosDisplayed)this.props.onAllPhotosDisplayed();};n.prototype.$MessengerSharedPhotos12=function(){return c('React').createElement(c('SpotlightMessengerSharedMediaViewerContainer.react'),{onClosePhotoView:this.$MessengerSharedPhotos11,openAlbum:this.$MessengerSharedPhotos9,photoID:this.state.shownID,rootClassName:'',threadID:this.props.threadFBID,disableForward:false});};n.prototype.$MessengerSharedPhotos13=function(){return c('React').createElement(c('SpotlightViewer'),{className:"_3ode",onHide:this.$MessengerSharedPhotos7,open:true,ref:'spotlightViewer'},c('React').createElement(c('MessengerSharedPhotosAlbumViewContainer.react'),{onClick:this.$MessengerSharedPhotos10,onCloseSharedPhotos:this.$MessengerSharedPhotos7,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}));};n.prototype.$MessengerSharedPhotos14=function(){return c('React').createElement('div',{className:"_2n20"},c('React').createElement(c('MessengerSpinner.react'),null));};n.prototype.render=function(){var o=this.props,p=o.isLoadingImages,q=o.sharedPhotoAndVideos,r=q,s=r.edges,t=this.state.imagesLoaded,u="_3m31",v=this.$MessengerSharedPhotos5,w=p?this.$MessengerSharedPhotos14():null,x=this.state.shownID?this.$MessengerSharedPhotos12():null,y=this.state.albumView?this.$MessengerSharedPhotos13():null;return c('React').createElement('div',null,x,y,c('React').createElement('div',{className:"_40jj _5l-3"},s.slice(0,t).filter(function(z){var aa=z.node;return !!aa.image;}).map(function(z){var aa=z.node;return c('React').createElement(c('MessengerSharedPhoto.react'),{className:u,fbid:aa.legacy_attachment_id,key:aa.legacy_attachment_id,onClick:v,photoID:aa.id,uri:aa.image.uri});})),w);};n.propTypes={allPhotosDisplayed:k.bool.isRequired,isLoadingImages:k.bool.isRequired,fetchMore:k.func.isRequired,onAllPhotosDisplayed:k.func.isRequired,sharedPhotoAndVideos:k.object.isRequired,threadFBID:k.string.isRequired};f.exports=c('Relay').createContainer(n,{fragments:{sharedPhotoAndVideos:function o(){return function(){return {children:[{children:[{children:[{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'},{children:[{fieldName:'id',kind:'Field',metadata:{isRequisite:true},type:'ID'},{fieldName:'__typename',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'String'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{isAbstract:true},name:'Node',type:'Node'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageImage',type:'MessageImage'},{children:[{fieldName:'legacy_attachment_id',kind:'Field',metadata:{},type:'ID'},{calls:[{kind:'Call',metadata:{type:'Int'},name:'width',value:{kind:'CallValue',callValue:250}},{kind:'Call',metadata:{type:'Int'},name:'height',value:{kind:'CallValue',callValue:250}}],children:[{fieldName:'uri',kind:'Field',metadata:{},type:'Url'}],fieldName:'image',kind:'Field',metadata:{canHaveSubselections:true},type:'Image'},{children:[{fieldName:'x',kind:'Field',metadata:{},type:'Float'},{fieldName:'y',kind:'Field',metadata:{},type:'Float'}],fieldName:'original_dimensions',kind:'Field',metadata:{canHaveSubselections:true},type:'Vect2'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessageVideo',type:'MessageVideo'}],fieldName:'node',kind:'Field',metadata:{canHaveSubselections:true,inferredRootCallName:'node',inferredPrimaryKey:'id',isAbstract:true,isRequisite:true},type:'MessageSharedPhotoAndVideo'},{fieldName:'cursor',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],fieldName:'edges',kind:'Field',metadata:{canHaveSubselections:true,isPlural:true},type:'MessageSharedPhotoAndVideoEdge'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true,isRequisite:true},type:'PageInfo'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotos_react_SharedPhotoAndVideosRelayQL',type:'MessageSharedPhotoAndVideoConnection'};}();}}});}),null);
__d('MessengerSharedPhotosContainer.react',['fbt','messengerInfoPanelSectionReact','MessengerSharedPhotos.react','React','Relay','RelayQL'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('messengerInfoPanelSectionReact').jsComponent,j=c('React').PropTypes,k=10,l=c('React').createClass({displayName:'MessengerSharedPhotosContainer',propTypes:{customColor:j.string,clearForceFetch:j.func.isRequired,getIsScrolledToBottom:j.func.isRequired,getScrollableHeight:j.func.isRequired,isCollapsed:j.bool.isRequired,onToggle:j.func.isRequired,sharedPhotos:j.object,threadFBID:j.string},getInitialState:function m(){return {allPhotosDisplayed:false,isLoadingImages:false};},componentWillReceiveProps:function m(n){if(n.threadFBID!==this.props.threadFBID)this.setState({allPhotosDisplayed:false});},componentDidMount:function m(){this._maybeLoadMore();},componentDidUpdate:function m(){this._maybeLoadMore();},_maybeLoadMore:function m(){var n=this.props,o=n.getIsScrolledToBottom,p=n.getScrollableHeight,q=n.isCollapsed,r=n.sharedPhotos,s=this.state.isLoadingImages;if(s||q||!r||!this.state.allPhotosDisplayed||!o()||!p())return;var t=r.message_shared_photo_and_video.page_info.has_next_page;if(!t)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+k},function(u){if(u.done||u.aborted)if(this.isMounted()){this.props.clearForceFetch();this.setState({allPhotosDisplayed:false,isLoadingImages:false});}}.bind(this));}.bind(this));},_loadMore:function m(n){if(n<=0)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+n},function(o){if(o.done||o.aborted)this.setState({isLoadingImages:false});}.bind(this));}.bind(this));},_handleAllPhotosDisplayed:function m(){this.setState({allPhotosDisplayed:true});},render:function m(){var n=this.props,o=n.isCollapsed,p=n.onToggle,q=n.sharedPhotos,r=n.threadFBID,s=this.state.isLoadingImages;if(!r||!q)return null;var t=q.message_shared_photo_and_video;if(!t.page_info.has_next_page&&t.count===0)return null;return c('React').createElement(i,{customColor:this.props.customColor,isCollapsible:true,isCollapsed:o,onToggle:p,title:h._("Shared Photos")},c('React').createElement(c('MessengerSharedPhotos.react'),{allPhotosDisplayed:this.state.allPhotosDisplayed,fetchMore:this._loadMore,isLoadingImages:s,sharedPhotoAndVideos:t,onAllPhotosDisplayed:this._handleAllPhotosDisplayed,threadFBID:r}));}});f.exports=c('Relay').createContainer(l,{initialVariables:{count:k},fragments:{sharedPhotos:function m(){return function(n){return {children:[{calls:[{kind:'Call',metadata:{type:'Int'},name:'first',value:{kind:'CallVariable',callVariableName:'count'}}],children:[].concat.apply([],[{children:[{fieldName:'has_next_page',kind:'Field',metadata:{isRequisite:true},type:'Boolean'},{fieldName:'has_previous_page',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'Boolean'}],fieldName:'page_info',kind:'Field',metadata:{canHaveSubselections:true},type:'PageInfo'},{fieldName:'count',kind:'Field',metadata:{},type:'Int'},c('RelayQL').__frag(n)]),fieldName:'message_shared_photo_and_video',kind:'Field',metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:'MessageSharedPhotoAndVideoConnection'},{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'}],id:c('RelayQL').__id(),kind:'Fragment',metadata:{},name:'MessengerSharedPhotosContainer_react_SharedPhotosRelayQL',type:'MessageThread'};}(c('MessengerSharedPhotos.react').getFragment('sharedPhotoAndVideos'));}}});}),null);
__d('MessengerSharedPhotosContainerRoute',['RelayRoute','RelayQL'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('RelayRoute'));i=h&&h.prototype;function j(){h.apply(this,arguments);}j.routeName='MessengerSharedPhotosContainerRoute';j.paramDefinitions={threadFBID:{type:'String',required:true}};j.queries={sharedPhotos:function k(l){return function(m){return {calls:[{kind:'Call',metadata:{type:'ID!'},name:'id',value:{kind:'CallVariable',callVariableName:'threadFBID'}}],children:[].concat.apply([],[{fieldName:'id',kind:'Field',metadata:{isGenerated:true,isRequisite:true},type:'ID'},c('RelayQL').__frag(m)]),fieldName:'message_thread',kind:'Query',metadata:{identifyingArgName:'id',identifyingArgType:'ID!'},name:'MessengerSharedPhotosContainerRoute',type:'MessageThread'};}(l.getFragment('sharedPhotos'));}};f.exports=j;}),null);
__d('messengerGraphQLTokenizerReact',['utilsRe','bs_js_boolean','reasonReact','bs_js_null_undefined','MessengerGraphQLTokenizer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){return c('reasonReact').wrapJsForReason(c('MessengerGraphQLTokenizer.react'),{autoFocus:c('bs_js_boolean').to_js_boolean(i),className:c('bs_js_null_undefined').from_opt(j),context:c('bs_js_null_undefined').from_opt(k),defaultEntries:c('bs_js_null_undefined').from_opt(l),enableMessageSearch:c('bs_js_boolean').to_js_boolean(m),entries:n,excludeGroups:c('bs_js_boolean').to_js_boolean(o),excludePages:c('bs_js_boolean').to_js_boolean(p),forceHideClearButton:c('utilsRe').optionBoolToNullUndefinedBoolean(q),hasHoverState:c('bs_js_boolean').to_js_boolean(r),onAddEntryAttempt:s,onClear:c('bs_js_null_undefined').from_opt(t),onRemoveEntryAttempt:u,originalEntryIDs:v,placeholder:w,roomAssociatedObject:c('bs_js_null_undefined').from_opt(x),scrollableViewClassName:c('bs_js_null_undefined').from_opt(y),shouldQueryInternalBot:c('bs_js_boolean').to_js_boolean(z),shouldQueryVCEndpoint:c('bs_js_boolean').to_js_boolean(aa),tabIndex:c('bs_js_null_undefined').from_opt(ba),threadFBID:c('bs_js_null_undefined').from_opt(ca),useLayer:c('bs_js_boolean').to_js_boolean(da),viewer:ea,width:fa},ga);}g.make=h;}),null);
__d('messengerAddToConversationDialogReact',['cx','fbt','bs_array','bs_block','bs_curry','React','utilsRe','immutable','bs_js_boolean','MercuryIDs','bs_pervasives','reasonReact','bs_js_primitive','messengerDialogsRe','MercuryMessageObject','messengerDialogReact','MercuryLogMessageType','MercuryMessageActions','MercuryTriodeSourceUtil','MessengerAdminGroupUtils','messengerGraphQLTokenizerReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statefulComponent("MessengerAddToConversationDialogReact");function k(r,s){return c('bs_block').__(0,[[s[3][0].push(r)]]);}function l(r,s){var t=r.getUniqueID();return c('bs_block').__(0,[[s[3][0].filter(function(u){return c('bs_js_boolean').to_js_boolean(+(u.getUniqueID()!==t));})]]);}function m(r,s){return c('bs_block').__(0,[[c('immutable').List([])]]);}function n(r){if(r){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function o(r,s,t){var u=function w(x,y){var z=y[3],aa=z[0].count(),ba=+c('MessengerAdminGroupUtils').isJoinableThread(r),ca=+c('MessengerAdminGroupUtils').shouldInvite(r),da=0;if(aa!==0)if(ba!==0){if(ca!==0){z[0].forEach(function(ea,fa,ga){var ha=c('MercuryIDs').getThreadIDFromUserID(ea.getUniqueID());c('MercuryMessageActions').getForFBID(s).send(c('MercuryMessageObject').getForFBID(s).constructUserGeneratedMessageObject(r.joinable_mode.link,c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),ha,[]),undefined,undefined);return true;});}else da=1;}else if(ca!==0){throw c('bs_pervasives').invalid_arg("Only joinable threads can invite");}else da=1;if(da===1)c('MercuryMessageActions').getForFBID(s).send(c('MercuryMessageObject').getForFBID(s).constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),r.thread_id,c('MercuryLogMessageType').SUBSCRIBE,{added_participants:z[0].map(function(ea,fa,ga){return c('MercuryIDs').getParticipantIDFromUserID(ea.getUniqueID());}).toArray()}),undefined,undefined);x.preventDefault();return c('messengerDialogsRe').removeDialog(0);},v=j.slice();v[9]=function(w){var x=+c('MessengerAdminGroupUtils').shouldInvite(r),y=c('immutable').Set(c('utilsRe').arrayCompact(c('bs_array').map(function(z){return c('bs_js_primitive').null_undefined_to_opt(c('MercuryIDs').getUserIDFromParticipantID(z));},r.participants)));return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,n,0,[1],0,["default"],[460],[c('React').createElement("div",{className:"_4jgp"},c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').Title[0],0,[x!==0?i._("Invite More People"):i._("Add More People")])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[i._("Done")],0,0,[c('bs_curry')._1(w[1],u)],[0],0,0,[]]))])),c('reasonReact').element(0,0,c('messengerGraphQLTokenizerReact').make(1,["_4jgt"],0,0,0,w[3][0],1,1,[1],0,c('bs_curry')._1(w[2],k),[c('bs_curry')._1(w[2],m)],c('bs_curry')._1(w[2],l),y,x!==0?i._("Invite to group:"):i._("Add to group:"),c('bs_js_primitive').null_undefined_to_opt(r.associated_object),["_4jgu"],0,0,0,c('bs_js_primitive').null_undefined_to_opt(r.thread_fbid),0,s,460,[])))]));};v[10]=function(){return [c('immutable').List([])];};return v;}var p=c('reasonReact').wrapReasonForJs(j,function(r){return o(r.thread,r.viewer,[]);}),q=460;g.dialogWidth=q;g.component=j;g.handleAddEntryAttempt=k;g.handleRemoveEntryAttempt=l;g.handleClear=m;g.handleToggle=n;g.make=o;g.jsComponent=p;}),null);
__d("messengerInfoPanelContactNameSectionReact",["cx","React","reasonReact","bs_js_primitive","messengerLocalTimeReact","messengerPresenceStatusReact"],(function a(b,c,d,e,f,g,h){'use strict';var i=c("reasonReact").statelessComponent("MessengerInfoPanelContactNameSectionReact");function j(k,l,m,n,o,p){var q=i.slice();q[9]=function(){return c("React").createElement("div",{className:"_2jnq"},o,c("React").createElement("div",{className:"_2jnt"},c("React").createElement("div",{className:"_3eur"},c("React").createElement("span",{className:"_3oh-"},k.name)),c("React").createElement("div",{className:"_3eus"},c("reasonReact").element(0,0,c("messengerPresenceStatusReact").make(0,l,m,n,[]))),c("React").createElement("div",undefined,c("reasonReact").element(0,0,c("messengerLocalTimeReact").make("_5uh",c("bs_js_primitive").null_undefined_to_opt(k.timezone),[])))));};return q;}g.component=i;g.make=j;}),null);
__d('keysRe',[],(function a(b,c,d,e,f,g){'use strict';var h=8,i=9,j=13,k=18,l=27,m=32,n=33,o=34,p=35,q=36,r=37,s=38,t=39,u=40,v=46,w=188,x=190,y=65,z=90,aa=48,ba=96,ca=105;g.backspace=h;g.tab=i;g.$$return=j;g.alt=k;g.esc=l;g.space=m;g.page_up=n;g.page_down=o;g.end_=p;g.home=q;g.left=r;g.up=s;g.right=t;g.down=u;g.$$delete=v;g.comma=w;g.period=x;g.a=y;g.z=z;g.zero=aa;g.numpad_0=ba;g.numpad_9=ca;}),null);
__d('messengerTextWithEmojiInputReact',['reasonReact','bs_js_null_undefined','MessengerTextWithEmojiInput.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o){return c('reasonReact').wrapJsForReason(c('MessengerTextWithEmojiInput.react'),{className:c('bs_js_null_undefined').from_opt(i),onReturn:c('bs_js_null_undefined').from_opt(j),maxLength:c('bs_js_null_undefined').from_opt(k),onChange:c('bs_js_null_undefined').from_opt(l),placeholder:c('bs_js_null_undefined').from_opt(m),initialValue:c('bs_js_null_undefined').from_opt(n)},o);}g.make=h;}),null);
__d('MessengerThreadPhotoUploader.react',['cx','fbt','FileInput','FileInputUploader','Link.react','MercuryConfig','React','ReactDOM','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadPhotoUploader',_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:false,propTypes:{onComplete:j.func.isRequired,onFail:j.func,onStart:j.func,uri:j.string},getDefaultProps:function l(){return {uri:c('MercuryConfig').upload_url};},componentDidMount:function l(){var m=c('ReactDOM').findDOMNode(this.refs.input),n=new (c('FileInput'))(c('ReactDOM').findDOMNode(this.refs.form),c('ReactDOM').findDOMNode(this.refs.uploadButton),m),o=new (c('FileInputUploader'))(m).setURI(this.props.uri).setAllowCrossOrigin(true).setAllowCrossPageTransition(true).setData({images_only:true}),p=new (c('SubscriptionsHandler'))();p.addSubscriptions(o.subscribe('success',this._handleAllUploadsCompleted),o.subscribe('failure',this._handleLastUploadFailed));this._subscriptions=p;this._uploader=o;this._fileInput=n;},componentWillUnmount:function l(){if(!this._uploadIsInProgress)this._doUnmountComponents();},render:function l(){var m=i._("Click to change the image");return c('React').createElement('form',{action:this.props.uri,method:'post',ref:'form'},c('React').createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),c('React').createElement('input',{type:'hidden',name:'images_only',value:'true'}),c('React').createElement('div',{className:"_m _4q60 _2lyy"},c('React').createElement(c('Link.react'),{className:"_4q61 _2lyz",ref:'uploadButton'},i._("edit")),c('React').createElement('input',{type:'file',className:"_n",name:'attachment[]',accept:'.jpg,.png,.jpeg,.bmp,.tif,.tiff',ref:'input',onChange:this._handleFileInputChange,title:m})));},_handleAllUploadsCompleted:function l(m,n){this._uploadIsInProgress=false;this.props.onComplete&&this.props.onComplete(n.response.payload);if(!this.isMounted())this._doUnmountComponents();},_handleLastUploadFailed:function l(m,n){this._uploadIsInProgress=false;this.props.onFail&&this.props.onFail(n);if(!this.isMounted())this._doUnmountComponents();},_handleFileInputChange:function l(m){if(m.target.value&&this._uploader){this._uploader.send();this._uploadIsInProgress=true;this.props.onStart&&this.props.onStart();}},_doUnmountComponents:function l(){this._subscriptions&&this._subscriptions.release();this._fileInput&&this._fileInput.destroy();delete this._subscriptions;delete this._uploader;}});f.exports=k;}),null);
__d('messengerThreadPhotoUploaderReact',['reasonReact','bs_js_null_undefined','MessengerThreadPhotoUploader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){return c('reasonReact').wrapJsForReason(c('MessengerThreadPhotoUploader.react'),{onComplete:i,onFail:c('bs_js_null_undefined').from_opt(j),onStart:c('bs_js_null_undefined').from_opt(k),uri:c('bs_js_null_undefined').from_opt(l)},m);}g.make=h;}),null);
__d('messengerInfoPanelThreadNameSectionReact',['cx','fbt','bs_block','bs_curry','React','keysRe','bs_string','bs_js_boolean','reasonReact','setImmediate','messengerButtonReact','messengerSpinnerReact','MercuryGenericConstants','mercuryThreadTitleReact','messengerTextWithEmojiInputReact','messengerThreadPhotoUploaderReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(s,t){var u=t[3][1];if(u){return u[0].focusInput();}else return 0;}function k(){return c('React').createElement("div",{className:"_2jnw"},c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[])));}function l(s,t){var u=t[3];return c('bs_block').__(0,[[0,u[1],u[2]]]);}function m(s,t){var u=t[3];return c('bs_block').__(0,[[1,u[1],u[2]]]);}function n(s,t){var u=t[3][2];if(u){return u[0].focus();}else return 0;}function o(s,t){t[3][1]=s===null?0:[s];return 0;}function p(s,t){t[3][2]=s===null?0:[s];return 0;}var q=c('reasonReact').statefulComponentWithRetainedProps("MessengerInfoPanelThreadNameSectionReact");function r(s,t,u,v,w,x,y,z,aa){var ba=function ha(ia,ja){var ka=ja[3];c('bs_curry')._1(u,[w.thread_id,ia]);return c('bs_block').__(0,[[0,ka[1],ka[2]]]);},ca=function ha(ia,ja){ia.stopPropagation();var ka=ja[3][1];if(ka)c('bs_curry')._1(t,c('bs_string').trim(ka[0].getValue()));return c('bs_curry')._1(c('setImmediate'),c('bs_curry')._1(ja[1],n));},da=function ha(ia,ja){if(ia.currentTarget.contains(ia.relatedTarget)){ia.stopPropagation();return 0;}else if(y>=2){return c('bs_curry')._1(x,0);}else return c('bs_curry')._1(x,1);},ea=function ha(ia){return c('React').createElement("div",{className:"_2jnx",onBlur:c('bs_curry')._1(ia[1],da)},c('React').createElement("div",{className:"_2jny"},c('reasonReact').element(0,[c('bs_curry')._1(ia[1],o)],c('messengerTextWithEmojiInputReact').make(["_2jnz"],[c('bs_curry')._1(ia[1],ca)],[c('MercuryGenericConstants').MAX_THREAD_NAME_LENGTH],0,[i._("Name This Conversation")],[w.name],[]))),c('React').createElement("div",{className:"_2jn-"},c('reasonReact').element(0,0,c('messengerButtonReact').make(0,["button"],0,0,[c('bs_curry')._1(ia[1],ca)],0,0,0,0,i._("Done"),0,0,0,0,[]))));},fa=function ha(ia,ja){ia.stopPropagation();if(s!==0&&y===1){return c('bs_curry')._1(x,0);}else return 0;},ga=function ha(ia,ja){var ka=ia.charCode;if(y!==1||!(ka===c('keysRe').$$return||ka===c('keysRe').space)){return 0;}else{ia.preventDefault();ia.stopPropagation();if(s){return c('bs_curry')._1(x,0);}else return 0;}};return [q[0],q[1],q[2],function(ha){var ia=ha[3],ja=+(ha[4][1]!==w);return [ja!==0?0:ia[0],ia[1],ia[2]];},q[4],function(ha){var ia=ha[0],ja=ia[4][0];if(ja!==1||y===1){return 0;}else{setTimeout(c('bs_curry')._1(ia[1],j),1);return 0;}},q[6],q[7],q[8],function(ha){var ia=ha[3],ja=y!==1?1:0,ka=ia[0];return c('React').createElement("div",{className:"_2jnq"},c('React').createElement("div",{className:"_2jnr"+(c('bs_js_boolean').to_js_boolean(ia[0])?' '+"_2jns":'')},v,ka!==0?k(0):null,s!==0?c('reasonReact').element(0,0,c('messengerThreadPhotoUploaderReact').make(c('bs_curry')._1(ha[2],ba),[c('bs_curry')._1(ha[2],l)],[c('bs_curry')._1(ha[2],m)],0,[])):null),c('React').createElement("div",{ref:c('bs_curry')._1(ha[1],p),className:"_2jnt"+(c('bs_js_boolean').to_js_boolean(1-ja)?' '+"_1sw_":'')+(c('bs_js_boolean').to_js_boolean(1-s)?' '+"disabled":''),role:ja!==0?"":"button",tabIndex:0,onKeyPress:c('bs_curry')._1(ha[1],ga),onClick:c('bs_curry')._1(ha[1],fa)},c('React').createElement("div",{className:"_2jnu"},ja!==0?ea(ha):c('reasonReact').element(0,0,c('mercuryThreadTitleReact').make(["_2jnv"],w,z,0,[0],[0],0,[])))));},function(){return [0,0,0];},q[11],[y,w]];}g.focusThreadNameInput=j;g.renderSpinner=k;g.handleThreadPhotoUploadFail=l;g.handleThreadPhotoUploadStart=m;g.focusEditThreadNameButton=n;g.setRefThreadNameInput=o;g.setRefEditThreadNameButton=p;g.component=q;g.make=r;}),null);
__d('MoveToWorkUtils',['CurrentUser'],(function a(b,c,d,e,f,g){'use strict';function h(){return c('CurrentUser').isEmployee()&&c('CurrentUser').hasWorkUser();}f.exports={isViewerEligible:h};}),null);
__d("XNFXStartForMessageThreadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/nfx\/start_message_thread\/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}});}),null);
__d("XMNReportPageConversationActionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/messenger_platform\/report_page_conversation\/submit\/",{page_id:{type:"FBID",required:true},report_type:{type:"String",required:true}});}),null);
__d('MNCommerceReportConversationDialog.react',['cx','fbt','AsyncRequest','Link.react','MercuryIDs','MercuryParticipants','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','messengerDialogsRe','MessengerPlatformAbuseReportType','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','MNCommercePromotionManageBlockDialogContainer.react','React','XMNReportPageConversationActionController','XUIRadioList.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('XUIRadioList.react').Item,m=c('React').PropTypes;j=babelHelpers.inherits(n,c('React').PureComponent);k=j&&j.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={error:false,pageName:'',reportType:c('MessengerPlatformAbuseReportType').SPAM},this.$MNCommerceReportConversationDialog9=function(){this.$MNCommerceReportConversationDialog1();var t=function v(w,x){return c('MNCommercePromotionBlockDataManager').block(w,x);},u=this.props.pageID;c('MNCommerceDialogStateActions').showDialog(c('MNCommercePromotionManageBlockDialogContainer.react'),{pageID:u,onConfirmButtonClick:t});}.bind(this),this.$MNCommerceReportConversationDialog7=function(t){this.setState({reportType:t});}.bind(this),this.$MNCommerceReportConversationDialog1=function(){if(this.props.onToggle){this.props.onToggle();}else c('messengerDialogsRe').removeDialog();}.bind(this),this.$MNCommerceReportConversationDialog6=function(){var t=c('XMNReportPageConversationActionController').getURIBuilder().setFBID('page_id',this.props.pageID).setString('report_type',this.state.reportType).getURI();new (c('AsyncRequest'))().setURI(t).setHandler(function(){this.$MNCommerceReportConversationDialog1();}.bind(this)).setErrorHandler(function(){this.setState({error:true});}.bind(this)).send();}.bind(this),p;}n.prototype.componentWillMount=function(){var o=c('MercuryParticipants').getNow(c('MercuryIDs').getParticipantIDFromUserID(this.props.pageID));this.setState({pageName:o?o.short_name:''});};n.prototype.render=function(){if(this.props.showDialog===false)return null;return c('React').createElement(c('MessengerDialog.react'),{onToggle:this.$MNCommerceReportConversationDialog1},c('React').createElement(c('MessengerDialogHeader.react'),null,i._("Report")),this.$MNCommerceReportConversationDialog2(),this.$MNCommerceReportConversationDialog3());};n.prototype.$MNCommerceReportConversationDialog2=function(){var o=c('React').createElement('div',{className:"_5zjy"},i._("Help us understand what's happening:")),p=this.$MNCommerceReportConversationDialog4(),q=c('React').createElement('div',{className:"_5zjz"},i._("Reporting this conversation will also turn off all messages from {page name}.",[i.param('page name',this.state.pageName)])),r=this.$MNCommerceReportConversationDialog5();return this.state.error?c('React').createElement(c('MessengerDialogBody.react'),{className:"_5zj-"},i._("Sorry, Something went wrong.")):c('React').createElement(c('MessengerDialogBody.react'),{className:"_5zj_"},o,p,q,r);};n.prototype.$MNCommerceReportConversationDialog3=function(){var o=i._("Report"),p=i._("Cancel"),q=i._("OK");if(this.state.error)return c('React').createElement(c('MessengerDialogFooter.react'),{className:"_5zk0"},c('React').createElement(c('MessengerDialogButton.react'),{label:q,onClick:this.$MNCommerceReportConversationDialog1,type:'primary',use:'default'}));return c('React').createElement(c('MessengerDialogFooter.react'),{className:"_5zk0"},c('React').createElement(c('MessengerDialogButton.react'),{label:p,type:'secondary',onClick:this.$MNCommerceReportConversationDialog1,use:'default'}),c('React').createElement(c('MessengerDialogButton.react'),{label:o,onClick:this.$MNCommerceReportConversationDialog6,type:'primary',use:'default'}));};n.prototype.$MNCommerceReportConversationDialog4=function(){return c('React').createElement(c('XUIRadioList.react'),{selectedValue:this.state.reportType,onValueChange:this.$MNCommerceReportConversationDialog7},c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').SPAM},i._("It's spam")),c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').INAPPROPRIATE},i._("It's inappropriate")),c('React').createElement(l,{value:c('MessengerPlatformAbuseReportType').OTHER_ABUSE},i._("Other")));};n.prototype.$MNCommerceReportConversationDialog5=function(){return c('React').createElement('div',{className:"_5zk1"},i._("To stop receiving messages without reporting {page name}, you can manage your messages instead.",[i.param('page name',this.state.pageName)]),this.$MNCommerceReportConversationDialog8());};n.prototype.$MNCommerceReportConversationDialog8=function(){return c('React').createElement(c('Link.react'),{className:"_5zk2",onClick:this.$MNCommerceReportConversationDialog9},i._("Manage"));};n.propTypes={pageID:m.string.isRequired,showDialog:m.bool,onToggle:m.func};f.exports=n;}),null);
__d('mNCommerceReportConversationDialogReact',['reasonReact','MNCommerceReportConversationDialog.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MNCommerceReportConversationDialog.react'),{pageID:i},j);}g.make=h;}),null);
__d('messengerBlockDialogReact',['cx','fbt','bs_curry','React','utilsRe','linkReact','reasonReact','bs_js_primitive','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statelessComponent("MessengerBlockDialogReact");function k(n,o){return c('React').createElement("div",{className:"_1q73"},i._("If you want, you can also {link}",[i.param("link",c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,[o],0,0,0,0,0,0,["_blank"],0,[i._("block {short_name_or_description} on Facebook.",[i.param("short_name_or_description",c('utilsRe').$pipe$unknown(n,i._("this person")))])])))]));}function l(n,o,p,q){var r=j.slice();r[9]=function(){var s=function x(){c('bs_curry')._1(n,0);return c('bs_curry')._1(o,false);},t;if(p){var u=p[0];t=[[u.name],c('bs_js_primitive').null_undefined_to_opt(u.href)];}else t=[0,0];var v=t[1],w=t[0];return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,o,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[i._("Block Messages")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('React').createElement("div",{className:"_1q73"},i._("Stop getting messages and calls from {short_name_or_description} in Messenger.",[i.param("short_name_or_description",c('utilsRe').$pipe$unknown(w,i._("this person")))])),v?k(w,v[0]):null,c('React').createElement("div",undefined,c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,["https://www.facebook.com/help/389645087895231"],0,0,0,0,0,0,["_blank"],0,[i._("Learn more")])))])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[i._("Block Messages")],0,["danger"],[s],[0],0,0,[]]))]))]));};return r;}var m=c('utilsRe').$pipe$unknown;g.$pipe$unknown=m;g.component=j;g.renderBlockOnFacebook=k;g.make=l;}),null);
__d('messengerMarkSpamDialogReact',['fbt','bs_curry','reasonReact','messengerDialogReact','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerMarkSpamDialogReact");function j(k,l,m){var n=function p(){c('bs_curry')._1(k,0);return c('bs_curry')._1(l,false);},o=i.slice();o[9]=function(){return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,l,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[h._("Mark as Spam")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[h._("This conversation will be reported as spam and removed.")])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[h._("Mark as Spam")],0,["danger"],[n],[0],0,0,[]]))]))]));};return o;}g.component=i;g.make=j;}),null);
__d('messengerMoveToWorkplaceDialogReact',['fbt','bs_curry','reasonReact','MercuryViewer','MercuryThreads','MercurySourceType','messengerDialogsRe','MercuryMessageObject','messengerDialogReact','MercuryLogMessageType','MercuryMessageActions','messengerDialogBodyReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerMoveToWorkplaceDialogReact");function j(l){if(l){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function k(l,m){var n=function p(){var q=c('MercuryThreads').get();if(!q.isEmptyLocalThread(l)){var r=c('MercuryMessageObject').get(),s=c('MercuryMessageActions').get(),t=r.constructLogMessageObject(c('MercurySourceType').MESSENGER_WEB,l,c('MercuryLogMessageType').SWITCH_TO_WORK,{removed_participants:[c('MercuryViewer').getID()]});s.send(t,undefined,undefined);}return j(false);},o=i.slice();o[9]=function(){return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,j,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[h._("Move Conversation to Workplace?")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[h._("Do you want to move this conversation to Workplace?")])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[h._("Move Conversation")],0,0,[n],[1],0,0,[]]))]))]));};return o;}g.component=i;g.handleToggle=j;g.make=k;}),null);
__d('messengerThreadlistRowActionsReact',['cx','fbt','bs_block','bs_curry','React','keysRe','utilsRe','bs_js_boolean','MercuryIDs','AsyncDialog','reasonReact','joinClasses','AsyncRequest','bs_js_primitive','MoveToWorkUtils','MercuryThreadIDMap','messengerDialogsRe','messengerMenuReact','MercuryParticipants','messengerMuteDialogReact','messengerBlockDialogReact','messengerPopoverMenuReact','messengerDeleteDialogReact','messengerMarkSpamDialogReact','messengerMoveToWorkplaceDialogReact','XNFXStartForMessageThreadController','mNCommerceReportConversationDialogReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(p){if(p){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function k(p){p.preventDefault();p.stopPropagation();return 0;}function l(p){if(p.length){return +p.every(function(q){var r=c('MercuryParticipants').getNow(q);if(c('bs_js_primitive').is_nil_undef(r)){return 0;}else return +r.employee;});}else return 0;}var m=c('reasonReact').statefulComponent("MessengerThreadlistRowActionsReact");function n(p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa){var ra=p?p[0]:"",sa=function gb(){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerDeleteDialogReact').make(x,y,j,[]));});},ta=function gb(){if(t){return c('bs_curry')._1(ga,0);}else return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerMuteDialogReact').make(da,j,[]));});},ua=function gb(){if(v){return c('bs_curry')._1(aa,0);}else return c('bs_curry')._1(ca,0);},va=function gb(){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerMarkSpamDialogReact').make(ba,j,[]));});},wa=function gb(){if(w){return c('bs_curry')._1(ia,0);}else return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerBlockDialogReact').make(ha,j,q,[]));});},xa=function gb(){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerMoveToWorkplaceDialogReact').make(pa.thread_id,[]));});},ya=function gb(){var hb=c('MercuryThreadIDMap').get();hb.getServerIDFromClientID(pa.thread_id,function(ib){c('AsyncDialog').send(new (c('AsyncRequest'))(c('XNFXStartForMessageThreadController').getURIBuilder().setString("thread_fbid",ib).getURI()));return 0;});return 0;},za=function gb(){var hb=pa.other_user_fbid;if(c('bs_js_primitive').is_nil_undef(hb)){return 0;}else return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('mNCommerceReportConversationDialogReact').make(hb,[]));});},ab=function gb(){return [wa,sa,ua,va,ta,za,ya,xa,0];},bb=function gb(hb,ib){c('bs_curry')._1(fa,true);var jb=ab(0).slice();return c('bs_block').__(0,[(jb[8]=1,jb)]);},cb=function gb(hb,ib){if(hb.keyCode===c('keysRe').$$return){c('bs_curry')._1(fa,true);var jb=ab(0).slice();return c('bs_block').__(0,[(jb[8]=1,jb)]);}else return 0;},db=function gb(hb,ib){c('bs_curry')._1(fa,false);var jb=ib[3].slice();return c('bs_block').__(0,[(jb[8]=0,jb)]);},eb=function gb(hb,ib){var jb=ib[3],kb=jb[8];if(kb!==0){if(hb!==null){hb.showPopover();var lb=jb.slice();return c('bs_block').__(1,[(lb[8]=0,lb)]);}else return 0;}else return 0;},fb=m.slice();fb[9]=function(gb){var hb=gb[3],ib=gb[2];if(u){var jb=s!==0?r!==0?i._("Leave Chat"):i._("Leave Room"):i._("Leave Group"),kb=w!==0?i._("Unblock Messages"):i._("Block Messages"),lb=i._("Move to Workplace"),mb=c('utilsRe').isSomeTrue(ma),nb=ka||c('utilsRe').isSomeTrue(ma),ob=c('utilsRe').isSomeTrue(na),pb=c('utilsRe').isSomeTrue(na),qb=+c('MoveToWorkUtils').isViewerEligible()&&+c('MercuryIDs').isGroupChat(pa.thread_id)&&l(pa.participants),rb=c('reasonReact').element(0,0,c('bs_curry')._1(c('messengerMenuReact').Menu[0],[ka!==0?c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,t!==0?i._("Unmute"):i._("Mute"),[hb[4]],0,[])):null,mb!==0?c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,i._("Rename"),ea,0,[])):null,nb!==0?c('reasonReact').element(0,0,c('bs_curry')._1(c('messengerMenuReact').MenuSeparator[0],[])):null,ja!==0?c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,jb,z,0,[])):null,c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,i._("Archive"),[x],0,[])),c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,i._("Delete"),[hb[1]],0,[])),c('reasonReact').element(0,0,c('bs_curry')._1(c('messengerMenuReact').MenuSeparator[0],[])),c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,v!==0?i._("Mark as Read"):i._("Mark as Unread"),[hb[2]],0,[])),ob!==0?null:c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,i._("Mark as Spam"),[hb[3]],0,[])),pb!==0?c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,i._("Report..."),[hb[5]],0,[])):c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,i._("Report Spam or Abuse..."),[hb[6]],0,[])),la!==0?c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,kb,[hb[0]],0,[])):null,qb!==0?c('reasonReact').element(0,0,c('bs_curry')._5(c('messengerMenuReact').MenuItem[0],0,lb,[hb[7]],0,[])):null]));return c('React').createElement("div",{className:"_3d85"},c('reasonReact').element(0,[c('bs_curry')._1(ib,eb)],c('messengerPopoverMenuReact').make([1],[u],rb,[c('bs_curry')._1(ib,db)],[c('bs_curry')._1(ib,bb)],[c('React').createElement("div",{"aria-label":i._("Conversation actions"),className:c('joinClasses')(ra,"_4-0h"+(c('bs_js_boolean').to_js_boolean(u)?' '+"_4-0i":'')),onClick:k,role:"button",ref:"button",tabIndex:0})])));}else return c('React').createElement("div",{className:"_3d85"},c('React').createElement("div",{"aria-label":i._("Conversation actions"),className:c('joinClasses')(ra,"_4-0h"+(c('bs_js_boolean').to_js_boolean(u)?' '+"_4-0i":'')),onClick:c('bs_curry')._1(ib,bb),onKeyUp:c('bs_curry')._1(ib,cb),role:"button",ref:"button",tabIndex:oa}));};fb[10]=ab;return fb;}var o=c('reasonReact').wrapReasonForJs(m,function(p){return n(c('bs_js_primitive').null_undefined_to_opt(p.className),c('bs_js_primitive').null_undefined_to_opt(p.contact),+p.isGroupChat,+p.isJoinableThread,+p.isMuted,+p.isOpen,+p.isUnread,+p.isBlocked,p.onArchive,p.onDelete,c('bs_js_primitive').null_undefined_to_opt(p.onLeaveGroup),p.onMarkRead,p.onMarkSpam,p.onMarkUnread,p.onMute,c('bs_js_primitive').null_undefined_to_opt(p.onRename),p.onToggle,p.onUnmute,p.onBlock,p.onUnblock,+p.showLeaveGroup,+p.showMute,+p.showBlock,c('utilsRe').nullUndefinedBooleanToOptionBool(p.showRename),c('utilsRe').nullUndefinedBooleanToOptionBool(p.showReport),p.tabIndex,p.thread,[]);});g.handleReasonDialogToggle=j;g.handleClick=k;g.isEmployeesOnly=l;g.component=m;g.make=n;g.jsComponent=o;}),null);
__d('messengerInfoPanelNameSectionReact',['cx','bs_block','bs_curry','React','reasonReact','bs_js_primitive','MercuryThreadInfo','MessengerAdminGroupUtils','messengerThreadImageReact','messengerThreadlistRowActionsReact','messengerInfoPanelThreadNameSectionReact','messengerInfoPanelContactNameSectionReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponentWithRetainedProps("MessengerInfoPanelNameSectionReact");function j(r,s){var t=s[3];return c('bs_block').__(1,[[t[0],t[1],r===null?0:[r]]]);}function k(r,s,t){return c('React').createElement("div",{className:"_1jt8"},c('reasonReact').element(0,0,c('messengerThreadImageReact').make(0,0,[50],r,s,t,[])));}function l(r,s){var t=s[3];return c('bs_block').__(0,[[t[0],r,t[2]]]);}function m(r,s){var t=s[3];return c('bs_block').__(0,[[+r,t[1],t[2]]]);}function n(r,s){var t=s[3],u=t[2];if(u){return c('bs_block').__(0,[[t[0],0,t[2]]]);}else return 0;}function o(r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){var pa=function ta(ua,va){var wa=va[3];if(ua!==ma.name)c('bs_curry')._1(ca,ua);return c('bs_block').__(0,[[wa[0],1,wa[2]]]);},qa=function ta(ua,va){var wa=+ma.is_subscribed&&1- +ma.is_canonical&&+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(ma,na);return c('React').createElement("div",{className:"_3-ne"},c('reasonReact').element(0,0,c('messengerThreadlistRowActionsReact').make(["_5blh"],r,+c('MessengerAdminGroupUtils').isGroupChat(ma),+c('MessengerAdminGroupUtils').isJoinableThread(ma),+c('MercuryThreadInfo').isMuted(ma),ua[0],+(ma.unread_count>0),t,ba,v,w,x,y,z,aa,[c('bs_curry')._1(va[2],n)],c('bs_curry')._1(va[2],m),ea,fa,ga,ka,0,ha,[wa],[la],0,ma,[])));},ra=function ta(ua){return c('bs_curry')._2(da,ua[0],ua[1]);},sa=i.slice();sa[3]=function(ta){var ua=ta[3],va=+(ta[4]===ma);return [ua[0],va!==0?ua[1]:1,ua[2]];};sa[9]=function(ta){var ua=ta[3],va=+(ma.is_subscribed||ma.is_canonical),wa;if(r){wa=c('reasonReact').element(0,0,c('messengerInfoPanelContactNameSectionReact').make(r[0],s,u,ja,k(ia,ma,na),[]));}else{var xa=+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(ma,na);wa=c('reasonReact').element(0,[c('bs_curry')._1(ta[2],j)],c('messengerInfoPanelThreadNameSectionReact').make(xa,c('bs_curry')._1(ta[2],pa),ra,k(ia,ma,na),ma,c('bs_curry')._1(ta[2],l),ua[1],na,[]));}return c('React').createElement("div",{className:"_1jt6"},wa,va!==0?qa(ua,ta):null);};sa[10]=function(){return [0,1,0];};sa[12]=ma;return sa;}var p=c('reasonReact').wrapReasonForJs(i,function(r){return o(c('bs_js_primitive').null_undefined_to_opt(r.contact),+r.isUserActive,+r.isBlocked,c('bs_js_primitive').null_undefined_to_opt(r.lastActive),r.onDelete,c('bs_js_primitive').null_undefined_to_opt(r.onLeaveGroup),r.onMarkRead,r.onMarkSpam,r.onMarkUnread,r.onMute,r.onArchive,r.onThreadNameChange,r.onThreadPhotoChange,r.onUnmute,r.onBlock,r.onUnblock,+r.showBlock,r.participants,c('bs_js_primitive').null_undefined_to_opt(r.platform),+r.showLeaveGroup,+r.showReport,r.thread,r.viewer,[]);}),q=50;g.component=i;g.imageSize=q;g.setThreadSectionRef=j;g.renderImage=k;g.handleToggleIsEditingName=l;g.handleActionsToggle=m;g.handleRename=n;g.make=o;g.jsComponent=p;}),null);
__d('gridReact',['utilsRe','Grid.react','reasonReact','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(l,m,n,o,p,q,r){return c('reasonReact').wrapJsForReason(c('Grid.react'),{className:c('bs_js_null_undefined').from_opt(l),cols:m,fixed:c('utilsRe').optionBoolToNullUndefinedBoolean(n),alignv:c('bs_js_null_undefined').from_opt(o),alignh:c('bs_js_null_undefined').from_opt(p),spacing:c('bs_js_null_undefined').from_opt(q)},r);}var i=[h];function j(l,m,n,o){return c('reasonReact').wrapJsForReason(c('Grid.react').GridItem,{className:c('bs_js_null_undefined').from_opt(l),alignv:c('bs_js_null_undefined').from_opt(m),alignh:c('bs_js_null_undefined').from_opt(n)},o);}var k=[j];g.Grid=i;g.Item=k;}),null);
__d('MessengerCustomThreadColorButton.react',['cx','Keys','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerCustomThreadColorButton1=function(event){event.preventDefault();this.props.onChoose(this.props.colorChoice);}.bind(this),this.$MessengerCustomThreadColorButton2=function(event){if(event.keyCode===c('Keys').RETURN){event.preventDefault();this.props.onChoose(this.props.colorChoice);}}.bind(this),n;}l.prototype.render=function(){return c('React').createElement('div',{'aria-label':this.props.colorName,'aria-pressed':this.props.isSelected,className:"_5dr3",onClick:this.$MessengerCustomThreadColorButton1,onKeyDown:this.$MessengerCustomThreadColorButton2,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_5dr4",style:{backgroundColor:this.props.colorChoice}}));};l.propTypes={colorChoice:k.string.isRequired,colorName:k.string.isRequired,isSelected:k.bool.isRequired,onChoose:k.func.isRequired};f.exports=l;}),null);
__d('messengerCustomThreadColorButtonReact',['bs_js_boolean','reasonReact','MessengerCustomThreadColorButton.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m){return c('reasonReact').wrapJsForReason(c('MessengerCustomThreadColorButton.react'),{colorChoice:i,colorName:j,isSelected:c('bs_js_boolean').to_js_boolean(k),onChoose:l},m);}g.make=h;}),null);
__d('messengerChangeColorDialogReact',['ix','cx','fbt','cssVar','bs_array','bs_curry','React','bs_string','gridReact','imageReact','fbglyph','reasonReact','messengerDialogsRe','messengerDialogReact','messengerDialogBodyReact','MessagingThreadCustomizationConfig','messengerCustomThreadColorButtonReact'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l=c('reasonReact').statelessComponent("MessengerChangeColorDialogReact"),m="Unknown Color";function n(o,p,q,r){var s=function v(w){if(w){return 0;}else{if(q)c('bs_curry')._1(q[0],0);return c('messengerDialogsRe').removeDialog(0);}},t=function v(w){var x=+(w===o);if(!x)if(p)c('bs_curry')._1(p[0],w);return s(false);},u=l.slice();u[9]=function(){var v=c('bs_curry')._1(c('bs_array').concat,[["#0084ff"],[c('MessagingThreadCustomizationConfig').colorChoices,0]]),w=c('bs_array').map(function(x){var y=c('MessagingThreadCustomizationConfig').colorNames[x],z=y!==undefined?y:m,aa=+(c('bs_string').lowercase(x)===c('bs_string').lowercase(o));return c('reasonReact').element([x],0,c('bs_curry')._4(c('gridReact').Item[0],["_gs0"],0,0,[c('React').createElement("div",undefined,aa!==0?c('reasonReact').element(0,0,c('imageReact').make(["_gs2"],0,[h("140201")],0,0,0,0,[])):null,c('reasonReact').element(0,0,c('messengerCustomThreadColorButtonReact').make(x,z,+(x===o),t,[])))]));},v);return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],["_gs3"],s,0,0,0,0,[335],[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[j._("Pick a color for this conversation")])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('React').createElement("div",{className:"_28he"},j._("Everyone in this conversation will see this.")),c('reasonReact').element(0,0,c('bs_curry')._7(c('gridReact').Grid[0],["_gs4"],5,0,0,0,0,[w]))])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[]))]))]));};return u;}g.component=l;g.unknownColor=m;g.make=n;}),null);
__d("messengerChangeColorIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"-1 -1 47 47"},c("React").createElement("title",undefined,"colors@2x"),c("React").createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:j,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})));}g.make=h;}),null);
__d('messengerInfoPanelCustomColorReact',['cx','fbt','bs_block','bs_curry','React','keysRe','reasonReact','messengerDialogsRe','messengerCustomColorUtilsRe','messengerChangeColorDialogReact','messengerChangeColorIconSVGReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statefulComponent("MessengerInfoPanelCustomColorReact");function k(n,o){var p=o[3][0];if(p){return p[0].focus();}else return 0;}function l(n,o){return c('bs_block').__(1,[[n===null?0:[n]]]);}function m(n,o,p){var q=function u(v){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerChangeColorDialogReact').make(c('messengerCustomColorUtilsRe').customColorOrBlue(n),[o],[c('bs_curry')._1(v,k)],[]));});},r=function u(v,w){v.preventDefault();return q(w[1]);},s=function u(v,w){if(v.keyCode===c('keysRe').$$return){v.preventDefault();return q(w[1]);}else return 0;},t=j.slice();t[9]=function(u){if(n.customization_enabled){var v=c('messengerCustomColorUtilsRe').customColorOrBlue(n);return c('React').createElement("div",{ref:c('bs_curry')._1(u[2],l),className:"_3szn _3szo",tabIndex:0,onKeyDown:c('bs_curry')._1(u[1],s),onClick:c('bs_curry')._1(u[1],r)},c('React').createElement("div",{className:"_3szp"},c('messengerChangeColorIconSVGReact').make("_17vc",v)),c('React').createElement("div",{className:"_3szq"},i._("Change Color")));}else return null;};t[10]=function(){return [0];};return t;}g.component=j;g.handleDialogClose=k;g.setTheRef=l;g.make=m;}),null);
__d('MessengerInfoPanelEmoji.react',['cx','fbt','Bootloader','EmojiLikeConstants','Image.react','ImmutableObject','Keys','MercuryShareAttachmentRenderLocations','MessengerHotLikeOutlineSVG.react','MessengerSupportedEmojiUtils','React','messengerDialogsRe'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelEmoji2=function(event){event.preventDefault();this.$MessengerInfoPanelEmoji5();}.bind(this),this.$MessengerInfoPanelEmoji3=function(event){if(event.keyCode===c('Keys').RETURN){event.preventDefault();this.$MessengerInfoPanelEmoji5();}}.bind(this),this.$MessengerInfoPanelEmoji6=function(){if(this.$MessengerInfoPanelEmoji1)this.$MessengerInfoPanelEmoji1.focus();}.bind(this),this.$MessengerInfoPanelEmoji4=function(s){this.$MessengerInfoPanelEmoji1=s;}.bind(this),o;}m.prototype.render=function(){if(!this.props.thread.customization_enabled)return null;var n=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?c('MessengerSupportedEmojiUtils').getNewEmojiData(this.props.thread.custom_like_icon.emoji,c('EmojiLikeConstants').size.SMALL):null,o=n&&n.url?c('React').createElement(c('Image.react'),{src:n.url,className:"_12cp"}):c('React').createElement(c('MessengerHotLikeOutlineSVG.react'),{className:"_12cq",color:this.props.thread.custom_color?this.props.thread.custom_color:'',height:'60%',location:c('MercuryShareAttachmentRenderLocations').MESSENGER});return c('React').createElement('div',{className:"_3szn _3szo",onClick:this.$MessengerInfoPanelEmoji2,onKeyDown:this.$MessengerInfoPanelEmoji3,ref:this.$MessengerInfoPanelEmoji4,role:'button',tabIndex:'0'},c('React').createElement('div',{className:"_3szp"},o),c('React').createElement('div',{className:"_3szq"},i._("Change Emoji")));};m.prototype.$MessengerInfoPanelEmoji5=function(){c('Bootloader').loadModules(["messengerChangeEmojiDialogReact"],function(n){var o=n.jsComponent;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(o,{currentEmoji:this.props.thread.custom_like_icon?this.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,c('EmojiLikeConstants').FB_THUMBS_UP_EMOJI),onClose:this.$MessengerInfoPanelEmoji6,onSave:this.props.onChange});}.bind(this));}.bind(this),'MessengerInfoPanelEmoji.react');};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired,onChange:l.func.isRequired};f.exports=m;}),null);
__d('messengerInfoPanelEmojiReact',['reasonReact','MessengerInfoPanelEmoji.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l){return c('reasonReact').wrapJsForReason(c('MessengerInfoPanelEmoji.react'),{thread:i,viewer:j,onChange:k},l);}g.make=h;}),null);
__d('MessengerInfoPanelManageMessages.react',['cx','fbt','Bootloader','ImmutableObject','MercuryIDs','MercuryParticipants','MNCommerceDialogStateActions','MNCommercePromotionBlockDataManager','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageMessages3=function(s,t){return c('MNCommercePromotionBlockDataManager').block(s,t);},this.$MessengerInfoPanelManageMessages2=function(event){event.preventDefault();c('Bootloader').loadModules(["MNCommercePromotionManageBlockDialogContainer.react"],function(s){c('MNCommerceDialogStateActions').showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageMessages3});}.bind(this),'MessengerInfoPanelManageMessages.react');}.bind(this),o;}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageMessages1())return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szp"}),c('React').createElement(c('ShimButton.react'),{className:"_3szq",inline:true,onClick:this.$MessengerInfoPanelManageMessages2},i._("Manage Messages")));};m.prototype.$MessengerInfoPanelManageMessages1=function(){var n=c('MercuryIDs').getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c('MercuryParticipants').getNow(n);return !!(o&&o.is_business_enabled);};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('messengerInfoPanelManageMessagesReact',['reasonReact','MessengerInfoPanelManageMessages.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerInfoPanelManageMessages.react'),{thread:i,viewer:j},k);}g.make=h;}),null);
__d('MessengerInfoPanelManageReview.react',['cx','fbt','Bootloader','ImmutableObject','MercuryConfig','MercuryIDs','MercuryParticipants','MNCommerceDialogStateActions','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageReview2=function(event){event.preventDefault();c('Bootloader').loadModules(["MNCommerceReviewDialogContainer.react"],function(s){c('MNCommerceDialogStateActions').showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageReview3});}.bind(this),'MessengerInfoPanelManageReview.react');}.bind(this),o;}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageReview1()||!c('MercuryConfig').MessengerPlatformBotReviewUsers)return null;return c('React').createElement('div',{className:"_3szn _3szo"},c('React').createElement('div',{className:"_3szp"}),c('React').createElement(c('ShimButton.react'),{className:"_3szq",inline:true,onClick:this.$MessengerInfoPanelManageReview2},i._("Leave Feedback")));};m.prototype.$MessengerInfoPanelManageReview1=function(){var n=c('MercuryIDs').getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c('MercuryParticipants').getNow(n);return !!(o&&o.accepts_messenger_user_feedback);};m.prototype.$MessengerInfoPanelManageReview3=function(n,o,p){if(o===0)return;c('Bootloader').loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(q){q.review(n,o,p.trim());},'MessengerInfoPanelManageReview.react');};m.propTypes={thread:l.instanceOf(c('ImmutableObject')).isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('messengerInfoPanelManageReviewReact',['reasonReact','MessengerInfoPanelManageReview.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerInfoPanelManageReview.react'),{thread:i,viewer:j},k);}g.make=h;}),null);
__d('messengerContactListReact',['utilsRe','reasonReact','bs_js_null_undefined','MessengerContactList.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p){return c('reasonReact').wrapJsForReason(c('MessengerContactList.react'),{contactAdapter:c('bs_js_null_undefined').from_opt(i),disableRole:c('utilsRe').optionBoolToNullUndefinedBoolean(j),listSections:k,onSelect:l,rowClassName:c('bs_js_null_undefined').from_opt(m),viewer:n,thread:c('bs_js_null_undefined').from_opt(o)},p);}g.make=h;}),null);
__d('messengerEditNicknameDialogReact',['cx','fbt','bs_block','bs_curry','React','MercuryIDs','reasonReact','bs_js_primitive','messengerDialogReact','messengerDialogBodyReact','messengerTextWithEmojiInputReact','MessagingThreadCustomizationConfig'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statefulComponent("MessengerEditNicknameDialogReact");function k(m,n){return c('bs_block').__(1,[[m===null?0:[m]]]);}function l(m,n,o,p,q,r){var s=function u(v,w){var x=w[3][0],y=x?[x[0].getValue()]:0;if(y)if(y[0]===""){if(n)if(y!==n){var z=c('MercuryIDs').getUserIDFromParticipantID(m.id);if(!c('bs_js_primitive').is_nil_undef(z))c('bs_curry')._1(o,[z,y[0]]);}}else if(y!==n){var aa=c('MercuryIDs').getUserIDFromParticipantID(m.id);if(!c('bs_js_primitive').is_nil_undef(aa))c('bs_curry')._1(o,[aa,y[0]]);}return c('bs_curry')._1(p,false);},t=j.slice();t[9]=function(u){var v=m.name,w=c('MercuryIDs').getUserIDFromParticipantID(m.id),x,y=0;if(!c('bs_js_primitive').is_nil_undef(w)&&w===q){x=i._("Edit Your Nickname");}else y=1;if(y===1)x=i._("Edit Nickname for {personName}",[i.param("personName",v)]);return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],["_2c1u"],p,0,0,0,0,[400],[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[x])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[c('React').createElement("div",{className:"_-bo"},i._("Everyone in this conversation will see this.")),c('reasonReact').element(0,[c('bs_curry')._1(u[2],k)],c('messengerTextWithEmojiInputReact').make(["_2c1v"],[c('bs_curry')._1(u[1],s)],[c('MessagingThreadCustomizationConfig').maxNicknameLength],0,[v],n,[]))])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[i._("Save")],0,0,[c('bs_curry')._1(u[1],s)],[0],0,0,[]]))]))]));};t[10]=function(){return [0];};return t;}g.component=j;g.setInput=k;g.make=l;}),null);
__d('messengerScrollableAreaReact',['reasonReact','bs_js_null_undefined','MessengerScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerScrollableArea.react'),{height:c('bs_js_null_undefined').from_opt(i)},j);}g.make=h;}),null);
__d('messengerEditNicknamesDialogReact',['cx','fbt','bs_curry','immutable','MercuryIDs','reasonReact','bs_js_primitive','ImmutableObject','messengerDialogsRe','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact','messengerContactListReact','messengerScrollableAreaReact','messengerEditNicknameDialogReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(m,n){var o=c('MercuryIDs').getUserIDFromParticipantID(n.id),p;if(c('bs_js_primitive').is_nil_undef(o)){p=[n.name,""];}else if(m!==null){var q=m[o];p=q!==undefined?[q,n.name]:[n.name,""];}else p=[n.name,""];return new (c('ImmutableObject'))({alias:n.alias,uid:n.id,photo:n.image_src,title:p[0],subtitle:p[1],type:n.type,isMessengerUser:n.is_messenger_user,href:n.href,isWorkUser:undefined,timezone:undefined,participants:undefined,thread:undefined});}var k=c('reasonReact').statelessComponent("MessengerEditNicknamesDialogReact");function l(m,n,o,p,q,r){var s=function v(w){if(w){return 0;}else{c('bs_curry')._1(p,0);return c('messengerDialogsRe').removeAllDialogs(0);}},t=function v(w,x){var y=c('MercuryIDs').getUserIDFromParticipantID(w.id),z=n.custom_nickname,aa=!c('bs_js_primitive').is_nil_undef(y)&&z!==null?c('bs_js_primitive').undefined_to_opt(z[y]):0;return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerEditNicknameDialogReact').make(w,aa,o,s,q,[]));});},u=k.slice();u[9]=function(){var v=m.filter(function(x,y,z){if(c('bs_js_primitive').is_nil_undef(x)){return false;}else{var aa=+c('MessengerAdminGroupUtils').isJoinableThread(n),ba=c('MercuryIDs').getUserIDFromParticipantID(x.id);if(aa!==0){if(c('bs_js_primitive').is_nil_undef(ba)){return false;}else if(ba===q){return true;}else return false;}else return true;}}).toArray(),w=n.custom_nickname;return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],["_4h9n"],s,0,0,0,["default"],[350],[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').Title[0],0,[i._("Edit Nicknames")]))])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(["_4h9o"],[c('reasonReact').element(0,0,c('messengerScrollableAreaReact').make(["100%"],[c('reasonReact').element(0,0,c('messengerContactListReact').make([function(x){return j(w,x);}],[1],c('immutable').OrderedMap([[null,v]]),t,["_44kr"],q,[n],[]))]))]))]));};return u;}g.fromMercuryParticipant=j;g.component=k;g.make=l;}),null);
__d("messengerEditNicknamesIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"0 0 38 37.01"},c("React").createElement("title",undefined,"nicknames"),c("React").createElement("path",{d:"M899,1204h38v2H899v-2Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c("React").createElement("path",{d:"M927.57,1172.17l-22.32,22.36-0.72,5,5-.72,22.32-22.36ZM908.8,1196.6l-1.41-1.41L929,1173.61l1.41,1.41Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c("React").createElement("path",{d:"M932.93,1175.36l2.07-2.13a6,6,0,0,0-1.33-3,5.72,5.72,0,0,0-2.91-1.28l-2.07,2.13Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"})));}g.make=h;}),null);
__d('messengerInfoPanelNicknamesReact',['cx','fbt','bs_block','bs_curry','React','keysRe','reasonReact','messengerDialogsRe','messengerCustomColorUtilsRe','messengerEditNicknamesDialogReact','messengerEditNicknamesIconSVGReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(n,o){var p=o[3][0];if(p){return p[0].focus();}else return 0;}function k(n,o){return c('bs_block').__(1,[[n===null?0:[n]]]);}var l=c('reasonReact').statefulComponent("MessengerInfoPanelNicknamesReact");function m(n,o,p,q,r){var s=function w(x){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerEditNicknamesDialogReact').make(n,o,q,c('bs_curry')._1(x[1],j),p,[]));});},t=function w(x,y){x.preventDefault();return s(y);},u=function w(x,y){if(x.keyCode===c('keysRe').$$return){x.preventDefault();return s(y);}else return 0;},v=l.slice();v[9]=function(w){if(o.customization_enabled){var x=c('messengerCustomColorUtilsRe').customColorOrBlue(o);return c('React').createElement("div",{ref:c('bs_curry')._1(w[2],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:c('bs_curry')._1(w[1],u),onClick:c('bs_curry')._1(w[1],t)},c('React').createElement("div",{className:"_3szp"},c('messengerEditNicknamesIconSVGReact').make("_5odt",x)),c('React').createElement("div",{className:"_3szq"},i._("Edit Nicknames")));}else return null;};v[10]=function(){return [0];};return v;}g.handleDialogClose=j;g.setHandleRef=k;g.component=l;g.make=m;}),null);
__d("messengerThreadSearchIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"8 8 48 48"},c("React").createElement("title",undefined,"search conversation"),c("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:j,strokeMiterlimit:"10",strokeWidth:"2"}),c("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:j,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})));}g.make=h;}),null);
__d("messengerInfoPanelSearchReact",["cx","fbt","React","keysRe","reasonReact","bs_js_primitive","MessengerActions","MessengerStateStore","messengerCustomColorUtilsRe","messengerThreadSearchIconSVGReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerInfoPanelSearchReact");function k(){var o=c("MessengerStateStore").getState().query,p=c("bs_js_primitive").is_nil_undef(o);c("MessengerActions").changeQuery(p!==0?"":undefined);return 0;}function l(o){o.preventDefault();return k(0);}function m(o){if(o.keyCode===c("keysRe").$$return){o.preventDefault();return k(0);}else return 0;}function n(o,p){var q=j.slice();q[9]=function(){var r=c("messengerCustomColorUtilsRe").customColorOrBlue(o);return c("React").createElement("div",{className:"_3szn _3szo",tabIndex:0,onKeyDown:m,onClick:l},c("React").createElement("div",{className:"_3szp"},c("messengerThreadSearchIconSVGReact").make("_5odt",r)),c("React").createElement("div",{className:"_3szq"},i._("Search in Conversation")));};return q;}g.component=j;g.showQuery=k;g.handleSearchThreadClick=l;g.handleSearchThreadKeyDown=m;g.make=n;}),null);
__d('leftRightReact',['reasonReact','LeftRight.react','bs_js_null_undefined'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('LeftRight.react'),{className:c('bs_js_null_undefined').from_opt(i)},j);}g.make=h;}),null);
__d('MessengerCompositeMuteSettingsDialogBootloader.react',['BootloadOnRender.react','JSResource','LazyComponent.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),this.props),loader:c('JSResource')('messengerCompositeMuteSettingsDialogReactComponent').__setRef('MessengerCompositeMuteSettingsDialogBootloader.react'),placeholder:c('React').createElement('div',null)});};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('messengerCompositeMuteSettingsDialogBootloaderReact',['reasonReact','MessengerCompositeMuteSettingsDialogBootloader.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q){return c('reasonReact').wrapJsForReason(c('MessengerCompositeMuteSettingsDialogBootloader.react'),{isMuted:i,mentionsMuted:j,reactionsMuted:k,showMentions:l,onMentionsMute:m,onReactionsMute:n,onMute:o,onToggle:p},q);}g.make=h;}),null);
__d("messengerNotificationsIconSVGReact",["React"],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{height:"24",width:"24",viewBox:"0 0 18 18"},c("React").createElement("defs",undefined,c("React").createElement("circle",{id:"path-1",cx:"1",cy:"1",r:"1"})),c("React").createElement("g",{fill:"none",fillRule:"evenodd"},c("React").createElement("rect",{id:"Bounds",height:"18",width:"18",x:"0",y:"0"}),c("React").createElement("path",{d:"M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15\nC7.5,15.828 8.172,16.5 9,16.5",fill:j}),c("React").createElement("path",{d:"M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58\nC9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2\n8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948\n5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243\nC3.31580745,12.6841926 3.31640625,13.3164062\n3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757\nC14.6841926,13.3158074 14.6835937,12.6835938\n14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z",stroke:j}))));}g.make=h;}),null);
__d('messengerNotificationsButtonReact',['cx','fbt','bs_curry','React','keysRe','formatDate','reasonReact','leftRightReact','messengerDialogsRe','messengerCustomColorUtilsRe','messengerNotificationsIconSVGReact','messengerCompositeMuteSettingsDialogBootloaderReact'],(function a(b,c,d,e,f,g,h,i){'use strict';function j(n,o){if(n){return 0;}else{c('messengerDialogsRe').removeDialog(0);var p=o[3][0];if(p){return p[0].focus();}else return 0;}}function k(n,o){o[3][0]=n===null?0:[n];return 0;}var l=c('reasonReact').statefulComponent("MessengerNotificationsButtonReact");function m(n,o,p,q,r,s,t,u,v){var w=function ba(ca){return c('messengerDialogsRe').showDialog(function(){return c('reasonReact').element(0,0,c('messengerCompositeMuteSettingsDialogBootloaderReact').make(n,o,q,1- +u.is_canonical,r,t,s,c('bs_curry')._1(ca[1],j),[]));});},x=function ba(ca,da){ca.preventDefault();ca.stopPropagation();return w(da);},y=function ba(ca,da){if(ca.keyCode===c('keysRe').$$return){ca.preventDefault();ca.stopPropagation();return w(da);}else return 0;},z=function ba(){if(p){var ca=p[0];if(ca!==0){var da;if(ca>0){if(ca<86401){da=0;}else{var ea=+(new Date(ca*1000).getDay()===new Date().getDay());da=ea?[i._("Off until {time}",[i.param("time",c('formatDate')(ca,"g:ia"))])]:[i._("Off until {time} tomorrow",[i.param("time",c('formatDate')(ca,"g:ia"))])];}}else da=ca===-1?[i._("Off indefinitely")]:0;if(da){return c('React').createElement("span",{className:"_3x6v"},da[0]);}else return null;}else return null;}else return null;},aa=l.slice();aa[9]=function(ba){var ca=i._("Notifications"),da=c('messengerCustomColorUtilsRe').customColorOrBlue(u);return c('React').createElement("div",{ref:c('bs_curry')._1(ba[1],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:c('bs_curry')._1(ba[1],y),onClick:c('bs_curry')._1(ba[1],x)},c('React').createElement("div",{className:"_3szp"},c('messengerNotificationsIconSVGReact').make("_3wh2",da)),c('reasonReact').element(0,0,c('leftRightReact').make(["_3szq"],[ca,z(0)])));};aa[10]=function(){return [0];};return aa;}g.handleDialogToggle=j;g.setRef=k;g.component=l;g.make=m;}),null);
__d('messengerMuteButtonContainerReact',['bs_curry','bs_js_boolean','reasonReact','bs_js_primitive','MercuryThreadInfo','MercuryThreadActions','messengerNotificationsButtonReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statelessComponent("MessengerMuteButtonContainerReact");function i(j,k,l){var m=function q(r,s){c('MercuryThreadActions').getForFBID(k).updateMuteSetting(j.thread_id,r);return 0;},n=function q(r,s){c('MercuryThreadActions').getForFBID(k).updateMentionsMuteSetting(j.thread_id,c('bs_js_boolean').to_js_boolean(r));return 0;},o=function q(r,s){c('MercuryThreadActions').getForFBID(k).updateReactionsMuteSetting(j.thread_id,c('bs_js_boolean').to_js_boolean(r));return 0;},p=h.slice();p[9]=function(q){var r=+c('MercuryThreadInfo').isMuted(j),s=c('MercuryThreadInfo').getMuteSetting(j);return c('reasonReact').element(0,0,c('messengerNotificationsButtonReact').make(r,+c('MercuryThreadInfo').areMentionsMuted(j),c('bs_js_primitive').null_undefined_to_opt(s),+c('MercuryThreadInfo').areReactionsMuted(j),c('bs_curry')._1(q[1],n),c('bs_curry')._1(q[1],m),c('bs_curry')._1(q[1],o),j,[]));};return p;}g.component=h;g.make=i;}),null);
__d('messengerInfoPanelThreadOptionsContainerReact',['fbt','bs_curry','CurrentUser','reasonReact','bs_js_primitive','MessengerConfig','MercuryThreadActions','MessengerAdminGroupUtils','messengerInfoPanelEmojiReact','messengerInfoPanelSearchReact','messengerInfoPanelSectionReact','messengerInfoPanelNicknamesReact','messengerMuteButtonContainerReact','MessagingThreadCustomizationSource','messengerInfoPanelCustomColorReact','messengerInfoPanelManageReviewReact','messengerInfoPanelManageMessagesReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerInfoPanelThreadOptionsContainerReact");function j(l,m,n,o,p,q){var r=function v(w,x){c('MercuryThreadActions').getForFBID(o).changeThreadColor(n.thread_id,w,c('MessagingThreadCustomizationSource').SETTINGS);return 0;},s=function v(w,x){c('MercuryThreadActions').getForFBID(o).changeThreadEmoji(n.thread_id,w,c('MessagingThreadCustomizationSource').SETTINGS);return 0;},t=function v(w,x){c('MercuryThreadActions').getForFBID(o).changeThreadNicknames(n.thread_id,w[0],w[1],c('MessagingThreadCustomizationSource').SETTINGS);return 0;},u=i.slice();u[9]=function(v){if(n.is_subscribed){var w=+c('CurrentUser').isWorkUser(),x=+c('MessengerAdminGroupUtils').canUpdateThreadCustomization(n,o),y=x&&1-w,z=y!==0?c('reasonReact').element(0,0,c('messengerInfoPanelCustomColorReact').make(n,c('bs_curry')._1(v[1],r),[])):null,aa=x&&1-w,ba=aa!==0?c('reasonReact').element(0,0,c('messengerInfoPanelEmojiReact').make(n,o,c('bs_curry')._1(v[1],s),[])):null,ca=c('reasonReact').element(0,0,c('messengerInfoPanelSearchReact').make(n,[])),da=c('reasonReact').element(0,0,c('messengerInfoPanelNicknamesReact').make(m,n,o,c('bs_curry')._1(v[1],t),[])),ea=c('reasonReact').element(0,0,c('messengerInfoPanelManageMessagesReact').make(n,o,[])),fa=c('reasonReact').element(0,0,c('messengerInfoPanelManageReviewReact').make(n,o,[])),ga=c('reasonReact').element(0,0,c('messengerMuteButtonContainerReact').make(n,o,[]));if(c('MessengerConfig').CollapsibleThreadOptions){return c('reasonReact').element(0,0,c('messengerInfoPanelSectionReact').make(c('bs_js_primitive').null_to_opt(n.custom_color),[1],[l],[p],[h._("Options")],[ca,da,z,ba,ea,fa,ga]));}else return c('reasonReact').element(0,0,c('messengerInfoPanelSectionReact').make(0,0,0,0,0,[ca,da,z,ba,ea,fa,ga]));}else return null;};return u;}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(+l.isCollapsed,l.participants,l.thread,l.viewer,l.onToggle,[]);});g.component=i;g.make=j;g.jsComponent=k;}),null);
__d("messengerMessageCountReact",["cx","fbt","React","reasonReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statefulComponent("MessengerMessageCountReact");function k(m,n){var o=j.slice();o[9]=function(){return c("React").createElement("div",{className:"_60oa"},i._("Messages Sent: {messageCount}",[i.param("messageCount",m.message_count)]));};o[10]=function(){return [m.message_count];};return o;}var l=c("reasonReact").wrapReasonForJs(j,function(m){return k(m.thread,[]);});g.component=j;g.make=k;g.jsComponent=l;}),null);
__d('messengerInfoPanelThreadStatsContainerReact',['fbt','reasonReact','bs_js_primitive','messengerMessageCountReact','messengerInfoPanelSectionReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerInfoPanelThreadStatsContainerReact");function j(l,m,n,o){var p=i.slice();p[9]=function(){if(m.is_subscribed){var q=c('reasonReact').element(0,0,c('messengerMessageCountReact').make(m,[]));return c('reasonReact').element(0,0,c('messengerInfoPanelSectionReact').make(c('bs_js_primitive').null_undefined_to_opt(m.custom_color),[1],[l],[n],[h._("Conversation Details")],[q]));}else return null;};return p;}var k=c('reasonReact').wrapReasonForJs(i,function(l){return j(+l.isCollapsed,l.thread,l.onToggle,[]);});g.component=i;g.make=j;g.jsComponent=k;}),null);
__d('MessengerThreadInfoPanel.react',['cx','fbt','CurrentUser','immutable','ImmutableObject','Link.react','MercuryAttachment','MercuryConfig','MercuryIDs','MercuryThreadInfo','MercuryMessageStore','MessageThreadAssociatedObjectUtils','messengerAddToConversationDialogReact','MessengerAdminGroupUtils','MessengerConfig','MessengerContactAdapters','messengerDialogsRe','messengerDomIDsRe','MessengerInfoPanelAssociatedObjectSection.react','MessengerInfoPanelGroupSection.react','messengerInfoPanelNameSectionReact','MessengerInfoPanelPeopleSection.react','messengerInfoPanelSectionReact','messengerInfoPanelThreadOptionsContainerReact','messengerInfoPanelThreadStatsContainerReact','MessengerSharedPhotosContainer.react','MessengerSharedPhotosContainerRoute','MessengerSharedFilesContainer.react','MessengerSharedFilesContainerRoute','mercuryBlockedParticipantsRe','React','RelayRootContainer','SubscriptionsHandler'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('messengerAddToConversationDialogReact').jsComponent,m=c('messengerDomIDsRe').ids,n=c('messengerInfoPanelNameSectionReact').jsComponent,o=c('messengerInfoPanelSectionReact').jsComponent,p=c('messengerInfoPanelThreadOptionsContainerReact').jsComponent,q=c('messengerInfoPanelThreadStatsContainerReact').jsComponent,r=c('mercuryBlockedParticipantsRe').get(),s=c('React').PropTypes;j=babelHelpers.inherits(t,c('React').PureComponent);k=j&&j.prototype;function t(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=k.constructor).call.apply(u,[this].concat(x)),this.$MessengerThreadInfoPanel2=undefined,this.$MessengerThreadInfoPanel3=false,this.state={sharedPhotoSection:null,sharedFilesSection:null},this.$MessengerThreadInfoPanel11=function(){this.$MessengerThreadInfoPanel3=false;}.bind(this),this.$MessengerThreadInfoPanel14=function(z,event){this.props.onContactSelect(c('MessengerContactAdapters').fromMercuryParticipant(z));}.bind(this),this.$MessengerThreadInfoPanel13=function(z,aa){this.props.onContactAction(z,c('MessengerContactAdapters').fromMercuryParticipant(aa));}.bind(this),this.$MessengerThreadInfoPanel12=function(event){event.preventDefault();c('messengerDialogsRe').showDialog(function(){return c('React').createElement(l,{thread:this.props.thread,viewer:this.props.viewer});}.bind(this));}.bind(this),v;}t.prototype.componentWillMount=function(){this.subscribeStoreUpdate(this.props.thread.thread_id);};t.prototype.componentWillReceiveProps=function(u){if(u.thread.thread_id!==this.props.thread.thread_id||u.photosSectionCollapsed!==this.props.photosSectionCollapsed||u.filesSectionCollapsed!==this.props.filesSectionCollapsed){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();this.subscribeStoreUpdate(u.thread.thread_id);this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)});}.bind(this),1000);}};t.prototype.subscribeStoreUpdate=function(u){this.$MessengerThreadInfoPanel1=new (c('MercuryMessageStore'))(u);this.$MessengerThreadInfoPanel2=new (c('SubscriptionsHandler'))();this.$MessengerThreadInfoPanel2.addSubscriptions(this.$MessengerThreadInfoPanel1.subscribe(function(v){if(v.messages.length<1)return;var w=v.eventType==c('MercuryMessageStore').MESSAGES_RECEIVED,x=v.eventType==c('MercuryMessageStore').MESSAGES_CHANGED,y=v.messages[v.messages.length-1];if(!w&&!x)return;if(y.has_attachment&&y.attachments.length>0){var z=y.attachments.find(function(aa){return c('MercuryAttachment').isPhotoAttachment(aa)||c('MercuryAttachment').isVideoAttachment(aa);});if(z){this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)});}.bind(this),1000);}}}.bind(this)));};t.prototype.componentWillUnmount=function(){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();};t.prototype.componentDidUpdate=function(){if(!this.$MessengerThreadInfoPanel3)this.setState({sharedPhotoSection:null,sharedFilesSection:null});};t.prototype.render=function(){var u=this.props,v=u.viewer,w=u.thread,x=c('MercuryIDs').getParticipantIDFromUserID(v),y=w.participants&&w.participants.indexOf(x)!==-1,z=null;if(c('MessengerConfig').EnableMessengerSharedFiles)z=this.$MessengerThreadInfoPanel3?this.state.sharedFilesSection:this.$MessengerThreadInfoPanel5(false);var aa=this.$MessengerThreadInfoPanel3?this.state.sharedPhotoSection:this.$MessengerThreadInfoPanel4(false),ba=r.isMessageBlocked(w);return c('React').createElement('div',{className:"_3tkv",id:m.THREAD_INFO_PANEL},c('React').createElement('h3',{className:"accessible_elem"},i._("Conversation Information")),c('React').createElement(n,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,isBlocked:ba,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onUnmute:this.props.onUnmute,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showBlock:this.props.showBlock,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,showReport:this.props.showReport,thread:this.props.thread,viewer:this.props.viewer}),this.$MessengerThreadInfoPanel6(),c('React').createElement(p,{isCollapsed:this.props.threadOptionsSectionCollapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadOptionsSectionToggle}),this.$MessengerThreadInfoPanel7(),c('MessengerAdminGroupUtils').canSeeGroupOptions(y,w,v)?this.$MessengerThreadInfoPanel8():null,this.props.thread.is_canonical?this.$MessengerThreadInfoPanel9():this.$MessengerThreadInfoPanel10(),z,aa);};t.prototype.$MessengerThreadInfoPanel6=function(){var u=c('MessageThreadAssociatedObjectUtils').shouldRender(this.props.thread.associated_object);if(!u)return null;return c('React').createElement(c('MessengerInfoPanelAssociatedObjectSection.react'),{isCollapsed:this.props.associatedObjectSectionCollapsed,onToggle:this.props.onAssociatedObjectSectionToggle,customColor:this.props.thread.custom_color,associatedObject:this.props.thread.associated_object});};t.prototype.$MessengerThreadInfoPanel8=function(){return c('React').createElement(c('MessengerInfoPanelGroupSection.react'),{isOptionsCollapsed:this.props.groupOptionsSectionCollapsed,onOptionsToggle:this.props.onGroupOptionsSectionToggle,isApprovalsCollapsed:this.props.groupOptionsApprovalsSectionCollapsed,onApprovalToggle:this.props.onGroupApprovalOptionsSectionToggle,onToggle:this.props.onThreadOptionsSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread});};t.prototype.$MessengerThreadInfoPanel7=function(){if(c('MercuryConfig').MessengerGrowthThreadStats)return c('React').createElement(q,{isCollapsed:this.props.threadOptionsSectionCollapsed,thread:this.props.thread,onToggle:this.props.onThreadOptionsSectionToggle});return null;};t.prototype.$MessengerThreadInfoPanel4=function(u){var v=this.props,w=v.getIsScrolledToBottom,x=v.getScrollableHeight,y=v.onPhotosSectionToggle,z=v.photosSectionCollapsed,aa=v.thread,ba=new (c('MessengerSharedPhotosContainerRoute'))({threadFBID:aa.thread_fbid});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerSharedPhotosContainer.react'),renderLoading:function ca(){return null;},route:ba,forceFetch:u,renderFetched:function(ca){return c('React').createElement(c('MessengerSharedPhotosContainer.react'),babelHelpers['extends']({},ca,{customColor:this.props.thread.custom_color,clearForceFetch:this.$MessengerThreadInfoPanel11,getIsScrolledToBottom:w,getScrollableHeight:x,isCollapsed:z,onToggle:y,threadFBID:aa.thread_fbid}));}.bind(this)});};t.prototype.$MessengerThreadInfoPanel5=function(u){var v=this.props,w=v.filesSectionCollapsed,x=v.thread,y=new (c('MessengerSharedFilesContainerRoute'))({threadFBID:x.thread_fbid});return c('React').createElement(c('RelayRootContainer'),{Component:c('MessengerSharedFilesContainer.react'),renderLoading:function z(){return null;},route:y,forceFetch:u,renderFetched:function(z){return c('React').createElement(c('MessengerSharedFilesContainer.react'),babelHelpers['extends']({},z,{isCollapsed:w,onToggle:this.props.onFilesSectionToggle}));}.bind(this)});};t.prototype.$MessengerThreadInfoPanel10=function(){return c('React').createElement(c('MessengerInfoPanelPeopleSection.react'),{canViewerReply:c('MercuryThreadInfo').canReply(this.props.thread),contactAdapter:c('MessengerContactAdapters').fromMercuryParticipant,isCollapsed:this.props.peopleSectionCollapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this.$MessengerThreadInfoPanel12,onContactAction:this.$MessengerThreadInfoPanel13,onContactSelect:this.$MessengerThreadInfoPanel14,onToggle:this.props.onPeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread});};t.prototype.$MessengerThreadInfoPanel9=function(){var u=this.props.contact;if(!u||!u.href||u.fbid.toString()===c('MessengerConfig').MoneyPennyFBID)return null;var v=u.href,w=c('CurrentUser').isWorkUser()?'Workplace':'Facebook',x=u.type==='page'?i._("{productName} Page",[i.param('productName',w)]):i._("{productName} Profile",[i.param('productName',w)]);return c('React').createElement(o,{customColor:this.props.thread.custom_color,title:x},c('React').createElement('div',{className:"_4v0l"},c('React').createElement(c('Link.react'),{className:"_3oh-",style:{color:this.props.thread.custom_color},href:v,target:'_blank'},v.replace('www.',''))));};t.propTypes={contact:s.instanceOf(c('ImmutableObject')),getIsScrolledToBottom:s.func.isRequired,getScrollableHeight:s.func.isRequired,isUserActive:s.bool.isRequired,isBusinessEnabled:s.bool,lastActive:s.string,onArchive:s.func.isRequired,onContactAction:s.func.isRequired,onContactSelect:s.func.isRequired,onDelete:s.func.isRequired,onLeaveGroup:s.func,onMarkRead:s.func.isRequired,onMarkSpam:s.func.isRequired,onMarkUnread:s.func.isRequired,onMute:s.func.isRequired,onAssociatedObjectSectionToggle:s.func.isRequired,onPeopleSectionToggle:s.func.isRequired,onPhotosSectionToggle:s.func.isRequired,onFilesSectionToggle:s.func.isRequired,onThreadOptionsSectionToggle:s.func.isRequired,onGroupOptionsSectionToggle:s.func.isRequired,onGroupApprovalOptionsSectionToggle:s.func.isRequired,onThreadNameChange:s.func.isRequired,onThreadPhotoChange:s.func.isRequired,onUnmute:s.func.isRequired,onBlock:s.func.isRequired,onUnblock:s.func.isRequired,showBlock:s.bool.isRequired,participants:s.instanceOf(c('immutable').Map).isRequired,associatedObjectSectionCollapsed:s.bool.isRequired,peopleSectionCollapsed:s.bool.isRequired,photosSectionCollapsed:s.bool.isRequired,filesSectionCollapsed:s.bool.isRequired,platform:s.string,prevIsScrolledToBottom:s.bool.isRequired,prevScrollableHeight:s.number.isRequired,showLeaveGroup:s.bool.isRequired,thread:s.instanceOf(c('ImmutableObject')).isRequired,threadOptionsSectionCollapsed:s.bool.isRequired,groupOptionsSectionCollapsed:s.bool.isRequired,groupOptionsApprovalsSectionCollapsed:s.bool.isRequired,viewer:s.string.isRequired};f.exports=t;}),null);
__d('MessengerThreadInfoPanelScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React','ReactDOM'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={prevHeight:-1,prevIsScrolledToBottom:false},this.$MessengerThreadInfoPanelScrollableArea1=null,this.isScrolledToBottom=function(){return this.refs.scrollable.isScrolledToBottom();}.bind(this),this.getHeight=function(){return c('ReactDOM').findDOMNode(this.refs.scrollable).offsetHeight;}.bind(this),this.$MessengerThreadInfoPanelScrollableArea2=function(){var q=this.isScrolledToBottom(),r=this.getHeight();if(this.state.prevIsScrolledToBottom!==q||this.state.prevHeight!==r)this.setState({prevHeight:r,prevIsScrolledToBottom:q});}.bind(this),m;}k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerThreadInfoPanelScrollableArea2},c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',onScroll:this.$MessengerThreadInfoPanelScrollableArea2,ref:'scrollable'},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)));};k.propTypes={children:j.func.isRequired};f.exports=k;}),null);
__d('messengerConfirmLeaveGroupDialogReact',['bs_curry','bs_js_boolean','reasonReact','messengerDialogsRe','messengerDialogReact','MessengerAdminGroupUtils','messengerDialogBodyReact'],(function a(b,c,d,e,f,g){'use strict';var h=c('reasonReact').statelessComponent("MessengerConfirmLeaveGroupDialogReact");function i(l){if(l){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function j(l,m,n,o){var p=function r(s,t){c('bs_curry')._1(m,0);return c('messengerDialogsRe').removeDialog(0);},q=h.slice();q[9]=function(r){var s=c('bs_js_boolean').to_js_boolean(l),t=c('MessengerAdminGroupUtils').getLeaveGroupBodyText(s,n),u=c('MessengerAdminGroupUtils').getLeaveGroupButtonText(s,n),v=c('MessengerAdminGroupUtils').getLeaveGroupTitleText(s,n);return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,i,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[v])),c('reasonReact').element(0,0,c('messengerDialogBodyReact').make(0,[t])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[u],0,["danger"],[c('bs_curry')._1(r[1],p)],[0],0,0,[]]))]))]));};return q;}var k=c('reasonReact').wrapReasonForJs(h,function(l){return j(+l.isViewerAdmin,l.onLeave,l.thread,[]);});g.component=h;g.handleToggle=i;g.make=j;g.jsComponent=k;}),null);
__d('MessengerThreadInfoPanelContainer.react',['AsyncRequest','immutable','ImmutableObject','MercuryAPIArgsSource','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryThreadActions','MercuryThreadInfo','MercuryTriodeSourceUtil','MessengerActions','messengerDialogsRe','messengerConfirmLeaveGroupDialogReact','messengerContactActionsRe','MessengerAdminGroupUtils','MessengerLeaveGroupAction','MessengerThreadInfoPanelScrollableArea.react','MessengerSettingsActions','MessengerSettingsStore','MessengerThreadInfoPanel.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','URI','XMessagingSetThreadStateController','getPageIDFromThreadID'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerConfirmLeaveGroupDialogReact').jsComponent,i=c('messengerContactActionsRe').actions,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadInfoPanelContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MessengerSettingsStore'))],propTypes:{contactData:j.object,participants:j.instanceOf(c('immutable').Map).isRequired,thread:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired},statics:{calculateState:function l(){var m=c('MessengerSettingsStore').getSettings(),n=m.associated_object_section_collapsed,o=m.people_section_collapsed,p=m.photos_section_collapsed,q=m.files_section_collapsed,r=m.thread_section_collapsed,s=m.group_section_collapsed,t=m.group_approval_section_collapsed;return {associated_object_section_collapsed:n,people_section_collapsed:o,photos_section_collapsed:p,files_section_collapsed:q,thread_section_collapsed:r,group_section_collapsed:s,group_approval_section_collapsed:t};}},render:function l(){var m=this.props.contactData||{},n=this.state,o=n.associated_object_section_collapsed,p=n.people_section_collapsed,q=n.photos_section_collapsed,r=n.files_section_collapsed,s=n.thread_section_collapsed,t=n.group_section_collapsed,u=n.group_approval_section_collapsed;return c('React').createElement(c('MessengerThreadInfoPanelScrollableArea.react'),{className:this.props.className},function(v,w,x,y){return c('React').createElement(c('MessengerThreadInfoPanel.react'),{contact:m.contact,getIsScrolledToBottom:x,getScrollableHeight:y,isUserActive:m.isUserActive||false,lastActive:m.lastActive,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onAssociatedObjectSectionToggle:this._handleAssociatedObjectSectionToggle,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onFilesSectionToggle:this._handleFilesSectionToggle,onThreadOptionsSectionToggle:this._handleThreadSectionToggle,onGroupOptionsSectionToggle:this._handleGroupOptionsSectionToggle,onGroupApprovalOptionsSectionToggle:this._handleGroupOptionsApprovalSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,onBlock:this._handleBlock,onUnblock:this._handleUnblock,showBlock:this.props.thread.is_canonical_user&&this.props.thread.other_user_fbid&&this.props.viewer!==this.props.thread.other_user_fbid,participants:this.props.participants,associatedObjectSectionCollapsed:o,peopleSectionCollapsed:p,photosSectionCollapsed:q,filesSectionCollapsed:r,platform:m.platform,prevIsScrolledToBottom:w,prevScrollableHeight:v,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,showReport:this._isPageChat(),thread:this.props.thread,threadOptionsSectionCollapsed:s,groupOptionsSectionCollapsed:t,groupOptionsApprovalsSectionCollapsed:u,viewer:this.props.viewer});}.bind(this));},_handleArchive:function l(){this._getThreadActions().archive(this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleDelete:function l(){this._getThreadActions()['delete'](this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleMarkRead:function l(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function l(){this._getThreadActions().markSpam(this.props.thread.thread_id);c('MessengerActions').selectThread(null);},_handleMarkUnread:function l(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m);},_handleUnmute:function l(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleBlock:function l(){this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id);},_handleUnblock:function l(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id);},_handleMuteChange:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m);},_handleContactSelect:function l(m,event){var n=c('MercuryIDs').getThreadIDFromParticipantID(m.uid);n&&c('MessengerActions').selectThread(n);},_handleContactAction:function l(m,n){if(c('MercuryIDs').getUserIDFromParticipantID(n.uid)!==this.props.viewer)switch(m){case i.MESSAGE:this._handleContactSelect(n);break;case i.PROFILE:var o=this.props.participants.get(n.uid);if(o&&o.href){window.open(o.href);}else this._handleContactSelect(n);break;case i.REMOVE:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var p=new (c('URI'))('/chat/remove_participants/');p.addQueryData({uid:c('MercuryIDs').getUserIDFromParticipantID(n.uid),tid:this.props.thread.thread_fbid});var q=new (c('AsyncRequest'))(p);q.send();}break;}switch(m){case i.REMOVE_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(n.uid)],false);break;case i.ADD_OWNER:if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c('MercuryIDs').getUserIDFromParticipantID(n.uid)],true);break;}},_handleLeaveGroup:function l(){var m,n=this;if(this.props.viewer)(function(){var o=c('MessengerAdminGroupUtils').isViewerAdmin(n.props.thread.admin_ids,n.props.viewer);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(h,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:o,thread:this.props.thread});}.bind(n));})();},_onLeaveGroupConfirm:function l(){c('MessengerLeaveGroupAction').leaveGroup(this.props.thread,this.props.viewer);},_handleThreadNameChange:function l(m){var n=c('MessengerAdminGroupUtils').isJoinableThread(this.props.thread);if(!n){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').THREAD_NAME,{name:m}),null,c('MercuryAPIArgsSource').MESSENGER);}else{var o=c('XMessagingSetThreadStateController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(o).setData({thread_id:this.props.thread.thread_fbid,thread_name:m}).send();}},_handleThreadPhotoChange:function l(m,n){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),m,c('MercuryLogMessageType').THREAD_IMAGE,{image:n.metadata[0]}));},_handleAssociatedObjectSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed});},_handlePeopleSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({people_section_collapsed:!this.state.people_section_collapsed});},_handlePhotosSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed});},_handleFilesSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({files_section_collapsed:!this.state.files_section_collapsed});},_handleThreadSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed});},_handleGroupOptionsSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({group_section_collapsed:!this.state.group_section_collapsed});},_handleGroupOptionsApprovalSectionToggle:function l(){c('MessengerSettingsActions').changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed});},_getThreadActions:function l(){return c('MercuryThreadActions').getForFBID(this.props.viewer);},_getMessageActions:function l(){return c('MercuryMessageActions').getForFBID(this.props.viewer);},_getMessageObject:function l(){return c('MercuryMessageObject').getForFBID(this.props.viewer);},_isPageChat:function l(){return !!c('getPageIDFromThreadID')(this.props.thread.thread_id);}});f.exports=k;}),null);
__d('MessengerDetailView.react',['cx','fbt','invariant','Bootloader','BootloadOnRender.react','CustomColorHighlighting.react','DataTransfer','EventReminderActions','EventRemindersGating','EventReminderStateStore','immutable','JSResource','LazyComponent.react','MercuryIDs','MercuryConfig','MercuryCanonicalGroupThreadStore','MercuryParticipants','MercuryThreadActions','MercuryThreadInfo','MercuryThreads','MessengerActions','MessengerComposerStore','MessengerComposerContainer.react','MessengerConversation.react','MessengerConversationContainer.react','MessengerDetailViewHeaderContainer.react','messengerDomIDsRe','MessengerErrorBoundary.react','MessengerPresenceStatusUtils','MessengerSettingsActions','MessengerSettingsStore','MessengerStateStore','MessengerThreadSearchStore','MessengerThreadInfoPanelContainer.react','MessengerThreadSearchActions','MessengerView','MessengerWebDriverTestIDs','Parent','PresenceStatus','React','SubscriptionsHandler','AvailableList','emptyFunction','ifRequired','shallowCompare'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('messengerDomIDsRe').ids;c('AvailableList');var l=c('React').PropTypes;function m(event,o){if(!c('EventRemindersGating').shouldShowPlansOnMessengerCom)return null;if(!o)return null;if(!event)return null;return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerEventPlanContainer.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{threadID:o})});}var n=c('React').createClass({displayName:'MessengerDetailView',_composer:undefined,_refsConversationContainer:null,_subscriptionsHandler:new (c('SubscriptionsHandler'))(),propTypes:{activeThreadID:l.string,view:l.string,viewer:l.string.isRequired},calculateState:function o(p){var q=p.activeThreadID,r=c('MercuryThreads').getForFBID(p.viewer),s=c('MessengerComposerStore').getState();if(p.view===c('MessengerView').DETAIL.COMPOSE){!!s.recipients||j(0);var t=s.recipients;if(t.size===1){q=c('MercuryIDs').getThreadIDFromUserID(t.first().getUniqueID().toString());}else if(t.size>1)q=c('MercuryCanonicalGroupThreadStore').getOrFetch(Array.from(t).map(function(z){return z.getUniqueID().toString();}));}var u=q?r.getOrFetch(q):null,v=c('immutable').Map();if(u&&q){v=v.withMutations(function(z){u.participants&&u.participants.forEach(function(aa){z.set(aa,c('MercuryParticipants').getOrFetch(aa));});u.is_subscribed&&z.set(c('MercuryIDs').getParticipantIDFromUserID(p.viewer),c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(p.viewer)));});if(c('EventRemindersGating').shouldShowPlansOnMessengerCom){var event=u?u.lightweight_event:null;if(event){c('EventReminderActions').updateEventReminder(q,event);}else{var w=c('EventReminderStateStore').getEvent(q);if(w&&w.exists)c('EventReminderActions').deleteEventReminder(q);}}}var x=c('ifRequired')('MessengerUploadFilesStore',function(z){return z.getState();},function(){return c('immutable').Map({});}),y=c('ifRequired')('MessengerSharePreviewStore',function(z){return z.getState();},function(){return c('immutable').Map({});});return {infoPanelCollapsed:c('MessengerSettingsStore').getSettings().info_sidebar_collapsed,activeThreadID:q,composerState:s,messengerState:c('MessengerStateStore').getState(),contactData:c('MessengerPresenceStatusUtils').getStatusFromCanonicalThread(v,u),activeThread:u,participants:v,searchResults:c('MessengerThreadSearchStore').getState(),uploadFilesState:x,sharePreivewState:y};},getInitialState:function o(){return babelHelpers['extends']({dropTargetOverlayVisible:false},this.calculateState(this.props));},componentWillMount:function o(){this._subscribeToSubscrptionHandler([c('MessengerComposerStore'),c('MessengerStateStore'),c('MessengerThreadSearchStore'),c('MercuryCanonicalGroupThreadStore'),c('MercuryThreads'),c('MercuryParticipants'),c('PresenceStatus')]);},componentDidMount:function o(){if(c('MercuryConfig').WWWMessengerUploadFilesPreview)c('Bootloader').loadModules(["MessengerUploadFilesStore"],function(p){this._subscribeToSubscrptionHandler([p]);}.bind(this),'MessengerDetailView.react');if(c('MercuryConfig').WWWMessengerURLPreview)c('Bootloader').loadModules(["MessengerSharePreviewStore"],function(p){this._subscribeToSubscrptionHandler([p]);}.bind(this),'MessengerDetailView.react');},_subscribeToSubscrptionHandler:function o(p){var q=function(){this.setState(this.calculateState(this.props));}.bind(this),r=[];p.forEach(function(t){if(t.hasChanged&&t.getDispatchToken&&t.addListener){r.push(t.addListener(q));}else if(t.subscribe){r.push(t.subscribe('change',q));}else if(t.addListener){r.push(t.addListener('change',q));}else j(0);});if(r.length>0){var s;this._subscriptionsHandler&&(s=this._subscriptionsHandler).addSubscriptions.apply(s,r);}},shouldComponentUpdate:function o(p,q){return c('shallowCompare')(this,p,q);},componentDidUpdate:function o(){this._handleResize();},componentWillUnmount:function o(){this._subscriptionsHandler&&this._subscriptionsHandler.release();this._subscriptionsHandler=null;},componentWillReceiveProps:function o(p){this.setState(this.calculateState(p));},render:function o(){var p=this.state.activeThreadID,q=this._getMainLabelDetails(),r=void 0;if(this.state.activeThread)r=this.props.query==null?m(this.state.activeThread.lightweight_event,p):null;return c('React').createElement('div',{'aria-labelledby':q.labelIDs,className:"_1q5-",role:'main'},c('React').createElement('div',{className:"hidden_elem",id:k.MAIN_LABEL},q.labelText),c('React').createElement(c('CustomColorHighlighting.react'),{className:"_wsc",customColor:this.state.activeThread&&this.state.activeThread.custom_color},c('React').createElement(c('MessengerDetailViewHeaderContainer.react'),{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed}),c('React').createElement('div',{className:"_20bp"},this._renderInfoPanel(),c('React').createElement('div',{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:'presentation'},this._renderMainView(p),r,this._renderSearchView(p),this._renderFooterView(p),c('React').createElement('div',{className:(!this.state.dropTargetOverlayVisible?"hidden_elem":'')+(' '+"_2fg6")}),(c('MercuryConfig').WWWMessengerUploadFilesPreview||c('MercuryConfig').WWWMessengerURLPreview)&&this._renderUploadFiles(p)))));},_renderUploadFiles:function o(p){if(!p)return null;var q=this.state.uploadFilesState.get(p)||{},r=this.state.sharePreivewState.get(p);return c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('FantaDragAndDrop.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{threadID:p,uploadedFiles:q.uploadedFiles,uploadingFiles:q.uploadingFiles,sharePreview:r})});},_renderSearchView:function o(p){return p&&!this.props.mid&&this.props.query!=null?c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('MessengerThreadSearchContainer.react').__setRef('MessengerDetailView.react'),placeholder:c('React').createElement('div',{className:"_33p7 _5iwm"}),component:c('React').createElement(c('LazyComponent.react'),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null;},_assignConversationContainerRef:function o(p){this._refsConversationContainer=p;},_renderMainView:function o(p){if(!p)return c('React').createElement('div',{className:"_1ut7"});var q=this.state.contactData?this.state.contactData.contact:null;if(this.state.searchResults.messages)return c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversation.react'),{className:"_1wfr",contact:q,downExhausted:this.state.searchResults.downExhausted,fetchMessages:c('MessengerThreadSearchActions').getMoreSearchContext,innerClassName:"_1r_-",isCanonical:c('MercuryIDs').isCanonical(p),isLoaded:true,isLoading:false,messages:this.state.searchResults.messages,onRead:c('emptyFunction'),participants:this.state.participants,thread:this.state.activeThread,threadID:p,upExhausted:this.state.searchResults.upExhausted,useManualFetch:true,viewer:this.props.viewer}));return c('React').createElement(c('MessengerErrorBoundary.react'),{component:'conversation'},c('React').createElement(c('MessengerConversationContainer.react'),{className:"_1wfr",contact:q,onMarkRead:this._handleMarkRead,participants:this.state.participants,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:p,viewer:this.props.viewer}));},_renderFooterView:function o(p){var q=c('MercuryConfig').ColdOpenBlock&&this.state.activeThread&&c('MercuryThreadInfo').isColdOpen(this.state.activeThread);return c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3 _2pen",component:'composer'},c('React').createElement(c('MessengerComposerContainer.react'),{canReply:!!(!q&&(this.props.view===c('MessengerView').DETAIL.COMPOSE||this.state.activeThread&&c('MercuryThreadInfo').canReply(this.state.activeThread)&&!c('MercuryConfig').ViewerIsReadOnly)),fileUploader:this.state.uploadFilesState.get(p),onMount:function(r){return this._composer=r;}.bind(this),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreivewState.get(p),threadID:p,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer}));},_renderInfoPanel:function o(){var p=this.state,q=p.activeThread,r=p.contactData,s=p.infoPanelCollapsed,t=p.participants,u=this.props.view;if(!q||!t||u===c('MessengerView').DETAIL.COMPOSE)return null;return c('React').createElement('div',{className:(s?"hidden_elem":'')+(' '+"_4_j5"),'data-testid':c('MessengerWebDriverTestIDs').INFO_PANEL},c('React').createElement(c('MessengerErrorBoundary.react'),{className:"_4rv3",component:'conversation information'},c('React').createElement(c('MessengerThreadInfoPanelContainer.react'),{className:"_4_j9",contactData:r,participants:t,thread:q,viewer:this.props.viewer})));},_getMainLabelDetails:function o(){if(this.props.view===c('MessengerView').DETAIL.COMPOSE)return {labelText:i._("New Message"),labelIDs:k.MAIN_LABEL};return {labelText:i._("Conversation with"),labelIDs:k.MAIN_LABEL+' '+k.THREAD_TITLE};},_handleConversationClick:function o(p){var q=this.props.activeThreadID;if(q&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom())this._handleMarkRead(q);if(window.getSelection().toString()!=='')return;var r=p.target;if(r instanceof Node&&c('Parent').byTag(r,'a')!=null)return;var s=this._getComposer();s&&s.focusInput();},_showDropTargetOverlay:function o(p){p&&p.preventDefault();this.setState({dropTargetOverlayVisible:true});},_hideDropTargetOverlay:function o(p){p&&p.preventDefault();this.setState({dropTargetOverlayVisible:false});var q=this._getComposer();q&&q.resetDrag();},_handleDrop:function o(p){this._hideDropTargetOverlay(p);var q=this._getComposer();if(!q)return;p.nativeEvent.dataTransfer instanceof Object||j(0);if(c('MercuryConfig').WWWMessengerUploadFilesPreview){c('MessengerActions').prepareFilesForSend(this.state.activeThreadID,p.nativeEvent.dataTransfer.files);return;}var r=new (c('DataTransfer'))(p.nativeEvent.dataTransfer),s=r.getFiles();if(s.length){q.handleFileUpload(s);}else{var t=r.getText();if(t)q.handleTextDropped(t);}},_handleResize:function o(){var p=this._refsConversationContainer;if(p)p.handleResize();},_handleInfoPanelToggle:function o(){var p=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:p},function(){c('MessengerSettingsActions').changeSettings({info_sidebar_collapsed:p});});},_handleMarkRead:function o(p){c('MercuryThreadActions').getForFBID(this.props.viewer).markRead(p);},_getComposer:function o(){return this._composer;}});f.exports=n;}),null);
__d('messengerDetailViewReact',['reasonReact','bs_js_null_undefined','MessengerDetailView.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){return c('reasonReact').wrapJsForReason(c('MessengerDetailView.react'),{activeThreadID:c('bs_js_null_undefined').from_opt(i),mid:c('bs_js_null_undefined').from_opt(j),query:c('bs_js_null_undefined').from_opt(k),view:c('bs_js_null_undefined').from_opt(l),viewer:m},n);}g.make=h;}),null);
__d('messengerErrorBoundaryReact',['reasonReact','bs_js_null_undefined','MessengerErrorBoundary.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerErrorBoundary.react'),{className:c('bs_js_null_undefined').from_opt(i),component:c('bs_js_null_undefined').from_opt(j)},k);}g.make=h;}),null);
__d('P2PJewelBanner.react',['cx','fbt','ix','Image.react','Layout.react','P2PButton.react','React','TooltipLink.react','URI','XUIGrayText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('Layout.react').FillColumn,n=c('Layout.react').Column,o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.handleCloseClick=function(v){v.stopPropagation();if(this.props.onClose)this.props.onClose();}.bind(this),this.handleClick=function(){this.execPrimaryClick();}.bind(this),this.handlePrimaryClick=function(v){v.stopPropagation();this.execPrimaryClick();}.bind(this),this.execPrimaryClick=function(){if(this.props.primaryActionConfig.uri)new (c('URI'))(this.props.primaryActionConfig.uri).go();this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick();}.bind(this),this.handleSecondaryActionClick=function(v){v.stopPropagation();this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick();}.bind(this),this.renderCloseButton=function(){return c('React').createElement(c('TooltipLink.react'),{alignH:'center',className:"_47d8",href:'#',onClick:this.handleCloseClick,position:'above',tooltip:i._("Dismiss")},c('React').createElement(c('Image.react'),{className:"_47dg",height:7,src:j("94375"),width:7}));}.bind(this),this.renderActions=function(){var v=this.props.primaryActionConfig,w=void 0,x=this.props.secondaryActionConfig;if(x)w=c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:'#',label:x.text,onClick:this.handleSecondaryActionClick,size:'large',target:'_blank',type:'primary'});return c('React').createElement('div',null,w,c('React').createElement(c('P2PButton.react'),{className:"_5d0t",href:v.uri||'#',label:v.text,onClick:this.handlePrimaryClick,size:'large',target:'_blank',type:'primary',use:'confirm'}));}.bind(this),r;}p.prototype.render=function(){var q=void 0;if(this.props.isDismissable)q=this.renderCloseButton();return c('React').createElement('div',{className:"_5d0n",onClick:this.handleClick,role:'presentation'},q,c('React').createElement(c('Layout.react'),null,c('React').createElement(n,{className:"_400i"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('Image.react'),{className:"_5d0q",height:50,src:j("94376"),width:50}))),c('React').createElement(m,{className:"_47di"},c('React').createElement('div',{className:"_400j"},c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'dark',weight:'bold'},this.props.titleText),c('React').createElement(c('XUIGrayText.react'),{display:'block',shade:'light'},this.props.bodyText))),c('React').createElement(n,{className:"_400k"},c('React').createElement('div',{className:"_400j"},this.renderActions()))));};p.propTypes={bodyText:o.node,isDismissable:o.bool,onClose:o.func,primaryActionConfig:o.shape({onClick:o.func,text:o.node.isRequired,uri:o.oneOfType([o.string,o.object])}).isRequired,secondaryActionConfig:o.shape({onClick:o.func.isRequired,text:o.node.isRequired}),titleText:o.node.isRequired};p.defaultProps={isDismissable:false};f.exports=p;}),null);
__d('P2PPendingPaymentRequestJewelBanner.react',['fbt','P2PJewelBanner.react','P2PPaymentRequest','P2PPaymentRequestActionHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleDeclineClick=function(){c('P2PPaymentRequestActionHelper').initDeclinePaymentRequestFlow(this.props.paymentRequest);}.bind(this),this.handlePayClick=function(){c('P2PPaymentRequestActionHelper').initPayForPaymentRequestFlow(this.props.paymentRequest,'banner');}.bind(this),this.renderBodyText=function(){var r=this.props.paymentRequest,s=r.memoText;if(!s)return null;return h._("For {What the user paid for}",[h.param('What the user paid for',s)]);}.bind(this),n;}l.prototype.render=function(){var m=this.props.paymentRequest;return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:h._("Pay")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:h._("Decline")},titleText:h._("{requester_name} requested {amount}",[h.param('requester_name',m.requester.name),h.param('amount',m.amountWithSymbol)])});};l.propTypes={paymentRequest:k.instanceOf(c('P2PPaymentRequest')).isRequired};f.exports=l;}),null);
__d('P2PPendingPushFailJewelBanner.react',['fbt','P2PJewelBanner.react','P2PLinkConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.getActionText=function(){return h._("Learn More");},this.getBodyText=function(){var r=this.props.transfer;return h._("{currency}{amount} from {sender_name} couldn't be deposited using your debit card.",[h.param('currency',r.currency),h.param('amount',r.amount),h.param('sender_name',r.sender.name)]);}.bind(this),n;}l.prototype.render=function(){return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:c('P2PLinkConstants').helpTransferPushFailURI},titleText:h._("Update Your Card")});};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PTimeBasedAcceptMessage.react',['fbt','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.transfer,n=m.creationTime*1000,o=1000*60*60*24,p=Date.now(),q=(p-n)/o,r=m.expirationTimestamp*1000-p,s=Math.round(Math.max(r/o,1)),t=void 0;if(q<=2){t=h._("Add a debit card and it'll go straight to your bank.");}else if(q<=4){t=h._("This money will be sent back in {days left} days. Add a debit card to accept it.",[h.param('days left',s)]);}else if(q<=5){t=h._({"day":"You have {days left} day to add a debit card before the money is sent back to {sender_name}.","days":"You have {days left} days to add a debit card before the money is sent back to {sender_name}."},[h.param('days left',s),h['enum'](s===1?'day':'days',{day:'day',days:'days'}),h.param('sender_name',m.sender.name)]);}else t=h._("You have 24 hours to add a debit card before the money is sent back to {sender_name}.",[h.param('sender_name',m.sender.name)]);return c('React').createElement('div',null,t);};function l(){i.apply(this,arguments);}l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PPendingRecipientNUXJewelBanner.react',['fbt','P2PAcceptMoneyDialog.react','P2PActions','P2PCreditCardStore','P2PJewelBanner.react','P2PTimeBasedAcceptMessage.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'P2PPendingRecipientNUXJewelBanner',propTypes:{transfer:i.object.isRequired},getInitialState:function k(){return {creditCards:c('P2PCreditCardStore').getAll()};},creditCardStoreSub:null,componentDidMount:function k(){this.creditCardStoreSub=c('P2PCreditCardStore').addListener('change',this.onCreditCardStoreChange);},componentWillUnmount:function k(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},onCreditCardStoreChange:function k(){var l={creditCards:c('P2PCreditCardStore').getAll()};if(this.isMounted())this.setState(l);},handleClick:function k(){this.showAcceptMoneyDialog();},showAcceptMoneyDialog:function k(){c('P2PActions').showDialog(c('P2PAcceptMoneyDialog.react'),{creditCards:this.state.creditCards,onClose:c('P2PActions').hideDialog,transfer:this.props.transfer});},renderTimeBasedMessage:function k(){return c('React').createElement(c('P2PTimeBasedAcceptMessage.react'),{transfer:this.props.transfer});},render:function k(){var l=this.props.transfer;if(!c('P2PCreditCardStore').isCreditCardsFetchComplete())return null;return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:h._("Add Card")},titleText:h._("Accept {currency}{amount} from {sender_name}.",[h.param('currency',l.currency),h.param('amount',l.amount),h.param('sender_name',l.sender.name)])});}});f.exports=j;}),null);
__d('P2PPendingRecipientVerificationJewelBanner.react',['fbt','P2PJewelBanner.react','P2PTransferParam','P2PVerificationFlowHelper','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleClick=function(){c('P2PVerificationFlowHelper').startVerificationFlow(this.props.transfer[c('P2PTransferParam').TRANSFER_ID],false);}.bind(this),n;}l.prototype.render=function(){return c('React').createElement(c('P2PJewelBanner.react'),{bodyText:h._("To accept the money {sender_name} sent you, please confirm your information.",[h.param('sender_name',this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:h._("Confirm Info")},titleText:h._("Please Confirm Your Info")});};l.propTypes={transfer:k.object.isRequired};f.exports=l;}),null);
__d('P2PJewelBannerContainer.react',['cx','CurrentUser','P2PBannerStore','P2PPaymentRequestsStore','P2PPendingPaymentRequestJewelBanner.react','P2PPendingPushFailJewelBanner.react','P2PPendingRecipientNUXJewelBanner.react','P2PPendingRecipientVerificationJewelBanner.react','P2PTransferParam','P2PTransferStatus','P2PTransferStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').createClass({displayName:'P2PJewelBannerContainer',mixins:[c('PureStoreBasedStateMixin')(c('P2PBannerStore'),c('P2PPaymentRequestsStore'),c('P2PTransferStore'))],statics:{calculateState:function j(){var k=c('P2PTransferStore').getNUXTransfer(),l=c('P2PPaymentRequestsStore').getPendingPaymentRequest();return {paymentRequest:l,paymentRequestBannerShown:!!l,transfer:k,transferBannerShown:k&&k.receiver.id==c('CurrentUser').getID()};}},renderTransferBanner:function j(){var k=this.state.transfer,l=k[c('P2PTransferParam').STATUS];switch(l){case c('P2PTransferStatus').PENDING_RECIPIENT_NUX:return c('React').createElement(c('P2PPendingRecipientNUXJewelBanner.react'),{transfer:k});case c('P2PTransferStatus').PENDING_RECIPIENT_VERIFICATION:return c('React').createElement(c('P2PPendingRecipientVerificationJewelBanner.react'),{transfer:k});case c('P2PTransferStatus').PENDING_PUSH_FAIL:return c('React').createElement(c('P2PPendingPushFailJewelBanner.react'),{transfer:k});}},renderPaymentRequestBanner:function j(){return c('React').createElement(c('P2PPendingPaymentRequestJewelBanner.react'),{paymentRequest:this.state.paymentRequest});},render:function j(){var k=void 0;if(this.state.transferBannerShown){k=this.renderTransferBanner();}else if(this.state.paymentRequestBannerShown)k=this.renderPaymentRequestBanner();return c('React').createElement('div',{className:"_1xfk"},k);}});f.exports=i;}),null);
__d('MercuryThreadlistContainer.react',['Bootloader','immutable','MercuryAPIArgsSource','MercuryConfig','MercuryFilters','MercuryThreadlistConstants','MessagingTag','P2PJewelBannerContainer.react','React','SubscriptionsHandler'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes,k='search';h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={isLoading:true,isSearching:false,unreadMessageRequestThreads:[],threads:c('immutable').Map()},this.$MercuryThreadlistContainer15=function(){return c('React').createElement(c('P2PJewelBannerContainer.react'),null);},this.$MercuryThreadlistContainer16=function(){this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,c('MercuryThreadlistConstants').MAX_UNREAD_COUNT,c('MessagingTag').PENDING,c('MercuryFilters').UNREAD,this.$MercuryThreadlistContainer18,true,this.props.source);}.bind(this),this.$MercuryThreadlistContainer12=function(){if(!this.state.isSearching&&!this.state.isLoading&&!this.$MercuryThreadlistContainer1.hasLoadedThreadlist(this.props.folder,this.props.filter))this.$MercuryThreadlistContainer7(this.props.folder,this.props.filter,this.$MercuryThreadlistContainer8(this.props.folder)+c('MercuryThreadlistConstants').JEWEL_MORE_COUNT+1);}.bind(this),this.$MercuryThreadlistContainer7=function(r,s,t){if(!this.$MercuryThreadlistContainer1)return;this.$MercuryThreadlistContainer11();this.setState({isLoading:true},function(){var u=this.$MercuryThreadlistContainer1.getFilteredThreadlist(c('MercuryThreadlistConstants').RECENT_THREAD_OFFSET,t,r,s||c('MercuryFilters').ALL,function(v){return this.setState({isLoading:false});}.bind(this),true,this.props.source);this.$MercuryThreadlistContainer19={subscriberID:u,folder:r,filter:s};}.bind(this));}.bind(this),this.$MercuryThreadlistContainer18=function(){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;var r=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c('MessagingTag').PENDING,c('MercuryFilters').UNREAD);this.$MercuryThreadlistContainer2.getMultiThreadMeta(r,function(s){this.setState({unreadMessageRequestThreads:r.map(function(t){return s[t];})});}.bind(this));}.bind(this),this.$MercuryThreadlistContainer17=function(r,s){return !!(this.$MercuryThreadlistContainer1&&(this.$MercuryThreadlistContainer1.getThreadCount(r,s)>=c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3||this.$MercuryThreadlistContainer1.hasLoadedThreadlist(r,s)));}.bind(this),this.$MercuryThreadlistContainer8=function(r){var s=this.state.threads.get(r);return s?s.length:0;}.bind(this),this.$MercuryThreadlistContainer10=function(){this.$MercuryThreadlistContainer2&&this.$MercuryThreadlistContainer20&&this.$MercuryThreadlistContainer2.unsubscribe(this.$MercuryThreadlistContainer20);}.bind(this),this.$MercuryThreadlistContainer11=function(){this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer19&&this.$MercuryThreadlistContainer1.unsubscribe(this.$MercuryThreadlistContainer19.subscriberID,this.$MercuryThreadlistContainer19.folder,this.$MercuryThreadlistContainer19.filter);}.bind(this),this.$MercuryThreadlistContainer14=function(r,s){this.setState({isLoading:s,searchThreads:[]},function(){return this.$MercuryThreadlistContainer6(k,c('MercuryFilters').ALL,r);}.bind(this));}.bind(this),this.$MercuryThreadlistContainer13=function(r){this.setState({isSearching:!!r});}.bind(this),n;}l.prototype.componentDidMount=function(){c('Bootloader').loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(m,n,o){this.$MercuryThreadlistContainer1=m.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer2=o.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer3=function(){var p=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c('MessagingTag').INBOX,this.props.filter),q=this.$MercuryThreadlistContainer2.getThreadMetaNow(p[p.length-1]);if(!q)return p;var r=q.timestamp,s=this.$MercuryThreadlistContainer1.getThreadlistUntilTimestamp(r,c('MessagingTag').PENDING,this.props.filter);return p.concat(s).sort(function(t,u){var v=this.$MercuryThreadlistContainer2.getThreadMetaNow(t),w=this.$MercuryThreadlistContainer2.getThreadMetaNow(u);return (w&&w.timestamp)-(v&&v.timestamp);}.bind(this));}.bind(this);this.$MercuryThreadlistContainer4=n.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer5=new (c('SubscriptionsHandler'))();this.$MercuryThreadlistContainer5.addSubscriptions(this.$MercuryThreadlistContainer4.subscribe('threadlist-updated',function(p,q){this.$MercuryThreadlistContainer6(this.props.folder,this.props.filter);if(c('MercuryConfig').MessengerInboxRequests){this.props.folder===c('MessagingTag').INBOX&&this.$MercuryThreadlistContainer6(c('MessagingTag').PENDING,this.props.filter);this.props.folder===c('MessagingTag').PENDING&&this.$MercuryThreadlistContainer6(c('MessagingTag').INBOX,this.props.filter);}}.bind(this)));if(c('MercuryConfig').MessengerInboxRequests)this.$MercuryThreadlistContainer7(c('MessagingTag').PENDING,this.props.filter,this.$MercuryThreadlistContainer8(c('MessagingTag').PENDING)+c('MercuryThreadlistConstants').JEWEL_MORE_COUNT+1);this.$MercuryThreadlistContainer9(this.props.folder,this.props.filter);}.bind(this),'MercuryThreadlistContainer.react');};l.prototype.componentWillReceiveProps=function(m){if(m.folder!==this.props.folder||m.filter!==this.props.filter)this.$MercuryThreadlistContainer9(m.folder,m.filter);};l.prototype.componentWillUnmount=function(){this.$MercuryThreadlistContainer10();this.$MercuryThreadlistContainer11();this.$MercuryThreadlistContainer5&&this.$MercuryThreadlistContainer5.release();};l.prototype.render=function(){var m=this.props,n=m.ChildClass,o=m.folder,p=m.filter,q=babelHelpers.objectWithoutProperties(m,['ChildClass','folder','filter']),r=this.state.isSearching?this.state.threads.get(k)||[]:this.state.threads.get(o)||[];return c('React').createElement(n,babelHelpers['extends']({},q,{filter:this.props.filter,folder:o,isLoaded:!!this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer1.hasLoadedThreadlist(o,p),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onLoadMoreRequest:this.$MercuryThreadlistContainer12,onRenderThreads:this.props.onRenderThreads,onQuery:this.$MercuryThreadlistContainer13,onSearchResults:this.$MercuryThreadlistContainer14,p2pJewelBannerContainer:this.$MercuryThreadlistContainer15(),threads:r}));};l.prototype.$MercuryThreadlistContainer9=function(m,n){if(!c('MercuryConfig').MessengerInboxRequests&&m===c('MessagingTag').INBOX&&this.props.source!==c('MercuryAPIArgsSource').JEWEL)this.$MercuryThreadlistContainer16();if(!this.$MercuryThreadlistContainer17(m,n)){this.$MercuryThreadlistContainer7(m,n,this.props.threadCount||c('MercuryThreadlistConstants').JEWEL_THREAD_COUNT+3);}else if(this.state.isLoading){this.setState({isLoading:false},function(){this.$MercuryThreadlistContainer6(m,n);}.bind(this));}else this.$MercuryThreadlistContainer6(m,n);};l.prototype.$MercuryThreadlistContainer6=function(m,n,o){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;this.$MercuryThreadlistContainer10();var p=void 0;if(c('MercuryConfig').MessengerInboxRequests&&(m===c('MessagingTag').INBOX||m===c('MessagingTag').PENDING)){p=this.$MercuryThreadlistContainer3();}else p=o||this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(m,n);this.$MercuryThreadlistContainer20=this.$MercuryThreadlistContainer2.getMultiThreadMeta(p,function(q){this.setState({threads:this.state.threads.set(m,p.map(function(r){return q[r];}))});}.bind(this));};l.propTypes={ChildClass:j.func.isRequired,filter:j.string.isRequired,folder:j.string.isRequired,showCount:j.bool,showPresence:j.bool,source:j.string,threadCount:j.number,viewer:j.string.isRequired,onRenderThreads:j.func};l.defaultProps={source:c('MercuryAPIArgsSource').JEWEL};f.exports=l;}),null);
__d('ChatSidebarSheetChatOffline.react',['fbt','Link.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c('React').createElement('div',null,h._("{=Go online} to see who's available.",[h.param('=Go online',c('React').createElement(c('Link.react'),{className:'fbChatGoOnlineLink',onClick:this.props.onGoOnlineClick},h._("Turn on chat")))]));};function l(){i.apply(this,arguments);}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l;}),null);
__d('ChatSidebarSheetChatReconnectMsg.react',['fbt','ChannelConstants','Link.react','MessengerSpinner.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("No Internet Connection"));if(o==null||false===navigator.onLine){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Check your Internet connection."));}else if(o>c('ChannelConstants').WARNING_COUNTDOWN_THRESHOLD_MSEC){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. {try-again-link}",[h.param('try-again-link',c('React').createElement(c('Link.react'),{className:'fbChatReconnectLink',onClick:this.props.onManuallyConnectClick},h._("Try again")))]));}else if(o>1000){return n?p:c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h.param('seconds',Math.floor(o/1000))]));}else return n?c('React').createElement('div',null,c('React').createElement(c('MessengerSpinner.react'),{color:'grey'}),h._("Connecting...")):c('React').createElement('div',null,h._("Unable to connect to chat. Reconnecting..."));};function l(){i.apply(this,arguments);}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l;}),null);
__d('ChatSidebarSheetChatShutdownMsg.react',['fbt','ChannelConstants','CurrentUser','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c('ChannelConstants').HINT_AUTH:return c('React').createElement('div',null,h._("Your session has timed out. Please log in."));case c('ChannelConstants').HINT_MAINT:return o?c('React').createElement('div',null,h._("Messenger is currently down for maintenance.")):c('React').createElement('div',null,h._("{Chat} is currently down for maintenance.",[h.param('Chat',h._("Chat"))]));case c('ChannelConstants').HINT_CONN:default:if(!o){return c('React').createElement('div',null,h._("{Chat} is currently unavailable.",[h.param('Chat',h._("Chat"))]));}else if(c('CurrentUser').isWorkUser()){return c('React').createElement('div',null,h._("Work Chat is currently unavailable."));}else return c('React').createElement('div',null,h._("Messenger is currently unavailable."));}};function l(){i.apply(this,arguments);}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l;}),null);
__d('ChatSidebarSheet.react',['fbt','Arbiter','ChannelConnection','ChatBehavior','ChatSidebarSheetChatOffline.react','ChatSidebarSheetChatReconnectMsg.react','ChatSidebarSheetChatShutdownMsg.react','ChatVisibility','MercuryConfig','MessengerEnvironment','CSS','JSLogger','LogHistory','MercurySyncConstants','PresencePrivacy','React','SubscriptionsHandler','emptyFunction','joinClasses','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('JSLogger').create('sidebar_sheet'),l=c('LogHistory').getInstance('sidebar_sheet'),m=c('React').PropTypes;i=babelHelpers.inherits(n,c('React').PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4();}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages()});}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c('ChannelConnection').disconnected(),isOnline:c('ChatVisibility').isOnline(),notifiesUserMessages:c('ChatBehavior').notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false};}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new (c('SubscriptionsHandler'))();this.$ChatSidebarSheet1.addSubscriptions(c('ChannelConnection').subscribe([c('ChannelConnection').CONNECTED,c('ChannelConnection').SHUTDOWN,c('ChannelConnection').RECONNECTING],this.$ChatSidebarSheet3),c('ChannelConnection').subscribe([c('ChannelConnection').MUTE_WARNING,c('ChannelConnection').UNMUTE_WARNING],this.$ChatSidebarSheet4),c('PresencePrivacy').subscribe('privacy-user-presence-changed',this.$ChatSidebarSheet4),c('ChatBehavior').subscribe(c('ChatBehavior').ON_CHANGED,this.$ChatSidebarSheet4),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE,function(){l.log('invalid state fatal','{}');this.setState({syncStateInvalid:true,syncStateReconnecting:false});}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log('retry from invalid state','{}');this.$ChatSidebarSheet5();}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log('recover from invalid state','{}');this.$ChatSidebarSheet6();}.bind(this)));if(c('MercuryConfig').MR4EB)this.$ChatSidebarSheet1.addSubscriptions(c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_FAIL,function(){l.log('retry from faield net requests','{}');this.$ChatSidebarSheet5();}.bind(this)),c('Arbiter').subscribe(c('MercurySyncConstants').ARBITER_EVENT_SERVER_REQUESTS_RECOVER,function(){l.log('recover from failed network requests','{}');this.$ChatSidebarSheet6();}.bind(this)));};n.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null;}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release();};n.prototype.render=function(){var o=c('MessengerEnvironment').messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p='offline';q=this.$ChatSidebarSheet7();}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p='error';q=this.$ChatSidebarSheet8(o);}else if(!this.state.notifiesUserMessages&&!o){p='notice';q=this.$ChatSidebarSheet9();}if(this.state.channelStatus===c('ChannelConnection').RECONNECTING&&this.state.channelData<1000||this.state.syncStateReconnecting)p=c('joinClasses')(p,'reconnecting');return c('React').createElement('div',{className:c('joinClasses')(this.props.className,p)},o?null:c('React').createElement('div',{className:'img'}),c('React').createElement('div',{className:'message'},q));};n.prototype.$ChatSidebarSheet8=function(o){if(this.state.channelStatus===c('ChannelConnection').SHUTDOWN||this.state.syncStateInvalid){return c('React').createElement(c('ChatSidebarSheetChatShutdownMsg.react'),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o});}else if(this.state.channelStatus===c('ChannelConnection').RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1000)this.$ChatSidebarSheet2=c('setTimeoutAcrossTransitions')(this.$ChatSidebarSheet3.bind(this,c('ChannelConnection').RECONNECTING,p-1000),1000);return c('React').createElement(c('ChatSidebarSheetChatReconnectMsg.react'),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c('ChannelConnection').reconnect();}.bind(this)});}return null;};n.prototype.$ChatSidebarSheet7=function(){return c('React').createElement(c('ChatSidebarSheetChatOffline.react'),{onGoOnlineClick:function o(p){k.log('sidebar_go_online');c('ChatVisibility').goOnline();}});};n.prototype.$ChatSidebarSheet9=function(){return c('React').createElement('div',null,h._("Alerts are off while you use another client to chat."));};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true});};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false});};f.exports=n;}),null);
__d('chatSidebarSheetReact',['reasonReact','ChatSidebarSheet.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('ChatSidebarSheet.react'),{className:i},j);}g.make=h;}),null);
__d('messengerGraphQLSearchTypeaheadReact',['utilsRe','bs_js_boolean','reasonReact','bs_js_null_undefined','MessengerGraphQLSearchTypeahead.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){return c('reasonReact').wrapJsForReason(c('MessengerGraphQLSearchTypeahead.react'),{className:i,enableMessageSearch:c('bs_js_boolean').to_js_boolean(j),excludeGroups:c('bs_js_boolean').to_js_boolean(k),excludePages:c('bs_js_boolean').to_js_boolean(l),hasHoverState:c('bs_js_boolean').to_js_boolean(m),hideClearButton:c('utilsRe').optionBoolToNullUndefinedBoolean(n),hideResults:c('utilsRe').optionBoolToNullUndefinedBoolean(o),isFocused:c('utilsRe').optionBoolToNullUndefinedBoolean(p),onBlur:q,onChange:r,onClear:s,onFocus:t,onScrollIntoView:u,onSelect:v,placeholder:w,queryString:c('bs_js_null_undefined').from_opt(x),shouldQueryInternalBot:c('bs_js_boolean').to_js_boolean(y),shouldQueryVCEndpoint:c('bs_js_boolean').to_js_boolean(z),typeaheadViewClassName:aa,viewer:ba},ca);}g.make=h;}),null);
__d('MessengerMessageRequestsInfo.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=function k(){return c('React').createElement('div',{className:"_5u15"},i._("Open a request to get more info about who's messaging you."),' ',i._("They won't know you've seen it until you accept."));};f.exports=j;}),null);
__d('messengerMessageRequestsInfoReact',['reasonReact','MessengerMessageRequestsInfo.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('MessengerMessageRequestsInfo.react'),{},i);}g.make=h;}),null);
__d('messengerNewMessagesNoticeReact',['bs_js_boolean','reasonReact','MessengerNewMessagesNotice.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerNewMessagesNotice.react'),{isOpen:c('bs_js_boolean').to_js_boolean(i),onClick:j},k);}g.make=h;}),null);
__d('MessengerThreadListGridWrapper.react',['cx','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.label;return c('React').createElement('div',null,c('React').createElement('h2',{className:"accessible_elem"},m),c('React').createElement('ul',{'aria-label':m,role:'grid'},this.props.children));};function l(){i.apply(this,arguments);}l.propTypes={label:k.string.isRequired};f.exports=l;}),null);
__d('messengerThreadListGridWrapperReact',['reasonReact','MessengerThreadListGridWrapper.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerThreadListGridWrapper.react'),{label:i},j);}g.make=h;}),null);
__d("messengerThreadlistLinkRowReact",["cx","fbt","React","linkReact","reasonReact"],(function a(b,c,d,e,f,g,h,i){'use strict';function j(k){return c("React").createElement("li",{className:"_5l-3 _1ht1 _2ogr"},c("React").createElement("div",{className:"_2ogs"},c("reasonReact").element(0,0,c("linkReact").make(0,["_2ogt"],0,0,0,[k],0,0,0,0,0,0,0,[i._("See Filtered Requests")]))));}g.make=j;}),null);
__d('MessengerThreadlistMessageRequestsRow.react',['cx','fbt','ix','Image.react','ImmutableObject','Link.react','MercuryIDs','MercuryParticipants','MessagingTag','MessengerActions','MNAdsLogMessageUtils','React','shallowEqual'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=50,n=j("86936"),o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.$MessengerThreadlistMessageRequestsRow2=function(){return c('React').createElement('div',{className:"_5l-3 _1qt3 _5nxe"},c('React').createElement(c('Image.react'),{alt:'',height:m,src:n,width:m}),c('React').createElement('span',{className:"_5nxf"},i._({"*":"{count}"},[i.param('count',this.props.newMessageRequestThreads.length,[0])])));}.bind(this),this.$MessengerThreadlistMessageRequestsRow3=function(){var v=this.props.newMessageRequestThreads,w=i._({"someone":"From someone you may know","people":"From people you may know"},[i['enum'](v.length===1?'someone':'people',{someone:'someone',people:'people'})]),x=c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer),y=v[0].participants.find(function(aa){return aa!==x;});if(!y)return w;var z=c('MercuryParticipants').getOrFetch(y);if(!z||!z.name)return w;if(v.length>0)c('MNAdsLogMessageUtils').logAdsThreadListImpression(v[0]);return v.length===1?i._("From {name}",[i.param('name',z.name)]):i._({"*":"From {name} and {count} more"},[i.param('name',z.name),i.param('count',v.length-1,[0])]);}.bind(this),this.$MessengerThreadlistMessageRequestsRow1=function(v){v.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').PENDING);},r;}p.prototype.shouldComponentUpdate=function(q){return !c('shallowEqual')(this.props,q);};p.prototype.render=function(){var q=this.props.newMessageRequestThreads.length;if(q===0)return null;return c('React').createElement('li',{className:"_5l-3 _1ht1 _2il3 _2kt",role:'row'},c('React').createElement(c('Link.react'),{onClick:this.$MessengerThreadlistMessageRequestsRow1,className:"_1ht5 _5l-3"},this.$MessengerThreadlistMessageRequestsRow2(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6 _5nxa"},i._({"Request":"New Message Request","Requests":"New Message Requests"},[i['enum'](q===1?'Request':'Requests',{Request:'Request',Requests:'Requests'})]))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1htf _5nxb"},this.$MessengerThreadlistMessageRequestsRow3())))));};p.propTypes={newMessageRequestThreads:o.arrayOf(o.instanceOf(c('ImmutableObject'))).isRequired,viewer:o.string.isRequired};f.exports=p;}),null);
__d('messengerThreadlistMessageRequestsRowReact',['reasonReact','MessengerThreadlistMessageRequestsRow.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerThreadlistMessageRequestsRow.react'),{newMessageRequestThreads:i,viewer:j},k);}g.make=h;}),null);
__d('MessengerThreadlistNewMessageRow.react',['cx','fbt','ix','Image.react','Link.react','MercuryIDs','MercuryParticipantListRenderer','MercuryParticipants','MercuryParticipantsImage.react','MessengerActions','MessengerComposerStore','MessengerProfileImageWrapper.react','MessengerView','ReactComponentWithPureRenderMixin','PureStoreBasedStateMixin','React','ShimButton.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=50,l=j("86935"),m=c('React').PropTypes,n=c('React').createClass({displayName:'MessengerThreadlistNewMessageRow',mixins:[c('ReactComponentWithPureRenderMixin'),c('PureStoreBasedStateMixin')(c('MercuryParticipants'),c('MessengerComposerStore'))],propTypes:{isActive:m.bool,onClose:m.func.isRequired},statics:{calculateState:function o(){return {participants:c('MessengerComposerStore').getState().recipients.map(function(p){return c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(p.getUniqueID()));}).filter(function(p){return !!p;})};}},render:function o(){return c('React').createElement('li',{className:"_5l-3"+(' '+"_1ht1")+(this.props.isActive?' '+"_1ht2":'')},c('React').createElement(c('Link.react'),{onClick:this._handleClickRow,className:"_1ht5 _2il3 _5l-3"},this._renderImage(),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement('div',{className:"_1ht6"},this._renderTitle()),c('React').createElement(c('ShimButton.react'),{className:"_23ct",onClick:this.props.onClose})),c('React').createElement('div',{className:"_1qt5 _5l-3"},'\u00A0'))));},_renderImage:function o(){var p=this.state.participants;if(!p.isEmpty())return c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('MessengerProfileImageWrapper.react'),{isMessengerUser:p.size===1&&p.first().is_messenger_user,size:k,showBadge:p.size===1},c('React').createElement(c('MercuryParticipantsImage.react'),{participants:p.map(function(q){return q.id;}).slice(0,3).toArray(),size:k})));return c('React').createElement('div',{className:"_1qt3 _5l-3"},c('React').createElement(c('Image.react'),{height:k,src:l,width:k}));},_renderTitle:function o(){if(this.state.participants.isEmpty())return i._("New message");return i._("New message to {List of message recipients}",[i.param('List of message recipients',new (c('MercuryParticipantListRenderer'))().renderParticipantList(this.state.participants.toArray()))]);},_handleClickRow:function o(p){p.preventDefault();c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);}});f.exports=n;}),null);
__d('messengerThreadlistNewMessageRowReact',['bs_js_boolean','reasonReact','MessengerThreadlistNewMessageRow.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerThreadlistNewMessageRow.react'),{isActive:c('bs_js_boolean').to_js_boolean(i),onClose:j},k);}g.make=h;}),null);
__d('MercuryThreadlistRowContainer.react',['immutable','ImmutableObject','MercuryParticipants','React','StoreAndPropBasedStateMixin','shallowEqual'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').PropTypes,i=c('React').createClass({displayName:'MercuryThreadlistRowContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MercuryParticipants'))],propTypes:{ChildClass:h.func.isRequired,thread:h.instanceOf(c('ImmutableObject')).isRequired,viewer:h.string.isRequired},statics:{calculateState:function j(k){return {participants:c('immutable').Map(c('immutable').Seq(k.thread.participants).map(function(l){return [l,c('MercuryParticipants').getOrFetch(l)];}))};}},shouldComponentUpdate:function j(k,l){return !c('shallowEqual')(k,this.props)||!c('immutable').is(l.participants,this.state.participants);},render:function j(){var k=this.props,l=k.ChildClass,m=babelHelpers.objectWithoutProperties(k,['ChildClass']);return c('React').createElement(l,babelHelpers['extends']({},m,{participants:this.state.participants}));}});f.exports=i;}),null);
__d('messengerThreadlistRowSeenHeadReact',['cx','imageReact','MercuryIDs','reasonReact','joinClasses','bs_js_primitive','MercuryMessageInfo'],(function a(b,c,d,e,f,g,h){'use strict';function i(m,n,o,p){var q=o.snippet_sender;if(p){var r=p[0];if(r.author===m&&n.watermark>=r.timestamp&&!c('MercuryMessageInfo').isSending(r)){return 1- +c('MercuryMessageInfo').hasError(r);}else return 0;}else if(q!==null&&q===m){return +(n.watermark>=o.timestamp);}else return 0;}var j=c('reasonReact').statefulComponent("MessengerThreadlistRowSeenHeadReact");function k(m,n,o,p,q,r,s,t){var u=m?m[0]:"",v=j.slice();v[9]=function(){var w=+r.is_canonical,x=r.other_user_fbid;if(n){if(w!==0){if(c('bs_js_primitive').is_nil_undef(x)){return null;}else if(n[0]){return null;}else{var y=c('MercuryIDs').getParticipantIDFromUserID(s),z=c('MercuryIDs').getParticipantIDFromUserID(x),aa=q.get(z),ba=p.get(z);if(ba!==undefined&&aa!==undefined&&i(y,aa,r,o)){return c('reasonReact').element(0,0,c('imageReact').make([c('joinClasses')(u,"_2_a2")],0,[ba.image_src],0,[ba.name],0,0,[]));}else return null;}}else return null;}else return null;};return v;}var l=c('reasonReact').wrapReasonForJs(j,function(m){return k(c('bs_js_primitive').null_undefined_to_opt(m.className),c('bs_js_primitive').null_undefined_to_opt(m.isHidden),c('bs_js_primitive').null_undefined_to_opt(m.lastMessage),m.participants,m.readReceipts,m.thread,m.viewer,[]);});g.shouldRender=i;g.component=j;g.make=k;g.jsComponent=l;}),null);
__d('MessengerThreadlistRow.react',['cx','fbt','ix','Bootloader','FBRTCCore','Image.react','immutable','ImmutableObject','Link.react','mercuryBlockedParticipantsRe','MercuryIDs','MercuryMessageInfo','MercuryThreadActions','MercuryThreadSnippet.react','MercuryThreadTimestamp.react','MercuryThreadTitle.react','MercuryTimestamp','MessagingTag','MessengerAdminGroupUtils','messengerButtonReact','messengerDialogsRe','MessengerPresenceStatusUtils','messengerThreadImageReact','messengerThreadlistRowActionsReact','messengerThreadlistRowSeenHeadReact','messengerURIUtilsRe','MNAdsMessageUtils','React','ReactDOM','RTCConfig','FBRTCLogger','UserAgent','getPageIDFromThreadID','joinClasses','messengerRTLClasses'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('mercuryBlockedParticipantsRe').get(),n=c('messengerButtonReact').jsComponent,o=c('messengerThreadImageReact').jsComponent,p=c('messengerThreadlistRowActionsReact').jsComponent,q=c('messengerThreadlistRowSeenHeadReact').jsComponent,r=c('FBRTCLogger').Trigger,s=c('React').PropTypes,t=50,u=j("86913"),v=j("86914");k=babelHelpers.inherits(w,c('React').PureComponent);l=k&&k.prototype;function w(){var x,y;for(var z=arguments.length,aa=Array(z),ba=0;ba<z;ba++)aa[ba]=arguments[ba];return y=(x=l.constructor).call.apply(x,[this].concat(aa)),this.state={actionsOpen:false},this.$MessengerThreadlistRow1=0,this.$MessengerThreadlistRow2=null,this.$MessengerThreadlistRow17=function(){c('MercuryThreadActions').get()['delete'](this.props.thread.thread_id);}.bind(this),this.$MessengerThreadlistRow16=function(){c('MercuryThreadActions').get().archive(this.props.thread.thread_id);}.bind(this),this.$MessengerThreadlistRow4=function(ca){ca.preventDefault();this.props.onFocus(this.props.thread.thread_id);}.bind(this),this.$MessengerThreadlistRow5=function(ca){this.$MessengerThreadlistRow1++;if(this.$MessengerThreadlistRow2)return;this.$MessengerThreadlistRow2=setTimeout(function(){this.props.onSelect&&this.props.onSelect();this.$MessengerThreadlistRow1=0;this.$MessengerThreadlistRow2=null;}.bind(this),1000);}.bind(this),this.$MessengerThreadlistRow6=function(ca){this.$MessengerThreadlistRow1--;if(this.$MessengerThreadlistRow1===0){clearTimeout(this.$MessengerThreadlistRow2);this.$MessengerThreadlistRow2=null;}}.bind(this),this.$MessengerThreadlistRow8=function(ca){if(this.props.logClickHandler){var da=this.props.thread.is_canonical?c('MercuryIDs').getUserIDFromThreadID(this.props.thread.thread_id)||'0':this.props.thread.thread_fbid;this.props.logClickHandler&&this.props.logClickHandler(da);}this.$MessengerThreadlistRow9();this.props.onSelect&&this.props.onSelect();ca.preventDefault();this.$MessengerThreadlistRow3();}.bind(this),this.$MessengerThreadlistRow15=function(ca){this.setState({actionsOpen:ca});}.bind(this),this.$MessengerThreadlistRow19=function(ca){ca.preventDefault();ca.stopPropagation();var da=this.props.thread,ea=da.rtc_call_data,fa=da.thread_fbid;c('FBRTCCore').startGroupCall({conferenceName:'GROUP:'+fa,hasVideo:true,serverInfoData:ea.server_info_data,trigger:r.MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON});}.bind(this),this.$MessengerThreadlistRow3=function(){var ca=c('ReactDOM').findDOMNode(this.refs.link);if(ca.href){ca.setAttribute('data-href',ca.href);ca.removeAttribute('href');}}.bind(this),this.$MessengerThreadlistRow9=function(){var ca=c('ReactDOM').findDOMNode(this.refs.link),da=ca.getAttribute('data-href');if(da){ca.setAttribute('href',da);ca.removeAttribute('data-href');}}.bind(this),y;}w.prototype.componentDidMount=function(){this.$MessengerThreadlistRow3();};w.prototype.componentDidUpdate=function(x){if(this.props.isFocused)if(!x.isFocused){if(this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus();}else c('ReactDOM').findDOMNode(this.refs.link).focus();}else if(!x.isActionsFocused&&this.props.isActionsFocused){c('ReactDOM').findDOMNode(this.refs.actions.refs.button).focus();}else if(x.isActionsFocused&&!this.props.isActionsFocused)c('ReactDOM').findDOMNode(this.refs.link).focus();};w.prototype.render=function(){var x=this.props,y=x.isActive,z=x.isActionsFocused,aa=x.isTabbable,ba=x.participants,ca=x.thread,da=x.viewer,ea=ca.unread_count>0,fa=c('messengerURIUtilsRe').getURIForThreadID(ca.thread_id);return c('React').createElement('li',{'aria-live':ea?'polite':null,'aria-relevant':y||ea?'additions text':null,onFocus:this.$MessengerThreadlistRow4,className:"_5l-3"+(' '+"_1ht1")+(ca.folder===c('MessagingTag').PENDING?' '+"_4as3":'')+(this.props.isActive?' '+"_1ht2":'')+(ea?' '+"_1ht3":'')+(this.state.actionsOpen?' '+"_13aa":'')+(this.props.isMuted?' '+"_569x":'')+(this.props.isFocused?' '+"_23_m":'')+(ea&&c('UserAgent').isBrowser('Chrome')&&c('UserAgent').isPlatform('Mac')?' '+"_5fx8":''),onDragEnter:y?null:this.$MessengerThreadlistRow5,onDragLeave:y?null:this.$MessengerThreadlistRow6,role:'row',ref:function(ga){return ga&&this.props.registerThreadRefs&&this.props.registerThreadRefs(ga);}.bind(this),tabIndex:-1},c('React').createElement('div',{className:"_5l-3 _1ht5",id:this.$MessengerThreadlistRow7(ca.thread_id),role:'gridcell',tabIndex:-1},c('React').createElement(c('Link.react'),{href:fa.toString(),onBlur:this.$MessengerThreadlistRow3,onClick:this.$MessengerThreadlistRow8,onFocus:this.$MessengerThreadlistRow9,className:"_1ht5 _2il3 _5l-3",s:'true',ref:'link',role:'link',tabIndex:aa&&!z?0:-1},c('React').createElement('div',{'aria-hidden':true,className:"_1qt3 _5l-3"},c('React').createElement(o,{participants:ba,size:t,thread:ca,viewer:da})),c('React').createElement('div',{className:"_1qt4 _5l-m"},c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadTitle.react'),{className:"_1ht6",showUnreadCount:false,thread:ca,useShortName:false,viewer:da}),c('React').createElement('div',null,c('MNAdsMessageUtils').isAdsMessageRequest(ca)?c('MNAdsMessageUtils').renderAdsMessageRequestStatus():this.$MessengerThreadlistRow10(ca))),c('React').createElement('div',{className:"_1qt5 _5l-3"},c('React').createElement(c('MercuryThreadSnippet.react'),{className:c('joinClasses')("_1htf",c('messengerRTLClasses')(ca.snippet,true)),participants:ba,shouldRenderYou:true,thread:ca,viewer:da})),this.$MessengerThreadlistRow11(),this.$MessengerThreadlistRow12()))),this.$MessengerThreadlistRow13());};w.prototype.$MessengerThreadlistRow13=function(){if(this.props.showActions===false)return null;var x=this.props,y=x.isActionsFocused,z=x.isTabbable,aa=x.participants,ba=x.thread,ca=x.viewer,da=c('MessengerPresenceStatusUtils').getStatusFromCanonicalThread(this.props.participants,ba),ea=da&&da.contact,fa=m.isMessageBlocked(ba),ga=c('MessengerAdminGroupUtils').isJoinableThread(ba),ha=c('MessengerAdminGroupUtils').isGroupChat(ba),ia=ba.unread_count>0;return c('React').createElement('div',{role:'gridcell'},c('React').createElement('div',{'aria-describedby':this.$MessengerThreadlistRow7(ba.thread_id),'aria-haspopup':'true','aria-label':i._("Actions"),className:"_2j6 _5l-3",tabIndex:z&&y?0:-1,role:'button'},c('React').createElement(q,{className:"_5bli",isHidden:this.state.actionsOpen,lastMessage:this.props.lastMessage,participants:aa,readReceipts:this.props.readReceipts,thread:ba,viewer:ca}),this.$MessengerThreadlistRow14(),c('React').createElement(p,{className:"_5blh",contact:ea,isGroupChat:ha,isJoinableThread:ga,isMuted:this.props.isMuted,isOpen:this.state.actionsOpen,isUnread:ia,isBlocked:fa,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onToggle:this.$MessengerThreadlistRow15,onUnmute:this.props.onUnmute,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showLeaveGroup:this.props.showLeaveGroup,showMute:true,showBlock:ba.is_canonical_user&&ba.other_user_fbid&&ca!==ba.other_user_fbid,showReport:c('getPageIDFromThreadID')(this.props.thread.thread_id),tabIndex:-1,thread:ba,ref:'actions'}),c('React').createElement('div',{className:"_56ck"})));};w.prototype.$MessengerThreadlistRow14=function(){var x=this.props.lastMessage;if(this.state.actionsOpen||!x)return null;var y=c('MercuryMessageInfo').isSending(x),z=c('MercuryMessageInfo').hasError(x);if(!y&&!z)return null;return c('React').createElement(c('Image.react'),{className:"_wtw"+(y?' '+"_3qh2":''),src:y?v:u});};w.prototype.$MessengerThreadlistRow10=function(x){return c('React').createElement(c('MercuryThreadTimestamp.react'),{className:"_1ht7",time:x.timestamp,title:c('MercuryTimestamp').getAbsoluteTimestamp(x.timestamp),text:c('MercuryTimestamp').getRelativeTimestamp(x.timestamp)});};w.prototype.$MessengerThreadlistRow11=function(){if(this.props.thread.folder!==c('MessagingTag').PENDING)return null;return c('React').createElement('div',{className:"_5l-3"},c('React').createElement(n,{className:"_2pii",type:'primary',label:i._("Accept"),onClick:function(x){c('MercuryThreadActions').get().changeFolder(this.props.thread.thread_id,c('MessagingTag').INBOX);x.stopPropagation();}.bind(this)}),c('React').createElement(n,{className:"_2pii",type:'faded',label:i._("Decline"),onClick:function(){c('Bootloader').loadModules(["messengerDeleteDialogReact"],function(x){var y=x.jsComponent;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(y,{onArchive:this.$MessengerThreadlistRow16,onDelete:this.$MessengerThreadlistRow17,onToggle:this.$MessengerThreadlistRow18});}.bind(this));}.bind(this),'MessengerThreadlistRow.react');}.bind(this)}));};w.prototype.$MessengerThreadlistRow18=function(x){if(!x)c('messengerDialogsRe').removeDialog();};w.prototype.$MessengerThreadlistRow12=function(){if(!c('RTCConfig').RtcConferencingGK||!this.props.thread.rtc_call_data||this.props.thread.rtc_call_data.call_state==='NO_ONGOING_CALL')return null;return c('React').createElement(n,{className:"_4ry5",label:i._("Join Call"),onClick:this.$MessengerThreadlistRow19,type:'primary'});};w.prototype.$MessengerThreadlistRow7=function(x){return 'row_header_id_'+x;};w.propTypes={isActive:s.bool.isRequired,isActionsFocused:s.bool,isFocused:s.bool,isMuted:s.bool.isRequired,lastMessage:s.instanceOf(c('ImmutableObject')),logClickHandler:s.func,onArchive:s.func.isRequired,onDelete:s.func.isRequired,onMarkRead:s.func.isRequired,onMarkSpam:s.func.isRequired,onMarkUnread:s.func.isRequired,onMute:s.func.isRequired,onSelect:s.func.isRequired,onUnmute:s.func.isRequired,onBlock:s.func.isRequired,onUnblock:s.func.isRequired,participants:s.instanceOf(c('immutable').Map).isRequired,readReceipts:s.instanceOf(c('immutable').OrderedMap).isRequired,registerThreadRefs:s.func,thread:s.instanceOf(c('ImmutableObject')).isRequired,viewer:s.string.isRequired};f.exports=w;}),null);
__d('MessengerThreadlistRowContainer.react',['ImmutableObject','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercuryMessages','mercuryRogerRe','MercuryThreadActions','MercuryThreadInfo','MercuryThreadlistRowContainer.react','MercuryTriodeSourceUtil','MessagingSourceEnum','MessengerActions','messengerDialogsRe','messengerConfirmLeaveGroupDialogReact','MessengerAdminGroupUtils','MessengerThreadlistRow.react','MNPlatformTagsDataManager','ReactComponentWithPureRenderMixin','React','ReactDOM','StoreAndPropBasedStateMixin'],(function a(b,c,d,e,f,g){'use strict';var h=c('mercuryRogerRe').get(),i=c('messengerConfirmLeaveGroupDialogReact').jsComponent,j=c('React').PropTypes,k=c('React').createClass({displayName:'MessengerThreadlistRowContainer',mixins:[c('ReactComponentWithPureRenderMixin'),c('StoreAndPropBasedStateMixin')(c('MercuryMessages'),h)],propTypes:{isActive:j.bool.isRequired,isTabbable:j.bool,showActions:j.bool,thread:j.instanceOf(c('ImmutableObject')).isRequired,viewer:j.string.isRequired,onOverrideSelect:j.func},statics:{calculateState:function l(m){var n=c('MercuryMessages').getForFBID(m.viewer),o=m.thread.thread_id,p=n.getThreadMessagesRangeNow(o,0,1)[0];return {lastMessage:p||null,readReceipts:h.getSeenTimestamps(o)};}},componentDidUpdate:function l(m){if(this.props.isActive&&!m.isActive)this.props.onScrollIntoView(c('ReactDOM').findDOMNode(this));},render:function l(){return c('React').createElement(c('MercuryThreadlistRowContainer.react'),babelHelpers['extends']({},this.props,{ChildClass:c('MessengerThreadlistRow.react'),isMuted:c('MercuryThreadInfo').isMuted(this.props.thread),lastMessage:this.state.lastMessage,onArchive:this._handleArchive,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onSelect:this._handleSelect,onUnmute:this._handleUnmute,onBlock:this._handleBlock,onUnblock:this._handleUnblock,readReceipts:this.state.readReceipts,showActions:this.props.showActions,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical}));},_handleArchive:function l(){var m=this.props.isActive;this._getThreadActions().archive(this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null);},_handleDelete:function l(){var m=this.props.isActive;this._getThreadActions()['delete'](this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null);},_handleMarkRead:function l(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function l(){var m=this.props.isActive;this._getThreadActions().markSpam(this.props.thread.thread_id);m&&c('MessengerActions').selectThread(null);},_handleMarkUnread:function l(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function l(m){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,m);},_handleSelect:function l(){if(this.props.onOverrideSelect){this.props.onOverrideSelect(this.props.thread);return;}c('MessengerActions').selectThread(this.props.thread.thread_id);var m=c('MercuryIDs').getUserIDFromThreadID(this.props.thread.thread_id);c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(c('MessagingSourceEnum').MESSENGER_WEB_SEARCH,m);},_handleUnmute:function l(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleLeaveGroup:function l(){var m,n=this;if(this.props.viewer)(function(){var o=c('MessengerAdminGroupUtils').isViewerAdmin(n.props.thread.admin_ids,n.props.viewer);c('messengerDialogsRe').showDialog(function(){return c('React').createElement(i,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:o,thread:this.props.thread});}.bind(n));})();},_handleBlock:function l(){this._getThreadActions().blockOnMessengerDotCom(this.props.thread.thread_id);},_handleUnblock:function l(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id);},_onLeaveGroupConfirm:function l(){if(!c('MercuryThreadInfo').isEmptyLocalThread(this.props.thread)){var m=this._getMessageObject().constructLogMessageObject(c('MercuryTriodeSourceUtil').getMercuryTriodeSource(),this.props.thread.thread_id,c('MercuryLogMessageType').UNSUBSCRIBE,{removed_participants:[c('MercuryIDs').getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(m);}},_getThreadActions:function l(){return c('MercuryThreadActions').getForFBID(this.props.viewer);},_getMessageActions:function l(){return c('MercuryMessageActions').getForFBID(this.props.viewer);},_getMessageObject:function l(){return c('MercuryMessageObject').getForFBID(this.props.viewer);}});f.exports=k;}),null);
__d('messengerThreadlistRowContainerReact',['utilsRe','reasonReact','MessengerThreadlistRowContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o,p,q){return c('reasonReact').wrapJsForReason(c('MessengerThreadlistRowContainer.react'),{isActive:c('utilsRe').optionBoolToBoolean(i),isFocused:c('utilsRe').optionBoolToBoolean(j),isActionsFocused:c('utilsRe').optionBoolToBoolean(k),isTabbable:c('utilsRe').optionBoolToBoolean(l),onFocus:m,onScrollIntoView:n,thread:o,viewer:p},q);}g.make=h;}),null);
__d('messengerThreadlistReact',['cx','csx','fbt','bs_array','bs_block','bs_curry','React','Parent','utilsRe','linkReact','bs_caml_array','bs_pervasives','CurrentUser','reasonReact','bs_js_primitive','MessagingTag','MessengerView','MercuryFilters','MessengerActions','MercuryThreadInfo','KeyEventController','SubscriptionsHandler','chatSidebarSheetReact','messengerSpinnerReact','MessengerTypeaheadUtils','MessengerComposerActions','MessengerSearchFunnelLogger','messengerNewMessagesNoticeReact','messengerThreadlistLinkRowReact','messengerFlexScrollableAreaReact','messengerMessageRequestsInfoReact','messengerThreadListGridWrapperReact','messengerGraphQLSearchTypeaheadReact','messengerThreadlistRowContainerReact','messengerThreadlistNewMessageRowReact','messengerThreadlistMessageRequestsRowReact'],(function a(b,c,d,e,f,g,h,i,j){'use strict';function k(ca,da,ea){if(ea){if(ca.length>0&&da.length>0){var fa=c('bs_caml_array').caml_array_get(ca,0),ga=c('bs_caml_array').caml_array_get(da,0);if(fa.unread_count>0&&fa.thread_id!==ea[0]&&fa!==ga){return +c('MercuryThreadInfo').isMuted(fa);}else return 0;}else return 0;}else return 0;}function l(ca,da){var ea=+ca.ctrlKey,fa=+ca.metaKey,ga=+ca.shiftKey,ha=+c('KeyEventController').filterEventTypes(ca,da),ia=+c('KeyEventController').filterEventTargets(ca,da),ja=c('Parent').bySelector(ca.target,"._150g");if(ea!==0||fa!==0||ga!==0||!(ha!==0&&ia!==0&&ja===null)){return 0;}else return 1;}function m(ca,da){var ea=da[3].slice();return c('bs_block').__(0,[(ea[0]=[ca],ea)]);}function n(ca,da){var ea=da[4],fa=da[3],ga=ea[0].find(function(ka){var la=fa[0];if(la&&ka.thread_id===la[0]){return 1;}else return 0;}),ha=ga!==undefined?ea[0].indexOf(ga):-1,ia=c('bs_pervasives').min(c('bs_pervasives').max(ha+ca|0,0),ea[0].length-1|0),ja=fa.slice();return c('bs_block').__(0,[(ja[0]=[c('bs_caml_array').caml_array_get(ea[0],ia).thread_id],ja)]);}function o(ca,da,ea){da.preventDefault();var fa=ea[3].slice();return c('bs_block').__(0,[(fa[2]=ca,fa)]);}function p(ca,da){var ea=da[3];ca.preventDefault();var fa=ea[6];if(fa)fa[0].scrollToTop();var ga=ea.slice();return c('bs_block').__(0,[(ga[4]=0,ga)]);}function q(ca,da){c('MessengerSearchFunnelLogger').startFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");var ea=da[3].slice();return c('bs_block').__(0,[(ea[1]=1,ea)]);}function r(ca,da){var ea=da[3];c('MessengerSearchFunnelLogger').endFunnel("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");return c('bs_block').__(0,[[ea[0],0,ea[2],"",ea[4],ea[5],ea[6]]]);}function s(ca,da){var ea=da[3].slice();return c('bs_block').__(0,[(ea[3]=ca.target.value,ea)]);}function t(ca,da){var ea=da[3][6];if(ea){c('MessengerTypeaheadUtils').scrollEntryIntoView(ca,ea[0]);return 0;}else return 0;}function u(ca){ca.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').OTHER);return 0;}function v(ca){ca.preventDefault();c('MessengerActions').changeFolder(c('MessagingTag').INBOX);c('MessengerActions').changeFilter(c('MercuryFilters').ALL);return 0;}function w(ca,da,ea,fa,ga){var ha=ca&&ca[0]===ga.thread_id?1:0,ia=ea[0],ja=ia?1:0,ka=ea[0],la=ka&&ka[0]===ga.thread_id?1:0,ma=ha!==0?ja!==0&&la===0?0:1:la!==0?1:0;return c('reasonReact').element([ga.thread_id],0,c('messengerThreadlistRowContainerReact').make([ha],[la],[ea[2]],[ma],c('bs_curry')._1(fa[2],m),c('bs_curry')._1(fa[1],t),ga,da,[]));}function x(ca,da){var ea=da[3].slice();return c('bs_block').__(1,[(ea[6]=ca!==null?[ca]:0,ea)]);}function y(ca,da){var ea=ca[1],fa=ca[0];c('MessengerActions').selectThread(fa,ea);c('MessengerSearchFunnelLogger').logResultSelection("WWW_MESSENGER_SEARCH_SESSION_FUNNEL",da[3][3],fa,ea);return 0;}var z=c('reasonReact').statefulComponentWithRetainedProps("MessengerThreadlistReact");function aa(ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa){var ra=function ya(za,ab,bb){var cb=bb[4],db=cb[0],eb=typeof za==="number"?za!==0?db.length-1|0:(-db.length|0)-1|0:za[0],fb=+ab.altKey,gb=c('Parent').bySelector(ab.target,"._4rv3"),hb=bb[3][0],ib=c('Parent').bySelector(ab.target,"._1ht1"),jb=0;if(fb!==0){if(gb!==null){var kb=cb[4];if(kb!==0){if(eb===1&&db.length>0){c('MessengerActions').selectThread(c('bs_caml_array').caml_array_get(db,0).thread_id,null);return 0;}else return 0;}else{var lb=db.findIndex(function(nb){var ob=cb[2];if(ob&&ob[0]===nb.thread_id){return 1;}else return 0;});if(lb!==-1){var mb=c('bs_caml_array').caml_array_get(db,lb+eb|0);c('MessengerActions').selectThread(mb.thread_id);if(cb[1]&&lb===0&&eb===-1)c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);if(lb===(db.length-1|0)){return c('bs_curry')._1(cb[3],0);}else return 0;}else return 0;}}else jb=1;}else jb=1;if(jb===1)if(hb&&ib!==null){ab.preventDefault();return c('bs_curry')._2(bb[2],n,eb);}else return 0;},sa=function ya(za,ab){c('MessengerSearchFunnelLogger').logClearQuery("WWW_MESSENGER_SEARCH_SESSION_FUNNEL");if(da)c('bs_curry')._1(da[0],0);var bb=ab[3].slice();return c('bs_block').__(0,[(bb[3]="",bb)]);},ta=function ya(za,ab){var bb=ab[3];if(bb[1]){return 0;}else{var cb=bb[6];if(cb)if(cb[0].isScrolledToBottom())c('bs_curry')._1(la,0);var db=bb[6],eb=bb[4];if(db){if(eb!==0){if(db[0].isScrolledToTop()){var fb=bb.slice();return c('bs_block').__(0,[(fb[4]=0,fb)]);}else return 0;}else return 0;}else return 0;}},ua=function ya(za,ab){za.stopPropagation();c('MessengerComposerActions').exitComposeState();if(ja){var bb=oa.find(function(cb){return +(cb.unread_count===0);});c('MessengerActions').selectThread(bb!==undefined?bb.thread_id:null,null);return 0;}else return 0;},va=function ya(za,ab){za.preventDefault();return c('bs_curry')._1(la,0);},wa=function ya(za,ab,bb){var cb=0,db=0;if(za){if(za[0]!==0){return null;}else db=2;}else db=2;if(db===2)if(ab){if(ab[0]!==0){return c('React').createElement("div",{className:"_19hf"},c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[])));}else cb=1;}else cb=1;if(cb===1)return c('React').createElement("div",{className:"_19hf"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,["#"],[c('bs_curry')._1(bb[1],va)],0,0,0,0,[-1],0,0,[j._("Show Older")])));},xa=function ya(za,ab){if(oa.length){return c('reasonReact').element(0,0,c('messengerThreadListGridWrapperReact').make(j._("Conversation List"),[c('bs_array').map(function(fb){return w(ca,pa,za,ab,fb);},oa)]));}else{var bb;if(fa===c('MessagingTag').INBOX){var cb=+(ea===c('MercuryFilters').UNREAD);bb=cb!==0?j._("No unread messages found."):j._("No messages found.");}else bb=fa===c('MessagingTag').PENDING?j._("No message requests found."):j._("No filtered requests found.");var db=+(fa!==c('MessagingTag').INBOX||ea!==c('MercuryFilters').ALL),eb=db!==0?c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,0,[v],0,0,0,0,0,0,0,[j._("Return to inbox.")])):null;return c('React').createElement("div",{className:"_3blk"},bb,c('React').createElement("div",{className:"_3bll"},eb));}};return [z[0],z[1],z[2],function(ya){var za=ya[3],ab=za[6],bb=ab?+ab[0].isScrolledToTop():0,cb=k(oa,ya[4][0],ca),db=0;if(bb!==0){db=1;}else if(cb!==0){if(ma){var eb=ma[0],fb=+(eb.length===0);return [za[0],za[1],za[2],fb!==0?eb:za[3],1,za[5],za[6]];}else return za;}else db=1;if(db===1)if(ma){var gb=ma[0],hb=+(gb.length===0);return [za[0],za[1],za[2],hb!==0?gb:za[3],za[4]&&1-bb,za[5],za[6]];}else return za;},function(ya){var za=new (c('SubscriptionsHandler'))(),ab=[-1],bb=[1],cb=[-5],db=[5];za.addSubscriptions(c('KeyEventController').registerKey("UP",c('bs_curry')._1(ya[1],function(fb,gb){return ra(ab,fb,gb);}),l),c('KeyEventController').registerKey("DOWN",c('bs_curry')._1(ya[1],function(fb,gb){return ra(bb,fb,gb);}),l),c('KeyEventController').registerKey("PAGE_UP",c('bs_curry')._1(ya[1],function(fb,gb){return ra(cb,fb,gb);})),c('KeyEventController').registerKey("PAGE_DOWN",c('bs_curry')._1(ya[1],function(fb,gb){return ra(db,fb,gb);})),c('KeyEventController').registerKey("HOME",c('bs_curry')._1(ya[1],function(fb,gb){return ra(0,fb,gb);})),c('KeyEventController').registerKey("END",c('bs_curry')._1(ya[1],function(fb,gb){return ra(1,fb,gb);})),c('KeyEventController').registerKey("LEFT",c('bs_curry')._1(ya[2],function(fb,gb){return o(0,fb,gb);})),c('KeyEventController').registerKey("RIGHT",c('bs_curry')._1(ya[2],function(fb,gb){return o(1,fb,gb);})));var eb=ya[3].slice();return c('bs_block').__(1,[(eb[5]=[za],eb)]);},function(ya){var za=ya[1],ab=ya[0],bb=+(za[3][1]!==ab[3][1]),cb=ga&&1-ab[4][1],db=za[3][6];if(bb!==0&&cb!==0&&db){db[0].scrollToTop();return 0;}else return 0;},function(ya){var za=ya[3][5];if(za){za[0].release();return 0;}else return 0;},z[7],z[8],function(ya){var za=ya[3],ab=za[4]&&1-za[1],bb=j._("Conversations"),cb=ma?1:0,db=function kb(lb,mb){return c('bs_curry')._2(ya[1],y,[lb,mb]);},eb=+(fa===c('MessagingTag').INBOX),fb;if(eb!==0){var gb=+c('CurrentUser').isWorkUser();fb=c('reasonReact').element(0,0,c('messengerGraphQLSearchTypeaheadReact').make("_5iwm"+(za[1]||+(za[3].length>0)?' '+"_5iwn":'')+(' '+"_150g"),1,0,0,0,[+(za[3]==="")&&1-cb],[cb],[za[1]],c('bs_curry')._1(ya[2],r),c('bs_curry')._1(ya[2],s),c('bs_curry')._1(ya[2],sa),c('bs_curry')._1(ya[2],q),c('bs_curry')._1(ya[1],t),db,gb!==0?j._("Search Work Chat"):j._("Search Messenger"),[za[3]],1,1,"_11_d",pa,[]));}else fb=null;var hb=+(fa===c('MessagingTag').PENDING),ib=+(fa===c('MessagingTag').INBOX&&ka.length>0),jb=+(fa===c('MessagingTag').PENDING);return c('React').createElement("div",{className:"_2xhi"},c('reasonReact').element(0,0,c('chatSidebarSheetReact').make("_p0g",[])),c('reasonReact').element(0,0,c('messengerNewMessagesNoticeReact').make(ab,c('bs_curry')._1(ya[2],p),[])),c('reasonReact').element(0,[c('bs_curry')._1(ya[0],x)],c('messengerFlexScrollableAreaReact').make([c('bs_curry')._1(ya[2],ta)],[fb,hb!==0?c('reasonReact').element(0,0,c('messengerMessageRequestsInfoReact').make([])):null,c('React').createElement("div",{"aria-label":bb,className:za[1]&&1-cb?"accessible_elem":'',role:"navigation"},ib!==0?c('reasonReact').element(0,0,c('messengerThreadlistMessageRequestsRowReact').make(ka,pa,[])):null,ga!==0?c('reasonReact').element(0,0,c('messengerThreadlistNewMessageRowReact').make(ja,c('bs_curry')._1(ya[1],ua),[])):null,xa(za,ya),jb!==0?c('messengerThreadlistLinkRowReact').make(u):null,na?c('bs_curry')._1(na[0],0):wa(ha,ia,ya))])));},function(){return [0,0,0,"",0,0,0];},z[11],[oa,ga,ca,la,ja]];}var ba=c('reasonReact').wrapReasonForJs(z,function(ca){var da=c('utilsRe').nullUndefinedBooleanToOptionBool(ca.isComposing);return aa(c('bs_js_primitive').null_undefined_to_opt(ca.activeThreadID),c('bs_js_primitive').null_undefined_to_opt(ca.clearQuery),ca.filter,ca.folder,da?da[0]:0,c('utilsRe').nullUndefinedBooleanToOptionBool(ca.isLoaded),c('utilsRe').nullUndefinedBooleanToOptionBool(ca.isLoading),+ca.isNewMessageActive,ca.newMessageRequestThreads,ca.onLoadMoreRequest,c('bs_js_primitive').null_undefined_to_opt(ca.queryString),c('bs_js_primitive').null_undefined_to_opt(ca.renderLoadMore),ca.threads,ca.viewer,[]);});g.hasNewUnreadMessages=k;g.filterKeyEvent=l;g.handleThreadFocus=m;g.updateThreadFocus=n;g.handleActionsFocus=o;g.handleNewMessageNoticeClick=p;g.handleFocus=q;g.handleBlur=r;g.handleChange=s;g.handleScrollIntoView=t;g.handleFilteredRequestsClick=u;g.handleReturnToInboxClick=v;g.renderThread=w;g.setScrollable=x;g.handleSelect=y;g.component=z;g.make=aa;g.jsComponent=ba;}),null);
__d('MessengerRecentContainer.react',['MercuryAPIArgsSource','MercuryThreadlistContainer.react','MessengerComposerSteps','MessengerComposerStore','messengerThreadlistReact','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerThreadlistReact').jsComponent,i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerRecentContainer',mixins:[c('PureStoreBasedStateMixin')(c('MessengerComposerStore'))],propTypes:{activeThreadID:i.string,filter:i.string.isRequired,folder:i.string.isRequired,viewer:i.string.isRequired},statics:{calculateState:function k(){return {isComposing:c('MessengerComposerStore').getState().step!==c('MessengerComposerSteps').NULL};}},render:function k(){return c('React').createElement(c('MercuryThreadlistContainer.react'),{ChildClass:h,activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isComposing:this.state.isComposing,isNewMessageActive:this.props.isNewMessageActive,source:c('MercuryAPIArgsSource').WEBMESSENGER,viewer:this.props.viewer});}});f.exports=j;}),null);
__d('MessengerSearchContainer.react',['cx','fbt','Link.react','MessengerActions','MessengerSpinner.react','messengerThreadlistReact','MessengerThreadSearchActions','MessengerThreadSearchStore','MessengerView','React','StoreAndPropBasedStateMixin','emptyFunction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('messengerThreadlistReact').jsComponent,k=c('React').PropTypes,l=c('React').createClass({displayName:'MessengerSearchContainer',mixins:[c('StoreAndPropBasedStateMixin')(c('MessengerThreadSearchStore'))],propTypes:{activeThreadID:k.string,filter:k.string.isRequired,folder:k.string.isRequired,isComposing:k.bool,isLoaded:k.bool,isLoading:k.bool,isNewMessageActive:k.bool,viewer:k.string.isRequired},statics:{calculateState:function m(n){var o=c('MessengerThreadSearchStore').getState();return {threads:o.threads?o.threads.toArray():[],threadsExhausted:o.threadsExhausted,loading:o.loading,query:o.query};}},_subscriptions:null,render:function m(){return c('React').createElement(j,babelHelpers['extends']({},this.props,{clearQuery:this._handleClear,isLoaded:!this.state.loading&&!!this.state.threads,isLoading:this.state.loading,isSearching:false,newMessageRequestThreads:[],onLoadMoreRequest:c('MessengerThreadSearchActions').loadMoreThreads,onQuery:c('MessengerActions').changeQueryAll,onSearchResults:c('emptyFunction'),p2pJewelBannerContainer:null,queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,threads:this.state.threads}));},_renderLoadMoreLink:function m(){if(this.state.threadsExhausted)return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:this._handleClear},i._("No conversations found")));if(this.state.loading)return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('MessengerSpinner.react'),null));return c('React').createElement('div',{className:"_19hf"},c('React').createElement(c('Link.react'),{href:'#',onClick:c('MessengerThreadSearchActions').loadMoreThreads,tabIndex:-1},i._("Load More")));},_handleClear:function m(){c('MessengerActions').changeMasterView(c('MessengerView').MASTER.RECENT);}});f.exports=l;}),null);
__d('messengerDirectRe',['reasonReact','bs_js_primitive','MessengerDirect'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('MessengerDirect').module;if(c('bs_js_primitive').is_nil_undef(j)){return null;}else return c('reasonReact').element(0,0,c('reasonReact').wrapJsForReason(j,{viewer:i},[]));}g.make=h;}),null);
__d("XMessengerDotComSpoofIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/fb_iframe_target\/",{gk_spoof:{type:"String"}});}),null);
__d("XSpoofMessengerDotComIFrameController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/spoof\/messenger_dot_com_iframe\/",{redirect_uri:{type:"String",required:true}});}),null);
__d('MessengerSpoof',['Arbiter','DOM','JSXDOM','URI','XSpoofMessengerDotComIFrameController','XMessengerDotComSpoofIFrameController'],(function a(b,c,d,e,f,g){'use strict';var h=6000;function i(k){var l=c('JSXDOM').iframe({src:j().toString(),width:0,height:0});c('DOM').appendContent(document.body,l);c('Arbiter').subscribeOnce('messengerdotcom_spoof',function(){c('DOM').remove(l);k();});setTimeout(function(){c('Arbiter').inform('messengerdotcom_spoof');},h);}function j(){var k=new (c('URI'))(document.URL),l=c('XMessengerDotComSpoofIFrameController').getURIBuilder().getURI().getQualifiedURI().toString(),m=c('XSpoofMessengerDotComIFrameController').getURIBuilder().setString('redirect_uri',l).getURI();return m.setDomain(k.getDomain().replace('messenger.com','facebook.com')).setPort(k.getPort()).setProtocol('https');}f.exports={init:i};}),null);
__d('ServiceWorkerLoginAndLogout',['ClientServiceWorkerMessage'],(function a(b,c,d,e,f,g){function h(j){new (c('ClientServiceWorkerMessage'))(j,null).sendViaController();}var i={login:function j(){h('login');},logout:function j(){h('logout');}};f.exports=i;}),null);
__d("XMessengerDotComLogoutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/logout\/",{next:{type:"String"}});}),null);
__d('abstractPopoverButtonReact',['reasonReact','bs_js_null_undefined','AbstractPopoverButton.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n){return c('reasonReact').wrapJsForReason(c('AbstractPopoverButton.react'),{config:c('bs_js_null_undefined').from_opt(i),haschevron:c('bs_js_null_undefined').from_opt(j),image:c('bs_js_null_undefined').from_opt(k),label:c('bs_js_null_undefined').from_opt(l),maxwidth:c('bs_js_null_undefined').from_opt(m)},n);}g.make=h;}),null);
__d('chatEmojiSkinTonePreferencePickerReact',['reasonReact','ChatEmojiSkinTonePreferencePicker.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('ChatEmojiSkinTonePreferencePicker.react'),{currentPreference:i,onSelect:j},k);}g.make=h;}),null);
__d('messengerSettingsDialogReact',['cx','fbt','bs_array','bs_block','bs_curry','React','linkReact','bs_js_boolean','MercuryIDs','CurrentUser','reasonReact','EmojiActions','bs_js_primitive','EmojiStateStore','MessengerConfig','PresencePrivacy','messengerDialogsRe','MercuryParticipants','messengerDialogReact','SubscriptionsHandler','messengerSpinnerReact','MessengerSettingsStore','MessengerSettingsActions','messengerViewerCardReact','messengerCheckboxInputReact','MessengerDesktopNotifications','chatEmojiSkinTonePreferencePickerReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('reasonReact').statefulComponent("MessengerSettingsDialogReact");function k(z){if(z){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function l(){return c('messengerDialogsRe').removeDialog(0);}function m(z,aa){var ba=aa[3][1];c('PresencePrivacy').setVisibility(ba!==0?c('PresencePrivacy').OFFLINE:c('PresencePrivacy').ONLINE);return 0;}function n(z,aa){var ba=z[2];if(ba){return c('reasonReact').element(0,0,c('messengerViewerCardReact').make(["_3xld"],z[1],[c('bs_curry')._1(aa,m)],[ba[0]],[]));}else return c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[]));}function o(z){var aa=z.target;c('MessengerSettingsActions').changeSettings({constrained_width:aa.checked});return 0;}function p(z){if(c('MessengerConfig').ConstrainWidth){return c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Max Width")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('messengerCheckboxInputReact').make(+z[3].constrained_width,o,[])),c('React').createElement("span",{className:"_1pr_"},i._("Constrained"))));}else return null;}function q(z,aa){var ba=aa[3].slice();return c('bs_block').__(0,[(ba[4]=1,ba)]);}function r(z,aa){c('MessengerSettingsActions').changeDesktopNotifs(c('bs_js_boolean').to_js_boolean(1- +aa[3][3].desktopNotifsEnabled),c('bs_curry')._1(aa[2],q));return 0;}function s(z){var aa=z[3];if(aa[4]){return i._("You can allow Messenger to send you desktop notifications from your browser preferences.");}else return c('bs_array').of_list([c('reasonReact').element(["notifications-checkox"],0,c('messengerCheckboxInputReact').make(+aa[3].desktopNotifsEnabled&&aa[5],c('bs_curry')._1(z[1],r),[])),[c('React').createElement("span",{key:"notifications-checkbox-label",className:"_1pr_"},i._("Desktop notifications enabled")),0]]);}function t(z){if(c('MessengerDesktopNotifications').isSupported()){return c('React').createElement("div",{className:"_374b"+(z[3][4]?' '+"_2bd0":'')},c('React').createElement("div",{className:"_374c"},i._("Notifications")),c('React').createElement("div",{className:"_374d"},s(z)));}else return null;}function u(){if(c('CurrentUser').isWorkUser()){return null;}else return c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Blocking")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('linkReact').make(0,0,0,0,["https://www.facebook.com/settings?tab=blocking"],0,0,0,0,0,0,["_blank"],0,[i._("Manage on Facebook")]))));}function v(z,aa){var ba=aa[3][0];if(ba){if(z!==ba[0]){c('EmojiActions').changeEmojiColor(z);return 0;}else return 0;}else{c('EmojiActions').changeEmojiColor(z);return 0;}}function w(z){var aa=z[3][0];if(aa){return c('reasonReact').element(0,0,c('chatEmojiSkinTonePreferencePickerReact').make(aa[0],c('bs_curry')._1(z[1],v),[]));}else return c('reasonReact').element(0,0,c('messengerSpinnerReact').make(0,0,0,[]));}function x(z){var aa=z.target;c('MessengerSettingsActions').changeSettings({sound_enabled:aa.checked});return 0;}function y(z,aa){var ba=function da(ea,fa){return c('bs_block').__(0,[[[c('EmojiStateStore').getState().emojiColor],+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(z))),c('MessengerSettingsStore').getSettings(),+c('MessengerDesktopNotifications').isDenied(),+c('MessengerDesktopNotifications').isGranted(),fa[3][6]]]);},ca=j.slice();ca[4]=function(da){var ea=da[2],fa=new (c('SubscriptionsHandler'))();fa.addSubscriptions(c('PresencePrivacy').subscribe("privacy-changed",c('bs_curry')._1(ea,ba)),c('PresencePrivacy').subscribe("privacy-user-presence-changed",c('bs_curry')._1(ea,ba)),c('MessengerSettingsStore').addListener("change",c('bs_curry')._1(ea,ba)),c('EmojiStateStore').addListener(c('bs_curry')._1(ea,ba)),c('MercuryParticipants').addListener("change",c('bs_curry')._1(ea,ba)));var ga=da[3].slice();return c('bs_block').__(1,[(ga[6]=[fa],ga)]);};ca[6]=function(da){var ea=da[3][6];if(ea){ea[0].release();return 0;}else return 0;};ca[9]=function(da){var ea=da[3];return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,k,0,0,0,["default"],[544],[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').Title[0],0,[i._("Settings")])),c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[0,[i._("Done")],0,0,[l],[0],0,0,[]]))])),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Account")),c('React').createElement("div",{className:"_374d"},n(ea,da[1]))),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Sounds")),c('React').createElement("div",{className:"_374d"},c('reasonReact').element(0,0,c('messengerCheckboxInputReact').make(+ea[3].sound_enabled,x,[])),c('React').createElement("span",{className:"_1pr_"},i._("Enabled")))),p(ea),t(da),u(0),c('React').createElement("div",{className:"_374b"},c('React').createElement("div",{className:"_374c"},i._("Emoji")),c('React').createElement("div",{className:"_374d _5jb0"},w(da)))]));};ca[10]=function(){return [[c('EmojiStateStore').getState().emojiColor],+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(z))),c('MessengerSettingsStore').getSettings(),+c('MessengerDesktopNotifications').isDenied(),+c('MessengerDesktopNotifications').isGranted(),0];};return ca;}g.component=j;g.handleToggle=k;g.handleDone=l;g.handleTogglePresence=m;g.renderAccountSection=n;g.handleWidthChange=o;g.renderConstrainWidthSection=p;g.handleDenied=q;g.handleNotificationsChange=r;g.renderNotificationsContent=s;g.renderNotificationsSection=t;g.renderBlockingSection=u;g.handleChooseEmojiColor=v;g.renderEmojiColorSection=w;g.handleSoundChange=x;g.make=y;}),null);
__d("messengerSettingsMenuReact",["cx","fbt","Run","Form","bs_curry","goURI","linkReact","AsyncDialog","reasonReact","AsyncRequest","CacheStorage","MessagingTag","MessengerView","MercuryFilters","MessengerSpoof","MessengerConfig","MessengerActions","messengerDialogsRe","messengerMenuReact","MessengerEnvironment","messengerPopoverMenuReact","abstractPopoverButtonReact","ServiceWorkerLoginAndLogout","messengerSettingsDialogReact","XMessengerDotComLogoutController"],(function a(b,c,d,e,f,g,h,i){'use strict';function j(q){q.preventDefault();return 0;}function k(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],["https://www.messenger.com/about"],i._("About"),0,["_blank"],[]));}function l(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],["https://www.facebook.com/policies"],i._("Terms"),0,["_blank"],[]));}function m(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],["https://www.facebook.com/privacy/explanation"],i._("Privacy Policy"),0,["_blank"],[]));}function n(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],["https://www.facebook.com/help/cookies"],i._("Cookie Policy"),0,["_blank"],[]));}var o=c("reasonReact").statelessComponent("MessengerSettingsMenuReact");function p(q,r,s,t,u){var v=function ja(ka){ka.preventDefault();return c("messengerDialogsRe").showDialog(function(){return c("reasonReact").element(0,0,c("messengerSettingsDialogReact").make(t,[]));});},w=function ja(ka){ka.preventDefault();var la=+(s===c("MessengerView").MASTER.RECENT);c("MessengerActions").changeMasterView(la!==0?c("MessengerView").MASTER.PEOPLE:c("MessengerView").MASTER.RECENT);return 0;},x=function ja(ka){ka.preventDefault();var la=+(r===c("MessagingTag").PENDING);c("MessengerActions").changeFolder(la!==0?c("MessagingTag").INBOX:c("MessagingTag").PENDING);return 0;},y=function ja(ka){ka.preventDefault();var la=+(r===c("MessagingTag").ACTION_ARCHIVED);c("MessengerActions").changeFolder(la!==0?c("MessagingTag").INBOX:c("MessagingTag").ACTION_ARCHIVED);return 0;},z=function ja(ka){ka.preventDefault();c("MessengerSpoof").init(function(){c("goURI")(window.location.href,true,undefined);return 0;});return 0;},aa=function ja(){var ka=new (c("CacheStorage"))("localstorage");c("Run").onUnload(function(){ka.clear();c("ServiceWorkerLoginAndLogout").logout();return 0;});c("Form").post(c("XMessengerDotComLogoutController").getURIBuilder().getURI(),{});return 0;},ba=function ja(ka){ka.preventDefault();c("AsyncDialog").send(new (c("AsyncRequest"))("/ajax/bugs/report"));return 0;},ca=function ja(ka){ka.preventDefault();var la=+(q===c("MercuryFilters").UNREAD);c("MessengerActions").changeFilter(la!==0?c("MercuryFilters").ALL:c("MercuryFilters").UNREAD);return 0;},da=function ja(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,i._("Log Out"),[aa],0,[]));},ea=function ja(){var ka=+(s===c("MessengerView").MASTER.RECENT);return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,ka!==0?i._("Active Contacts"):i._("Recent Messages"),[w],0,[]));},fa=function ja(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,i._("Message Requests"),[x],0,[]));},ga=function ja(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,i._("Archived Threads"),[y],0,[]));},ha=function ja(){return c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,"[FB-Only] Copy Spoofs",[z],0,[]));},ia=o.slice();ia[9]=function(){var ja=+c("MessengerConfig").PeopleTabEnabled,ka=+(s===c("MessengerView").MASTER.RECENT),la=+(s===c("MessengerView").MASTER.RECENT&&r===c("MessagingTag").INBOX&&c("MessengerConfig").AllowArchived),ma=+(q===c("MercuryFilters").UNREAD),na=+c("MessengerEnvironment").messengerdotcom,oa=+c("MessengerEnvironment").messengerdotcom,pa=+c("MessengerEnvironment").messengerdotcom,qa=+c("MessengerEnvironment").messengerdotcom,ra=+c("MessengerEnvironment").messengerdotcom,sa=+c("MessengerConfig").GKSpoof,ta=+c("MessengerEnvironment").messengerdotcom,ua=+c("MessengerEnvironment").messengerdotcom,va=c("reasonReact").element(0,0,c("bs_curry")._1(c("messengerMenuReact").Menu[0],[c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,i._("Settings"),[v],0,[])),c("reasonReact").element(0,0,c("bs_curry")._1(c("messengerMenuReact").MenuSeparator[0],[])),ja!==0?ea(0):null,ka!==0?fa(0):null,la!==0?ga(0):null,c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,ma!==0?i._("All Threads"):i._("Unread Threads"),[ca],0,[])),na!==0?c("reasonReact").element(0,0,c("bs_curry")._1(c("messengerMenuReact").MenuSeparator[0],[])):null,oa!==0?k(0):null,pa!==0?l(0):null,qa!==0?m(0):null,ra!==0?n(0):null,c("reasonReact").element(0,0,c("bs_curry")._1(c("messengerMenuReact").MenuSeparator[0],[])),c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],["https://www.facebook.com/help/735006619902401"],i._("Help"),0,["_blank"],[])),c("reasonReact").element(0,0,c("bs_curry")._5(c("messengerMenuReact").MenuItem[0],0,i._("Report a Problem"),[ba],0,[])),sa!==0?ha(0):null,ta!==0?c("reasonReact").element(0,0,c("bs_curry")._1(c("messengerMenuReact").MenuSeparator[0],[])):null,ua!==0?da(0):null])),wa=i._("Settings, help and more"),xa={button:c("reasonReact").element(0,0,c("linkReact").make([wa],["_30yy _2fug"],0,0,0,0,0,0,["button"],0,0,0,[wa],[])),defaultMaxWidth:200};return c("reasonReact").element(0,0,c("messengerPopoverMenuReact").make(0,0,va,0,0,[c("reasonReact").element(0,0,c("abstractPopoverButtonReact").make([xa],[false],0,0,[200],[]))]));};return ia;}g.preventDefault=j;g.renderAbout=k;g.renderPolicies=l;g.renderPrivacy=m;g.renderCookies=n;g.component=o;g.make=p;}),null);
__d("messengerMasterViewHeaderReact",["cx","fbt","React","linkReact","CurrentUser","reasonReact","MessagingTag","MessengerView","MessengerActions","messengerDirectRe","MessengerURIConstants","messengerSettingsMenuReact"],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c("reasonReact").statelessComponent("MessengerMasterViewHeaderReact");function k(o){o.preventDefault();c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE);return 0;}function l(o){o.preventDefault();c("MessengerActions").changeFolder(c("MessagingTag").PENDING);return 0;}function m(o,p,q,r,s){var t=function z(aa){aa.preventDefault();if(q!==c("MessengerView").MASTER.RECENT)c("MessengerActions").changeMasterView(c("MessengerView").MASTER.RECENT);c("MessengerActions").changeFolder(c("MessagingTag").INBOX);return 0;},u=function z(){var aa=+(p===c("MessagingTag").PENDING||p===c("MessagingTag").ACTION_ARCHIVED||q!==c("MessengerView").MASTER.RECENT),ba=aa!==0?t:l,ca=aa!==0?i._("Back to Recent Messages"):i._("Back to Message Requests");return c("reasonReact").element(0,0,c("linkReact").make([ca],["_30yy _2oc9"],0,0,0,[ba],0,0,["button"],0,0,0,[ca],[]));},v=function z(){if(p===c("MessagingTag").PENDING){return i._("Message Requests");}else if(p===c("MessagingTag").OTHER){return i._("Filtered Requests");}else if(q===c("MessengerView").MASTER.PEOPLE){return i._("Active Now");}else if(c("CurrentUser").isWorkUser()){return i._("Work Chat");}else return i._("Messenger");},w=function z(){return c("React").createElement("div",{className:"_4kzu"},c("reasonReact").element(0,0,c("messengerSettingsMenuReact").make(o,p,q,r,[])));},x=function z(){var aa=i._("New Message");return c("reasonReact").element(0,0,c("linkReact").make([aa],["_30yy _2oc8"],0,0,[c("MessengerURIConstants").COMPOSE_SUBPATH],[k],0,0,["button"],0,0,0,[aa],[]));},y=j.slice();y[9]=function(){var z=+(p!==c("MessagingTag").INBOX||q!==c("MessengerView").MASTER.RECENT),aa=z!==0?u(0):w(0);return c("React").createElement("div",{className:"_36ic _5l-3",role:"banner"},aa,c("messengerDirectRe").make(r),c("React").createElement("div",{className:"_1tqi"},v(0)),x(0));};return y;}var n=c("reasonReact").wrapReasonForJs(j,function(o){return m(o.filter,o.folder,o.view,o.viewer,[]);});g.component=j;g.handleAddClick=k;g.handleFilteredRequestsBackArrowClick=l;g.make=m;g.jsComponent=n;}),null);
__d('MessengerMasterView.react',['cx','BootloadOnRender.react','JSResource','LazyComponent.react','messengerMasterViewHeaderReact','MessengerRecentContainer.react','MessengerSearchContainer.react','MessengerSpinner.react','MessengerView','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=c('messengerMasterViewHeaderReact').jsComponent,l=c('React').PropTypes;i=babelHelpers.inherits(m,c('React').PureComponent);j=i&&i.prototype;m.prototype.render=function(){return c('React').createElement('div',null,c('React').createElement(k,{filter:this.props.filter,folder:this.props.folder,view:this.props.view,viewer:this.props.viewer}),this.$MessengerMasterView1());};m.prototype.$MessengerMasterView1=function(){var n=this.props.detailView===c('MessengerView').DETAIL.COMPOSE;switch(this.props.view){case c('MessengerView').MASTER.PEOPLE:return c('React').createElement(c('BootloadOnRender.react'),{component:c('React').createElement(c('LazyComponent.react'),{activeThreadID:n?null:this.props.activeThreadID,viewer:this.props.viewer}),loader:c('JSResource')('MessengerPeopleList.react').__setRef('MessengerMasterView.react'),placeholder:c('React').createElement('div',{className:"_2pif",style:{textAlign:'center'}},c('React').createElement(c('MessengerSpinner.react'),null))});case c('MessengerView').MASTER.RECENT:return c('React').createElement(c('MessengerRecentContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,viewer:this.props.viewer});case c('MessengerView').MASTER.SEARCH:return c('React').createElement(c('MessengerSearchContainer.react'),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,viewer:this.props.viewer});default:throw new Error('Unknown master view: '+this.props.view);}};function m(){i.apply(this,arguments);}m.propTypes={activeThreadID:l.string,detailView:l.string,filter:l.string,folder:l.string.isRequired,view:l.string.isRequired,viewer:l.string.isRequired};f.exports=m;}),null);
__d('messengerMasterViewReact',['reasonReact','bs_js_null_undefined','MessengerMasterView.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k,l,m,n,o){return c('reasonReact').wrapJsForReason(c('MessengerMasterView.react'),{activeThreadID:c('bs_js_null_undefined').from_opt(i),detailView:c('bs_js_null_undefined').from_opt(j),filter:c('bs_js_null_undefined').from_opt(k),folder:l,view:m,viewer:n},o);}g.make=h;}),null);
__d('messengerReasonDialogContainerReact',['bs_list','bs_array','bs_block','bs_curry','React','bs_pervasives','reasonReact','messengerDialogsRe'],(function a(b,c,d,e,f,g){'use strict';function h(m,n){return c('bs_block').__(0,[[m]]);}function i(m){c('messengerDialogsRe').addHandler(c('bs_curry')._1(m[2],h));return 0;}var j=c('reasonReact').statefulComponent("MessengerReasonDialogContainer");function k(){var m=j.slice();m[4]=i;m[9]=function(n){var o=n[3][0];if(o){return c('React').createElement("div",undefined,c('bs_array').of_list(c('bs_list').mapi(function(p,q){return c('React').createElement("span",{key:c('bs_pervasives').string_of_int(p)},c('bs_curry')._1(q,0));},c('bs_list').rev(o[0]))));}else return null;};m[10]=function(){return [0];};return m;}var l=c('reasonReact').wrapReasonForJs(j,function(){return k([]);});g.handleUpdateDialog=h;g.didMount=i;g.component=j;g.make=k;g.jsComponent=l;}),null);
__d('P2PDialogStore',['EventEmitter','P2PActionConstants','P2PDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c('EventEmitter'));i=h&&h.prototype;function l(){i.constructor.call(this);j=c('P2PDispatcher').register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}l.prototype.getState=function(){return k;};l.prototype.onEventDispatched=function(m){var n=m.type,o=m.data;switch(n){case c('P2PActionConstants').DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit('change');break;case c('P2PActionConstants').DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};f.exports=new l();}),null);
__d('P2PDialogContainer.react',['P2PDialogStore','React'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c('P2PDialogStore').getState(),this.onDialogStoreChange=function(){this.setState(c('P2PDialogStore').getState());}.bind(this),l;}j.prototype.componentDidMount=function(){this.dialogStoreSub=c('P2PDialogStore').addListener('change',this.onDialogStoreChange);};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c('React').createElement(k,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));};f.exports=j;}),null);
__d('p2PDialogContainerReact',['reasonReact','P2PDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('P2PDialogContainer.react'),{},i);}g.make=h;}),null);
__d('PagesPlatformActionConstants',[],(function a(b,c,d,e,f,g){'use strict';var h={BOOKING_REQUEST_ACCEPT_ERROR:'booking_request_accept_error',BOOKING_REQUEST_ACCEPT_INITIATED:'booking_request_accept_initiated',BOOKING_REQUEST_ACCEPTED:'booking_request_accepted',BOOKING_REQUEST_CREATED:'booking_request_created',BOOKING_REQUEST_DECLINE_ERROR:'booking_request_decline_error',BOOKING_REQUEST_DECLINE_INITIATED:'booking_request_decline_initiated',BOOKING_REQUEST_DECLINED:'booking_request_declined',BOOKING_REQUEST_RESCHEDULE_INITIATED:'booking_request_reschedule_initiated',BOOKING_REQUEST_RESCHEULED:'booking_request_reschedule',DIALOG_CLOSED:'dialog_closed',DIALOG_SHOWN:'dialog_shown',NEW_TIME_CHOSEN:'new_time_chosen'};f.exports=h;}),null);
__d('PagesPlatformRequestDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('PagesPlatformDialogStore',['EventEmitter','PagesPlatformActionConstants','PagesPlatformRequestDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i,j={};h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(){i.constructor.call(this);c('PagesPlatformRequestDispatcher').register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null};}k.prototype.getState=function(){return j;};k.prototype.onEventDispatched=function(l){var m=l.type,n=l.data;switch(m){case c('PagesPlatformActionConstants').DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit('change');break;case c('PagesPlatformActionConstants').DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit('change');break;}};f.exports=new k();}),null);
__d('PagesPlatformDialogContainer.react',['PagesPlatformDialogStore','PureStoreBasedStateMixin','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('React').createClass({displayName:'PagesPlatformDialogContainer',mixins:[c('PureStoreBasedStateMixin')(c('PagesPlatformDialogStore'))],statics:{calculateState:function i(){return c('PagesPlatformDialogStore').getState();}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c('React').createElement(j,babelHelpers['extends']({},this.state.dialogProps,{key:'dialog'}));}});f.exports=h;}),null);
__d('pagesPlatformDialogContainerReact',['reasonReact','PagesPlatformDialogContainer.react'],(function a(b,c,d,e,f,g){'use strict';function h(i){return c('reasonReact').wrapJsForReason(c('PagesPlatformDialogContainer.react'),{},i);}g.make=h;}),null);
__d("messengerReact",["cx","React","utilsRe","bs_js_boolean","CurrentUser","reasonReact","bs_js_primitive","MessengerConfig","MessengerStateStore","messengerBannerReact","messengerBugNubReact","MessengerSettingsStore","p2PDialogContainerReact","messengerDetailViewReact","messengerMasterViewReact","PureStoreBasedStateMixin","messengerErrorBoundaryReact","fBPaymentsDialogContainerReact","mNCommerceDialogContainerReact","pagesPlatformDialogContainerReact","ReactComponentWithPureRenderMixin","messengerReasonDialogContainerReact"],(function a(b,c,d,e,f,g,h){'use strict';function i(l){l.preventDefault();return 0;}function j(l,m,n,o){var p=+c("CurrentUser").isEmployee();return c("React").createElement("div",{className:"_li"},c("reasonReact").element(0,0,c("messengerBannerReact").make(n,m,[])),c("React").createElement("div",{className:"_4sp8"+(c("bs_js_boolean").to_js_boolean(+(c("MessengerConfig").ConstrainWidth&&o.settings.constrained_width))?" "+"_3qn1":""),onDragEnter:i,onDragOver:i,onDrop:i},c("React").createElement("div",{className:"_1enh"},c("reasonReact").element(0,0,c("messengerErrorBoundaryReact").make(0,["conversation list"],[c("reasonReact").element(0,0,c("messengerMasterViewReact").make(c("bs_js_primitive").null_undefined_to_opt(o.state.activeThreadID),c("bs_js_primitive").null_undefined_to_opt(o.state.detailView),[o.state.filter],o.state.folder,o.state.masterView,c("CurrentUser").getID(),[]))])),p!==0?c("reasonReact").element(0,0,c("messengerBugNubReact").make([l?c("utilsRe").isTruthy(l[0].isBetaEnabled):0],l?[l[0].unixName]:0,[])):null),c("reasonReact").element(0,0,c("messengerDetailViewReact").make(c("bs_js_primitive").null_undefined_to_opt(o.state.activeThreadID),c("bs_js_primitive").null_undefined_to_opt(o.state.mid),c("bs_js_primitive").null_undefined_to_opt(o.state.query),c("bs_js_primitive").null_undefined_to_opt(o.state.detailView),c("CurrentUser").getID(),[]))),c("reasonReact").element(0,0,c("messengerReasonDialogContainerReact").make([])),c("reasonReact").element(0,0,c("mNCommerceDialogContainerReact").make([])),c("reasonReact").element(0,0,c("p2PDialogContainerReact").make([])),c("reasonReact").element(0,0,c("pagesPlatformDialogContainerReact").make([])),c("reasonReact").element(0,0,c("fBPaymentsDialogContainerReact").make([])));}var k=c("React").createClass({displayName:"MessengerReact",mixins:[c("ReactComponentWithPureRenderMixin"),c("PureStoreBasedStateMixin")(c("MessengerStateStore"),c("MessengerSettingsStore"))],statics:{calculateState:function l(){return {state:c("MessengerStateStore").getState(),settings:c("MessengerSettingsStore").getSettings()};}},componentDidMount:function l(){var m=this,n=m.props;return n.onMount();},componentWillUnmount:function l(){c("MessengerStateStore").destroy();c("MessengerSettingsStore").destroy();return 0;},render:function l(){var m=this,n=m.props,o=m.state;return j(c("bs_js_primitive").null_undefined_to_opt(n.employeeData),c("utilsRe").nullUndefinedBooleanToOptionBool(n.isFirstRedirect),c("bs_js_primitive").null_undefined_to_opt(n.promotionData),o);}});g.preventDefault=i;g.make=j;g.jsComponent=k;}),null);
__d('messengerSearchConfirmationDialogReact',['fbt','bs_curry','reasonReact','messengerDialogsRe','messengerDialogReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statefulComponent("MessengerSearchConfirmationDialog");function j(m){if(m){return 0;}else return c('messengerDialogsRe').removeDialog(0);}function k(m,n,o){var p=i.slice();p[9]=function(){return c('reasonReact').element(0,0,c('bs_curry')._8(c('messengerDialogReact').Dialog[0],0,j,0,0,0,0,0,[c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Header[0],0,0,[h._("Search for \"{term}\"?",[h.param("term",n)])])),c('reasonReact').element(0,0,c('bs_curry')._3(c('messengerDialogReact').Footer[0],0,0,[c('reasonReact').element(0,0,c('bs_curry').app(c('messengerDialogReact').Button[0],[[2],[h._("OK")],0,0,[m],[0],0,0,[]])),c('reasonReact').element(0,0,c('bs_curry')._2(c('messengerDialogReact').CancelButton[0],0,[]))]))]));};return p;}var l=c('reasonReact').wrapReasonForJs(i,function(m){return k(m.onSearch,m.term,[]);});g.component=i;g.handleToggle=j;g.make=k;g.jsComponent=l;}),null);
__d('MessengerMount',['cx','CSS','ChannelConnection','ChannelManager','CurrentUser','HotLikeSound','mercuryBlockedParticipantsRe','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryOrderedThreadlist','MercuryParticipants','MercuryServerPayloadPreprocessor','MercurySyncEnvironment','MercuryThreads','MercuryThreadIDMap','MercuryUnreadState','MercuryUnseenState','messengerReact','MessengerActions','messengerDialogsRe','MessengerAttributionTagsStore','MessengerComposerActions','MessengerBrowserAlerts','MessengerComposerStore','MessengerConfig','MessengerEnvironment','MessengerMDotMeReferralStore','MessengerPage','MessengerRTCMessageHandler','MessengerSettingsStore','messengerSearchConfirmationDialogReact','MessengerStateStore','MessengerThreadSearchStore','MessengerURIListener','MessengerURIConstants','MessengerURISerializer','MessengerView','MNPlatformTagsDataManager','OmniMStore','React','ReactDOM','MercuryConfig','URI','goURI','OrderedFriendsList','PageHooks'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('MercuryDelayedRoger').get(),j=c('messengerReact').jsComponent,k=c('messengerSearchConfirmationDialogReact').jsComponent;c('OrderedFriendsList');c('PageHooks');c('ChannelManager').startChannelManager();var l={mount:function q(r,s){c('MessengerEnvironment').setMessengerUI(true);c('MessengerPage').emit(c('MessengerPage').Events.JS_LOADED);var t=c('CurrentUser').getID();m(t);n(t);o(t,s);c('MessengerPage').emit(c('MessengerPage').Events.DATA_INITIALIZED);if(document.documentElement)c('CSS').addClass(document.documentElement,"_51l0");if(document.body){var u=document.body;c('CSS').addClass(u,"_z4_");if(c('MessengerConfig').FlexBubblesEnabled)c('CSS').addClass(u,"_5v7-");if(c('MessengerConfig').SFFontEnabled)c('CSS').addClass(u,"__6g");if(c('MessengerConfig').SegoeUIDisabled)c('CSS').addClass(u,"_2por");if(c('MessengerEnvironment').facebookdotcom)c('CSS').addClass(u,"_mvg");}c('HotLikeSound').setCheckSoundEnabledFunc(function(){return c('MessengerSettingsStore').getSettings().sound_enabled;});c('ReactDOM').render(c('React').createElement(j,{employeeData:s.employeeData,facebookNotificationTokens:s.facebookNotificationTokens,promotionData:s.promotionData,isFirstRedirect:!c('MercuryConfig').MessengerDotComUser,viewer:t,onMount:p}),r);}};function m(q){i;c('MercuryDeliveryReceipts').getForFBID(q);c('MercuryDeliveryState').getForFBID(q);c('MercuryOrderedThreadlist').getForFBID(q);c('MercuryParticipants');c('mercuryBlockedParticipantsRe').getForFBID(q);c('MercuryThreads').getForFBID(q);c('MercuryUnreadState').getForFBID(q);c('MercuryUnseenState').getForFBID(q);c('MessengerAttributionTagsStore');c('MessengerComposerStore');c('MessengerMDotMeReferralStore');c('MessengerSettingsStore');c('MessengerStateStore');c('MessengerThreadSearchStore').getForFBID(q);}function n(q){c('MessengerURIListener').start();c('MercurySyncEnvironment').setUp();c('MessengerBrowserAlerts').init(q);c('MessengerRTCMessageHandler').init();c('ChannelConnection');c('OmniMStore').setUp();}function o(q,r){var s,t=c('MercuryServerPayloadPreprocessor').getForFBID(q);t.handleUpdate(r.mercuryPayload);var u=new (c('URI'))(window.location.href),v=c('MessengerURISerializer').deserialize(u);if(v.query)(function(){var y=v.masterView===c('MessengerView').MASTER.SEARCH,z=v.query;v.query=null;v.masterView=c('MessengerView').MASTER.RECENT;c('messengerDialogsRe').showDialog(function(){return c('React').createElement(k,{term:z,onSearch:function aa(){c('messengerDialogsRe').removeAllDialogs();y?c('MessengerActions').changeQueryAll(z):c('MessengerActions').changeQuery(z);}});});})();c('goURI')(c('MessengerURISerializer').serialize(v),false,true);if(u.getPath().endsWith(c('MessengerURIConstants').COMPOSE_SUBPATH))return;c('MessengerActions').changeMDotMeReferral(r.mDotMeReferral,r.mDotMeReferralThreadKey);var w=c('MercuryThreadIDMap').get(),x=w.getClientIDFromServerIDNow(r.lastReadThreadKey);if(x){c('MessengerComposerActions').exitComposeState();c('MessengerActions').selectThread(x);}else if(u.getPath()==='/')c('MessengerActions').changeDetailView(c('MessengerView').DETAIL.COMPOSE);c('MNPlatformTagsDataManager').updateThreadTabAfterSelectThread(r.messagingSource,r.mDotMeReferralThreadKey&&r.mDotMeReferralThreadKey.toString());}function p(){c('MessengerPage').emit(c('MessengerPage').Events.APP_MOUNTED);}f.exports=l;}),null);
__d('MessengerWorkAvailabilityStatus.react',['fbt','React','AsyncRequest'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='/ajax/mercury/bypass_focus_mode.php';i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.displayFocusBanner=function(m,n){var o=false;n.forEach(function(p){if(!p||p.fbid===m)return;o=o||p.is_user_focusing;});return !!o;};l.prototype.$MessengerWorkAvailabilityStatus1=function(){new (c('AsyncRequest'))(k).setData({thread_fbid:this.props.thread.thread_fbid,other_user_fbid:this.props.thread.other_user_fbid,new_setting:true}).send();};l.prototype.render=function(){var m=this.props,n=m.viewer,o=m.thread,p=m.participants,q=l.displayFocusBanner(n,p);if(!q)return null;if(o&&o.bypass_focus_mode_until&&o.bypass_focus_mode_until>Date.now()/1000)return c('React').createElement('div',{className:this.props.className},h._("Focus mode bypassed."));return c('React').createElement('div',{className:this.props.className},h._({"*":"Your coworkers are in focus mode.","268435456":"Your coworker is in focus mode."},[h.plural(p.size-1)]),' ',c('React').createElement('a',{href:'#',onClick:function(){return this.$MessengerWorkAvailabilityStatus1();}.bind(this)},h._("Bypass")));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('ChatSidebarPageItem.react',['ix','cx','XUIBadge.react','BootloadedComponent.react','ChatConfig','Image.react','JSResource','Layout.react','Link.react','React','SplitImage.react','XUIButton.react','XUISpinner.react','fbglyph'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=9,o=c('ChatConfig').get('popover_menu_test_group_id',0);j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(){var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={menuOpen:false,showMenu:false},this.$ChatSidebarPageItem3=function(){this.setState({menuOpen:true});}.bind(this),this.$ChatSidebarPageItem2=function(){this.setState({menuOpen:false});}.bind(this),this.$ChatSidebarPageItem1=function(){this.setState({showMenu:true,menuOpen:true});}.bind(this),r;}p.prototype.render=function(){return c('React').createElement('div',{className:"_55ln",rel:'ignore'},c('React').createElement('div',{className:"_55lp"},c('React').createElement(c('Layout.react'),null,c('React').createElement(l,null,c('React').createElement(c('Link.react'),{href:this.props.href},c('React').createElement('div',{className:"_55lq"},c('React').createElement(c('SplitImage.react'),{size:this.props.imageSize,srcs:this.props.image})))),c('React').createElement(m,null,c('React').createElement(c('Link.react'),{className:"_224p",href:this.props.href},c('React').createElement('div',{className:"_55lr"},this.props.name))),c('React').createElement(l,{className:"_3p8_"},c('React').createElement('div',{className:"_5bon"+(this.state.menuOpen?' '+"_3p90":'')+(!this.state.menuOpen?' '+"_3p91":'')},this.renderUnreadCount(),this.renderPageActionMenu())))));};p.prototype.renderUnreadCount=function(){var q=this.props.unreadCount;if(!q)return null;return c('React').createElement(c('XUIBadge.react'),{className:"_4fsv"+(o!==1?' '+"_1_1n":''),count:q,maxcount:n,type:'regular'});};p.prototype.renderPageActionMenu=function(){if(!this.state.showMenu){var q={padding:'0px',background:'none',border:'transparent'};return c('React').createElement(c('XUIButton.react'),{image:c('React').createElement(c('Image.react'),{src:h("123797")}),className:"_w_x",style:q,label:'Settings',labelIsHidden:true,size:'small',suppressed:true,onClick:this.$ChatSidebarPageItem1});}else return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('ChatSidebarPageAdminPopoverMenu.react').__setRef('ChatSidebarPageItem.react'),bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),{className:"_w_x"}),messageEligible:this.props.messageEligible,onHide:this.$ChatSidebarPageItem2,onShow:this.$ChatSidebarPageItem3,pageID:this.props.pageID,ref:this.props.pageRef,unreadMessageCount:this.props.unreadMessageCount,unseenNotificationCount:this.props.unseenNotificationCount});};f.exports=p;}),null);
__d('ChatSidebarPageListContainer.react',['cx','ChatSidebarPageItem.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return c('React').createElement('ul',{className:"_4kqp"},this.props.adminedPages.map(function(l){return this.$ChatSidebarPageListContainer1(l);}.bind(this)));};k.prototype.$ChatSidebarPageListContainer1=function(l){return c('React').createElement('li',{className:"_12um _42fz",'data-id':l.id,key:l.id},c('React').createElement(c('ChatSidebarPageItem.react'),{href:l.uri,imageSize:l.imgSize,image:l.imgSrc,messageEligible:l.messageEligible,name:l.name,pageID:l.id,pageRef:l.ref,unreadCount:l.badgingCount,unreadMessageCount:l.unreadMessageCount,unseenNotificationCount:l.unseenNotificationCount}));};function k(){i.apply(this,arguments);}f.exports=k;}),null);
__d('KillabyteHTMLXHPTemplateProcessor',[],(function a(b,c,d,e,f,g){f.exports=function(h){var i=[h];while(i.length){var j=i.pop();if(j.removeAttribute)j.removeAttribute('data-from-server');if(j.childNodes)i.push.apply(i,j.childNodes);}return h;};}),null);
__d('XHPTemplate',['DataStore','DOM','HTML','XHPTemplateProcessor'],(function a(b,c,d,e,f,g){var h=c('XHPTemplateProcessor').processor;function i(k){'use strict';if(h instanceof Function)k=h(k);this._model=k;}i.prototype.render=function(){'use strict';if(c('HTML').isHTML(this._model))this._model=c('DOM').setContent(document.createDocumentFragment(),this._model)[0];return this._model.cloneNode(true);};i.prototype.build=function(){'use strict';return new j(this.render());};i.getNode=function(k,l){'use strict';return i.getNodes(k)[l];};i.getNodes=function(k){'use strict';var l=c('DataStore').get(k,'XHPTemplate:nodes');if(!l){l={};var m=c('DOM').scry(k,'[data-jsid]');m.push(k);var n=m.length;while(n--){var o=m[n];l[o.getAttribute('data-jsid')]=o;o.removeAttribute('data-jsid');}c('DataStore').set(k,'XHPTemplate:nodes',l);}return l;};function j(k){'use strict';this._root=k;this._populateNodes();}j.prototype._populateNodes=function(){'use strict';this._nodes={};this._leaves={};var k=this._root.getElementsByTagName('*');for(var l=0,m=k.length;l<m;l++){var n=k[l],o=n.getAttribute('data-jsid');if(o){n.removeAttribute('data-jsid');this._nodes[o]=n;this._leaves[o]=!n.childNodes.length;}}};j.prototype.getRoot=function(){'use strict';return this._root;};j.prototype.getNode=function(k){'use strict';return this._nodes[k];};j.prototype.setNodeProperty=function(k,l,m){'use strict';this.getNode(k)[l]=m;return this;};j.prototype.setNodeContent=function(k,l){'use strict';if(!this._leaves[k])throw new Error("Can't setContent on non-leaf node: "+k);c('DOM').setContent(this.getNode(k),l);return this;};f.exports=i;}),null);
__d('SimpleFBAuthenticatedXHRRequest',['invariant','CurrentUser','DTSG','ServerJSDefine','XHRRequest','isFacebookURI'],(function a(b,c,d,e,f,g,h){var i,j,k=1;i=babelHelpers.inherits(l,c('XHRRequest'));j=i&&i.prototype;function l(m,n){'use strict';j.constructor.call(this,m);var o={__dyn:c('ServerJSDefine').getLoadedModuleHash(),__req:(k++).toString(36),__ajax__:1,__a:1,__user:c('CurrentUser').getID()};j.setData.call(this,babelHelpers['extends']({},n,o));}l.prototype.send=function(){'use strict';if(!c('isFacebookURI')(this.getURI()))return j.send.call(this);if(c('DTSG').getCachedToken){var m=c('DTSG').getCachedToken();if(m){return this.sendOnDTSGToken(m);}else{c('DTSG').getToken().done(function(n){return this.sendOnDTSGToken(n);}.bind(this));return this;}}else this.sendOnDTSGToken(c('DTSG').getToken());};l.prototype.sendOnDTSGToken=function(m){'use strict';if(m)j.setData.call(this,babelHelpers['extends']({},this.getData(),{fb_dtsg:m}));return j.send.call(this);};l.prototype.setData=function(m){'use strict';h(0);};l.parseResponse=function(m){'use strict';return JSON.parse(m.substr(9));};l.getPayload=function(m){'use strict';var n=l.parseResponse(m).payload;return n.payload?n.payload:n;};f.exports=l;}),null);
__d("XFantailLogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/ajax\/fantail\/",{service:{type:"String",required:true}});}),null);
__d('FantailLogQueue',['ChannelClientID','CircularBuffer','FantailConfig','PHPQuerySerializer','SimpleFBAuthenticatedXHRRequest','XFantailLogController','destroyOnUnload','setIntervalAcrossTransitions','sprintf'],(function a(b,c,d,e,f,g){var h={DEBUG:'debug',INFO:'info',WARN:'warn',ERROR:'error'};function i(j){'use strict';this.$FantailLogQueue2=j;this.$FantailLogQueue3=new (c('CircularBuffer'))(200);c('setIntervalAcrossTransitions')(this.$FantailLogQueue4.bind(this),30*1000);c('destroyOnUnload')(this.$FantailLogQueue4.bind(this));}i.get=function(j){'use strict';i.$FantailLogQueue1=i.$FantailLogQueue1||{};i.$FantailLogQueue1[j]=i.$FantailLogQueue1[j]||new i(j);return i.$FantailLogQueue1[j];};i.prototype.debug=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.DEBUG,j].concat(l));};i.prototype.info=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.INFO,j].concat(l));};i.prototype.warn=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.WARN,j].concat(l));};i.prototype.error=function(j){'use strict';for(var k=arguments.length,l=Array(k>1?k-1:0),m=1;m<k;m++)l[m-1]=arguments[m];this.$FantailLogQueue5.apply(this,[h.ERROR,j].concat(l));};i.prototype.$FantailLogQueue5=function(j,k){'use strict';for(var l=arguments.length,m=Array(l>2?l-2:0),n=2;n<l;n++)m[n-2]=arguments[n];var o=c('sprintf').apply(undefined,[k].concat(m));this.$FantailLogQueue3.write({log_time:Date.now(),log:o,severity:j,device_id:c('ChannelClientID').getID()});};i.prototype.$FantailLogQueue4=function(){'use strict';var j=this.$FantailLogQueue3.read();if(j.length>0){var k={log_time:[],log:[],severity:[],device_id:[]};j.forEach(function(m){k.log_time.push(m.log_time);k.log.push(m.log);k.severity.push(m.severity);k.device_id.push(m.device_id);});this.$FantailLogQueue3.clear();var l=c('XFantailLogController').getURIBuilder().setString('service',this.$FantailLogQueue2).getURI();new (c('SimpleFBAuthenticatedXHRRequest'))(l,k).setMethod('POST').setDataSerializer(c('PHPQuerySerializer').serialize).setRequestHeader('Content-Type','application/x-www-form-urlencoded').send();}};f.exports=i;}),null);