if (self.CavalryLogger) { CavalryLogger.start_js(["eIDFJ"]); }

__d('ChatSidebarPreloadStore',['ChatSidebarData','InitialChatFriendsList'],(function a(b,c,d,e,f,g){'use strict';var h={onLoaded:function i(j){if(c('ChatSidebarData').AsyncDataPreloader){c('ChatSidebarData').AsyncDataPreloader.onLoaded(function(k){var l=k.result,m=l.list,n=l.groups,o=l.shortProfiles,p=l.nearby,q=l.adminedPages,r=l.pageListModule;return j({buddies:m,groups:n,shortProfiles:o,nearby:p,adminedPages:q,pageListModule:r,profiles:[]});});}else if(c('ChatSidebarData').WebGraphQLPreloader){c('ChatSidebarData').WebGraphQLPreloader.onLoaded(function(k){return j(c('ChatSidebarData').WebGraphQLNormalizer.normalize(k));});}else j({buddies:c('InitialChatFriendsList').list||[],groups:c('InitialChatFriendsList').groups||[],shortProfiles:c('InitialChatFriendsList').shortProfiles||{},nearby:c('InitialChatFriendsList').nearby||[],adminedPages:c('InitialChatFriendsList').adminedPages||[],pageListModule:c('InitialChatFriendsList').pageListModule,profiles:[]});}};f.exports=h;}),null);
__d('ChatSortUsers',['ShortProfiles','TokenizeUtil'],(function a(b,c,d,e,f,g){var h={};function i(k){if(h[k])return h[k];var l=(c('ShortProfiles').getNow(k)||{}).name;if(l)return h[k]=c('TokenizeUtil').flatten(l);return '~';}var j={sortAlphabetical:function k(l,m){var n=i(l),o=i(m);if(n!==o)return n<o?-1:1;return 0;}};f.exports=j;}),null);
__d('PresenceStatusActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({AVAILABILITY_CHANGED:null});}),null);
__d('ChatDispatcher',['ExplicitRegistrationDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationDispatcher'));i=h&&h.prototype;function j(){h.apply(this,arguments);}f.exports=new j({strict:false});}),null);
__d('PresenceStatusStore',['ChatDispatcher','FluxStore','PresenceStatus','PresenceStatusActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('ChatDispatcher'));}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c('PresenceStatusActionTypes').AVAILABILITY_CHANGED:this.__emitChange();break;default:break;}};j.prototype.get=function(k){return c('PresenceStatus').get(k);};j.prototype.getIsPlaying=function(k){return c('PresenceStatus').isPlayingCanvasGameUser(k);};f.exports=new j();}),null);
__d('MeasurePeopleTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:MeasurePeopleLoggerConfig',this.$MeasurePeopleTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:MeasurePeopleLoggerConfig',this.$MeasurePeopleTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$MeasurePeopleTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$MeasurePeopleTypedLogger1=babelHelpers['extends']({},this.$MeasurePeopleTypedLogger1,j);return this;};var i={};f.exports=h;}),null);
__d('MessengerChatOnOffToggle.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerChatOnOffToggle1=function(){this.props.onAvailabilityChange&&this.props.onAvailabilityChange(!this.props.isUserAvailable);}.bind(this),o;}m.prototype.render=function(){var n=this.props.isUserAvailable;return c('React').createElement(c('Link.react'),{onClick:this.$MessengerChatOnOffToggle1,title:n?i._("Go Offline"):i._("Go Online")},c('React').createElement('div',{className:"_3dwl"+(n?' '+"_337l":'')},c('React').createElement('div',{className:"_3dwf"+(n?' '+"_3dwk":'')})));};m.propTypes={isUserAvailable:l.bool.isRequired,onAvailabilityChange:l.func};f.exports=m;}),null);
__d('PresenceOrderedList',['ChatSidebarPreloadStore','ChatSortUsers','PresencePrivacy','PresenceStatus'],(function a(b,c,d,e,f,g){function h(k){return k.map(function(l){var m=l.slice(0,-2),n=Number(l.slice(-1));return [m,n];});}function i(k,l){var m=[];k.forEach(function(n){var o=n[0],p=n[1];if(m.length>=l)return;if(c('PresencePrivacy').getFriendVisibility(o)==c('PresencePrivacy').BLACKLISTED)return;if(p==c('PresenceStatus').get(o))m.push(o);});return m;}function j(){'use strict';this.$PresenceOrderedList1=null;}j.prototype.getSorted=function(k,l){'use strict';if(this.$PresenceOrderedList1){l(i(this.$PresenceOrderedList1,k));return;}c('ChatSidebarPreloadStore').onLoaded(function(m){var n=m.buddies;this.$PresenceOrderedList1=h(n);l(i(this.$PresenceOrderedList1,k));}.bind(this));};j.prototype.getAvailableSorted=function(k){'use strict';var l=c('PresenceStatus').getOnlineIDs();if(k)l=l.filter(function(m){return k&&k.indexOf(m)===-1;});return l.sort(c('ChatSortUsers').sortAlphabetical);};j.prototype.getAllSorted=function(k){'use strict';var l=[],m=this.$PresenceOrderedList1||[];c('PresenceStatus').getAllIDs().concat(m.map(function(n){return n[0];})).forEach(function(n){return l.indexOf(n)===-1&&l.push(n);});if(k)l=l.filter(function(n){return k&&k.indexOf(n)===-1;});return l.sort(c('ChatSortUsers').sortAlphabetical);};f.exports=new j();}),null);
__d('getScrollPosition',['getDocumentScrollElement','getUnboundedScrollPosition'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('getDocumentScrollElement')(i.ownerDocument||i.document);if(i.Window&&i instanceof i.Window)i=j;var k=c('getUnboundedScrollPosition')(i),l=i===j?i.ownerDocument.documentElement:i,m=i.scrollWidth-l.clientWidth,n=i.scrollHeight-l.clientHeight;k.x=Math.max(0,Math.min(k.x,m));k.y=Math.max(0,Math.min(k.y,n));return k;}f.exports=h;}),null);
__d("messengerSignalsRe",["EventEmitter"],(function a(b,c,d,e,f,g){'use strict';var h=new (c("EventEmitter"))(),i="resize";function j(){h.emit(i);return 0;}function k(l){return h.addListener(i,l);}g.emitter=h;g.resizeEvent=i;g.resize=j;g.onResize=k;}),null);
__d('MessengerFlexArea.react',['cx','CSS','Event','messengerSignalsRe','React','ReactDOM','ResponsiveBlock.react','Style','SubscriptionsHandler','Vector','getScrollPosition','joinClasses','throttle'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('React').PropTypes,j=c('React').createClass({displayName:'MessengerFlexArea',propTypes:{beforeResize:i.func,onResize:i.func},_subscriptions:null,_onResizeTimeout:null,getInitialState:function k(){return {height:0};},componentDidMount:function k(){var l=new (c('SubscriptionsHandler'))();l.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.recalculateHeight,51)),c('messengerSignalsRe').onResize(function(){this.recalculateHeight();}.bind(this)));this._subscriptions=l;this.recalculateHeight();},componentWillUnmount:function k(){this._subscriptions&&this._subscriptions.release();clearTimeout(this._onResizeTimeout);},render:function k(){return c('React').createElement(c('ResponsiveBlock.react'),{className:c('joinClasses')(this.props.className,"_9hq"),onResize:this._handleResponsiveBlockResize,style:{height:this.state.height+'px'}},this.props.children);},recalculateHeight:function k(){if(!this.isMounted())return;var l=c('ReactDOM').findDOMNode(this),m=l.parentNode,n=this.state.height,o=c('Vector').getViewportDimensions().y,p=false;if(m&&c('Style').get(m,'display')==='none'){c('Style').set(m,'display','initial');p=true;}var q=false;if(m instanceof Element&&c('CSS').hasClass(m,'hidden_elem')){c('CSS').removeClass(m,'hidden_elem');q=true;}o-=c('Vector').getElementPosition(m||l).y;var r=c('getScrollPosition')(window);o+=r.y;if(m){Array.from(m.childNodes).forEach(function(s){if(s.nodeType===Node.COMMENT_NODE||c('Style').get(s,'position')==='absolute')return;o-=c('Vector').getElementDimensions(s).y;});o+=c('Vector').getElementDimensions(l).y;}if(p)c('Style').set(m,'display','');if(q&&m instanceof Element)c('CSS').addClass(m,'hidden_elem');if(isNaN(o)||o<0)o=0;if(o!==n){this.props.beforeResize&&this.props.beforeResize();this.setState({height:o},this.props.onResize);}},_handleResponsiveBlockResize:c('throttle')(function(k,l){if(!this.isMounted())return;if(l===this.state.height){this.props.beforeResize&&this.props.beforeResize();clearTimeout(this._onResizeTimeout);if(this.props.onResize)this._onResizeTimeout=setTimeout(this.props.onResize,0);}},51)});f.exports=j;}),null);
__d('MessengerFlexScrollableArea.react',['MessengerFlexArea.react','MessengerScrollableArea.react','React'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={shouldTrackBottom:this.props.shouldStickToBottom},this.$MessengerFlexScrollableArea3=function(){this.props.onScroll&&this.props.onScroll();if(!this.props.shouldStickToBottom)return;this.$MessengerFlexScrollableArea4();}.bind(this),this.getArea=function(){return this.refs.scrollable&&this.refs.scrollable.getArea();}.bind(this),this.$MessengerFlexScrollableArea2=function(){this.trackBottomIfRequired();}.bind(this),this.handleResize=function(){this.refs.flexArea&&this.refs.flexArea.recalculateHeight();}.bind(this),this.trackBottomIfRequired=function(){if(this.state.shouldTrackBottom)this.scrollToBottom();}.bind(this),this.scrollToBottom=function(){this.refs.scrollable&&this.refs.scrollable.scrollToBottom();}.bind(this),this.scrollToTop=function(q){this.refs.scrollable&&this.refs.scrollable.scrollToTop(q);}.bind(this),this.isScrolledToBottom=function(){var q=this.refs.scrollable;return q?q.isScrolledToBottom():true;}.bind(this),this.isScrolledToBottomWithHeight=function(q){return this.refs.scrollable.isScrolledToBottomWithHeight(q);}.bind(this),this.isScrolledToTop=function(){return this.refs.scrollable&&this.refs.scrollable.isScrolledToTop();}.bind(this),this.getScrollTop=function(){return this.refs.scrollable&&this.refs.scrollable.getScrollTop()||0;}.bind(this),m;}k.prototype.componentDidMount=function(){this.props.onMount&&this.props.onMount();};k.prototype.render=function(){return c('React').createElement(c('MessengerFlexArea.react'),{className:this.props.className,onResize:this.$MessengerFlexScrollableArea2,ref:'flexArea'},this.props.flexChildren,c('React').createElement(c('MessengerScrollableArea.react'),{height:'100%',needsFastScrollHandler:this.state.shouldTrackBottom,onScroll:this.$MessengerFlexScrollableArea3,ref:'scrollable',tabIndex:this.props.tabIndex},this.props.children),this.props.footerChildren);};k.prototype.$MessengerFlexScrollableArea4=function(){if(this.isScrolledToBottom()){this.setState({shouldTrackBottom:true});this.$MessengerFlexScrollableArea5();}else{this.setState({shouldTrackBottom:false});this.$MessengerFlexScrollableArea6();}};k.prototype.$MessengerFlexScrollableArea5=function(){if(!this.props.useScrollProtection)return;this.$MessengerFlexScrollableArea6();this.$MessengerFlexScrollableArea1=setInterval(function(){this.trackBottomIfRequired();}.bind(this),500);};k.prototype.$MessengerFlexScrollableArea6=function(){if(this.$MessengerFlexScrollableArea1)clearInterval(this.$MessengerFlexScrollableArea1);};k.prototype.scrollToPosition=function(l,m,n){this.refs.scrollable&&this.refs.scrollable.scrollToPosition(l,m,n);};k.propTypes={flexChildren:j.node,footerChildren:j.node,onMount:j.func,onScroll:j.func,shouldStickToBottom:j.bool,tabIndex:j.number,useScrollProtection:j.bool};f.exports=k;}),null);
__d('messengerFlexScrollableAreaReact',['reasonReact','bs_js_null_undefined','MessengerFlexScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j){return c('reasonReact').wrapJsForReason(c('MessengerFlexScrollableArea.react'),{onScroll:c('bs_js_null_undefined').from_opt(i)},j);}g.make=h;}),null);
__d('messengerChatOnOffToggleReact',['bs_js_boolean','reasonReact','bs_js_null_undefined','MessengerChatOnOffToggle.react'],(function a(b,c,d,e,f,g){'use strict';function h(i,j,k){return c('reasonReact').wrapJsForReason(c('MessengerChatOnOffToggle.react'),{isUserAvailable:c('bs_js_boolean').to_js_boolean(i),onAvailabilityChange:c('bs_js_null_undefined').from_opt(j)},k);}g.make=h;}),null);
__d('messengerViewerCardReact',['cx','bs_curry','React','reasonReact','joinClasses','imageBlockReact','messengerContactImageReact','messengerChatOnOffToggleReact'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('reasonReact').statelessComponent("MessengerViewerCardReact");function j(l,m,n,o,p){var q=l?l[0]:"",r=i.slice();r[9]=function(){if(o){var s=o[0];return c('reasonReact').element(0,0,c('imageBlockReact').make([c('joinClasses')(q,"_1u5d")],0,0,["medium"],[c('reasonReact').element(0,0,c('bs_curry')._6(c('messengerContactImageReact').StraightJSComponent[0],["_1u5h"],0,[1],34,[s.image_src],[])),c('React').createElement("div",{className:"_1u5i"},c('React').createElement("div",{className:"_364g"},s.name)),c('reasonReact').element(0,0,c('messengerChatOnOffToggleReact').make(m,n,[]))]));}else return c('React').createElement("div",undefined);};return r;}var k=34;g.imageSize=k;g.component=i;g.make=j;}),null);
__d('messengerActiveUsersListReact',['cx','fbt','bs_list','bs_array','bs_block','bs_curry','React','utilsRe','MercuryIDs','bs_pervasives','reasonReact','bs_js_primitive','MercuryThreads','PresencePrivacy','MessengerActions','bs_js_null_undefined','MercuryParticipants','PresenceOrderedList','PresenceStatusStore','AvailableListConstants','MeasurePeopleTypedLogger','MessengerContactAdapters','messengerViewerCardReact','messengerContactListRowReact','messengerFlexScrollableAreaReact'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=c('MercuryThreads').get();function k(v,w){var x=w[4],y=w[2];c('PresenceOrderedList').getSorted(200,function(z){var aa=c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(x)),ba=c('bs_js_primitive').null_undefined_to_opt(aa),ca=c('PresenceOrderedList').getAvailableSorted(z),da=z.filter(function(fa){return +c('PresencePrivacy').allows(fa);}),ea=c('utilsRe').listFilterMap(function(fa){return c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(fa));},c('bs_list').map(function(fa){return c('MercuryIDs').getParticipantIDFromUserID(fa);},c('bs_list').filter(function(fa){return +(c('PresenceStatusStore').get(fa)===c('AvailableListConstants').ACTIVE);})(c('bs_array').to_list(c('bs_curry')._1(c('bs_array').concat,[da,[ca,0]])))));return c('bs_curry')._2(y,function(fa,ga){var ha=ga[3];return c('bs_block').__(0,[[ea,+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),ba,ha[3],ha[4],ha[5]]]);},0);});return 0;}function l(v){var w=v[3];new (c('MeasurePeopleTypedLogger'))().log();var x=c('PresencePrivacy').subscribe("privacy-user-presence-changed",c('bs_curry')._1(v[1],k)),y=c('MercuryParticipants').addListener("change",function(aa,ba){return c('bs_curry')._2(v[1],k,0);}),z=c('PresenceStatusStore').addListener(c('bs_curry')._1(v[1],k));k(0,v);return c('bs_block').__(1,[[w[0],w[1],w[2],[y],[z],[x]]]);}function m(v){var w=v[3],x=w[3];if(x)x[0].remove();var y=w[4];if(y)y[0].remove();var z=w[5];if(z){c('PresencePrivacy').unsubscribe(z[0]);return 0;}else return 0;}function n(v){var w=+v;c('PresencePrivacy').setVisibility(w!==0?c('PresencePrivacy').ONLINE:c('PresencePrivacy').OFFLINE);return 0;}function o(v,w){var x=v.fbid;if(c('bs_js_primitive').is_nil_undef(x)){return 0;}else{j.getThreadMeta(c('MercuryIDs').getThreadIDFromUserID(x),function(y){c('MessengerActions').selectThread(y.thread_id,undefined);return 0;});return 0;}}var p=c('reasonReact').statefulComponentWithRetainedProps("MessengerActiveUsersListReact"),q=c('messengerContactListRowReact').createMake(0),r=q[1];function s(v,w,x){return [p[0],p[1],p[2],p[3],l,p[5],m,p[7],p[8],function(y){var z=y[3],aa=c('MercuryIDs').getUserIDFromThreadID(c('bs_js_null_undefined').from_opt(v)),ba=!c('bs_js_primitive').is_nil_undef(aa)&&aa!==""?[aa]:0,ca=z[1],da=ca!==0?c('React').createElement("div",undefined,c('React').createElement("div",{className:"_225b"},i._("Active Contacts ({number_of_contacts})",[i.param("number_of_contacts",c('bs_pervasives').string_of_int(c('bs_list').length(z[0])))])),c('React').createElement("ul",undefined,c('bs_array').of_list(c('bs_list').map(function(ea){var fa=ea.fbid,ga=!c('bs_js_primitive').is_nil_undef(fa)&&ba?+(fa===ba[0]):0;return c('reasonReact').element([ea.id],0,c('bs_curry').app(r,[function(ha){return c('MessengerContactAdapters').fromMercuryParticipant(ha);},ea,0,o,0,0,0,0,0,0,0,[ga],0,0,0,0,0,[1],0,w,[]]));},z[0])))):null;return c('reasonReact').element(0,0,c('messengerFlexScrollableAreaReact').make(0,[c('reasonReact').element(0,0,c('messengerViewerCardReact').make(0,z[1],[n],z[2],[])),da]));},function(){return [0,+(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE),c('bs_js_primitive').null_undefined_to_opt(c('MercuryParticipants').getOrFetch(c('MercuryIDs').getParticipantIDFromUserID(w))),0,0,0];},p[11],w];}var t=c('reasonReact').wrapReasonForJs(p,function(v){return s(c('bs_js_primitive').null_undefined_to_opt(v.activeThreadID),v.viewer,[]);}),u=200;g.numTopUsers=u;g.mercuryThreadsRe=j;g.updateHelper=k;g.didMount=l;g.willUnmount=m;g.handleChangeAvailability=n;g.handleSelect=o;g.component=p;g.listRowReactForMercuryParticipantMake=r;g.make=s;g.jsComponent=t;}),null);
__d('MessengerPeopleList.react',['messengerActiveUsersListReact','React'],(function a(b,c,d,e,f,g){'use strict';var h=c('messengerActiveUsersListReact').jsComponent,i=function j(k){return c('React').createElement(h,{activeThreadID:k.activeThreadID||undefined,viewer:k.viewer});};f.exports=i;}),null);