if (self.CavalryLogger) { CavalryLogger.start_js(["WB65Q"]); }

__d("InstantGameContextType",[],(function a(b,c,d,e,f,g){f.exports={THREAD:"THREAD",GROUP:"GROUP",STORY:"STORY",MATCH:"MATCH",SOLO:"SOLO"};}),null);
__d("MercuryTypeaheadConstants",[],(function a(b,c,d,e,f,g){f.exports={COMPOSER_FRIENDS_MAX:4,COMPOSER_FB4C_MAX:4,COMPOSER_NON_FRIENDS_MAX:2,COMPOSER_MESSENGER_ONLY_CONTACT_MAX:4,COMPOSER_SHOW_MORE_LIMIT:2,COMPOSER_THREADS_INITIAL_LIMIT:2,COMPOSER_CHATTAB_MAX:5,COMPOSER_PAGES_MAX:5,COMPOSER_WM_MAX:19,USER_TYPE:"user",PAGE_TYPE:"page",THREAD_TYPE:"thread",HEADER_TYPE:"header",SEARCH_TYPE:"search",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game",WORKPLACE_BOT_CATEGORY_TYPE:"WORKPLACE_BOT",VALID_EMAIL:"^([A-Z0-9._\u0025+-]+\u0040((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*)|([A-Z0-9._\u0025+-]+[A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*))\u0040(?:facebook\\.com))$"};}),null);
__d("MessengerApprovalModeTypes",[],(function a(b,c,d,e,f,g){f.exports={OPEN:0,APPROVALS:1};}),null);
__d("MessengerJoinableModeType",[],(function a(b,c,d,e,f,g){f.exports={PRIVATE:0,JOINABLE:1};}),null);
__d("MessengerParticipantAddModeTypes",[],(function a(b,c,d,e,f,g){f.exports={ADD:"ADD",INVITE:"INVITE",ADD_INVITE:"ADD_INVITE"};}),null);
__d("QuicksilverSources",[],(function a(b,c,d,e,f,g){f.exports={FB_CANVAS:"fb_canvas",FB_FEED:"fb_feed",FB_FEED_EGO:"fb_ego_igyml",FB_FEED_SCREENSHOT:"fb_feed_screenshot",FB_SCORE_PASSED_NOTIF:"fb_score_passed_notif",FB_SEARCH:"big_blue_search",FB_FEED_IGYML_QP:"fb_qp_igyml",FB_FEED_NEW_RELEASES_QP:"fb_qp_new_releases",FB_FEED_PLAYING_WITH_FRIENDS_QP:"fb_qp_playing_with_friends",FB_FEED_PLAYED_RECENTLY_QP:"fb_qp_played_recently",FB_GROUP_COMPOSER:"fb_group_composer",FB_GROUP_GAMES_TAB:"fb_group_games_tab",FB_GROUP_MALL:"fb_group_mall",FB_GROUP_MALL_EGO:"fb_group_mall_ego",FB_GROUP_MALL_SCREENSHOT:"fb_group_mall_screenshot",FB_GROUP_NEWS_FEED:"fb_group_news_feed",FB_GROUP_NEWSFEED_SCREENSHOT:"fb_group_newsfeed_screenshot",FB_GROUP_RHC_LEADERBOARD:"fb_group_rhc_leaderboard",FB_GROUP_SCORE_PASSED_NOTIF:"fb_group_score_passed_notif",GAMEROOM_FEED_POST:"gameroom_feed_post",MESSENGER_ADMIN_MESSAGE:"admin_message",MESSENGER_CALL_TO_ACTION:"call_to_action",MESSENGER_COMPOSER:"composer",MESSENGER_GAME_EMOJI:"game_emoji",MESSENGER_GAME_SHARE:"game_share",MESSENGER_GAME_SCORE_SHARE:"game_score_share",MESSENGER_GAME_SEARCH:"search",MARKETPLACE:"marketplace",MOBILE_BOOKMARK:"mobile_bookmark",MSITE:"msite",EMBEDDED_PLAYER:"embedded_player",WWW_BOOKMARK:"www_bookmark",WWW_APP_CENTER_BROWSE:"www_app_center_browse",WWW_APP_CENTER_CHALLENGE:"www_app_center_challenge",WWW_APP_CENTER_MAIN:"www_app_center_main",WWW_LINK_SHARE:"www_link_share",UNKNOWN:"unknown"};}),null);
__d("TimeSpentRoomTypeEnum",[],(function a(b,c,d,e,f,g){f.exports={GROUP:"GROUP",EVENT:"EVENT"};}),null);
__d('AvailableListConstants',[],(function a(b,c,d,e,f,g){var h={ON_AVAILABILITY_CHANGED:'buddylist/availability-changed',ON_UPDATE_ERROR:'buddylist/update-error',ON_UPDATED:'buddylist/updated',ON_CHAT_NOTIFICATION_CHANGED:'chat-notification-changed',OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:'webStatus',FB_APP_STATUS:'fbAppStatus',MESSENGER_STATUS:'messengerStatus',OTHER_STATUS:'otherStatus',STATUS_ACTIVE:'active',STATUS_IDLE:'idle',STATUS_OFFLINE:'offline'};f.exports=h;}),null);
__d('PresencePrivacy',['Arbiter','AsyncRequest','ChannelConstants','CurrentUser','PresencePrivacyInitialData','JSLogger','PresenceUtil'],(function a(b,c,d,e,f,g){var h='/ajax/chat/privacy/settings.php',i='/ajax/chat/privacy/online_policy.php',j='/ajax/chat/privacy/visibility.php',k='friend_visibility',l='visibility',m='online_policy',n=babelHelpers['extends']({},c('PresencePrivacyInitialData').privacyData),o=c('PresencePrivacyInitialData').visibility,p=babelHelpers['extends']({},c('PresencePrivacyInitialData').privacyData),q=o,r=c('PresencePrivacyInitialData').onlinePolicy,s=r,t=[],u=false;function v(){return c('JSLogger').create('blackbird');}var w=Object.assign(new (c('Arbiter'))(),{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1});function x(ja){var ka;for(ka in ja){var la=ja[ka];if(ka==c('CurrentUser').getID()){v().error('set_viewer_visibility');throw new Error("Invalid to set current user's visibility");}switch(la){case w.WHITELISTED:case w.BLACKLISTED:case w.UNLISTED:break;default:v().error('set_invalid_friend_visibility',{id:ka,value:la});throw new Error("Invalid state: "+la);}}for(ka in ja)n[ka]=ja[ka];w.inform('privacy-changed');}function y(ja,ka){var la={};la[ja]=ka;x(la);}function z(ja){switch(ja){case w.ONLINE:case w.OFFLINE:break;default:v().error('set_invalid_visibility',{value:ja});throw new Error("Invalid visibility: "+ja);}o=ja;w.inform('privacy-changed');w.inform('privacy-user-presence-changed');}function aa(ja){switch(ja){case w.ONLINE_TO_WHITELIST:case w.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+ja);}r=ja;w.inform('privacy-user-presence-changed');w.inform('privacy-changed');}function ba(ja,ka){u=true;ja.send();}function ca(ja,ka){t.push({request:ja,data:ka});if(!u){var la=t.shift();ba(la.request,la.data);}}function da(ja,ka){var la=ja.type;if(la===k){w.inform('privacy-availability-changed');for(var ma in ja.settings)p[ma]=ja.settings[ma];}else{if(la===l){q=ja.visibility;}else if(la===m)s=ja.online_policy;w.inform('privacy-user-presence-response');}v().log('set_update_response',{data:ja,response:ka});}function ea(ja,ka){if(o!==q)z(q);if(r!==s)aa(s);Object.assign(n,p);w.inform('privacy-changed');t=[];v().log('set_error_response',{data:ja,response:ka});}function fa(ja){u=false;if(t.length>0){var ka=t.shift();ba(ka.request,ka.data);}}function ga(ja,ka){if(c('PresenceUtil')!=null){var la=ja.getData();la.window_id=c('PresenceUtil').getSessionID();ja.setData(la);}ja.setHandler(da.bind(this,ka)).setErrorHandler(ea.bind(this,ka)).setTransportErrorHandler(ea.bind(this,ka)).setFinallyHandler(fa.bind(this)).setAllowCrossPageTransition(true);return ja;}function ha(ja,ka,la){return ga(new (c('AsyncRequest'))(ja).setData(ka),la);}function ia(ja,ka){var la=ka.obj;if(la.viewer_id!=c('CurrentUser').getID()){v().error('invalid_viewer_for_channel_message',{type:ja,data:ka});throw new Error("Viewer got from the channel is not the real viewer");}if(la.window_id===c('PresenceUtil').getSessionID())return;var ma=la.data;if(la.event=='access_control_entry'){ma.target_ids.forEach(function(oa){y(oa,ma.setting);p[oa]=ma.setting;});}else{if(la.event=='visibility_update'){var na=!!ma.visibility?w.ONLINE:w.OFFLINE;z(na);q=na;}else if(la.event=='online_policy_update'){aa(ma.online_policy);s=ma.online_policy;}w.inform('privacy-user-presence-response');}v().log('channel_message_received',{data:ka.obj});}Object.assign(w,{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1,init:function ja(ka,la,ma){},setVisibility:function ja(ka){q=o;z(ka);var la={visibility:ka},ma={type:l,visibility:ka},na=ha(j,la,ma);ca(na,ma);v().log('set_visibility',{data:la});return ka;},getVisibility:function ja(){return o;},setOnlinePolicy:function ja(ka){s=r;aa(ka);var la={online_policy:ka},ma={type:m,online_policy:ka},na=ha(i,la,ma);ca(na,ma);v().log('set_online_policy',{data:la});return ka;},getOnlinePolicy:function ja(){return r;},getFriendVisibility:function ja(ka){return n[ka]||w.UNLISTED;},isUserOffline:function ja(){return this.getVisibility()===w.OFFLINE;},allows:function ja(ka){if(this.isUserOffline())return false;var la=this.getOnlinePolicy();return la===w.ONLINE_TO_WHITELIST?n[ka]==w.WHITELISTED:n[ka]!=w.BLACKLISTED;},setFriendsVisibility:function ja(ka,la){if(ka.length>0){var ma={};for(var na=0;na<ka.length;na++){var oa=ka[na];p[oa]=n[oa];ma[oa]=la;}x(ma);var pa=la;if(pa==w.UNLISTED)pa=p[ka[0]];var qa={users:ka,setting:la,setting_type:pa},ra={type:k,settings:ma},sa=ha(h,qa,ra);ca(sa,ra);v().log('set_friend_visibility',{data:qa});}return la;},setFriendVisibilityMap:function ja(ka,la){for(var ma in ka)p[ma]=n[ma];x(ka);var na={type:k,settings:ka};ca(ga(la,na),na);v().log('set_friend_visibility_from_map',{data:ka});},allow:function ja(ka){if(this.allows(ka)){v().error('allow_already_allowed');throw new Error("allow() should only be called for users that "+"are not already allowed");}if(this.getVisibility()===w.OFFLINE){v().error('allow_called_while_offline');throw new Error("allow() should only be called when the user is already online");}var la=this.getOnlinePolicy()===w.ONLINE_TO_WHITELIST?w.WHITELISTED:w.UNLISTED;return this.setFriendsVisibility([ka],la);},disallow:function ja(ka){if(!this.allows(ka)){v().error('disallow_already_disallowed');throw new Error("disallow() should only be called for users that "+"are not already disallowed");}if(this.getVisibility()===w.OFFLINE){v().error('disallow_called_while_offline');throw new Error("disallow() should only be called when the user is already online");}var la=this.getOnlinePolicy()===w.ONLINE_TO_BLACKLIST?w.BLACKLISTED:w.UNLISTED;return this.setFriendsVisibility([ka],la);},getBlacklist:function ja(){var ka=[];for(var la in n)if(n[la]===w.BLACKLISTED)ka.push(la);return ka;},getWhitelist:function ja(){var ka=[];for(var la in n)if(n[la]===w.WHITELISTED)ka.push(la);return ka;},getMapForTest:function ja(){return n;},setMapForTest:function ja(ka){n=ka;}});w.inform('privacy-changed');w.inform('privacy-user-presence-changed',c('Arbiter').BEHAVIOR_STATE);v().log('initialized',{visibility:o,policy:r});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(ja,ka){ka.presence_privacy={initial:c('PresencePrivacyInitialData').privacyData,current:n};});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('privacy_changed'),ia.bind(this));c('Arbiter').subscribe(c('ChannelConstants').ON_CONFIG,function(ja,ka){var la=ka.getConfig('visibility',null);if(la!==null&&typeof la!=='undefined'){var ma=la?w.ONLINE:w.OFFLINE;z(ma);v().log('config_visibility',{vis:ma});}}.bind(this));f.exports=w;}),null);
__d('ChatVisibility',['Arbiter','JSLogger','PresencePrivacy'],(function a(b,c,d,e,f,g){var h={isOnline:function i(){return c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE;},hasBlackbirdEnabled:function i(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends();},isVisibleToMostFriends:function i(){return c('PresencePrivacy').getOnlinePolicy()===c('PresencePrivacy').ONLINE_TO_BLACKLIST&&c('PresencePrivacy').getBlacklist().length>0;},isVisibleToSomeFriends:function i(){return c('PresencePrivacy').getOnlinePolicy()===c('PresencePrivacy').ONLINE_TO_WHITELIST&&c('PresencePrivacy').getWhitelist().length>0;},goOnline:function i(j){if(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').OFFLINE){c('JSLogger').create('blackbird').log('chat_go_online');c('PresencePrivacy').setVisibility(c('PresencePrivacy').ONLINE);c('Arbiter').inform('chat-visibility/go-online');}j&&j();},goOffline:function i(j){if(c('PresencePrivacy').getVisibility()===c('PresencePrivacy').ONLINE){c('JSLogger').create('blackbird').log('chat_go_offline');c('PresencePrivacy').setVisibility(c('PresencePrivacy').OFFLINE);c('Arbiter').inform('chat-visibility/go-offline');}j&&j();},toggleVisibility:function i(){if(h.isOnline()){h.goOffline();}else h.goOnline();}};f.exports=h;}),null);
__d('LastActiveTimes',['fbt','ServerTime'],(function a(b,c,d,e,f,g,h){var i={};function j(n){if(!n||n<0)return null;var o=c('ServerTime').get()/1000-n,p=Math.floor(o/60),q=Math.floor(p/60),r=Math.floor(q/24);if(p<=1){return h._({"*":"{count}m"},[h.param('count',1,[0])]);}else if(p<60){return h._({"*":"{count}m"},[h.param('count',p,[0])]);}else if(q<24){return h._({"*":"{count}h"},[h.param('count',q,[0])]);}else if(r<3){return h._({"*":"{count}d"},[h.param('count',r,[0])]);}else return null;}function k(n,o){if(!(n in i)||i[n]<o)i[n]=o;}function l(n){if(n in i){return i[n];}else return 0;}var m={update:function n(o){for(var p in o)k(p,o[p]);},getShortDisplay:function n(o){return j(l(o));},get:function n(o){return l(o);},getDebugData:function n(){return i;}};f.exports=m;}),null);
__d('PresenceStatus',['ArbiterMixin','AvailableListConstants','BanzaiODS','Bootloader','ChatConfig','ChatVisibility','CurrentUser','FBID','LastActiveTimes','PresencePrivacy','ServerTime','createObjectFrom','debounceAcrossTransitions'],(function a(b,c,d,e,f,g){c('BanzaiODS').setEntitySample('presence',.0001);var h={},i={},j={},k={},l=Object.assign({},c('ArbiterMixin')),m=c('debounceAcrossTransitions')(function(){return l.inform('change');},0);function n(o){var p,q=parseInt(o.topic.match(/\d+$/),10),r=parseInt(JSON.parse(o.payload).lat,10),s=Date.now()-r*1000,t=c('ChatConfig').get('active_cutoff')*1000-s;c('LastActiveTimes').update((p={},p[q]=r,p));l.checkPresence(q);if(l.get(q)===c('AvailableListConstants').ACTIVE){clearTimeout(k[q].timeout);k[q].timeout=setTimeout(function(){l.checkPresence(q);},t);}}Object.assign(l,{resetPresenceData:function o(){h={};i={};},reset:function o(){l.resetPresenceData();j={};},get:function o(p){if(p==c('CurrentUser').getID())return c('ChatVisibility').isOnline()?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE;if(!c('FBID').isUser(p)&&!k[p]){c('BanzaiODS').bumpEntityKey('presence','page_subscribe');k[p]={};if(c('ChatConfig').get('presence_page_green_dot_sub'))c('Bootloader').loadModules(["RTISubscriptionManager"],function(r){r.subscribe('presence_push/fb/'+p,n);},'PresenceStatus');}var q=c('AvailableListConstants').OFFLINE;if(p in h)q=h[p];if(!c('PresencePrivacy').allows(p))q=c('AvailableListConstants').OFFLINE;return q;},getCapabilities:function o(p){var q=i[p];return q?q:0;},isPlayingCanvasGameUser:function o(p){return !!j[p];},getGroup:function o(p){return p.some(function(q){if(q==c('CurrentUser').getID())return false;return l.get(q)===c('AvailableListConstants').ACTIVE;})?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE;},set:function o(p,q,r,s,t,u){if(p==c('CurrentUser').getID())return false;var v;if(q!==null&&q!==undefined){q=q==c('AvailableListConstants').ACTIVE?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE;var w=l.get(p);v=w!=q;if((v||q==c('AvailableListConstants').ACTIVE)&&c('FBID').isUser(p)){var x;c('LastActiveTimes').update((x={},x[p]=c('ServerTime').get()/1000,x));}h[p]=q;}var y=false;if(t!==undefined&&t!==null){y=l.getCapabilities(p)!=t;i[p]=t;}var z=v||y;if(z&&!u)m();return z;},setPlayingCanvasGameFriends:function o(p){j=c('createObjectFrom')(p);},getOnlineIDs:function o(){var p,q=[];for(p in h)if(l.get(p)===c('AvailableListConstants').ACTIVE)q.push(p);return q;},getAllIDs:function o(){return Object.keys(h);},getOnlineCount:function o(){return l.getOnlineIDs().length;},getPresenceStats:function o(){var p=0,q=0,r=0;for(var s in h){p+=1;switch(l.get(s)){case c('AvailableListConstants').OFFLINE:q+=1;break;case c('AvailableListConstants').ACTIVE:r+=1;break;default:break;}}return {total:p,offline:q,active:r};},getAllDebugInfo:function o(){var p={};for(var q in h)p[q]={p:h[q],vc:i[q]};return p;},setMultiChatproxy:function o(p){var q={};for(var r in p){if(p[r].lat)q[r]=p[r].lat;var s=p[r].p;l.set(r,s,false,'chatproxy',p[r].vc,true);}c('LastActiveTimes').update(q);m();},setMultiActive:function o(p,q){var r=false;p.forEach(function(s){l.set(s,c('AvailableListConstants').ACTIVE,false,q,null,true)&&(r=true);});if(r)m();},checkPresence:function o(p){var q=false,r=Math.ceil(Date.now()/1000)-c('LastActiveTimes').get(p);l.set(p,r<c('ChatConfig').get('active_cutoff')?c('AvailableListConstants').ACTIVE:c('AvailableListConstants').OFFLINE,false,'pylon',null,true)&&(q=true);if(q)m();}});f.exports=l;}),null);
__d('MessengerDispatcher',['Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){'use strict';f.exports=new (c('Dispatcher_DEPRECATED'))();}),null);
__d('MessengerActions',['invariant','MercuryIDs','MessengerDispatcher','MessengerURISerializer','MercuryTypeaheadConstants','MessengerView','URI','goURI','keyMirror'],(function a(b,c,d,e,f,g,h){'use strict';var i=c('keyMirror')({CANCEL_FILE_UPLOAD:null,EMPTY_FILES:null,LINK_PREVIEW:null,LOADED_SHARE_DATA:null,LOADING_SHARE_DATA:null,REMOVE_SHARE_PREVIEW:null,PREPARE_FILES_FOR_SEND:null,REPLACE_STATE:null,SELECT_THREAD:null,UPDATE_MDOT_ME:null,UPDATE_THREAD_TAG:null,UPLOAD_FILE_FAILED:null,UPLOADED_FILE:null}),j={Types:i,changeDetailView:function m(n){l(function(o){if(o.detailView!==n)return {detailView:n};return null;});},changeMasterView:function m(n){l(function(o){if(o.masterView!==n){var p={masterView:n};if(o.masterView===c('MessengerView').MASTER.SEARCH)p.query=undefined;return p;}return null;});},selectThread:function m(n,o){if(o===c('MercuryTypeaheadConstants').MEETING_ROOM_PAGE_TYPE){!!n||h(0);var p=c('MercuryIDs').getUserIDFromThreadID(n);!!p||h(0);var q=new (c('URI'))(),r=q.getQualifiedURI().getSubdomain();q.setDomain('facebook.com').setSubdomain(r).setPath('/'+p).setProtocol('https');window.open(q,'_blank');return;}c('MessengerDispatcher').dispatch({type:i.SELECT_THREAD,threadID:n});l(function(s){if(s.activeThreadID!==n)return {activeThreadID:n,detailView:c('MessengerView').DETAIL.THREAD,mid:null};return null;});},changeState:function m(n){c('MessengerDispatcher').dispatch({type:i.REPLACE_STATE,nextState:n});},changeMDotMeReferral:function m(){var n=arguments.length<=0||arguments[0]===undefined?null:arguments[0],o=arguments.length<=1||arguments[1]===undefined?null:arguments[1];c('MessengerDispatcher').dispatch({type:j.Types.UPDATE_MDOT_ME,refCode:n,refThreadID:o});},changeThreadTag:function m(){var n=arguments.length<=0||arguments[0]===undefined?null:arguments[0],o=arguments.length<=1||arguments[1]===undefined?null:arguments[1];c('MessengerDispatcher').dispatch({type:j.Types.UPDATE_THREAD_TAG,messagingTags:n,threadID:o});},changeFolder:function m(n){l(function(o){if(o.folder!==n)return {folder:n};return null;});},changeFilter:function m(n){l(function(o){if(o.filter!==n)return {filter:n};return null;});},changeQuery:function m(n){l(function(o){if(o.query!==n)return {query:n};return null;});},changeQueryAll:function m(n){l(function(o){if(o.queryAll!==n)return {query:n,masterView:c('MessengerView').MASTER.SEARCH};return null;});},changeMid:function m(n){l(function(o){if(o.mid!==n)return {mid:n};return null;});},prepareFilesForSend:function m(n,o){if(!n)return;c('MessengerDispatcher').dispatch({type:j.Types.PREPARE_FILES_FOR_SEND,threadID:n,files:o});},uploadedFile:function m(n,o,p){if(!n)return;c('MessengerDispatcher').dispatch({type:j.Types.UPLOADED_FILE,threadID:n,uploadID:o,payload:p});},cancelFileUpload:function m(n,o){if(!n)return;c('MessengerDispatcher').dispatch({type:j.Types.CANCEL_FILE_UPLOAD,threadID:n,uploadID:o});},uploadFileFailed:function m(n,o){if(!n)return;c('MessengerDispatcher').dispatch({type:j.Types.UPLOAD_FILE_FAILED,threadID:n,uploadID:o});},cleanFiles:function m(n){if(!n)return;c('MessengerDispatcher').dispatch({type:j.Types.EMPTY_FILES,threadID:n});},loadingPreview:function m(n,o){c('MessengerDispatcher').dispatch({type:j.Types.LINK_PREVIEW,threadID:n,match:o});},loadingShareData:function m(n){c('MessengerDispatcher').dispatch({type:j.Types.LOADING_SHARE_DATA,threadID:n});},loadedShareData:function m(n,o){c('MessengerDispatcher').dispatch({type:j.Types.LOADED_SHARE_DATA,threadID:n,attachmentData:o});},removeSharePreview:function m(n){c('MessengerDispatcher').dispatch({type:j.Types.REMOVE_SHARE_PREVIEW,threadID:n});}};function k(m,n){return m.detailView==null;}function l(m){var n=c('MessengerURISerializer').deserialize(new (c('URI'))(window.location.href)),o=m(n),p=k(n,o);if(o)c('goURI')(c('MessengerURISerializer').serialize(Object.assign(n,o)),false,p);}f.exports=j;}),null);
__d('MessageThreadAssociatedObjectUtils',['TimeSpentRoomTypeEnum'],(function a(b,c,d,e,f,g){'use strict';var h={shouldRender:function i(j){return j&&j.room_type===c('TimeSpentRoomTypeEnum').GROUP&&!j.is_workplace_community;},isLinkedToGroupChat:function i(j){return j&&j.room_type===c('TimeSpentRoomTypeEnum').GROUP&&!j.is_workplace_community;}};f.exports=h;}),null);
__d('MessengerAdminGroupUtils',['fbt','MercuryConfig','MercuryIDs','MessageThreadAssociatedObjectUtils','MessengerApprovalModeTypes','MessengerJoinableModeType','MessengerParticipantAddModeTypes','WorkModeConfig'],(function a(b,c,d,e,f,g,h){'use strict';var i={isJoinableAndOpenThread:function j(k){return this.isJoinableThread(k)&&this.isApprovalOpenThread(k);},isJoinableAndApprovalRequiredThread:function j(k){return !!(this.isJoinableThread(k)&&k&&k.approval_mode===c('MessengerApprovalModeTypes').APPROVALS);},shouldAddToApprovalQueue:function j(k,l){return !!(this.isJoinableAndApprovalRequiredThread(k)&&k&&!i.isViewerAdmin(k.admin_ids,l));},isJoinableThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.is_thread_queue_enabled===true&&k.joinable_mode&&k.joinable_mode.mode===c('MessengerJoinableModeType').JOINABLE);},isGroupChat:function j(k){return !!(k&&c('MessageThreadAssociatedObjectUtils').isLinkedToGroupChat(k.associated_object));},shouldInvite:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.participant_add_mode===c('MessengerParticipantAddModeTypes').INVITE);},isApprovalOpenThread:function j(k){return !!(c('MercuryConfig').WWWJoinableMasterGK&&k&&k.approval_mode===c('MessengerApprovalModeTypes').OPEN);},isOwner:function j(k,l){return k&&this.isJoinableThread(l);},canSeeGroupOptions:function j(k,l,m){var n=c('WorkModeConfig').is_work_user;return !n&&this.isJoinableThread(l);},canMakeOthersAdmins:function j(k,l,m){return this.isOwner(k,m)&&!l;},canMakeSelfAdmin:function j(k,l){return this.isJoinableThread(l)&&l.admin_ids.length===0&&k;},canRemoveAdmin:function j(k,l,m){return this.isOwner(k,m)&&l;},canRemoveFromGroup:function j(k,l){return this.isOwner(k,l)||!this.isJoinableThread(l);},showJoinableLink:function j(k){var l=!!(k&&k.joinable_mode&&k.joinable_mode.link),m=i.isJoinableThread(k);return m&&l;},showJoinableApprovalToggle:function j(k,l){if(k.associated_object&&!k.associated_object.approval_mode_toggleable)return false;var m=i.isViewerAdmin(k.admin_ids,l);return i.isOwner(m,k);},showApprovalQueue:function j(k,l){var m=i.isViewerAdmin(k.admin_ids,l),n=i.isOwner(m,k),o=0;if(k&&k.approval_queue_ids&&k.approval_queue_ids.length)o=k.approval_queue_ids.length;var p=i.isJoinableAndApprovalRequiredThread(k);return p&&n&&o>0;},showParticipantsModal:function j(k,l,m){return this.isJoinableThread(m)&&!k&&!l;},canUpdateThreadCustomization:function j(k,l){var m=i.isJoinableThread(k),n=i.isViewerAdmin(k.admin_ids,l);return k.is_subscribed&&(!m||n);},isViewerAdmin:function j(k,l){return this.isAdmin(k,c('MercuryIDs').getParticipantIDFromUserID(l));},isAdmin:function j(k,l){return k!==null&&k!==undefined&&k.indexOf(l)!==-1;},getLeaveGroupBodyText:function j(k,l){return this.isOwner(k,l)?h._("Leaving this group will remove you as an owner and allow other members to manage the group. You will no longer be able to send or receive new messages."):h._("You will stop receiving messages from this conversation and people will see that you left.");},getLeaveGroupTitleText:function j(k,l){return this.isOwner(k,l)?h._("Leave this conversation?"):h._("Leave Conversation?");},getLeaveGroupButtonText:function j(k,l){return this.isOwner(k,l)?h._("Leave converstaion"):h._("Leave");},getMakeOwnerBodyText:function j(k,l){return k?h._("As a group owner, you will be able to manage group ownership and remove members from the conversation. Only owners will be able to add other owners."):h._("As a group owner, \"{owner's name}\" will be able to manage group ownership and remove members from the conversation. They will be able to remove ownership from other owners.",[h.param('owner\'s name',l)]);},getMakeOwnerTitleText:function j(k){return k?h._("Become group owner?"):h._("Add group owner?");},getMakeOwnerButtonText:function j(k){return k?h._("Become owner"):h._("Make owner");},getRemoveOwnerBodyText:function j(k,l,m){var n=void 0;if(k&&l){n=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group. Any other member will be able to own the group.");}else if(k&&!l){n=h._("You will no longer manage group ownership and remove members from this conversation. You will still be a participant in the group.");}else n=h._("\"{owner's name}\" will no longer manage group ownership and remove members from the conversation. They will still be a participant in the group.",[h.param('owner\'s name',m)]);return n;}};f.exports=i;}),null);
__d('MessengerStore',['MessengerDispatcher','mixInEventEmitter'],(function a(b,c,d,e,f,g){'use strict';function h(){this.$MessengerStore1=c('MessengerDispatcher').register(this.__onDispatch.bind(this));}h.prototype.getDispatchToken=function(){return this.$MessengerStore1;};h.prototype.emitChange=function(){this.emit('change');};h.prototype.destroy=function(){c('MessengerDispatcher').unregister(this.$MessengerStore1);};c('mixInEventEmitter')(h,{change:true});f.exports=h;}),null);
__d('FBRTCSupport',['ChannelConstants','RTCConfig','UserAgent'],(function a(b,c,d,e,f,g){var h={isSendWebrtcSupported:function i(){return c('RTCConfig').SendNewVCGK;},isReceiveWebrtcSupported:function i(){return c('RTCConfig').ReceiveNewVCGK;},isVideoInteropSupported:function i(){return c('RTCConfig').VideoInteropGK;},isVideoCallBlockingSupported:function i(){return c('RTCConfig').VideoCallBlockingGK;},isWebrtcSupported:function i(){return c('UserAgent').isBrowser('Chrome >= 28')||c('UserAgent').isBrowser('Firefox >= 25')||c('RTCConfig').RtcUseWebRTCForEdge&&c('UserAgent').isBrowser('Edge >= 15.15042')||c('UserAgent').isBrowser('Opera >= 20');},isGroupCallWebtrcSupported:function i(){return c('UserAgent').isBrowser('Chrome >= 28')||c('UserAgent').isBrowser('Opera >= 20');},isCollabSupported:function i(){return h.isWebrtcSupported()&&(c('RTCConfig').CollabWhitelistedBrowserGK||c('UserAgent').isBrowser('Chrome >= 48'));},isWirelessScreenSharingSupported:function i(){return c('RTCConfig').CollabWirelessScreenSharingGK&&c('UserAgent').isBrowser('Chrome >= 48');},isOSSupported:function i(){return !c('UserAgent').isPlatform('Android')&&!c('UserAgent').isPlatform('iOS');},getCapabilities:function i(){var j=0;if(this.isReceiveWebrtcSupported())j=c('ChannelConstants').CAPABILITY_VOIP_INTEROP;return j;}};f.exports=h;}),null);
__d('getPageIDFromThreadID',['FBID','MercuryIDs'],(function a(b,c,d,e,f,g){'use strict';function h(i){var j=c('MercuryIDs').getUserIDFromThreadID(i);if(!j||c('FBID').isUser(j))return null;return j;}f.exports=h;}),null);